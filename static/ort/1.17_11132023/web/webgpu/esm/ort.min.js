/*!
 * ONNX Runtime Web v1.17.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
var Ad=Object.create;var Pn=Object.defineProperty;var Pd=Object.getOwnPropertyDescriptor;var Ed=Object.getOwnPropertyNames;var Dd=Object.getPrototypeOf,Ld=Object.prototype.hasOwnProperty;var D=(a,t)=>()=>(a&&(t=a(a=0)),t);var be=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports),Er=(a,t)=>{for(var n in t)Pn(a,n,{get:t[n],enumerable:!0})},Ka=(a,t,n,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Ed(t))!Ld.call(a,r)&&r!==n&&Pn(a,r,{get:()=>t[r],enumerable:!(e=Pd(t,r))||e.enumerable});return a};var Dr=(a,t,n)=>(n=a!=null?Ad(Dd(a)):{},Ka(t||!a||!a.__esModule?Pn(n,"default",{value:a,enumerable:!0}):n,a)),ir=a=>Ka(Pn({},"__esModule",{value:!0}),a);var En,ar,Yt,Dn,Ln=D(()=>{En=new Map,ar=[],Yt=(a,t,n)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){let e=En.get(a);if(e===void 0)En.set(a,{backend:t,priority:n});else{if(e.priority>n)return;if(e.priority===n&&e.backend!==t)throw new Error(`cannot register backend "${a}" using priority ${n}`)}if(n>=0){let r=ar.indexOf(a);r!==-1&&ar.splice(r,1);for(let o=0;o<ar.length;o++)if(En.get(ar[o]).priority<=n){ar.splice(o,0,a);return}ar.push(a)}return}throw new TypeError("not a valid backend")},Dn=async a=>{let t=a.length===0?ar:a,n=[];for(let e of t){let r=En.get(e);if(r){if(r.initialized)return r.backend;if(r.aborted)continue;let o=!!r.initPromise;try{return o||(r.initPromise=r.backend.init()),await r.initPromise,r.initialized=!0,r.backend}catch(s){o||n.push({name:e,err:s}),r.aborted=!0}finally{delete r.initPromise}}}throw new Error(`no available backend found. ERR: ${n.map(e=>`[${e.name}] ${e.err}`).join(", ")}`)}});var Ja=D(()=>{Ln()});var Za,Qa=D(()=>{Za="1.17.0"});var es,Wo,ts=D(()=>{Qa();es="warning",Wo={wasm:{},webgl:{},webgpu:{},versions:{common:Za},set logLevel(a){if(a!==void 0){if(typeof a!="string"||["verbose","info","warning","error","fatal"].indexOf(a)===-1)throw new Error(`Unsupported logging level: ${a}`);es=a}},get logLevel(){return es}};Object.defineProperty(Wo,"logLevel",{enumerable:!0})});var te,rs=D(()=>{ts();te=Wo});var ns,os,is=D(()=>{ns=(a,t)=>{let n=document.createElement("canvas");n.width=a.dims[3],n.height=a.dims[2];let e=n.getContext("2d");if(e!=null){let r,o;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(r=a.dims[2],o=a.dims[3]):(r=a.dims[3],o=a.dims[2]);let s=t?.format!==void 0?t.format:"RGB",i=t?.norm,u,l;i===void 0||i.mean===void 0?u=[255,255,255,255]:typeof i.mean=="number"?u=[i.mean,i.mean,i.mean,i.mean]:(u=[i.mean[0],i.mean[1],i.mean[2],0],i.mean[3]!==void 0&&(u[3]=i.mean[3])),i===void 0||i.bias===void 0?l=[0,0,0,0]:typeof i.bias=="number"?l=[i.bias,i.bias,i.bias,i.bias]:(l=[i.bias[0],i.bias[1],i.bias[2],0],i.bias[3]!==void 0&&(l[3]=i.bias[3]));let f=o*r,p=0,b=f,x=f*2,I=-1;s==="RGBA"?(p=0,b=f,x=f*2,I=f*3):s==="RGB"?(p=0,b=f,x=f*2):s==="RBG"&&(p=0,x=f,b=f*2);for(let v=0;v<o;v++)for(let S=0;S<r;S++){let L=(a.data[p++]-l[0])*u[0],B=(a.data[b++]-l[1])*u[1],M=(a.data[x++]-l[2])*u[2],Q=I===-1?255:(a.data[I++]-l[3])*u[3];e.fillStyle="rgba("+L+","+B+","+M+","+Q+")",e.fillRect(S,v,1,1)}return n.toDataURL()}else throw new Error("Can not access image data")},os=(a,t)=>{let n=document.createElement("canvas").getContext("2d"),e;if(n!=null){let r,o,s;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(r=a.dims[2],o=a.dims[1],s=a.dims[3]):(r=a.dims[3],o=a.dims[2],s=a.dims[1]);let i=t!==void 0&&t.format!==void 0?t.format:"RGB",u=t?.norm,l,f;u===void 0||u.mean===void 0?l=[255,255,255,255]:typeof u.mean=="number"?l=[u.mean,u.mean,u.mean,u.mean]:(l=[u.mean[0],u.mean[1],u.mean[2],255],u.mean[3]!==void 0&&(l[3]=u.mean[3])),u===void 0||u.bias===void 0?f=[0,0,0,0]:typeof u.bias=="number"?f=[u.bias,u.bias,u.bias,u.bias]:(f=[u.bias[0],u.bias[1],u.bias[2],0],u.bias[3]!==void 0&&(f[3]=u.bias[3]));let p=o*r;if(t!==void 0&&(t.format!==void 0&&s===4&&t.format!=="RGBA"||s===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let b=4,x=0,I=1,v=2,S=3,L=0,B=p,M=p*2,Q=-1;i==="RGBA"?(L=0,B=p,M=p*2,Q=p*3):i==="RGB"?(L=0,B=p,M=p*2):i==="RBG"&&(L=0,M=p,B=p*2),e=n.createImageData(r,o);for(let N=0;N<o*r;x+=b,I+=b,v+=b,S+=b,N++)e.data[x]=(a.data[L++]-f[0])*l[0],e.data[I]=(a.data[B++]-f[1])*l[1],e.data[v]=(a.data[M++]-f[2])*l[2],e.data[S]=Q===-1?255:(a.data[Q++]-f[3])*l[3]}else throw new Error("Can not access image data");return e}});var Vo,as,ss,us,ls,fs=D(()=>{Fn();Vo=(a,t)=>{if(a===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:n,width:e}=t,r=t.norm??{mean:255,bias:0},o,s;typeof r.mean=="number"?o=[r.mean,r.mean,r.mean,r.mean]:o=[r.mean[0],r.mean[1],r.mean[2],r.mean[3]??255],typeof r.bias=="number"?s=[r.bias,r.bias,r.bias,r.bias]:s=[r.bias[0],r.bias[1],r.bias[2],r.bias[3]??0];let i=t.format!==void 0?t.format:"RGBA",u=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",l=n*e,f=u==="RGBA"?new Float32Array(l*4):new Float32Array(l*3),p=4,b=0,x=1,I=2,v=3,S=0,L=l,B=l*2,M=-1;i==="RGB"&&(p=3,b=0,x=1,I=2,v=-1),u==="RGBA"?M=l*3:u==="RBG"?(S=0,B=l,L=l*2):u==="BGR"&&(B=0,L=l,S=l*2);for(let N=0;N<l;N++,b+=p,I+=p,x+=p,v+=p)f[S++]=(a[b]+s[0])/o[0],f[L++]=(a[x]+s[1])/o[1],f[B++]=(a[I]+s[2])/o[2],M!==-1&&v!==-1&&(f[M++]=(a[v]+s[3])/o[3]);return u==="RGBA"?new Ke("float32",f,[1,4,n,e]):new Ke("float32",f,[1,3,n,e])},as=async(a,t)=>{let n=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,e=typeof ImageData<"u"&&a instanceof ImageData,r=typeof ImageBitmap<"u"&&a instanceof ImageBitmap,o=typeof a=="string",s,i=t??{};if(n){let u=document.createElement("canvas");u.width=a.width,u.height=a.height;let l=u.getContext("2d");if(l!=null){let f=a.height,p=a.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(f=t.resizedHeight,p=t.resizedWidth),t!==void 0){if(i=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");i.tensorFormat="RGBA",i.height=f,i.width=p}else i.tensorFormat="RGBA",i.height=f,i.width=p;l.drawImage(a,0,0),s=l.getImageData(0,0,p,f).data}else throw new Error("Can not access image data")}else if(e){let u,l;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(u=t.resizedHeight,l=t.resizedWidth):(u=a.height,l=a.width),t!==void 0&&(i=t),i.format="RGBA",i.height=u,i.width=l,t!==void 0){let f=document.createElement("canvas");f.width=l,f.height=u;let p=f.getContext("2d");if(p!=null)p.putImageData(a,0,0),s=p.getImageData(0,0,l,u).data;else throw new Error("Can not access image data")}else s=a.data}else if(r){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");let u=document.createElement("canvas");u.width=a.width,u.height=a.height;let l=u.getContext("2d");if(l!=null){let f=a.height,p=a.width;return l.drawImage(a,0,0,p,f),s=l.getImageData(0,0,p,f).data,i.height=f,i.width=p,Vo(s,i)}else throw new Error("Can not access image data")}else{if(o)return new Promise((u,l)=>{let f=document.createElement("canvas"),p=f.getContext("2d");if(!a||!p)return l();let b=new Image;b.crossOrigin="Anonymous",b.src=a,b.onload=()=>{f.width=b.width,f.height=b.height,p.drawImage(b,0,0,f.width,f.height);let x=p.getImageData(0,0,f.width,f.height);i.height=f.height,i.width=f.width,u(Vo(x.data,i))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(s!==void 0)return Vo(s,i);throw new Error("Input data provided is not supported - aborted tensor creation")},ss=(a,t)=>{let{width:n,height:e,download:r,dispose:o}=t,s=[1,e,n,4];return new Ke({location:"texture",type:"float32",texture:a,dims:s,download:r,dispose:o})},us=(a,t)=>{let{dataType:n,dims:e,download:r,dispose:o}=t;return new Ke({location:"gpu-buffer",type:n??"float32",gpuBuffer:a,dims:e,download:r,dispose:o})},ls=(a,t,n)=>new Ke({location:"cpu-pinned",type:a,data:t,dims:n??[t.length]})});var Qr,Cn,cs,ps,ds=D(()=>{Qr=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Cn=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),cs=!1,ps=()=>{if(!cs){cs=!0;let a=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",t=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";a&&(Qr.set("int64",BigInt64Array),Cn.set(BigInt64Array,"int64")),t&&(Qr.set("uint64",BigUint64Array),Cn.set(BigUint64Array,"uint64"))}}});var hs,ms,bs=D(()=>{Fn();hs=a=>{let t=1;for(let n=0;n<a.length;n++){let e=a[n];if(typeof e!="number"||!Number.isSafeInteger(e))throw new TypeError(`dims[${n}] must be an integer, got: ${e}`);if(e<0)throw new RangeError(`dims[${n}] must be a non-negative integer, got: ${e}`);t*=e}return t},ms=(a,t)=>{switch(a.location){case"cpu":return new Ke(a.type,a.data,t);case"cpu-pinned":return new Ke({location:"cpu-pinned",data:a.data,type:a.type,dims:t});case"texture":return new Ke({location:"texture",texture:a.texture,type:a.type,dims:t});case"gpu-buffer":return new Ke({location:"gpu-buffer",gpuBuffer:a.gpuBuffer,type:a.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${a.location} is not supported`)}}});var Ke,Fn=D(()=>{is();fs();ds();bs();Ke=class{constructor(t,n,e){ps();let r,o;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,r=t.type,o=t.dims,t.location){case"cpu-pinned":{let i=Qr.get(r);if(!i)throw new TypeError(`unsupported type "${r}" to create tensor from pinned buffer`);if(!(t.data instanceof i))throw new TypeError(`buffer should be of type ${i.name}`);this.cpuData=t.data;break}case"texture":{if(r!=="float32")throw new TypeError(`unsupported type "${r}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(r!=="float32"&&r!=="float16"&&r!=="int32"&&r!=="int64"&&r!=="uint32"&&r!=="bool")throw new TypeError(`unsupported type "${r}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let i,u;if(typeof t=="string")if(r=t,u=e,t==="string"){if(!Array.isArray(n))throw new TypeError("A string tensor's data must be a string array.");i=n}else{let l=Qr.get(t);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(n)){if(t==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");t==="uint64"||t==="int64"?i=l.from(n,BigInt):i=l.from(n)}else if(n instanceof l)i=n;else throw new TypeError(`A ${r} tensor's data must be type of ${l}`)}else if(u=n,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof t[0];if(l==="string")r="string",i=t;else if(l==="boolean")r="bool",i=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else{let l=Cn.get(t.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);r=l,i=t}if(u===void 0)u=[i.length];else if(!Array.isArray(u))throw new TypeError("A tensor's dims must be a number array");o=u,this.cpuData=i,this.dataLocation="cpu"}let s=hs(o);if(this.cpuData&&s!==this.cpuData.length)throw new Error(`Tensor's size(${s}) does not match data length(${this.cpuData.length}).`);this.type=r,this.dims=o,this.size=s}static async fromImage(t,n){return as(t,n)}static fromTexture(t,n){return ss(t,n)}static fromGpuBuffer(t,n){return us(t,n)}static fromPinnedBuffer(t,n,e){return ls(t,n,e)}toDataURL(t){return ns(this,t)}toImageData(t){return os(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let n=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=n,t&&this.disposer&&(this.disposer(),this.disposer=void 0),n}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return ms(this,t)}}});var Ge,kn=D(()=>{Fn();Ge=Ke});var $n,gs=D(()=>{Ln();kn();$n=class a{constructor(t){this.handler=t}async run(t,n,e){let r={},o={};if(typeof t!="object"||t===null||t instanceof Ge||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let s=!0;if(typeof n=="object"){if(n===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(n instanceof Ge)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n)){if(n.length===0)throw new TypeError("'fetches' cannot be an empty array.");s=!1;for(let l of n){if(typeof l!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(l)===-1)throw new RangeError(`'fetches' contains invalid output name: ${l}.`);r[l]=null}if(typeof e=="object"&&e!==null)o=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else{let l=!1,f=Object.getOwnPropertyNames(n);for(let p of this.outputNames)if(f.indexOf(p)!==-1){let b=n[p];(b===null||b instanceof Ge)&&(l=!0,s=!1,r[p]=b)}if(l){if(typeof e=="object"&&e!==null)o=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else o=n}}else if(typeof n<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let l of this.inputNames)if(typeof t[l]>"u")throw new Error(`input '${l}' is missing in 'feeds'.`);if(s)for(let l of this.outputNames)r[l]=null;let i=await this.handler.run(t,r,o),u={};for(let l in i)if(Object.hasOwnProperty.call(i,l)){let f=i[l];f instanceof Ge?u[l]=f:u[l]=new Ge(f.type,f.data,f.dims)}return u}async release(){return this.handler.dispose()}static async create(t,n,e,r){let o,s={};if(typeof t=="string"){if(o=t,typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(o=t,typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){let p=t,b=0,x=t.byteLength;if(typeof n=="object"&&n!==null)s=n;else if(typeof n=="number"){if(b=n,!Number.isSafeInteger(b))throw new RangeError("'byteOffset' must be an integer.");if(b<0||b>=p.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${p.byteLength}).`);if(x=t.byteLength-b,typeof e=="number"){if(x=e,!Number.isSafeInteger(x))throw new RangeError("'byteLength' must be an integer.");if(x<=0||b+x>p.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${p.byteLength-b}].`);if(typeof r=="object"&&r!==null)s=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(typeof e<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof n<"u")throw new TypeError("'options' must be an object.");o=new Uint8Array(p,b,x)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let u=(s.executionProviders||[]).map(p=>typeof p=="string"?p:p.name),f=await(await Dn(u)).createInferenceSessionHandler(o,s);return new a(f)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}});var Fd,ys=D(()=>{gs();Fd=$n});var Ts=D(()=>{});var Cd,Bn,xs=D(()=>{Ln();kn();Cd="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",Bn=class a{constructor(t){this.handler=t}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}static async create(t,n){let e=t.evalModel||"",r=t.optimizerModel||"",o=n||{},i=(o.executionProviders||[]).map(l=>typeof l=="string"?l:l.name),u=await Dn(i);if(u.createTrainingSessionHandler){let l=await u.createTrainingSessionHandler(t.checkpointState,t.trainModel,e,r,o);return new a(l)}else throw new Error(Cd)}typeNarrowingForRunStep(t,n,e){let r={},o={};if(typeof t!="object"||t===null||t instanceof Ge||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let s=!0;if(typeof n=="object"){if(n===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(n instanceof Ge)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n)){if(n.length===0)throw new TypeError("'fetches' cannot be an empty array.");s=!1;for(let i of n){if(typeof i!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(i)===-1)throw new RangeError(`'fetches' contains invalid output name: ${i}.`);r[i]=null}if(typeof e=="object"&&e!==null)o=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else{let i=!1,u=Object.getOwnPropertyNames(n);for(let l of this.outputNames)if(u.indexOf(l)!==-1){let f=n[l];(f===null||f instanceof Ge)&&(i=!0,s=!1,r[l]=f)}if(i){if(typeof e=="object"&&e!==null)o=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else o=n}}else if(typeof n<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let i of this.inputNames)if(typeof t[i]>"u")throw new Error(`input '${i}' is missing in 'feeds'.`);if(s)for(let i of this.outputNames)r[i]=null;return[r,o]}convertHandlerReturnTypeToMapOfTensors(t){let n={};for(let e in t)if(Object.hasOwnProperty.call(t,e)){let r=t[e];r instanceof Ge?n[e]=r:n[e]=new Ge(r.type,r.data,r.dims)}return n}async runTrainStep(t,n,e){let[r,o]=this.typeNarrowingForRunStep(t,n,e),s=await this.handler.runTrainStep(t,r,o);return this.convertHandlerReturnTypeToMapOfTensors(s)}async loadParametersBuffer(t,n){throw new Error("Method not implemented.")}async getContiguousParameters(t){throw new Error("Method not implemented.")}async release(){return this.handler.dispose()}}});var kd,vs=D(()=>{xs();kd=Bn});var Ho={};Er(Ho,{InferenceSession:()=>Fd,Tensor:()=>Ge,TrainingSession:()=>kd,env:()=>te,registerBackend:()=>Yt});var xt=D(()=>{Ja();rs();ys();kn();Ts();vs()});function Xt(a,t,n,e){if(t===void 0)return Bd(a);if(n===void 0)Rn(a,t,1);else if(typeof n=="number"&&e===void 0)Rn(a,t,n);else if(typeof n=="string"&&e===void 0)Rn(a,n,1,t);else if(typeof n=="string"&&typeof e=="number")Rn(a,n,e,t);else throw new TypeError("input is valid")}function Bd(a){return{verbose:Xt.verbose.bind(null,a),info:Xt.info.bind(null,a),warning:Xt.warning.bind(null,a),error:Xt.error.bind(null,a),fatal:Xt.fatal.bind(null,a)}}function Rn(a,t,n,e){let r=en[e||""]||en[""];_s[a]<_s[r.minimalSeverity]||(r.logDateTime&&(t=`${new Date().toISOString()}|${t}`),r.logSourceLocation,$d[r.provider].log(a,t,e))}var jo,qo,_s,$d,Os,en,fe,Mn,Gn,Un,Nn,lt=D(()=>{"use strict";jo=class{log(t,n,e){}},qo=class{log(t,n,e){console.log(`${this.color(t)} ${e?"\x1B[35m"+e+"\x1B[0m ":""}${n}`)}color(t){switch(t){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${t}`)}}},_s={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},$d={none:new jo,console:new qo},Os={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},en={"":Os};(u=>{function a(l,f){u("verbose",l,f)}u.verbose=a;function t(l,f){u("info",l,f)}u.info=t;function n(l,f){u("warning",l,f)}u.warning=n;function e(l,f){u("error",l,f)}u.error=e;function r(l,f){u("fatal",l,f)}u.fatal=r;function o(l){en={},s("",l||{})}u.reset=o;function s(l,f){if(l==="*")o(f);else{let p=en[l]||Os;en[l]={provider:f.provider||p.provider,minimalSeverity:f.minimalSeverity||p.minimalSeverity,logDateTime:f.logDateTime===void 0?p.logDateTime:f.logDateTime,logSourceLocation:f.logSourceLocation===void 0?p.logSourceLocation:f.logSourceLocation}}}u.set=s;function i(l){let f={};l.logLevel&&(f.minimalSeverity=l.logLevel),s("",f)}u.setWithEnv=i})(Xt||={});fe=Xt,Mn=class{constructor(t,n,e,r,o,s){this.category=t;this.name=n;this.startTime=e;this.endCallback=r;this.timer=o;this.ctx=s}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}},Gn=class{constructor(t,n,e,r){this.category=t;this.name=n;this.startTime=e;this.endTime=r}},Un=class{constructor(t,n,e){this._started=!1;this._flushPointer=0;this._started=!1,this._maxNumberEvents=t===void 0?1e4:t,this._flushBatchSize=n===void 0?10:n,this._flushIntervalInMilliseconds=e===void 0?5e3:e}static create(t){return t===void 0?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=Nn(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(t,n,e,r){let o=this._started?this.begin(t,n,r):void 0,s=!1,i=e();if(i&&typeof i.then=="function")return s=!0,new Promise((u,l)=>{i.then(async f=>{o&&await o.end(),u(f)},async f=>{o&&await o.end(),l(f)})});if(!s&&o){let u=o.end();if(u&&typeof u.then=="function")return new Promise((l,f)=>{u.then(()=>{l(i)},p=>{f(p)})})}return i}begin(t,n,e){if(!this._started)throw new Error("profiler is not started yet");if(e===void 0){let r=Nn();return this.flush(r),new Mn(t,n,r,o=>this.endSync(o))}else{let r=e.beginTimer();return new Mn(t,n,0,async o=>this.end(o),r,e)}}async end(t){let n=await t.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Gn(t.category,t.name,t.startTime,n)),this.flush(n))}endSync(t){let n=Nn();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Gn(t.category,t.name,t.startTime,n)),this.flush(n))}logOneEvent(t){fe.verbose(`Profiler.${t.category}`,`${(t.endTime-t.startTime).toFixed(2)}ms on event '${t.name}' at ${t.endTime.toFixed(2)}`)}flush(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(let n=this._flushPointer;this._flushPointer<n+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=Nn()}}get started(){return this._started}},Nn=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function Is(a,t,n){for(let e of n){let r=e[0],o=e[1],s=e[2],i=e[3],u=e[4];if(a.opType===r){for(let l of t)if((l.domain===o||l.domain==="ai.onnx"&&o==="")&&Rd(l.version,s))return{opImpl:i,opInit:u}}}throw new TypeError(`cannot resolve operator '${a.opType}' with opsets: ${t.map(e=>`${e.domain||"ai.onnx"} v${e.version}`).join(", ")}`)}function Rd(a,t){if(t.endsWith("+")){let n=Number.parseInt(t.substring(0,t.length-1),10);return!isNaN(n)&&n<=a}else if(t.split("-").length===2){let n=t.split("-"),e=Number.parseInt(n[0],10),r=Number.parseInt(n[1],10);return!isNaN(e)&&!isNaN(r)&&e<=a&&a<=r}else return Number.parseInt(t,10)===a}var Ss=D(()=>{"use strict"});var As=be(Yo=>{"use strict";Yo.__esModule=!0;var Nd=function(){function a(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=a.EMPTY,t&&a.isGuid(t)&&(this.value=t)}return a.isGuid=function(t){var n=t.toString();return t&&(t instanceof a||a.validator.test(n))},a.create=function(){return new a([a.gen(2),a.gen(1),a.gen(1),a.gen(1),a.gen(3)].join("-"))},a.createEmpty=function(){return new a("emptyguid")},a.parse=function(t){return new a(t)},a.raw=function(){return[a.gen(2),a.gen(1),a.gen(1),a.gen(1),a.gen(3)].join("-")},a.gen=function(t){for(var n="",e=0;e<t;e++)n+=((1+Math.random())*65536|0).toString(16).substring(1);return n},a.prototype.equals=function(t){return a.isGuid(t)&&this.value===t.toString()},a.prototype.isEmpty=function(){return this.value===a.EMPTY},a.prototype.toString=function(){return this.value},a.prototype.toJSON=function(){return{value:this.value}},a.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),a.EMPTY="00000000-0000-0000-0000-000000000000",a}();Yo.Guid=Nd});function ge(a,t,n){this.low=a|0,this.high=t|0,this.unsigned=!!n}function Ye(a){return(a&&a.__isLong__)===!0}function Ps(a){var t=Math.clz32(a&-a);return a?31-t:t}function sr(a,t){var n,e,r;return t?(a>>>=0,(r=0<=a&&a<256)&&(e=Ds[a],e)?e:(n=se(a,0,!0),r&&(Ds[a]=n),n)):(a|=0,(r=-128<=a&&a<128)&&(e=Es[a],e)?e:(n=se(a,a<0?-1:0,!1),r&&(Es[a]=n),n))}function ct(a,t){if(isNaN(a))return t?Gt:vt;if(t){if(a<0)return Gt;if(a>=ks)return Rs}else{if(a<=-Fs)return tt;if(a+1>=Fs)return Bs}return a<0?ct(-a,t).neg():se(a%Fr|0,a/Fr|0,t)}function se(a,t,n){return new ge(a,t,n)}function Ko(a,t,n){if(a.length===0)throw Error("empty string");if(typeof t=="number"?(n=t,t=!1):t=!!t,a==="NaN"||a==="Infinity"||a==="+Infinity"||a==="-Infinity")return t?Gt:vt;if(n=n||10,n<2||36<n)throw RangeError("radix");var e;if((e=a.indexOf("-"))>0)throw Error("interior hyphen");if(e===0)return Ko(a.substring(1),t,n).neg();for(var r=ct(zn(n,8)),o=vt,s=0;s<a.length;s+=8){var i=Math.min(8,a.length-s),u=parseInt(a.substring(s,s+i),n);if(i<8){var l=ct(zn(n,i));o=o.mul(l).add(ct(u))}else o=o.mul(r),o=o.add(ct(u))}return o.unsigned=t,o}function wt(a,t){return typeof a=="number"?ct(a,t):typeof a=="string"?Ko(a,t):se(a.low,a.high,typeof t=="boolean"?t:a.unsigned)}var ft,Es,Ds,zn,Ls,Md,Fr,ks,Fs,Cs,vt,Gt,Lr,$s,Xo,Bs,Rs,tt,k,Ut,Jo=D(()=>{ft=null;try{ft=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}ge.prototype.__isLong__;Object.defineProperty(ge.prototype,"__isLong__",{value:!0});ge.isLong=Ye;Es={},Ds={};ge.fromInt=sr;ge.fromNumber=ct;ge.fromBits=se;zn=Math.pow;ge.fromString=Ko;ge.fromValue=wt;Ls=65536,Md=1<<24,Fr=Ls*Ls,ks=Fr*Fr,Fs=ks/2,Cs=sr(Md),vt=sr(0);ge.ZERO=vt;Gt=sr(0,!0);ge.UZERO=Gt;Lr=sr(1);ge.ONE=Lr;$s=sr(1,!0);ge.UONE=$s;Xo=sr(-1);ge.NEG_ONE=Xo;Bs=se(-1,2147483647,!1);ge.MAX_VALUE=Bs;Rs=se(-1,-1,!0);ge.MAX_UNSIGNED_VALUE=Rs;tt=se(0,-2147483648,!1);ge.MIN_VALUE=tt;k=ge.prototype;k.toInt=function(){return this.unsigned?this.low>>>0:this.low};k.toNumber=function(){return this.unsigned?(this.high>>>0)*Fr+(this.low>>>0):this.high*Fr+(this.low>>>0)};k.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(tt)){var n=ct(t),e=this.div(n),r=e.mul(n).sub(this);return e.toString(t)+r.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var o=ct(zn(t,6),this.unsigned),s=this,i="";;){var u=s.div(o),l=s.sub(u.mul(o)).toInt()>>>0,f=l.toString(t);if(s=u,s.isZero())return f+i;for(;f.length<6;)f="0"+f;i=""+f+i}};k.getHighBits=function(){return this.high};k.getHighBitsUnsigned=function(){return this.high>>>0};k.getLowBits=function(){return this.low};k.getLowBitsUnsigned=function(){return this.low>>>0};k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(tt)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,n=31;n>0&&!(t&1<<n);n--);return this.high!=0?n+33:n+1};k.isZero=function(){return this.high===0&&this.low===0};k.eqz=k.isZero;k.isNegative=function(){return!this.unsigned&&this.high<0};k.isPositive=function(){return this.unsigned||this.high>=0};k.isOdd=function(){return(this.low&1)===1};k.isEven=function(){return(this.low&1)===0};k.equals=function(t){return Ye(t)||(t=wt(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};k.eq=k.equals;k.notEquals=function(t){return!this.eq(t)};k.neq=k.notEquals;k.ne=k.notEquals;k.lessThan=function(t){return this.comp(t)<0};k.lt=k.lessThan;k.lessThanOrEqual=function(t){return this.comp(t)<=0};k.lte=k.lessThanOrEqual;k.le=k.lessThanOrEqual;k.greaterThan=function(t){return this.comp(t)>0};k.gt=k.greaterThan;k.greaterThanOrEqual=function(t){return this.comp(t)>=0};k.gte=k.greaterThanOrEqual;k.ge=k.greaterThanOrEqual;k.compare=function(t){if(Ye(t)||(t=wt(t)),this.eq(t))return 0;var n=this.isNegative(),e=t.isNegative();return n&&!e?-1:!n&&e?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};k.comp=k.compare;k.negate=function(){return!this.unsigned&&this.eq(tt)?tt:this.not().add(Lr)};k.neg=k.negate;k.add=function(t){Ye(t)||(t=wt(t));var n=this.high>>>16,e=this.high&65535,r=this.low>>>16,o=this.low&65535,s=t.high>>>16,i=t.high&65535,u=t.low>>>16,l=t.low&65535,f=0,p=0,b=0,x=0;return x+=o+l,b+=x>>>16,x&=65535,b+=r+u,p+=b>>>16,b&=65535,p+=e+i,f+=p>>>16,p&=65535,f+=n+s,f&=65535,se(b<<16|x,f<<16|p,this.unsigned)};k.subtract=function(t){return Ye(t)||(t=wt(t)),this.add(t.neg())};k.sub=k.subtract;k.multiply=function(t){if(this.isZero())return this;if(Ye(t)||(t=wt(t)),ft){var n=ft.mul(this.low,this.high,t.low,t.high);return se(n,ft.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?Gt:vt;if(this.eq(tt))return t.isOdd()?tt:vt;if(t.eq(tt))return this.isOdd()?tt:vt;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Cs)&&t.lt(Cs))return ct(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,r=this.high&65535,o=this.low>>>16,s=this.low&65535,i=t.high>>>16,u=t.high&65535,l=t.low>>>16,f=t.low&65535,p=0,b=0,x=0,I=0;return I+=s*f,x+=I>>>16,I&=65535,x+=o*f,b+=x>>>16,x&=65535,x+=s*l,b+=x>>>16,x&=65535,b+=r*f,p+=b>>>16,b&=65535,b+=o*l,p+=b>>>16,b&=65535,b+=s*u,p+=b>>>16,b&=65535,p+=e*f+r*l+o*u+s*i,p&=65535,se(x<<16|I,p<<16|b,this.unsigned)};k.mul=k.multiply;k.divide=function(t){if(Ye(t)||(t=wt(t)),t.isZero())throw Error("division by zero");if(ft){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var n=(this.unsigned?ft.div_u:ft.div_s)(this.low,this.high,t.low,t.high);return se(n,ft.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Gt:vt;var e,r,o;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Gt;if(t.gt(this.shru(1)))return $s;o=Gt}else{if(this.eq(tt)){if(t.eq(Lr)||t.eq(Xo))return tt;if(t.eq(tt))return Lr;var s=this.shr(1);return e=s.div(t).shl(1),e.eq(vt)?t.isNegative()?Lr:Xo:(r=this.sub(t.mul(e)),o=e.add(r.div(t)),o)}else if(t.eq(tt))return this.unsigned?Gt:vt;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=vt}for(r=this;r.gte(t);){e=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var i=Math.ceil(Math.log(e)/Math.LN2),u=i<=48?1:zn(2,i-48),l=ct(e),f=l.mul(t);f.isNegative()||f.gt(r);)e-=u,l=ct(e,this.unsigned),f=l.mul(t);l.isZero()&&(l=Lr),o=o.add(l),r=r.sub(f)}return o};k.div=k.divide;k.modulo=function(t){if(Ye(t)||(t=wt(t)),ft){var n=(this.unsigned?ft.rem_u:ft.rem_s)(this.low,this.high,t.low,t.high);return se(n,ft.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};k.mod=k.modulo;k.rem=k.modulo;k.not=function(){return se(~this.low,~this.high,this.unsigned)};k.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};k.clz=k.countLeadingZeros;k.countTrailingZeros=function(){return this.low?Ps(this.low):Ps(this.high)+32};k.ctz=k.countTrailingZeros;k.and=function(t){return Ye(t)||(t=wt(t)),se(this.low&t.low,this.high&t.high,this.unsigned)};k.or=function(t){return Ye(t)||(t=wt(t)),se(this.low|t.low,this.high|t.high,this.unsigned)};k.xor=function(t){return Ye(t)||(t=wt(t)),se(this.low^t.low,this.high^t.high,this.unsigned)};k.shiftLeft=function(t){return Ye(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?se(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):se(0,this.low<<t-32,this.unsigned)};k.shl=k.shiftLeft;k.shiftRight=function(t){return Ye(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?se(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):se(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};k.shr=k.shiftRight;k.shiftRightUnsigned=function(t){return Ye(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?se(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?se(this.high,0,this.unsigned):se(this.high>>>t-32,0,this.unsigned)};k.shru=k.shiftRightUnsigned;k.shr_u=k.shiftRightUnsigned;k.rotateLeft=function(t){var n;return Ye(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?se(this.high,this.low,this.unsigned):t<32?(n=32-t,se(this.low<<t|this.high>>>n,this.high<<t|this.low>>>n,this.unsigned)):(t-=32,n=32-t,se(this.high<<t|this.low>>>n,this.low<<t|this.high>>>n,this.unsigned))};k.rotl=k.rotateLeft;k.rotateRight=function(t){var n;return Ye(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?se(this.high,this.low,this.unsigned):t<32?(n=32-t,se(this.high<<n|this.low>>>t,this.low<<n|this.high>>>t,this.unsigned)):(t-=32,n=32-t,se(this.low<<n|this.high>>>t,this.high<<n|this.low>>>t,this.unsigned))};k.rotr=k.rotateRight;k.toSigned=function(){return this.unsigned?se(this.low,this.high,!1):this};k.toUnsigned=function(){return this.unsigned?this:se(this.low,this.high,!0)};k.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};k.toBytesLE=function(){var t=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};k.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};ge.fromBytes=function(t,n,e){return e?ge.fromBytesLE(t,n):ge.fromBytesBE(t,n)};ge.fromBytesLE=function(t,n){return new ge(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)};ge.fromBytesBE=function(t,n){return new ge(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)};Ut=ge});var O,Wn=D(()=>{O={};O.Offset;O.Table;O.SIZEOF_SHORT=2;O.SIZEOF_INT=4;O.FILE_IDENTIFIER_LENGTH=4;O.SIZE_PREFIX_LENGTH=4;O.Encoding={UTF8_BYTES:1,UTF16_STRING:2};O.int32=new Int32Array(2);O.float32=new Float32Array(O.int32.buffer);O.float64=new Float64Array(O.int32.buffer);O.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;O.Long=function(a,t){this.low=a|0,this.high=t|0};O.Long.create=function(a,t){return a==0&&t==0?O.Long.ZERO:new O.Long(a,t)};O.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296};O.Long.prototype.equals=function(a){return this.low==a.low&&this.high==a.high};O.Long.ZERO=new O.Long(0,0);O.Builder=function(a){if(a)var t=a;else var t=1024;this.bb=O.ByteBuffer.allocate(t),this.space=t,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1};O.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1};O.Builder.prototype.forceDefaults=function(a){this.force_defaults=a};O.Builder.prototype.dataBuffer=function(){return this.bb};O.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())};O.Builder.prototype.prep=function(a,t){a>this.minalign&&(this.minalign=a);for(var n=~(this.bb.capacity()-this.space+t)+1&a-1;this.space<n+a+t;){var e=this.bb.capacity();this.bb=O.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-e}this.pad(n)};O.Builder.prototype.pad=function(a){for(var t=0;t<a;t++)this.bb.writeInt8(--this.space,0)};O.Builder.prototype.writeInt8=function(a){this.bb.writeInt8(this.space-=1,a)};O.Builder.prototype.writeInt16=function(a){this.bb.writeInt16(this.space-=2,a)};O.Builder.prototype.writeInt32=function(a){this.bb.writeInt32(this.space-=4,a)};O.Builder.prototype.writeInt64=function(a){this.bb.writeInt64(this.space-=8,a)};O.Builder.prototype.writeFloat32=function(a){this.bb.writeFloat32(this.space-=4,a)};O.Builder.prototype.writeFloat64=function(a){this.bb.writeFloat64(this.space-=8,a)};O.Builder.prototype.addInt8=function(a){this.prep(1,0),this.writeInt8(a)};O.Builder.prototype.addInt16=function(a){this.prep(2,0),this.writeInt16(a)};O.Builder.prototype.addInt32=function(a){this.prep(4,0),this.writeInt32(a)};O.Builder.prototype.addInt64=function(a){this.prep(8,0),this.writeInt64(a)};O.Builder.prototype.addFloat32=function(a){this.prep(4,0),this.writeFloat32(a)};O.Builder.prototype.addFloat64=function(a){this.prep(8,0),this.writeFloat64(a)};O.Builder.prototype.addFieldInt8=function(a,t,n){(this.force_defaults||t!=n)&&(this.addInt8(t),this.slot(a))};O.Builder.prototype.addFieldInt16=function(a,t,n){(this.force_defaults||t!=n)&&(this.addInt16(t),this.slot(a))};O.Builder.prototype.addFieldInt32=function(a,t,n){(this.force_defaults||t!=n)&&(this.addInt32(t),this.slot(a))};O.Builder.prototype.addFieldInt64=function(a,t,n){(this.force_defaults||!t.equals(n))&&(this.addInt64(t),this.slot(a))};O.Builder.prototype.addFieldFloat32=function(a,t,n){(this.force_defaults||t!=n)&&(this.addFloat32(t),this.slot(a))};O.Builder.prototype.addFieldFloat64=function(a,t,n){(this.force_defaults||t!=n)&&(this.addFloat64(t),this.slot(a))};O.Builder.prototype.addFieldOffset=function(a,t,n){(this.force_defaults||t!=n)&&(this.addOffset(t),this.slot(a))};O.Builder.prototype.addFieldStruct=function(a,t,n){t!=n&&(this.nested(t),this.slot(a))};O.Builder.prototype.nested=function(a){if(a!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")};O.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")};O.Builder.prototype.slot=function(a){this.vtable[a]=this.offset()};O.Builder.prototype.offset=function(){return this.bb.capacity()-this.space};O.Builder.growByteBuffer=function(a){var t=a.capacity();if(t&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=t<<1,e=O.ByteBuffer.allocate(n);return e.setPosition(n-t),e.bytes().set(a.bytes(),n-t),e};O.Builder.prototype.addOffset=function(a){this.prep(O.SIZEOF_INT,0),this.writeInt32(this.offset()-a+O.SIZEOF_INT)};O.Builder.prototype.startObject=function(a){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=a;for(var t=0;t<a;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()};O.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var a=this.offset(),t=this.vtable_in_use-1;t>=0&&this.vtable[t]==0;t--);for(var n=t+1;t>=0;t--)this.addInt16(this.vtable[t]!=0?a-this.vtable[t]:0);var e=2;this.addInt16(a-this.object_start);var r=(n+e)*O.SIZEOF_SHORT;this.addInt16(r);var o=0,s=this.space;e:for(t=0;t<this.vtables.length;t++){var i=this.bb.capacity()-this.vtables[t];if(r==this.bb.readInt16(i)){for(var u=O.SIZEOF_SHORT;u<r;u+=O.SIZEOF_SHORT)if(this.bb.readInt16(s+u)!=this.bb.readInt16(i+u))continue e;o=this.vtables[t];break}}return o?(this.space=this.bb.capacity()-a,this.bb.writeInt32(this.space,o-a)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-a,this.offset()-a)),this.isNested=!1,a};O.Builder.prototype.finish=function(a,t,n){var e=n?O.SIZE_PREFIX_LENGTH:0;if(t){var r=t;if(this.prep(this.minalign,O.SIZEOF_INT+O.FILE_IDENTIFIER_LENGTH+e),r.length!=O.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+O.FILE_IDENTIFIER_LENGTH);for(var o=O.FILE_IDENTIFIER_LENGTH-1;o>=0;o--)this.writeInt8(r.charCodeAt(o))}this.prep(this.minalign,O.SIZEOF_INT+e),this.addOffset(a),e&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)};O.Builder.prototype.finishSizePrefixed=function(a,t){this.finish(a,t,!0)};O.Builder.prototype.requiredField=function(a,t){var n=this.bb.capacity()-a,e=n-this.bb.readInt32(n),r=this.bb.readInt16(e+t)!=0;if(!r)throw new Error("FlatBuffers: field "+t+" must be set")};O.Builder.prototype.startVector=function(a,t,n){this.notNested(),this.vector_num_elems=t,this.prep(O.SIZEOF_INT,a*t),this.prep(n,a*t)};O.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()};O.Builder.prototype.createString=function(a){if(a instanceof Uint8Array)var t=a;else for(var t=[],n=0;n<a.length;){var e,r=a.charCodeAt(n++);if(r<55296||r>=56320)e=r;else{var o=a.charCodeAt(n++);e=(r<<10)+o+(65536-56623104-56320)}e<128?t.push(e):(e<2048?t.push(e>>6&31|192):(e<65536?t.push(e>>12&15|224):t.push(e>>18&7|240,e>>12&63|128),t.push(e>>6&63|128)),t.push(e&63|128))}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);for(var n=0,s=this.space,i=this.bb.bytes();n<t.length;n++)i[s++]=t[n];return this.endVector()};O.Builder.prototype.createLong=function(a,t){return O.Long.create(a,t)};O.ByteBuffer=function(a){this.bytes_=a,this.position_=0};O.ByteBuffer.allocate=function(a){return new O.ByteBuffer(new Uint8Array(a))};O.ByteBuffer.prototype.clear=function(){this.position_=0};O.ByteBuffer.prototype.bytes=function(){return this.bytes_};O.ByteBuffer.prototype.position=function(){return this.position_};O.ByteBuffer.prototype.setPosition=function(a){this.position_=a};O.ByteBuffer.prototype.capacity=function(){return this.bytes_.length};O.ByteBuffer.prototype.readInt8=function(a){return this.readUint8(a)<<24>>24};O.ByteBuffer.prototype.readUint8=function(a){return this.bytes_[a]};O.ByteBuffer.prototype.readInt16=function(a){return this.readUint16(a)<<16>>16};O.ByteBuffer.prototype.readUint16=function(a){return this.bytes_[a]|this.bytes_[a+1]<<8};O.ByteBuffer.prototype.readInt32=function(a){return this.bytes_[a]|this.bytes_[a+1]<<8|this.bytes_[a+2]<<16|this.bytes_[a+3]<<24};O.ByteBuffer.prototype.readUint32=function(a){return this.readInt32(a)>>>0};O.ByteBuffer.prototype.readInt64=function(a){return new O.Long(this.readInt32(a),this.readInt32(a+4))};O.ByteBuffer.prototype.readUint64=function(a){return new O.Long(this.readUint32(a),this.readUint32(a+4))};O.ByteBuffer.prototype.readFloat32=function(a){return O.int32[0]=this.readInt32(a),O.float32[0]};O.ByteBuffer.prototype.readFloat64=function(a){return O.int32[O.isLittleEndian?0:1]=this.readInt32(a),O.int32[O.isLittleEndian?1:0]=this.readInt32(a+4),O.float64[0]};O.ByteBuffer.prototype.writeInt8=function(a,t){this.bytes_[a]=t};O.ByteBuffer.prototype.writeUint8=function(a,t){this.bytes_[a]=t};O.ByteBuffer.prototype.writeInt16=function(a,t){this.bytes_[a]=t,this.bytes_[a+1]=t>>8};O.ByteBuffer.prototype.writeUint16=function(a,t){this.bytes_[a]=t,this.bytes_[a+1]=t>>8};O.ByteBuffer.prototype.writeInt32=function(a,t){this.bytes_[a]=t,this.bytes_[a+1]=t>>8,this.bytes_[a+2]=t>>16,this.bytes_[a+3]=t>>24};O.ByteBuffer.prototype.writeUint32=function(a,t){this.bytes_[a]=t,this.bytes_[a+1]=t>>8,this.bytes_[a+2]=t>>16,this.bytes_[a+3]=t>>24};O.ByteBuffer.prototype.writeInt64=function(a,t){this.writeInt32(a,t.low),this.writeInt32(a+4,t.high)};O.ByteBuffer.prototype.writeUint64=function(a,t){this.writeUint32(a,t.low),this.writeUint32(a+4,t.high)};O.ByteBuffer.prototype.writeFloat32=function(a,t){O.float32[0]=t,this.writeInt32(a,O.int32[0])};O.ByteBuffer.prototype.writeFloat64=function(a,t){O.float64[0]=t,this.writeInt32(a,O.int32[O.isLittleEndian?0:1]),this.writeInt32(a+4,O.int32[O.isLittleEndian?1:0])};O.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+O.SIZEOF_INT+O.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var a="",t=0;t<O.FILE_IDENTIFIER_LENGTH;t++)a+=String.fromCharCode(this.readInt8(this.position_+O.SIZEOF_INT+t));return a};O.ByteBuffer.prototype.__offset=function(a,t){var n=a-this.readInt32(a);return t<this.readInt16(n)?this.readInt16(n+t):0};O.ByteBuffer.prototype.__union=function(a,t){return a.bb_pos=t+this.readInt32(t),a.bb=this,a};O.ByteBuffer.prototype.__string=function(a,t){a+=this.readInt32(a);var n=this.readInt32(a),e="",r=0;if(a+=O.SIZEOF_INT,t===O.Encoding.UTF8_BYTES)return this.bytes_.subarray(a,a+n);for(;r<n;){var o,s=this.readUint8(a+r++);if(s<192)o=s;else{var i=this.readUint8(a+r++);if(s<224)o=(s&31)<<6|i&63;else{var u=this.readUint8(a+r++);if(s<240)o=(s&15)<<12|(i&63)<<6|u&63;else{var l=this.readUint8(a+r++);o=(s&7)<<18|(i&63)<<12|(u&63)<<6|l&63}}}o<65536?e+=String.fromCharCode(o):(o-=65536,e+=String.fromCharCode((o>>10)+55296,(o&1024-1)+56320))}return e};O.ByteBuffer.prototype.__indirect=function(a){return a+this.readInt32(a)};O.ByteBuffer.prototype.__vector=function(a){return a+this.readInt32(a)+O.SIZEOF_INT};O.ByteBuffer.prototype.__vector_len=function(a){return this.readInt32(a+this.readInt32(a))};O.ByteBuffer.prototype.__has_identifier=function(a){if(a.length!=O.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+O.FILE_IDENTIFIER_LENGTH);for(var t=0;t<O.FILE_IDENTIFIER_LENGTH;t++)if(a.charCodeAt(t)!=this.readInt8(this.position_+O.SIZEOF_INT+t))return!1;return!0};O.ByteBuffer.prototype.createLong=function(a,t){return O.Long.create(a,t)}});var j,tn=D(()=>{"use strict";Wn();(t=>{let a;(e=>{let n;(o=>{let r;(M=>(M[M.UNDEFINED=0]="UNDEFINED",M[M.FLOAT=1]="FLOAT",M[M.INT=2]="INT",M[M.STRING=3]="STRING",M[M.TENSOR=4]="TENSOR",M[M.GRAPH=5]="GRAPH",M[M.FLOATS=6]="FLOATS",M[M.INTS=7]="INTS",M[M.STRINGS=8]="STRINGS",M[M.TENSORS=9]="TENSORS",M[M.GRAPHS=10]="GRAPHS",M[M.SPARSE_TENSOR=11]="SPARSE_TENSOR",M[M.SPARSE_TENSORS=12]="SPARSE_TENSORS"))(r=o.AttributeType||={})})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{let r;(l=>(l[l.UNKNOWN=0]="UNKNOWN",l[l.VALUE=1]="VALUE",l[l.PARAM=2]="PARAM"))(r=o.DimensionValueType||={})})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{let r;(H=>(H[H.UNDEFINED=0]="UNDEFINED",H[H.FLOAT=1]="FLOAT",H[H.UINT8=2]="UINT8",H[H.INT8=3]="INT8",H[H.UINT16=4]="UINT16",H[H.INT16=5]="INT16",H[H.INT32=6]="INT32",H[H.INT64=7]="INT64",H[H.STRING=8]="STRING",H[H.BOOL=9]="BOOL",H[H.FLOAT16=10]="FLOAT16",H[H.DOUBLE=11]="DOUBLE",H[H.UINT32=12]="UINT32",H[H.UINT64=13]="UINT64",H[H.COMPLEX64=14]="COMPLEX64",H[H.COMPLEX128=15]="COMPLEX128",H[H.BFLOAT16=16]="BFLOAT16",H[H.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",H[H.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",H[H.FLOAT8E5M2=19]="FLOAT8E5M2",H[H.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"))(r=o.TensorDataType||={})})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{let r;(u=>(u[u.Primitive=0]="Primitive",u[u.Fused=1]="Fused"))(r=o.NodeType||={})})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{let r;(f=>(f[f.NONE=0]="NONE",f[f.tensor_type=1]="tensor_type",f[f.sequence_type=2]="sequence_type",f[f.map_type=3]="map_type"))(r=o.TypeInfoValue||={})})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsShape(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsShape(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}dim(i,u){let l=this.bb.__offset(this.bb_pos,4);return l?(u||new t.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}dimLength(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__vector_len(this.bb_pos+i):0}static startShape(i){i.startObject(1)}static addDim(i,u){i.addFieldOffset(0,u,0)}static createDimVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startDimVector(i,u){i.startVector(4,u,4)}static endShape(i){return i.endObject()}static createShape(i,u){return r.startShape(i),r.addDim(i,u),r.endShape(i)}}o.Shape=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsDimension(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsDimension(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}value(i){let u=this.bb.__offset(this.bb_pos,4);return u?(i||new t.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}denotation(i){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__string(this.bb_pos+u,i):null}static startDimension(i){i.startObject(2)}static addValue(i,u){i.addFieldOffset(0,u,0)}static addDenotation(i,u){i.addFieldOffset(1,u,0)}static endDimension(i){return i.endObject()}static createDimension(i,u,l){return r.startDimension(i),r.addValue(i,u),r.addDenotation(i,l),r.endDimension(i)}}o.Dimension=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsDimensionValue(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsDimensionValue(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}dimType(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt8(this.bb_pos+i):0}dimValue(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}dimParam(i){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__string(this.bb_pos+u,i):null}static startDimensionValue(i){i.startObject(3)}static addDimType(i,u){i.addFieldInt8(0,u,0)}static addDimValue(i,u){i.addFieldInt64(1,u,i.createLong(0,0))}static addDimParam(i,u){i.addFieldOffset(2,u,0)}static endDimensionValue(i){return i.endObject()}static createDimensionValue(i,u,l,f){return r.startDimensionValue(i),r.addDimType(i,u),r.addDimValue(i,l),r.addDimParam(i,f),r.endDimensionValue(i)}}o.DimensionValue=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsTensorTypeAndShape(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsTensorTypeAndShape(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}elemType(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt32(this.bb_pos+i):0}shape(i){let u=this.bb.__offset(this.bb_pos,6);return u?(i||new t.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startTensorTypeAndShape(i){i.startObject(2)}static addElemType(i,u){i.addFieldInt32(0,u,0)}static addShape(i,u){i.addFieldOffset(1,u,0)}static endTensorTypeAndShape(i){return i.endObject()}static createTensorTypeAndShape(i,u,l){return r.startTensorTypeAndShape(i),r.addElemType(i,u),r.addShape(i,l),r.endTensorTypeAndShape(i)}}o.TensorTypeAndShape=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsMapType(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsMapType(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}keyType(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt32(this.bb_pos+i):0}valueType(i){let u=this.bb.__offset(this.bb_pos,6);return u?(i||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startMapType(i){i.startObject(2)}static addKeyType(i,u){i.addFieldInt32(0,u,0)}static addValueType(i,u){i.addFieldOffset(1,u,0)}static endMapType(i){return i.endObject()}static createMapType(i,u,l){return r.startMapType(i),r.addKeyType(i,u),r.addValueType(i,l),r.endMapType(i)}}o.MapType=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsSequenceType(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsSequenceType(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}elemType(i){let u=this.bb.__offset(this.bb_pos,4);return u?(i||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startSequenceType(i){i.startObject(1)}static addElemType(i,u){i.addFieldOffset(0,u,0)}static endSequenceType(i){return i.endObject()}static createSequenceType(i,u){return r.startSequenceType(i),r.addElemType(i,u),r.endSequenceType(i)}}o.SequenceType=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(i,u,l,f){return i.prep(4,12),i.writeInt32(f),i.writeInt32(l),i.writeInt32(u),i.offset()}}o.EdgeEnd=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsNodeEdge(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsNodeEdge(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}nodeIndex(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readUint32(this.bb_pos+i):0}inputEdges(i,u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+l)+i*12,this.bb):null}inputEdgesLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}outputEdges(i,u){let l=this.bb.__offset(this.bb_pos,8);return l?(u||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+l)+i*12,this.bb):null}outputEdgesLength(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__vector_len(this.bb_pos+i):0}static startNodeEdge(i){i.startObject(3)}static addNodeIndex(i,u){i.addFieldInt32(0,u,0)}static addInputEdges(i,u){i.addFieldOffset(1,u,0)}static startInputEdgesVector(i,u){i.startVector(12,u,4)}static addOutputEdges(i,u){i.addFieldOffset(2,u,0)}static startOutputEdgesVector(i,u){i.startVector(12,u,4)}static endNodeEdge(i){return i.endObject()}static createNodeEdge(i,u,l,f){return r.startNodeEdge(i),r.addNodeIndex(i,u),r.addInputEdges(i,l),r.addOutputEdges(i,f),r.endNodeEdge(i)}}o.NodeEdge=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsNode(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsNode(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}name(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,i):null}docString(i){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__string(this.bb_pos+u,i):null}domain(i){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__string(this.bb_pos+u,i):null}sinceVersion(){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readInt32(this.bb_pos+i):0}index(){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.readUint32(this.bb_pos+i):0}opType(i){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.__string(this.bb_pos+u,i):null}type(){let i=this.bb.__offset(this.bb_pos,16);return i?this.bb.readInt32(this.bb_pos+i):0}executionProviderType(i){let u=this.bb.__offset(this.bb_pos,18);return u?this.bb.__string(this.bb_pos+u,i):null}inputs(i,u){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+i*4,u):null}inputsLength(){let i=this.bb.__offset(this.bb_pos,20);return i?this.bb.__vector_len(this.bb_pos+i):0}outputs(i,u){let l=this.bb.__offset(this.bb_pos,22);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+i*4,u):null}outputsLength(){let i=this.bb.__offset(this.bb_pos,22);return i?this.bb.__vector_len(this.bb_pos+i):0}attributes(i,u){let l=this.bb.__offset(this.bb_pos,24);return l?(u||new t.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}attributesLength(){let i=this.bb.__offset(this.bb_pos,24);return i?this.bb.__vector_len(this.bb_pos+i):0}inputArgCounts(i){let u=this.bb.__offset(this.bb_pos,26);return u?this.bb.readInt32(this.bb.__vector(this.bb_pos+u)+i*4):0}inputArgCountsLength(){let i=this.bb.__offset(this.bb_pos,26);return i?this.bb.__vector_len(this.bb_pos+i):0}inputArgCountsArray(){let i=this.bb.__offset(this.bb_pos,26);return i?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i),this.bb.__vector_len(this.bb_pos+i)):null}implicitInputs(i,u){let l=this.bb.__offset(this.bb_pos,28);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+i*4,u):null}implicitInputsLength(){let i=this.bb.__offset(this.bb_pos,28);return i?this.bb.__vector_len(this.bb_pos+i):0}static startNode(i){i.startObject(13)}static addName(i,u){i.addFieldOffset(0,u,0)}static addDocString(i,u){i.addFieldOffset(1,u,0)}static addDomain(i,u){i.addFieldOffset(2,u,0)}static addSinceVersion(i,u){i.addFieldInt32(3,u,0)}static addIndex(i,u){i.addFieldInt32(4,u,0)}static addOpType(i,u){i.addFieldOffset(5,u,0)}static addType(i,u){i.addFieldInt32(6,u,0)}static addExecutionProviderType(i,u){i.addFieldOffset(7,u,0)}static addInputs(i,u){i.addFieldOffset(8,u,0)}static createInputsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startInputsVector(i,u){i.startVector(4,u,4)}static addOutputs(i,u){i.addFieldOffset(9,u,0)}static createOutputsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startOutputsVector(i,u){i.startVector(4,u,4)}static addAttributes(i,u){i.addFieldOffset(10,u,0)}static createAttributesVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startAttributesVector(i,u){i.startVector(4,u,4)}static addInputArgCounts(i,u){i.addFieldOffset(11,u,0)}static createInputArgCountsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addInt32(u[l]);return i.endVector()}static startInputArgCountsVector(i,u){i.startVector(4,u,4)}static addImplicitInputs(i,u){i.addFieldOffset(12,u,0)}static createImplicitInputsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startImplicitInputsVector(i,u){i.startVector(4,u,4)}static endNode(i){return i.endObject()}static createNode(i,u,l,f,p,b,x,I,v,S,L,B,M,Q){return r.startNode(i),r.addName(i,u),r.addDocString(i,l),r.addDomain(i,f),r.addSinceVersion(i,p),r.addIndex(i,b),r.addOpType(i,x),r.addType(i,I),r.addExecutionProviderType(i,v),r.addInputs(i,S),r.addOutputs(i,L),r.addAttributes(i,B),r.addInputArgCounts(i,M),r.addImplicitInputs(i,Q),r.endNode(i)}}o.Node=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsValueInfo(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsValueInfo(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}name(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,i):null}docString(i){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__string(this.bb_pos+u,i):null}type(i){let u=this.bb.__offset(this.bb_pos,8);return u?(i||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startValueInfo(i){i.startObject(3)}static addName(i,u){i.addFieldOffset(0,u,0)}static addDocString(i,u){i.addFieldOffset(1,u,0)}static addType(i,u){i.addFieldOffset(2,u,0)}static endValueInfo(i){return i.endObject()}static createValueInfo(i,u,l,f){return r.startValueInfo(i),r.addName(i,u),r.addDocString(i,l),r.addType(i,f),r.endValueInfo(i)}}o.ValueInfo=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsTypeInfo(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsTypeInfo(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}denotation(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,i):null}valueType(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readUint8(this.bb_pos+i):0}value(i){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__union(i,this.bb_pos+u):null}static startTypeInfo(i){i.startObject(3)}static addDenotation(i,u){i.addFieldOffset(0,u,0)}static addValueType(i,u){i.addFieldInt8(1,u,0)}static addValue(i,u){i.addFieldOffset(2,u,0)}static endTypeInfo(i){return i.endObject()}static createTypeInfo(i,u,l,f){return r.startTypeInfo(i),r.addDenotation(i,u),r.addValueType(i,l),r.addValue(i,f),r.endTypeInfo(i)}}o.TypeInfo=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsOperatorSetId(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsOperatorSetId(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}domain(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,i):null}version(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}static startOperatorSetId(i){i.startObject(2)}static addDomain(i,u){i.addFieldOffset(0,u,0)}static addVersion(i,u){i.addFieldInt64(1,u,i.createLong(0,0))}static endOperatorSetId(i){return i.endObject()}static createOperatorSetId(i,u,l){return r.startOperatorSetId(i),r.addDomain(i,u),r.addVersion(i,l),r.endOperatorSetId(i)}}o.OperatorSetId=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsTensor(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsTensor(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}name(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,i):null}docString(i){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__string(this.bb_pos+u,i):null}dims(i){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.readInt64(this.bb.__vector(this.bb_pos+u)+i*8):this.bb.createLong(0,0)}dimsLength(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__vector_len(this.bb_pos+i):0}dataType(){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readInt32(this.bb_pos+i):0}rawData(i){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.readUint8(this.bb.__vector(this.bb_pos+u)+i):0}rawDataLength(){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.__vector_len(this.bb_pos+i):0}rawDataArray(){let i=this.bb.__offset(this.bb_pos,12);return i?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i),this.bb.__vector_len(this.bb_pos+i)):null}stringData(i,u){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+i*4,u):null}stringDataLength(){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.__vector_len(this.bb_pos+i):0}static startTensor(i){i.startObject(6)}static addName(i,u){i.addFieldOffset(0,u,0)}static addDocString(i,u){i.addFieldOffset(1,u,0)}static addDims(i,u){i.addFieldOffset(2,u,0)}static createDimsVector(i,u){i.startVector(8,u.length,8);for(let l=u.length-1;l>=0;l--)i.addInt64(u[l]);return i.endVector()}static startDimsVector(i,u){i.startVector(8,u,8)}static addDataType(i,u){i.addFieldInt32(3,u,0)}static addRawData(i,u){i.addFieldOffset(4,u,0)}static createRawDataVector(i,u){i.startVector(1,u.length,1);for(let l=u.length-1;l>=0;l--)i.addInt8(u[l]);return i.endVector()}static startRawDataVector(i,u){i.startVector(1,u,1)}static addStringData(i,u){i.addFieldOffset(5,u,0)}static createStringDataVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startStringDataVector(i,u){i.startVector(4,u,4)}static endTensor(i){return i.endObject()}static createTensor(i,u,l,f,p,b,x){return r.startTensor(i),r.addName(i,u),r.addDocString(i,l),r.addDims(i,f),r.addDataType(i,p),r.addRawData(i,b),r.addStringData(i,x),r.endTensor(i)}}o.Tensor=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsSparseTensor(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsSparseTensor(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}values(i){let u=this.bb.__offset(this.bb_pos,4);return u?(i||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}indices(i){let u=this.bb.__offset(this.bb_pos,6);return u?(i||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}dims(i){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.readInt64(this.bb.__vector(this.bb_pos+u)+i*8):this.bb.createLong(0,0)}dimsLength(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__vector_len(this.bb_pos+i):0}static startSparseTensor(i){i.startObject(3)}static addValues(i,u){i.addFieldOffset(0,u,0)}static addIndices(i,u){i.addFieldOffset(1,u,0)}static addDims(i,u){i.addFieldOffset(2,u,0)}static createDimsVector(i,u){i.startVector(8,u.length,8);for(let l=u.length-1;l>=0;l--)i.addInt64(u[l]);return i.endVector()}static startDimsVector(i,u){i.startVector(8,u,8)}static endSparseTensor(i){return i.endObject()}static createSparseTensor(i,u,l,f){return r.startSparseTensor(i),r.addValues(i,u),r.addIndices(i,l),r.addDims(i,f),r.endSparseTensor(i)}}o.SparseTensor=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsAttribute(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsAttribute(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}name(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,i):null}docString(i){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__string(this.bb_pos+u,i):null}type(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.readInt32(this.bb_pos+i):0}f(){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readFloat32(this.bb_pos+i):0}i(){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}s(i){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.__string(this.bb_pos+u,i):null}t(i){let u=this.bb.__offset(this.bb_pos,16);return u?(i||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}g(i){let u=this.bb.__offset(this.bb_pos,18);return u?(i||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}floats(i){let u=this.bb.__offset(this.bb_pos,20);return u?this.bb.readFloat32(this.bb.__vector(this.bb_pos+u)+i*4):0}floatsLength(){let i=this.bb.__offset(this.bb_pos,20);return i?this.bb.__vector_len(this.bb_pos+i):0}floatsArray(){let i=this.bb.__offset(this.bb_pos,20);return i?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i),this.bb.__vector_len(this.bb_pos+i)):null}ints(i){let u=this.bb.__offset(this.bb_pos,22);return u?this.bb.readInt64(this.bb.__vector(this.bb_pos+u)+i*8):this.bb.createLong(0,0)}intsLength(){let i=this.bb.__offset(this.bb_pos,22);return i?this.bb.__vector_len(this.bb_pos+i):0}strings(i,u){let l=this.bb.__offset(this.bb_pos,24);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+i*4,u):null}stringsLength(){let i=this.bb.__offset(this.bb_pos,24);return i?this.bb.__vector_len(this.bb_pos+i):0}tensors(i,u){let l=this.bb.__offset(this.bb_pos,26);return l?(u||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}tensorsLength(){let i=this.bb.__offset(this.bb_pos,26);return i?this.bb.__vector_len(this.bb_pos+i):0}graphs(i,u){let l=this.bb.__offset(this.bb_pos,28);return l?(u||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}graphsLength(){let i=this.bb.__offset(this.bb_pos,28);return i?this.bb.__vector_len(this.bb_pos+i):0}static startAttribute(i){i.startObject(13)}static addName(i,u){i.addFieldOffset(0,u,0)}static addDocString(i,u){i.addFieldOffset(1,u,0)}static addType(i,u){i.addFieldInt32(2,u,0)}static addF(i,u){i.addFieldFloat32(3,u,0)}static addI(i,u){i.addFieldInt64(4,u,i.createLong(0,0))}static addS(i,u){i.addFieldOffset(5,u,0)}static addT(i,u){i.addFieldOffset(6,u,0)}static addG(i,u){i.addFieldOffset(7,u,0)}static addFloats(i,u){i.addFieldOffset(8,u,0)}static createFloatsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addFloat32(u[l]);return i.endVector()}static startFloatsVector(i,u){i.startVector(4,u,4)}static addInts(i,u){i.addFieldOffset(9,u,0)}static createIntsVector(i,u){i.startVector(8,u.length,8);for(let l=u.length-1;l>=0;l--)i.addInt64(u[l]);return i.endVector()}static startIntsVector(i,u){i.startVector(8,u,8)}static addStrings(i,u){i.addFieldOffset(10,u,0)}static createStringsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startStringsVector(i,u){i.startVector(4,u,4)}static addTensors(i,u){i.addFieldOffset(11,u,0)}static createTensorsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startTensorsVector(i,u){i.startVector(4,u,4)}static addGraphs(i,u){i.addFieldOffset(12,u,0)}static createGraphsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startGraphsVector(i,u){i.startVector(4,u,4)}static endAttribute(i){return i.endObject()}static createAttribute(i,u,l,f,p,b,x,I,v,S,L,B,M,Q){return r.startAttribute(i),r.addName(i,u),r.addDocString(i,l),r.addType(i,f),r.addF(i,p),r.addI(i,b),r.addS(i,x),r.addT(i,I),r.addG(i,v),r.addFloats(i,S),r.addInts(i,L),r.addStrings(i,B),r.addTensors(i,M),r.addGraphs(i,Q),r.endAttribute(i)}}o.Attribute=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsGraph(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsGraph(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}initializers(i,u){let l=this.bb.__offset(this.bb_pos,4);return l?(u||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}initializersLength(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__vector_len(this.bb_pos+i):0}nodeArgs(i,u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new t.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}nodeArgsLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}nodes(i,u){let l=this.bb.__offset(this.bb_pos,8);return l?(u||new t.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}nodesLength(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__vector_len(this.bb_pos+i):0}maxNodeIndex(){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readUint32(this.bb_pos+i):0}nodeEdges(i,u){let l=this.bb.__offset(this.bb_pos,12);return l?(u||new t.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}nodeEdgesLength(){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.__vector_len(this.bb_pos+i):0}inputs(i,u){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+i*4,u):null}inputsLength(){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.__vector_len(this.bb_pos+i):0}outputs(i,u){let l=this.bb.__offset(this.bb_pos,16);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+i*4,u):null}outputsLength(){let i=this.bb.__offset(this.bb_pos,16);return i?this.bb.__vector_len(this.bb_pos+i):0}sparseInitializers(i,u){let l=this.bb.__offset(this.bb_pos,18);return l?(u||new t.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}sparseInitializersLength(){let i=this.bb.__offset(this.bb_pos,18);return i?this.bb.__vector_len(this.bb_pos+i):0}static startGraph(i){i.startObject(8)}static addInitializers(i,u){i.addFieldOffset(0,u,0)}static createInitializersVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startInitializersVector(i,u){i.startVector(4,u,4)}static addNodeArgs(i,u){i.addFieldOffset(1,u,0)}static createNodeArgsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startNodeArgsVector(i,u){i.startVector(4,u,4)}static addNodes(i,u){i.addFieldOffset(2,u,0)}static createNodesVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startNodesVector(i,u){i.startVector(4,u,4)}static addMaxNodeIndex(i,u){i.addFieldInt32(3,u,0)}static addNodeEdges(i,u){i.addFieldOffset(4,u,0)}static createNodeEdgesVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startNodeEdgesVector(i,u){i.startVector(4,u,4)}static addInputs(i,u){i.addFieldOffset(5,u,0)}static createInputsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startInputsVector(i,u){i.startVector(4,u,4)}static addOutputs(i,u){i.addFieldOffset(6,u,0)}static createOutputsVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startOutputsVector(i,u){i.startVector(4,u,4)}static addSparseInitializers(i,u){i.addFieldOffset(7,u,0)}static createSparseInitializersVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startSparseInitializersVector(i,u){i.startVector(4,u,4)}static endGraph(i){return i.endObject()}static createGraph(i,u,l,f,p,b,x,I,v){return r.startGraph(i),r.addInitializers(i,u),r.addNodeArgs(i,l),r.addNodes(i,f),r.addMaxNodeIndex(i,p),r.addNodeEdges(i,b),r.addInputs(i,x),r.addOutputs(i,I),r.addSparseInitializers(i,v),r.endGraph(i)}}o.Graph=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsModel(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsModel(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}irVersion(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}opsetImport(i,u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new t.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}opsetImportLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}producerName(i){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__string(this.bb_pos+u,i):null}producerVersion(i){let u=this.bb.__offset(this.bb_pos,10);return u?this.bb.__string(this.bb_pos+u,i):null}domain(i){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.__string(this.bb_pos+u,i):null}modelVersion(){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}docString(i){let u=this.bb.__offset(this.bb_pos,16);return u?this.bb.__string(this.bb_pos+u,i):null}graph(i){let u=this.bb.__offset(this.bb_pos,18);return u?(i||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}graphDocString(i){let u=this.bb.__offset(this.bb_pos,20);return u?this.bb.__string(this.bb_pos+u,i):null}static startModel(i){i.startObject(9)}static addIrVersion(i,u){i.addFieldInt64(0,u,i.createLong(0,0))}static addOpsetImport(i,u){i.addFieldOffset(1,u,0)}static createOpsetImportVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startOpsetImportVector(i,u){i.startVector(4,u,4)}static addProducerName(i,u){i.addFieldOffset(2,u,0)}static addProducerVersion(i,u){i.addFieldOffset(3,u,0)}static addDomain(i,u){i.addFieldOffset(4,u,0)}static addModelVersion(i,u){i.addFieldInt64(5,u,i.createLong(0,0))}static addDocString(i,u){i.addFieldOffset(6,u,0)}static addGraph(i,u){i.addFieldOffset(7,u,0)}static addGraphDocString(i,u){i.addFieldOffset(8,u,0)}static endModel(i){return i.endObject()}static createModel(i,u,l,f,p,b,x,I,v,S){return r.startModel(i),r.addIrVersion(i,u),r.addOpsetImport(i,l),r.addProducerName(i,f),r.addProducerVersion(i,p),r.addDomain(i,b),r.addModelVersion(i,x),r.addDocString(i,I),r.addGraph(i,v),r.addGraphDocString(i,S),r.endModel(i)}}o.Model=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsKernelCreateInfos(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsKernelCreateInfos(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}nodeIndices(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readUint32(this.bb.__vector(this.bb_pos+u)+i*4):0}nodeIndicesLength(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__vector_len(this.bb_pos+i):0}nodeIndicesArray(){let i=this.bb.__offset(this.bb_pos,4);return i?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i),this.bb.__vector_len(this.bb_pos+i)):null}kernelDefHashes(i){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.readUint64(this.bb.__vector(this.bb_pos+u)+i*8):this.bb.createLong(0,0)}kernelDefHashesLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}static startKernelCreateInfos(i){i.startObject(2)}static addNodeIndices(i,u){i.addFieldOffset(0,u,0)}static createNodeIndicesVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addInt32(u[l]);return i.endVector()}static startNodeIndicesVector(i,u){i.startVector(4,u,4)}static addKernelDefHashes(i,u){i.addFieldOffset(1,u,0)}static createKernelDefHashesVector(i,u){i.startVector(8,u.length,8);for(let l=u.length-1;l>=0;l--)i.addInt64(u[l]);return i.endVector()}static startKernelDefHashesVector(i,u){i.startVector(8,u,8)}static endKernelCreateInfos(i){return i.endObject()}static createKernelCreateInfos(i,u,l){return r.startKernelCreateInfos(i),r.addNodeIndices(i,u),r.addKernelDefHashes(i,l),r.endKernelCreateInfos(i)}}o.KernelCreateInfos=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsSubGraphSessionState(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsSubGraphSessionState(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}graphId(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,i):null}sessionState(i){let u=this.bb.__offset(this.bb_pos,6);return u?(i||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startSubGraphSessionState(i){i.startObject(2)}static addGraphId(i,u){i.addFieldOffset(0,u,0)}static addSessionState(i,u){i.addFieldOffset(1,u,0)}static endSubGraphSessionState(i){let u=i.endObject();return i.requiredField(u,4),u}static createSubGraphSessionState(i,u,l){return r.startSubGraphSessionState(i),r.addGraphId(i,u),r.addSessionState(i,l),r.endSubGraphSessionState(i)}}o.SubGraphSessionState=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsSessionState(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsSessionState(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}kernels(i){let u=this.bb.__offset(this.bb_pos,4);return u?(i||new t.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}subGraphSessionStates(i,u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new t.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+i*4),this.bb):null}subGraphSessionStatesLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}static startSessionState(i){i.startObject(2)}static addKernels(i,u){i.addFieldOffset(0,u,0)}static addSubGraphSessionStates(i,u){i.addFieldOffset(1,u,0)}static createSubGraphSessionStatesVector(i,u){i.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)i.addOffset(u[l]);return i.endVector()}static startSubGraphSessionStatesVector(i,u){i.startVector(4,u,4)}static endSessionState(i){return i.endObject()}static createSessionState(i,u,l){return r.startSessionState(i),r.addKernels(i,u),r.addSubGraphSessionStates(i,l),r.endSessionState(i)}}o.SessionState=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={});(t=>{let a;(e=>{let n;(o=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(i,u){return this.bb_pos=i,this.bb=u,this}static getRootAsInferenceSession(i,u){return(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsInferenceSession(i,u){return i.setPosition(i.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(i.readInt32(i.position())+i.position(),i)}static bufferHasIdentifier(i){return i.__has_identifier("ORTM")}ortVersion(i){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,i):null}model(i){let u=this.bb.__offset(this.bb_pos,6);return u?(i||new t.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}sessionState(i){let u=this.bb.__offset(this.bb_pos,8);return u?(i||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startInferenceSession(i){i.startObject(3)}static addOrtVersion(i,u){i.addFieldOffset(0,u,0)}static addModel(i,u){i.addFieldOffset(1,u,0)}static addSessionState(i,u){i.addFieldOffset(2,u,0)}static endInferenceSession(i){return i.endObject()}static finishInferenceSessionBuffer(i,u){i.finish(u,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(i,u){i.finish(u,"ORTM",!0)}static createInferenceSession(i,u,l,f){return r.startInferenceSession(i),r.addOrtVersion(i,u),r.addModel(i,l),r.addSessionState(i,f),r.endInferenceSession(i)}}o.InferenceSession=r})(n=e.fbs||={})})(a=t.experimental||={})})(j||={})});var Ms=be((yy,Ns)=>{"use strict";Ns.exports=Gd;function Gd(a,t){for(var n=new Array(arguments.length-1),e=0,r=2,o=!0;r<arguments.length;)n[e++]=arguments[r++];return new Promise(function(i,u){n[e]=function(f){if(o)if(o=!1,f)u(f);else{for(var p=new Array(arguments.length-1),b=0;b<p.length;)p[b++]=arguments[b];i.apply(null,p)}};try{a.apply(t||null,n)}catch(l){o&&(o=!1,u(l))}})}});var Ws=be(zs=>{"use strict";var Vn=zs;Vn.length=function(t){var n=t.length;if(!n)return 0;for(var e=0;--n%4>1&&t.charAt(n)==="=";)++e;return Math.ceil(t.length*3)/4-e};var Cr=new Array(64),Us=new Array(123);for(_t=0;_t<64;)Us[Cr[_t]=_t<26?_t+65:_t<52?_t+71:_t<62?_t-4:_t-59|43]=_t++;var _t;Vn.encode=function(t,n,e){for(var r=null,o=[],s=0,i=0,u;n<e;){var l=t[n++];switch(i){case 0:o[s++]=Cr[l>>2],u=(l&3)<<4,i=1;break;case 1:o[s++]=Cr[u|l>>4],u=(l&15)<<2,i=2;break;case 2:o[s++]=Cr[u|l>>6],o[s++]=Cr[l&63],i=0;break}s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,o)),s=0)}return i&&(o[s++]=Cr[u],o[s++]=61,i===1&&(o[s++]=61)),r?(s&&r.push(String.fromCharCode.apply(String,o.slice(0,s))),r.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var Gs="invalid encoding";Vn.decode=function(t,n,e){for(var r=e,o=0,s,i=0;i<t.length;){var u=t.charCodeAt(i++);if(u===61&&o>1)break;if((u=Us[u])===void 0)throw Error(Gs);switch(o){case 0:s=u,o=1;break;case 1:n[e++]=s<<2|(u&48)>>4,s=u,o=2;break;case 2:n[e++]=(s&15)<<4|(u&60)>>2,s=u,o=3;break;case 3:n[e++]=(s&3)<<6|u,o=0;break}}if(o===1)throw Error(Gs);return e-r};Vn.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}});var Hs=be((xy,Vs)=>{"use strict";Vs.exports=Hn;function Hn(){this._listeners={}}Hn.prototype.on=function(t,n,e){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:n,ctx:e||this}),this};Hn.prototype.off=function(t,n){if(t===void 0)this._listeners={};else if(n===void 0)this._listeners[t]=[];else for(var e=this._listeners[t],r=0;r<e.length;)e[r].fn===n?e.splice(r,1):++r;return this};Hn.prototype.emit=function(t){var n=this._listeners[t];if(n){for(var e=[],r=1;r<arguments.length;)e.push(arguments[r++]);for(r=0;r<n.length;)n[r].fn.apply(n[r++].ctx,e)}return this}});var Zs=be((vy,Js)=>{"use strict";Js.exports=js(js);function js(a){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),e=n[3]===128;function r(u,l,f){t[0]=u,l[f]=n[0],l[f+1]=n[1],l[f+2]=n[2],l[f+3]=n[3]}function o(u,l,f){t[0]=u,l[f]=n[3],l[f+1]=n[2],l[f+2]=n[1],l[f+3]=n[0]}a.writeFloatLE=e?r:o,a.writeFloatBE=e?o:r;function s(u,l){return n[0]=u[l],n[1]=u[l+1],n[2]=u[l+2],n[3]=u[l+3],t[0]}function i(u,l){return n[3]=u[l],n[2]=u[l+1],n[1]=u[l+2],n[0]=u[l+3],t[0]}a.readFloatLE=e?s:i,a.readFloatBE=e?i:s}():function(){function t(e,r,o,s){var i=r<0?1:0;if(i&&(r=-r),r===0)e(1/r>0?0:2147483648,o,s);else if(isNaN(r))e(2143289344,o,s);else if(r>34028234663852886e22)e((i<<31|2139095040)>>>0,o,s);else if(r<11754943508222875e-54)e((i<<31|Math.round(r/1401298464324817e-60))>>>0,o,s);else{var u=Math.floor(Math.log(r)/Math.LN2),l=Math.round(r*Math.pow(2,-u)*8388608)&8388607;e((i<<31|u+127<<23|l)>>>0,o,s)}}a.writeFloatLE=t.bind(null,qs),a.writeFloatBE=t.bind(null,Ys);function n(e,r,o){var s=e(r,o),i=(s>>31)*2+1,u=s>>>23&255,l=s&8388607;return u===255?l?NaN:i*(1/0):u===0?i*1401298464324817e-60*l:i*Math.pow(2,u-150)*(l+8388608)}a.readFloatLE=n.bind(null,Xs),a.readFloatBE=n.bind(null,Ks)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),e=n[7]===128;function r(u,l,f){t[0]=u,l[f]=n[0],l[f+1]=n[1],l[f+2]=n[2],l[f+3]=n[3],l[f+4]=n[4],l[f+5]=n[5],l[f+6]=n[6],l[f+7]=n[7]}function o(u,l,f){t[0]=u,l[f]=n[7],l[f+1]=n[6],l[f+2]=n[5],l[f+3]=n[4],l[f+4]=n[3],l[f+5]=n[2],l[f+6]=n[1],l[f+7]=n[0]}a.writeDoubleLE=e?r:o,a.writeDoubleBE=e?o:r;function s(u,l){return n[0]=u[l],n[1]=u[l+1],n[2]=u[l+2],n[3]=u[l+3],n[4]=u[l+4],n[5]=u[l+5],n[6]=u[l+6],n[7]=u[l+7],t[0]}function i(u,l){return n[7]=u[l],n[6]=u[l+1],n[5]=u[l+2],n[4]=u[l+3],n[3]=u[l+4],n[2]=u[l+5],n[1]=u[l+6],n[0]=u[l+7],t[0]}a.readDoubleLE=e?s:i,a.readDoubleBE=e?i:s}():function(){function t(e,r,o,s,i,u){var l=s<0?1:0;if(l&&(s=-s),s===0)e(0,i,u+r),e(1/s>0?0:2147483648,i,u+o);else if(isNaN(s))e(0,i,u+r),e(2146959360,i,u+o);else if(s>17976931348623157e292)e(0,i,u+r),e((l<<31|2146435072)>>>0,i,u+o);else{var f;if(s<22250738585072014e-324)f=s/5e-324,e(f>>>0,i,u+r),e((l<<31|f/4294967296)>>>0,i,u+o);else{var p=Math.floor(Math.log(s)/Math.LN2);p===1024&&(p=1023),f=s*Math.pow(2,-p),e(f*4503599627370496>>>0,i,u+r),e((l<<31|p+1023<<20|f*1048576&1048575)>>>0,i,u+o)}}}a.writeDoubleLE=t.bind(null,qs,0,4),a.writeDoubleBE=t.bind(null,Ys,4,0);function n(e,r,o,s,i){var u=e(s,i+r),l=e(s,i+o),f=(l>>31)*2+1,p=l>>>20&2047,b=4294967296*(l&1048575)+u;return p===2047?b?NaN:f*(1/0):p===0?f*5e-324*b:f*Math.pow(2,p-1075)*(b+4503599627370496)}a.readDoubleLE=n.bind(null,Xs,0,4),a.readDoubleBE=n.bind(null,Ks,4,0)}(),a}function qs(a,t,n){t[n]=a&255,t[n+1]=a>>>8&255,t[n+2]=a>>>16&255,t[n+3]=a>>>24}function Ys(a,t,n){t[n]=a>>>24,t[n+1]=a>>>16&255,t[n+2]=a>>>8&255,t[n+3]=a&255}function Xs(a,t){return(a[t]|a[t+1]<<8|a[t+2]<<16|a[t+3]<<24)>>>0}function Ks(a,t){return(a[t]<<24|a[t+1]<<16|a[t+2]<<8|a[t+3])>>>0}});var Qs=be((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(a){}return null}});var tu=be(eu=>{"use strict";var Zo=eu;Zo.length=function(t){for(var n=0,e=0,r=0;r<t.length;++r)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:(e&64512)===55296&&(t.charCodeAt(r+1)&64512)===56320?(++r,n+=4):n+=3;return n};Zo.read=function(t,n,e){var r=e-n;if(r<1)return"";for(var o=null,s=[],i=0,u;n<e;)u=t[n++],u<128?s[i++]=u:u>191&&u<224?s[i++]=(u&31)<<6|t[n++]&63:u>239&&u<365?(u=((u&7)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,s[i++]=55296+(u>>10),s[i++]=56320+(u&1023)):s[i++]=(u&15)<<12|(t[n++]&63)<<6|t[n++]&63,i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),i=0);return o?(i&&o.push(String.fromCharCode.apply(String,s.slice(0,i))),o.join("")):String.fromCharCode.apply(String,s.slice(0,i))};Zo.write=function(t,n,e){for(var r=e,o,s,i=0;i<t.length;++i)o=t.charCodeAt(i),o<128?n[e++]=o:o<2048?(n[e++]=o>>6|192,n[e++]=o&63|128):(o&64512)===55296&&((s=t.charCodeAt(i+1))&64512)===56320?(o=65536+((o&1023)<<10)+(s&1023),++i,n[e++]=o>>18|240,n[e++]=o>>12&63|128,n[e++]=o>>6&63|128,n[e++]=o&63|128):(n[e++]=o>>12|224,n[e++]=o>>6&63|128,n[e++]=o&63|128);return e-r}});var nu=be((_y,ru)=>{"use strict";ru.exports=Ud;function Ud(a,t,n){var e=n||8192,r=e>>>1,o=null,s=e;return function(u){if(u<1||u>r)return a(u);s+u>e&&(o=a(e),s=0);var l=t.call(o,s,s+=u);return s&7&&(s=(s|7)+1),l}}});var iu=be((Oy,ou)=>{"use strict";ou.exports=Ue;var rn=Jt();function Ue(a,t){this.lo=a>>>0,this.hi=t>>>0}var ur=Ue.zero=new Ue(0,0);ur.toNumber=function(){return 0};ur.zzEncode=ur.zzDecode=function(){return this};ur.length=function(){return 1};var zd=Ue.zeroHash="\0\0\0\0\0\0\0\0";Ue.fromNumber=function(t){if(t===0)return ur;var n=t<0;n&&(t=-t);var e=t>>>0,r=(t-e)/4294967296>>>0;return n&&(r=~r>>>0,e=~e>>>0,++e>4294967295&&(e=0,++r>4294967295&&(r=0))),new Ue(e,r)};Ue.from=function(t){if(typeof t=="number")return Ue.fromNumber(t);if(rn.isString(t))if(rn.Long)t=rn.Long.fromString(t);else return Ue.fromNumber(parseInt(t,10));return t.low||t.high?new Ue(t.low>>>0,t.high>>>0):ur};Ue.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var n=~this.lo+1>>>0,e=~this.hi>>>0;return n||(e=e+1>>>0),-(n+e*4294967296)}return this.lo+this.hi*4294967296};Ue.prototype.toLong=function(t){return rn.Long?new rn.Long(this.lo|0,this.hi|0,!!t):{low:this.lo|0,high:this.hi|0,unsigned:!!t}};var Kt=String.prototype.charCodeAt;Ue.fromHash=function(t){return t===zd?ur:new Ue((Kt.call(t,0)|Kt.call(t,1)<<8|Kt.call(t,2)<<16|Kt.call(t,3)<<24)>>>0,(Kt.call(t,4)|Kt.call(t,5)<<8|Kt.call(t,6)<<16|Kt.call(t,7)<<24)>>>0)};Ue.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Ue.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};Ue.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};Ue.prototype.length=function(){var t=this.lo,n=(this.lo>>>28|this.hi<<4)>>>0,e=this.hi>>>24;return e===0?n===0?t<16384?t<128?1:2:t<2097152?3:4:n<16384?n<128?5:6:n<2097152?7:8:e<128?9:10}});var Jt=be(Qo=>{"use strict";var q=Qo;q.asPromise=Ms();q.base64=Ws();q.EventEmitter=Hs();q.float=Zs();q.inquire=Qs();q.utf8=tu();q.pool=nu();q.LongBits=iu();q.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);q.global=q.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||Qo;q.emptyArray=Object.freeze?Object.freeze([]):[];q.emptyObject=Object.freeze?Object.freeze({}):{};q.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};q.isString=function(t){return typeof t=="string"||t instanceof String};q.isObject=function(t){return t&&typeof t=="object"};q.isset=q.isSet=function(t,n){var e=t[n];return e!=null&&t.hasOwnProperty(n)?typeof e!="object"||(Array.isArray(e)?e.length:Object.keys(e).length)>0:!1};q.Buffer=function(){try{var a=q.inquire("buffer").Buffer;return a.prototype.utf8Write?a:null}catch{return null}}();q._Buffer_from=null;q._Buffer_allocUnsafe=null;q.newBuffer=function(t){return typeof t=="number"?q.Buffer?q._Buffer_allocUnsafe(t):new q.Array(t):q.Buffer?q._Buffer_from(t):typeof Uint8Array>"u"?t:new Uint8Array(t)};q.Array=typeof Uint8Array<"u"?Uint8Array:Array;q.Long=q.global.dcodeIO&&q.global.dcodeIO.Long||q.global.Long||q.inquire("long");q.key2Re=/^true|false|0|1$/;q.key32Re=/^-?(?:0|[1-9][0-9]*)$/;q.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;q.longToHash=function(t){return t?q.LongBits.from(t).toHash():q.LongBits.zeroHash};q.longFromHash=function(t,n){var e=q.LongBits.fromHash(t);return q.Long?q.Long.fromBits(e.lo,e.hi,n):e.toNumber(!!n)};function au(a,t,n){for(var e=Object.keys(t),r=0;r<e.length;++r)(a[e[r]]===void 0||!n)&&(a[e[r]]=t[e[r]]);return a}q.merge=au;q.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function su(a){function t(n,e){if(!(this instanceof t))return new t(n,e);Object.defineProperty(this,"message",{get:function(){return n}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),e&&au(this,e)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return a},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}q.newError=su;q.ProtocolError=su("ProtocolError");q.oneOfGetter=function(t){for(var n={},e=0;e<t.length;++e)n[t[e]]=1;return function(){for(var r=Object.keys(this),o=r.length-1;o>-1;--o)if(n[r[o]]===1&&this[r[o]]!==void 0&&this[r[o]]!==null)return r[o]}};q.oneOfSetter=function(t){return function(n){for(var e=0;e<t.length;++e)t[e]!==n&&delete this[t[e]]}};q.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};q._configure=function(){var a=q.Buffer;if(!a){q._Buffer_from=q._Buffer_allocUnsafe=null;return}q._Buffer_from=a.from!==Uint8Array.from&&a.from||function(n,e){return new a(n,e)},q._Buffer_allocUnsafe=a.allocUnsafe||function(n){return new a(n)}}});var ai=be((Sy,cu)=>{"use strict";cu.exports=ie;var pt=Jt(),ei,jn=pt.LongBits,uu=pt.base64,lu=pt.utf8;function nn(a,t,n){this.fn=a,this.len=t,this.next=void 0,this.val=n}function ri(){}function Wd(a){this.head=a.head,this.tail=a.tail,this.len=a.len,this.next=a.states}function ie(){this.len=0,this.head=new nn(ri,0,0),this.tail=this.head,this.states=null}var fu=function(){return pt.Buffer?function(){return(ie.create=function(){return new ei})()}:function(){return new ie}};ie.create=fu();ie.alloc=function(t){return new pt.Array(t)};pt.Array!==Array&&(ie.alloc=pt.pool(ie.alloc,pt.Array.prototype.subarray));ie.prototype._push=function(t,n,e){return this.tail=this.tail.next=new nn(t,n,e),this.len+=n,this};function ni(a,t,n){t[n]=a&255}function Vd(a,t,n){for(;a>127;)t[n++]=a&127|128,a>>>=7;t[n]=a}function oi(a,t){this.len=a,this.next=void 0,this.val=t}oi.prototype=Object.create(nn.prototype);oi.prototype.fn=Vd;ie.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new oi((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};ie.prototype.int32=function(t){return t<0?this._push(ii,10,jn.fromNumber(t)):this.uint32(t)};ie.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function ii(a,t,n){for(;a.hi;)t[n++]=a.lo&127|128,a.lo=(a.lo>>>7|a.hi<<25)>>>0,a.hi>>>=7;for(;a.lo>127;)t[n++]=a.lo&127|128,a.lo=a.lo>>>7;t[n++]=a.lo}ie.prototype.uint64=function(t){var n=jn.from(t);return this._push(ii,n.length(),n)};ie.prototype.int64=ie.prototype.uint64;ie.prototype.sint64=function(t){var n=jn.from(t).zzEncode();return this._push(ii,n.length(),n)};ie.prototype.bool=function(t){return this._push(ni,1,t?1:0)};function ti(a,t,n){t[n]=a&255,t[n+1]=a>>>8&255,t[n+2]=a>>>16&255,t[n+3]=a>>>24}ie.prototype.fixed32=function(t){return this._push(ti,4,t>>>0)};ie.prototype.sfixed32=ie.prototype.fixed32;ie.prototype.fixed64=function(t){var n=jn.from(t);return this._push(ti,4,n.lo)._push(ti,4,n.hi)};ie.prototype.sfixed64=ie.prototype.fixed64;ie.prototype.float=function(t){return this._push(pt.float.writeFloatLE,4,t)};ie.prototype.double=function(t){return this._push(pt.float.writeDoubleLE,8,t)};var Hd=pt.Array.prototype.set?function(t,n,e){n.set(t,e)}:function(t,n,e){for(var r=0;r<t.length;++r)n[e+r]=t[r]};ie.prototype.bytes=function(t){var n=t.length>>>0;if(!n)return this._push(ni,1,0);if(pt.isString(t)){var e=ie.alloc(n=uu.length(t));uu.decode(t,e,0),t=e}return this.uint32(n)._push(Hd,n,t)};ie.prototype.string=function(t){var n=lu.length(t);return n?this.uint32(n)._push(lu.write,n,t):this._push(ni,1,0)};ie.prototype.fork=function(){return this.states=new Wd(this),this.head=this.tail=new nn(ri,0,0),this.len=0,this};ie.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new nn(ri,0,0),this.len=0),this};ie.prototype.ldelim=function(){var t=this.head,n=this.tail,e=this.len;return this.reset().uint32(e),e&&(this.tail.next=t.next,this.tail=n,this.len+=e),this};ie.prototype.finish=function(){for(var t=this.head.next,n=this.constructor.alloc(this.len),e=0;t;)t.fn(t.val,n,e),e+=t.len,t=t.next;return n};ie._configure=function(a){ei=a,ie.create=fu(),ei._configure()}});var hu=be((Ay,du)=>{"use strict";du.exports=Et;var pu=ai();(Et.prototype=Object.create(pu.prototype)).constructor=Et;var Zt=Jt();function Et(){pu.call(this)}Et._configure=function(){Et.alloc=Zt._Buffer_allocUnsafe,Et.writeBytesBuffer=Zt.Buffer&&Zt.Buffer.prototype instanceof Uint8Array&&Zt.Buffer.prototype.set.name==="set"?function(t,n,e){n.set(t,e)}:function(t,n,e){if(t.copy)t.copy(n,e,0,t.length);else for(var r=0;r<t.length;)n[e++]=t[r++]}};Et.prototype.bytes=function(t){Zt.isString(t)&&(t=Zt._Buffer_from(t,"base64"));var n=t.length>>>0;return this.uint32(n),n&&this._push(Et.writeBytesBuffer,n,t),this};function jd(a,t,n){a.length<40?Zt.utf8.write(a,t,n):t.utf8Write?t.utf8Write(a,n):t.write(a,n)}Et.prototype.string=function(t){var n=Zt.Buffer.byteLength(t);return this.uint32(n),n&&this._push(jd,n,t),this};Et._configure()});var li=be((Py,Tu)=>{"use strict";Tu.exports=Pe;var Dt=Jt(),ui,gu=Dt.LongBits,qd=Dt.utf8;function Ot(a,t){return RangeError("index out of range: "+a.pos+" + "+(t||1)+" > "+a.len)}function Pe(a){this.buf=a,this.pos=0,this.len=a.length}var mu=typeof Uint8Array<"u"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new Pe(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new Pe(t);throw Error("illegal buffer")},yu=function(){return Dt.Buffer?function(n){return(Pe.create=function(r){return Dt.Buffer.isBuffer(r)?new ui(r):mu(r)})(n)}:mu};Pe.create=yu();Pe.prototype._slice=Dt.Array.prototype.subarray||Dt.Array.prototype.slice;Pe.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Ot(this,10);return t}}();Pe.prototype.int32=function(){return this.uint32()|0};Pe.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function si(){var a=new gu(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(a.lo=(a.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return a;if(a.lo=(a.lo|(this.buf[this.pos]&127)<<28)>>>0,a.hi=(a.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return a;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw Ot(this);if(a.lo=(a.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return a}return a.lo=(a.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,a}if(this.len-this.pos>4){for(;t<5;++t)if(a.hi=(a.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return a}else for(;t<5;++t){if(this.pos>=this.len)throw Ot(this);if(a.hi=(a.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return a}throw Error("invalid varint encoding")}Pe.prototype.bool=function(){return this.uint32()!==0};function qn(a,t){return(a[t-4]|a[t-3]<<8|a[t-2]<<16|a[t-1]<<24)>>>0}Pe.prototype.fixed32=function(){if(this.pos+4>this.len)throw Ot(this,4);return qn(this.buf,this.pos+=4)};Pe.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Ot(this,4);return qn(this.buf,this.pos+=4)|0};function bu(){if(this.pos+8>this.len)throw Ot(this,8);return new gu(qn(this.buf,this.pos+=4),qn(this.buf,this.pos+=4))}Pe.prototype.float=function(){if(this.pos+4>this.len)throw Ot(this,4);var t=Dt.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};Pe.prototype.double=function(){if(this.pos+8>this.len)throw Ot(this,4);var t=Dt.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};Pe.prototype.bytes=function(){var t=this.uint32(),n=this.pos,e=this.pos+t;if(e>this.len)throw Ot(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(n,e):n===e?new this.buf.constructor(0):this._slice.call(this.buf,n,e)};Pe.prototype.string=function(){var t=this.bytes();return qd.read(t,0,t.length)};Pe.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw Ot(this,t);this.pos+=t}else do if(this.pos>=this.len)throw Ot(this);while(this.buf[this.pos++]&128);return this};Pe.prototype.skipType=function(a){switch(a){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(a=this.uint32()&7)!==4;)this.skipType(a);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+a+" at offset "+this.pos)}return this};Pe._configure=function(a){ui=a,Pe.create=yu(),ui._configure();var t=Dt.Long?"toLong":"toNumber";Dt.merge(Pe.prototype,{int64:function(){return si.call(this)[t](!1)},uint64:function(){return si.call(this)[t](!0)},sint64:function(){return si.call(this).zzDecode()[t](!1)},fixed64:function(){return bu.call(this)[t](!0)},sfixed64:function(){return bu.call(this)[t](!1)}})}});var _u=be((Ey,wu)=>{"use strict";wu.exports=lr;var vu=li();(lr.prototype=Object.create(vu.prototype)).constructor=lr;var xu=Jt();function lr(a){vu.call(this,a)}lr._configure=function(){xu.Buffer&&(lr.prototype._slice=xu.Buffer.prototype.slice)};lr.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};lr._configure()});var Iu=be((Dy,Ou)=>{"use strict";Ou.exports=on;var fi=Jt();(on.prototype=Object.create(fi.EventEmitter.prototype)).constructor=on;function on(a,t,n){if(typeof a!="function")throw TypeError("rpcImpl must be a function");fi.EventEmitter.call(this),this.rpcImpl=a,this.requestDelimited=!!t,this.responseDelimited=!!n}on.prototype.rpcCall=function a(t,n,e,r,o){if(!r)throw TypeError("request must be specified");var s=this;if(!o)return fi.asPromise(a,s,t,n,e,r);if(!s.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(u,l){if(u)return s.emit("error",u,t),o(u);if(l===null){s.end(!0);return}if(!(l instanceof e))try{l=e[s.responseDelimited?"decodeDelimited":"decode"](l)}catch(f){return s.emit("error",f,t),o(f)}return s.emit("data",l,t),o(null,l)})}catch(i){s.emit("error",i,t),setTimeout(function(){o(i)},0);return}};on.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Au=be(Su=>{"use strict";var Yd=Su;Yd.Service=Iu()});var Eu=be((Fy,Pu)=>{"use strict";Pu.exports={}});var Fu=be(Lu=>{"use strict";var rt=Lu;rt.build="minimal";rt.Writer=ai();rt.BufferWriter=hu();rt.Reader=li();rt.BufferReader=_u();rt.util=Jt();rt.rpc=Au();rt.roots=Eu();rt.configure=Du;function Du(){rt.util._configure(),rt.Writer._configure(rt.BufferWriter),rt.Reader._configure(rt.BufferReader)}Du()});var ku=be((ky,Cu)=>{"use strict";Cu.exports=Fu()});var kr=be(($y,$u)=>{"use strict";var ye=ku(),R=ye.Reader,Ee=ye.Writer,y=ye.util,h=ye.roots.default||(ye.roots.default={});h.onnx=function(){var a={};return a.Version=function(){var t={},n=Object.create(t);return n[t[0]="_START_VERSION"]=0,n[t[1]="IR_VERSION_2017_10_10"]=1,n[t[2]="IR_VERSION_2017_10_30"]=2,n[t[3]="IR_VERSION_2017_11_3"]=3,n[t[4]="IR_VERSION_2019_1_22"]=4,n[t[5]="IR_VERSION_2019_3_18"]=5,n[t[6]="IR_VERSION_2019_9_19"]=6,n[t[7]="IR_VERSION_2020_5_8"]=7,n[t[8]="IR_VERSION_2021_7_30"]=8,n[t[9]="IR_VERSION"]=9,n}(),a.AttributeProto=function(){function t(n){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],n)for(var e=Object.keys(n),r=0;r<e.length;++r)n[e[r]]!=null&&(this[e[r]]=n[e[r]])}return t.prototype.name="",t.prototype.refAttrName="",t.prototype.docString="",t.prototype.type=0,t.prototype.f=0,t.prototype.i=y.Long?y.Long.fromBits(0,0,!1):0,t.prototype.s=y.newBuffer([]),t.prototype.t=null,t.prototype.g=null,t.prototype.sparseTensor=null,t.prototype.tp=null,t.prototype.floats=y.emptyArray,t.prototype.ints=y.emptyArray,t.prototype.strings=y.emptyArray,t.prototype.tensors=y.emptyArray,t.prototype.graphs=y.emptyArray,t.prototype.sparseTensors=y.emptyArray,t.prototype.typeProtos=y.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ee.create()),e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(10).string(e.name),e.f!=null&&Object.hasOwnProperty.call(e,"f")&&r.uint32(21).float(e.f),e.i!=null&&Object.hasOwnProperty.call(e,"i")&&r.uint32(24).int64(e.i),e.s!=null&&Object.hasOwnProperty.call(e,"s")&&r.uint32(34).bytes(e.s),e.t!=null&&Object.hasOwnProperty.call(e,"t")&&h.onnx.TensorProto.encode(e.t,r.uint32(42).fork()).ldelim(),e.g!=null&&Object.hasOwnProperty.call(e,"g")&&h.onnx.GraphProto.encode(e.g,r.uint32(50).fork()).ldelim(),e.floats!=null&&e.floats.length){r.uint32(58).fork();for(var o=0;o<e.floats.length;++o)r.float(e.floats[o]);r.ldelim()}if(e.ints!=null&&e.ints.length){r.uint32(66).fork();for(var o=0;o<e.ints.length;++o)r.int64(e.ints[o]);r.ldelim()}if(e.strings!=null&&e.strings.length)for(var o=0;o<e.strings.length;++o)r.uint32(74).bytes(e.strings[o]);if(e.tensors!=null&&e.tensors.length)for(var o=0;o<e.tensors.length;++o)h.onnx.TensorProto.encode(e.tensors[o],r.uint32(82).fork()).ldelim();if(e.graphs!=null&&e.graphs.length)for(var o=0;o<e.graphs.length;++o)h.onnx.GraphProto.encode(e.graphs[o],r.uint32(90).fork()).ldelim();if(e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(106).string(e.docString),e.tp!=null&&Object.hasOwnProperty.call(e,"tp")&&h.onnx.TypeProto.encode(e.tp,r.uint32(114).fork()).ldelim(),e.typeProtos!=null&&e.typeProtos.length)for(var o=0;o<e.typeProtos.length;++o)h.onnx.TypeProto.encode(e.typeProtos[o],r.uint32(122).fork()).ldelim();if(e.type!=null&&Object.hasOwnProperty.call(e,"type")&&r.uint32(160).int32(e.type),e.refAttrName!=null&&Object.hasOwnProperty.call(e,"refAttrName")&&r.uint32(170).string(e.refAttrName),e.sparseTensor!=null&&Object.hasOwnProperty.call(e,"sparseTensor")&&h.onnx.SparseTensorProto.encode(e.sparseTensor,r.uint32(178).fork()).ldelim(),e.sparseTensors!=null&&e.sparseTensors.length)for(var o=0;o<e.sparseTensors.length;++o)h.onnx.SparseTensorProto.encode(e.sparseTensors[o],r.uint32(186).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof R||(e=R.create(e));for(var o=r===void 0?e.len:e.pos+r,s=new h.onnx.AttributeProto;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:{s.name=e.string();break}case 21:{s.refAttrName=e.string();break}case 13:{s.docString=e.string();break}case 20:{s.type=e.int32();break}case 2:{s.f=e.float();break}case 3:{s.i=e.int64();break}case 4:{s.s=e.bytes();break}case 5:{s.t=h.onnx.TensorProto.decode(e,e.uint32());break}case 6:{s.g=h.onnx.GraphProto.decode(e,e.uint32());break}case 22:{s.sparseTensor=h.onnx.SparseTensorProto.decode(e,e.uint32());break}case 14:{s.tp=h.onnx.TypeProto.decode(e,e.uint32());break}case 7:{if(s.floats&&s.floats.length||(s.floats=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.floats.push(e.float());else s.floats.push(e.float());break}case 8:{if(s.ints&&s.ints.length||(s.ints=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.ints.push(e.int64());else s.ints.push(e.int64());break}case 9:{s.strings&&s.strings.length||(s.strings=[]),s.strings.push(e.bytes());break}case 10:{s.tensors&&s.tensors.length||(s.tensors=[]),s.tensors.push(h.onnx.TensorProto.decode(e,e.uint32()));break}case 11:{s.graphs&&s.graphs.length||(s.graphs=[]),s.graphs.push(h.onnx.GraphProto.decode(e,e.uint32()));break}case 23:{s.sparseTensors&&s.sparseTensors.length||(s.sparseTensors=[]),s.sparseTensors.push(h.onnx.SparseTensorProto.decode(e,e.uint32()));break}case 15:{s.typeProtos&&s.typeProtos.length||(s.typeProtos=[]),s.typeProtos.push(h.onnx.TypeProto.decode(e,e.uint32()));break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.name!=null&&e.hasOwnProperty("name")&&!y.isString(e.name))return"name: string expected";if(e.refAttrName!=null&&e.hasOwnProperty("refAttrName")&&!y.isString(e.refAttrName))return"refAttrName: string expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!y.isString(e.docString))return"docString: string expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:break}if(e.f!=null&&e.hasOwnProperty("f")&&typeof e.f!="number")return"f: number expected";if(e.i!=null&&e.hasOwnProperty("i")&&!y.isInteger(e.i)&&!(e.i&&y.isInteger(e.i.low)&&y.isInteger(e.i.high)))return"i: integer|Long expected";if(e.s!=null&&e.hasOwnProperty("s")&&!(e.s&&typeof e.s.length=="number"||y.isString(e.s)))return"s: buffer expected";if(e.t!=null&&e.hasOwnProperty("t")){var r=h.onnx.TensorProto.verify(e.t);if(r)return"t."+r}if(e.g!=null&&e.hasOwnProperty("g")){var r=h.onnx.GraphProto.verify(e.g);if(r)return"g."+r}if(e.sparseTensor!=null&&e.hasOwnProperty("sparseTensor")){var r=h.onnx.SparseTensorProto.verify(e.sparseTensor);if(r)return"sparseTensor."+r}if(e.tp!=null&&e.hasOwnProperty("tp")){var r=h.onnx.TypeProto.verify(e.tp);if(r)return"tp."+r}if(e.floats!=null&&e.hasOwnProperty("floats")){if(!Array.isArray(e.floats))return"floats: array expected";for(var o=0;o<e.floats.length;++o)if(typeof e.floats[o]!="number")return"floats: number[] expected"}if(e.ints!=null&&e.hasOwnProperty("ints")){if(!Array.isArray(e.ints))return"ints: array expected";for(var o=0;o<e.ints.length;++o)if(!y.isInteger(e.ints[o])&&!(e.ints[o]&&y.isInteger(e.ints[o].low)&&y.isInteger(e.ints[o].high)))return"ints: integer|Long[] expected"}if(e.strings!=null&&e.hasOwnProperty("strings")){if(!Array.isArray(e.strings))return"strings: array expected";for(var o=0;o<e.strings.length;++o)if(!(e.strings[o]&&typeof e.strings[o].length=="number"||y.isString(e.strings[o])))return"strings: buffer[] expected"}if(e.tensors!=null&&e.hasOwnProperty("tensors")){if(!Array.isArray(e.tensors))return"tensors: array expected";for(var o=0;o<e.tensors.length;++o){var r=h.onnx.TensorProto.verify(e.tensors[o]);if(r)return"tensors."+r}}if(e.graphs!=null&&e.hasOwnProperty("graphs")){if(!Array.isArray(e.graphs))return"graphs: array expected";for(var o=0;o<e.graphs.length;++o){var r=h.onnx.GraphProto.verify(e.graphs[o]);if(r)return"graphs."+r}}if(e.sparseTensors!=null&&e.hasOwnProperty("sparseTensors")){if(!Array.isArray(e.sparseTensors))return"sparseTensors: array expected";for(var o=0;o<e.sparseTensors.length;++o){var r=h.onnx.SparseTensorProto.verify(e.sparseTensors[o]);if(r)return"sparseTensors."+r}}if(e.typeProtos!=null&&e.hasOwnProperty("typeProtos")){if(!Array.isArray(e.typeProtos))return"typeProtos: array expected";for(var o=0;o<e.typeProtos.length;++o){var r=h.onnx.TypeProto.verify(e.typeProtos[o]);if(r)return"typeProtos."+r}}return null},t.fromObject=function(e){if(e instanceof h.onnx.AttributeProto)return e;var r=new h.onnx.AttributeProto;switch(e.name!=null&&(r.name=String(e.name)),e.refAttrName!=null&&(r.refAttrName=String(e.refAttrName)),e.docString!=null&&(r.docString=String(e.docString)),e.type){default:if(typeof e.type=="number"){r.type=e.type;break}break;case"UNDEFINED":case 0:r.type=0;break;case"FLOAT":case 1:r.type=1;break;case"INT":case 2:r.type=2;break;case"STRING":case 3:r.type=3;break;case"TENSOR":case 4:r.type=4;break;case"GRAPH":case 5:r.type=5;break;case"SPARSE_TENSOR":case 11:r.type=11;break;case"TYPE_PROTO":case 13:r.type=13;break;case"FLOATS":case 6:r.type=6;break;case"INTS":case 7:r.type=7;break;case"STRINGS":case 8:r.type=8;break;case"TENSORS":case 9:r.type=9;break;case"GRAPHS":case 10:r.type=10;break;case"SPARSE_TENSORS":case 12:r.type=12;break;case"TYPE_PROTOS":case 14:r.type=14;break}if(e.f!=null&&(r.f=Number(e.f)),e.i!=null&&(y.Long?(r.i=y.Long.fromValue(e.i)).unsigned=!1:typeof e.i=="string"?r.i=parseInt(e.i,10):typeof e.i=="number"?r.i=e.i:typeof e.i=="object"&&(r.i=new y.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber())),e.s!=null&&(typeof e.s=="string"?y.base64.decode(e.s,r.s=y.newBuffer(y.base64.length(e.s)),0):e.s.length>=0&&(r.s=e.s)),e.t!=null){if(typeof e.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");r.t=h.onnx.TensorProto.fromObject(e.t)}if(e.g!=null){if(typeof e.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");r.g=h.onnx.GraphProto.fromObject(e.g)}if(e.sparseTensor!=null){if(typeof e.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");r.sparseTensor=h.onnx.SparseTensorProto.fromObject(e.sparseTensor)}if(e.tp!=null){if(typeof e.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");r.tp=h.onnx.TypeProto.fromObject(e.tp)}if(e.floats){if(!Array.isArray(e.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");r.floats=[];for(var o=0;o<e.floats.length;++o)r.floats[o]=Number(e.floats[o])}if(e.ints){if(!Array.isArray(e.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");r.ints=[];for(var o=0;o<e.ints.length;++o)y.Long?(r.ints[o]=y.Long.fromValue(e.ints[o])).unsigned=!1:typeof e.ints[o]=="string"?r.ints[o]=parseInt(e.ints[o],10):typeof e.ints[o]=="number"?r.ints[o]=e.ints[o]:typeof e.ints[o]=="object"&&(r.ints[o]=new y.LongBits(e.ints[o].low>>>0,e.ints[o].high>>>0).toNumber())}if(e.strings){if(!Array.isArray(e.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");r.strings=[];for(var o=0;o<e.strings.length;++o)typeof e.strings[o]=="string"?y.base64.decode(e.strings[o],r.strings[o]=y.newBuffer(y.base64.length(e.strings[o])),0):e.strings[o].length>=0&&(r.strings[o]=e.strings[o])}if(e.tensors){if(!Array.isArray(e.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");r.tensors=[];for(var o=0;o<e.tensors.length;++o){if(typeof e.tensors[o]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");r.tensors[o]=h.onnx.TensorProto.fromObject(e.tensors[o])}}if(e.graphs){if(!Array.isArray(e.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");r.graphs=[];for(var o=0;o<e.graphs.length;++o){if(typeof e.graphs[o]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");r.graphs[o]=h.onnx.GraphProto.fromObject(e.graphs[o])}}if(e.sparseTensors){if(!Array.isArray(e.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");r.sparseTensors=[];for(var o=0;o<e.sparseTensors.length;++o){if(typeof e.sparseTensors[o]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");r.sparseTensors[o]=h.onnx.SparseTensorProto.fromObject(e.sparseTensors[o])}}if(e.typeProtos){if(!Array.isArray(e.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");r.typeProtos=[];for(var o=0;o<e.typeProtos.length;++o){if(typeof e.typeProtos[o]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");r.typeProtos[o]=h.onnx.TypeProto.fromObject(e.typeProtos[o])}}return r},t.toObject=function(e,r){r||(r={});var o={};if((r.arrays||r.defaults)&&(o.floats=[],o.ints=[],o.strings=[],o.tensors=[],o.graphs=[],o.typeProtos=[],o.sparseTensors=[]),r.defaults){if(o.name="",o.f=0,y.Long){var s=new y.Long(0,0,!1);o.i=r.longs===String?s.toString():r.longs===Number?s.toNumber():s}else o.i=r.longs===String?"0":0;r.bytes===String?o.s="":(o.s=[],r.bytes!==Array&&(o.s=y.newBuffer(o.s))),o.t=null,o.g=null,o.docString="",o.tp=null,o.type=r.enums===String?"UNDEFINED":0,o.refAttrName="",o.sparseTensor=null}if(e.name!=null&&e.hasOwnProperty("name")&&(o.name=e.name),e.f!=null&&e.hasOwnProperty("f")&&(o.f=r.json&&!isFinite(e.f)?String(e.f):e.f),e.i!=null&&e.hasOwnProperty("i")&&(typeof e.i=="number"?o.i=r.longs===String?String(e.i):e.i:o.i=r.longs===String?y.Long.prototype.toString.call(e.i):r.longs===Number?new y.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber():e.i),e.s!=null&&e.hasOwnProperty("s")&&(o.s=r.bytes===String?y.base64.encode(e.s,0,e.s.length):r.bytes===Array?Array.prototype.slice.call(e.s):e.s),e.t!=null&&e.hasOwnProperty("t")&&(o.t=h.onnx.TensorProto.toObject(e.t,r)),e.g!=null&&e.hasOwnProperty("g")&&(o.g=h.onnx.GraphProto.toObject(e.g,r)),e.floats&&e.floats.length){o.floats=[];for(var i=0;i<e.floats.length;++i)o.floats[i]=r.json&&!isFinite(e.floats[i])?String(e.floats[i]):e.floats[i]}if(e.ints&&e.ints.length){o.ints=[];for(var i=0;i<e.ints.length;++i)typeof e.ints[i]=="number"?o.ints[i]=r.longs===String?String(e.ints[i]):e.ints[i]:o.ints[i]=r.longs===String?y.Long.prototype.toString.call(e.ints[i]):r.longs===Number?new y.LongBits(e.ints[i].low>>>0,e.ints[i].high>>>0).toNumber():e.ints[i]}if(e.strings&&e.strings.length){o.strings=[];for(var i=0;i<e.strings.length;++i)o.strings[i]=r.bytes===String?y.base64.encode(e.strings[i],0,e.strings[i].length):r.bytes===Array?Array.prototype.slice.call(e.strings[i]):e.strings[i]}if(e.tensors&&e.tensors.length){o.tensors=[];for(var i=0;i<e.tensors.length;++i)o.tensors[i]=h.onnx.TensorProto.toObject(e.tensors[i],r)}if(e.graphs&&e.graphs.length){o.graphs=[];for(var i=0;i<e.graphs.length;++i)o.graphs[i]=h.onnx.GraphProto.toObject(e.graphs[i],r)}if(e.docString!=null&&e.hasOwnProperty("docString")&&(o.docString=e.docString),e.tp!=null&&e.hasOwnProperty("tp")&&(o.tp=h.onnx.TypeProto.toObject(e.tp,r)),e.typeProtos&&e.typeProtos.length){o.typeProtos=[];for(var i=0;i<e.typeProtos.length;++i)o.typeProtos[i]=h.onnx.TypeProto.toObject(e.typeProtos[i],r)}if(e.type!=null&&e.hasOwnProperty("type")&&(o.type=r.enums===String?h.onnx.AttributeProto.AttributeType[e.type]===void 0?e.type:h.onnx.AttributeProto.AttributeType[e.type]:e.type),e.refAttrName!=null&&e.hasOwnProperty("refAttrName")&&(o.refAttrName=e.refAttrName),e.sparseTensor!=null&&e.hasOwnProperty("sparseTensor")&&(o.sparseTensor=h.onnx.SparseTensorProto.toObject(e.sparseTensor,r)),e.sparseTensors&&e.sparseTensors.length){o.sparseTensors=[];for(var i=0;i<e.sparseTensors.length;++i)o.sparseTensors[i]=h.onnx.SparseTensorProto.toObject(e.sparseTensors[i],r)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.AttributeProto"},t.AttributeType=function(){var n={},e=Object.create(n);return e[n[0]="UNDEFINED"]=0,e[n[1]="FLOAT"]=1,e[n[2]="INT"]=2,e[n[3]="STRING"]=3,e[n[4]="TENSOR"]=4,e[n[5]="GRAPH"]=5,e[n[11]="SPARSE_TENSOR"]=11,e[n[13]="TYPE_PROTO"]=13,e[n[6]="FLOATS"]=6,e[n[7]="INTS"]=7,e[n[8]="STRINGS"]=8,e[n[9]="TENSORS"]=9,e[n[10]="GRAPHS"]=10,e[n[12]="SPARSE_TENSORS"]=12,e[n[14]="TYPE_PROTOS"]=14,e}(),t}(),a.ValueInfoProto=function(){function t(n){if(n)for(var e=Object.keys(n),r=0;r<e.length;++r)n[e[r]]!=null&&(this[e[r]]=n[e[r]])}return t.prototype.name="",t.prototype.type=null,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(e,r){return r||(r=Ee.create()),e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(10).string(e.name),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&h.onnx.TypeProto.encode(e.type,r.uint32(18).fork()).ldelim(),e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(26).string(e.docString),r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof R||(e=R.create(e));for(var o=r===void 0?e.len:e.pos+r,s=new h.onnx.ValueInfoProto;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:{s.name=e.string();break}case 2:{s.type=h.onnx.TypeProto.decode(e,e.uint32());break}case 3:{s.docString=e.string();break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.name!=null&&e.hasOwnProperty("name")&&!y.isString(e.name))return"name: string expected";if(e.type!=null&&e.hasOwnProperty("type")){var r=h.onnx.TypeProto.verify(e.type);if(r)return"type."+r}return e.docString!=null&&e.hasOwnProperty("docString")&&!y.isString(e.docString)?"docString: string expected":null},t.fromObject=function(e){if(e instanceof h.onnx.ValueInfoProto)return e;var r=new h.onnx.ValueInfoProto;if(e.name!=null&&(r.name=String(e.name)),e.type!=null){if(typeof e.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");r.type=h.onnx.TypeProto.fromObject(e.type)}return e.docString!=null&&(r.docString=String(e.docString)),r},t.toObject=function(e,r){r||(r={});var o={};return r.defaults&&(o.name="",o.type=null,o.docString=""),e.name!=null&&e.hasOwnProperty("name")&&(o.name=e.name),e.type!=null&&e.hasOwnProperty("type")&&(o.type=h.onnx.TypeProto.toObject(e.type,r)),e.docString!=null&&e.hasOwnProperty("docString")&&(o.docString=e.docString),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.ValueInfoProto"},t}(),a.NodeProto=function(){function t(n){if(this.input=[],this.output=[],this.attribute=[],n)for(var e=Object.keys(n),r=0;r<e.length;++r)n[e[r]]!=null&&(this[e[r]]=n[e[r]])}return t.prototype.input=y.emptyArray,t.prototype.output=y.emptyArray,t.prototype.name="",t.prototype.opType="",t.prototype.domain="",t.prototype.attribute=y.emptyArray,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ee.create()),e.input!=null&&e.input.length)for(var o=0;o<e.input.length;++o)r.uint32(10).string(e.input[o]);if(e.output!=null&&e.output.length)for(var o=0;o<e.output.length;++o)r.uint32(18).string(e.output[o]);if(e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(26).string(e.name),e.opType!=null&&Object.hasOwnProperty.call(e,"opType")&&r.uint32(34).string(e.opType),e.attribute!=null&&e.attribute.length)for(var o=0;o<e.attribute.length;++o)h.onnx.AttributeProto.encode(e.attribute[o],r.uint32(42).fork()).ldelim();return e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(50).string(e.docString),e.domain!=null&&Object.hasOwnProperty.call(e,"domain")&&r.uint32(58).string(e.domain),r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof R||(e=R.create(e));for(var o=r===void 0?e.len:e.pos+r,s=new h.onnx.NodeProto;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:{s.input&&s.input.length||(s.input=[]),s.input.push(e.string());break}case 2:{s.output&&s.output.length||(s.output=[]),s.output.push(e.string());break}case 3:{s.name=e.string();break}case 4:{s.opType=e.string();break}case 7:{s.domain=e.string();break}case 5:{s.attribute&&s.attribute.length||(s.attribute=[]),s.attribute.push(h.onnx.AttributeProto.decode(e,e.uint32()));break}case 6:{s.docString=e.string();break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.input!=null&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var r=0;r<e.input.length;++r)if(!y.isString(e.input[r]))return"input: string[] expected"}if(e.output!=null&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(var r=0;r<e.output.length;++r)if(!y.isString(e.output[r]))return"output: string[] expected"}if(e.name!=null&&e.hasOwnProperty("name")&&!y.isString(e.name))return"name: string expected";if(e.opType!=null&&e.hasOwnProperty("opType")&&!y.isString(e.opType))return"opType: string expected";if(e.domain!=null&&e.hasOwnProperty("domain")&&!y.isString(e.domain))return"domain: string expected";if(e.attribute!=null&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(var r=0;r<e.attribute.length;++r){var o=h.onnx.AttributeProto.verify(e.attribute[r]);if(o)return"attribute."+o}}return e.docString!=null&&e.hasOwnProperty("docString")&&!y.isString(e.docString)?"docString: string expected":null},t.fromObject=function(e){if(e instanceof h.onnx.NodeProto)return e;var r=new h.onnx.NodeProto;if(e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.NodeProto.input: array expected");r.input=[];for(var o=0;o<e.input.length;++o)r.input[o]=String(e.input[o])}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.NodeProto.output: array expected");r.output=[];for(var o=0;o<e.output.length;++o)r.output[o]=String(e.output[o])}if(e.name!=null&&(r.name=String(e.name)),e.opType!=null&&(r.opType=String(e.opType)),e.domain!=null&&(r.domain=String(e.domain)),e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");r.attribute=[];for(var o=0;o<e.attribute.length;++o){if(typeof e.attribute[o]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");r.attribute[o]=h.onnx.AttributeProto.fromObject(e.attribute[o])}}return e.docString!=null&&(r.docString=String(e.docString)),r},t.toObject=function(e,r){r||(r={});var o={};if((r.arrays||r.defaults)&&(o.input=[],o.output=[],o.attribute=[]),r.defaults&&(o.name="",o.opType="",o.docString="",o.domain=""),e.input&&e.input.length){o.input=[];for(var s=0;s<e.input.length;++s)o.input[s]=e.input[s]}if(e.output&&e.output.length){o.output=[];for(var s=0;s<e.output.length;++s)o.output[s]=e.output[s]}if(e.name!=null&&e.hasOwnProperty("name")&&(o.name=e.name),e.opType!=null&&e.hasOwnProperty("opType")&&(o.opType=e.opType),e.attribute&&e.attribute.length){o.attribute=[];for(var s=0;s<e.attribute.length;++s)o.attribute[s]=h.onnx.AttributeProto.toObject(e.attribute[s],r)}return e.docString!=null&&e.hasOwnProperty("docString")&&(o.docString=e.docString),e.domain!=null&&e.hasOwnProperty("domain")&&(o.domain=e.domain),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.NodeProto"},t}(),a.TrainingInfoProto=function(){function t(n){if(this.initializationBinding=[],this.updateBinding=[],n)for(var e=Object.keys(n),r=0;r<e.length;++r)n[e[r]]!=null&&(this[e[r]]=n[e[r]])}return t.prototype.initialization=null,t.prototype.algorithm=null,t.prototype.initializationBinding=y.emptyArray,t.prototype.updateBinding=y.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ee.create()),e.initialization!=null&&Object.hasOwnProperty.call(e,"initialization")&&h.onnx.GraphProto.encode(e.initialization,r.uint32(10).fork()).ldelim(),e.algorithm!=null&&Object.hasOwnProperty.call(e,"algorithm")&&h.onnx.GraphProto.encode(e.algorithm,r.uint32(18).fork()).ldelim(),e.initializationBinding!=null&&e.initializationBinding.length)for(var o=0;o<e.initializationBinding.length;++o)h.onnx.StringStringEntryProto.encode(e.initializationBinding[o],r.uint32(26).fork()).ldelim();if(e.updateBinding!=null&&e.updateBinding.length)for(var o=0;o<e.updateBinding.length;++o)h.onnx.StringStringEntryProto.encode(e.updateBinding[o],r.uint32(34).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof R||(e=R.create(e));for(var o=r===void 0?e.len:e.pos+r,s=new h.onnx.TrainingInfoProto;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:{s.initialization=h.onnx.GraphProto.decode(e,e.uint32());break}case 2:{s.algorithm=h.onnx.GraphProto.decode(e,e.uint32());break}case 3:{s.initializationBinding&&s.initializationBinding.length||(s.initializationBinding=[]),s.initializationBinding.push(h.onnx.StringStringEntryProto.decode(e,e.uint32()));break}case 4:{s.updateBinding&&s.updateBinding.length||(s.updateBinding=[]),s.updateBinding.push(h.onnx.StringStringEntryProto.decode(e,e.uint32()));break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.initialization!=null&&e.hasOwnProperty("initialization")){var r=h.onnx.GraphProto.verify(e.initialization);if(r)return"initialization."+r}if(e.algorithm!=null&&e.hasOwnProperty("algorithm")){var r=h.onnx.GraphProto.verify(e.algorithm);if(r)return"algorithm."+r}if(e.initializationBinding!=null&&e.hasOwnProperty("initializationBinding")){if(!Array.isArray(e.initializationBinding))return"initializationBinding: array expected";for(var o=0;o<e.initializationBinding.length;++o){var r=h.onnx.StringStringEntryProto.verify(e.initializationBinding[o]);if(r)return"initializationBinding."+r}}if(e.updateBinding!=null&&e.hasOwnProperty("updateBinding")){if(!Array.isArray(e.updateBinding))return"updateBinding: array expected";for(var o=0;o<e.updateBinding.length;++o){var r=h.onnx.StringStringEntryProto.verify(e.updateBinding[o]);if(r)return"updateBinding."+r}}return null},t.fromObject=function(e){if(e instanceof h.onnx.TrainingInfoProto)return e;var r=new h.onnx.TrainingInfoProto;if(e.initialization!=null){if(typeof e.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");r.initialization=h.onnx.GraphProto.fromObject(e.initialization)}if(e.algorithm!=null){if(typeof e.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");r.algorithm=h.onnx.GraphProto.fromObject(e.algorithm)}if(e.initializationBinding){if(!Array.isArray(e.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");r.initializationBinding=[];for(var o=0;o<e.initializationBinding.length;++o){if(typeof e.initializationBinding[o]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");r.initializationBinding[o]=h.onnx.StringStringEntryProto.fromObject(e.initializationBinding[o])}}if(e.updateBinding){if(!Array.isArray(e.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");r.updateBinding=[];for(var o=0;o<e.updateBinding.length;++o){if(typeof e.updateBinding[o]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");r.updateBinding[o]=h.onnx.StringStringEntryProto.fromObject(e.updateBinding[o])}}return r},t.toObject=function(e,r){r||(r={});var o={};if((r.arrays||r.defaults)&&(o.initializationBinding=[],o.updateBinding=[]),r.defaults&&(o.initialization=null,o.algorithm=null),e.initialization!=null&&e.hasOwnProperty("initialization")&&(o.initialization=h.onnx.GraphProto.toObject(e.initialization,r)),e.algorithm!=null&&e.hasOwnProperty("algorithm")&&(o.algorithm=h.onnx.GraphProto.toObject(e.algorithm,r)),e.initializationBinding&&e.initializationBinding.length){o.initializationBinding=[];for(var s=0;s<e.initializationBinding.length;++s)o.initializationBinding[s]=h.onnx.StringStringEntryProto.toObject(e.initializationBinding[s],r)}if(e.updateBinding&&e.updateBinding.length){o.updateBinding=[];for(var s=0;s<e.updateBinding.length;++s)o.updateBinding[s]=h.onnx.StringStringEntryProto.toObject(e.updateBinding[s],r)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.TrainingInfoProto"},t}(),a.ModelProto=function(){function t(n){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],n)for(var e=Object.keys(n),r=0;r<e.length;++r)n[e[r]]!=null&&(this[e[r]]=n[e[r]])}return t.prototype.irVersion=y.Long?y.Long.fromBits(0,0,!1):0,t.prototype.opsetImport=y.emptyArray,t.prototype.producerName="",t.prototype.producerVersion="",t.prototype.domain="",t.prototype.modelVersion=y.Long?y.Long.fromBits(0,0,!1):0,t.prototype.docString="",t.prototype.graph=null,t.prototype.metadataProps=y.emptyArray,t.prototype.trainingInfo=y.emptyArray,t.prototype.functions=y.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ee.create()),e.irVersion!=null&&Object.hasOwnProperty.call(e,"irVersion")&&r.uint32(8).int64(e.irVersion),e.producerName!=null&&Object.hasOwnProperty.call(e,"producerName")&&r.uint32(18).string(e.producerName),e.producerVersion!=null&&Object.hasOwnProperty.call(e,"producerVersion")&&r.uint32(26).string(e.producerVersion),e.domain!=null&&Object.hasOwnProperty.call(e,"domain")&&r.uint32(34).string(e.domain),e.modelVersion!=null&&Object.hasOwnProperty.call(e,"modelVersion")&&r.uint32(40).int64(e.modelVersion),e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(50).string(e.docString),e.graph!=null&&Object.hasOwnProperty.call(e,"graph")&&h.onnx.GraphProto.encode(e.graph,r.uint32(58).fork()).ldelim(),e.opsetImport!=null&&e.opsetImport.length)for(var o=0;o<e.opsetImport.length;++o)h.onnx.OperatorSetIdProto.encode(e.opsetImport[o],r.uint32(66).fork()).ldelim();if(e.metadataProps!=null&&e.metadataProps.length)for(var o=0;o<e.metadataProps.length;++o)h.onnx.StringStringEntryProto.encode(e.metadataProps[o],r.uint32(114).fork()).ldelim();if(e.trainingInfo!=null&&e.trainingInfo.length)for(var o=0;o<e.trainingInfo.length;++o)h.onnx.TrainingInfoProto.encode(e.trainingInfo[o],r.uint32(162).fork()).ldelim();if(e.functions!=null&&e.functions.length)for(var o=0;o<e.functions.length;++o)h.onnx.FunctionProto.encode(e.functions[o],r.uint32(202).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof R||(e=R.create(e));for(var o=r===void 0?e.len:e.pos+r,s=new h.onnx.ModelProto;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:{s.irVersion=e.int64();break}case 8:{s.opsetImport&&s.opsetImport.length||(s.opsetImport=[]),s.opsetImport.push(h.onnx.OperatorSetIdProto.decode(e,e.uint32()));break}case 2:{s.producerName=e.string();break}case 3:{s.producerVersion=e.string();break}case 4:{s.domain=e.string();break}case 5:{s.modelVersion=e.int64();break}case 6:{s.docString=e.string();break}case 7:{s.graph=h.onnx.GraphProto.decode(e,e.uint32());break}case 14:{s.metadataProps&&s.metadataProps.length||(s.metadataProps=[]),s.metadataProps.push(h.onnx.StringStringEntryProto.decode(e,e.uint32()));break}case 20:{s.trainingInfo&&s.trainingInfo.length||(s.trainingInfo=[]),s.trainingInfo.push(h.onnx.TrainingInfoProto.decode(e,e.uint32()));break}case 25:{s.functions&&s.functions.length||(s.functions=[]),s.functions.push(h.onnx.FunctionProto.decode(e,e.uint32()));break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.irVersion!=null&&e.hasOwnProperty("irVersion")&&!y.isInteger(e.irVersion)&&!(e.irVersion&&y.isInteger(e.irVersion.low)&&y.isInteger(e.irVersion.high)))return"irVersion: integer|Long expected";if(e.opsetImport!=null&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(var r=0;r<e.opsetImport.length;++r){var o=h.onnx.OperatorSetIdProto.verify(e.opsetImport[r]);if(o)return"opsetImport."+o}}if(e.producerName!=null&&e.hasOwnProperty("producerName")&&!y.isString(e.producerName))return"producerName: string expected";if(e.producerVersion!=null&&e.hasOwnProperty("producerVersion")&&!y.isString(e.producerVersion))return"producerVersion: string expected";if(e.domain!=null&&e.hasOwnProperty("domain")&&!y.isString(e.domain))return"domain: string expected";if(e.modelVersion!=null&&e.hasOwnProperty("modelVersion")&&!y.isInteger(e.modelVersion)&&!(e.modelVersion&&y.isInteger(e.modelVersion.low)&&y.isInteger(e.modelVersion.high)))return"modelVersion: integer|Long expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!y.isString(e.docString))return"docString: string expected";if(e.graph!=null&&e.hasOwnProperty("graph")){var o=h.onnx.GraphProto.verify(e.graph);if(o)return"graph."+o}if(e.metadataProps!=null&&e.hasOwnProperty("metadataProps")){if(!Array.isArray(e.metadataProps))return"metadataProps: array expected";for(var r=0;r<e.metadataProps.length;++r){var o=h.onnx.StringStringEntryProto.verify(e.metadataProps[r]);if(o)return"metadataProps."+o}}if(e.trainingInfo!=null&&e.hasOwnProperty("trainingInfo")){if(!Array.isArray(e.trainingInfo))return"trainingInfo: array expected";for(var r=0;r<e.trainingInfo.length;++r){var o=h.onnx.TrainingInfoProto.verify(e.trainingInfo[r]);if(o)return"trainingInfo."+o}}if(e.functions!=null&&e.hasOwnProperty("functions")){if(!Array.isArray(e.functions))return"functions: array expected";for(var r=0;r<e.functions.length;++r){var o=h.onnx.FunctionProto.verify(e.functions[r]);if(o)return"functions."+o}}return null},t.fromObject=function(e){if(e instanceof h.onnx.ModelProto)return e;var r=new h.onnx.ModelProto;if(e.irVersion!=null&&(y.Long?(r.irVersion=y.Long.fromValue(e.irVersion)).unsigned=!1:typeof e.irVersion=="string"?r.irVersion=parseInt(e.irVersion,10):typeof e.irVersion=="number"?r.irVersion=e.irVersion:typeof e.irVersion=="object"&&(r.irVersion=new y.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber())),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");r.opsetImport=[];for(var o=0;o<e.opsetImport.length;++o){if(typeof e.opsetImport[o]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");r.opsetImport[o]=h.onnx.OperatorSetIdProto.fromObject(e.opsetImport[o])}}if(e.producerName!=null&&(r.producerName=String(e.producerName)),e.producerVersion!=null&&(r.producerVersion=String(e.producerVersion)),e.domain!=null&&(r.domain=String(e.domain)),e.modelVersion!=null&&(y.Long?(r.modelVersion=y.Long.fromValue(e.modelVersion)).unsigned=!1:typeof e.modelVersion=="string"?r.modelVersion=parseInt(e.modelVersion,10):typeof e.modelVersion=="number"?r.modelVersion=e.modelVersion:typeof e.modelVersion=="object"&&(r.modelVersion=new y.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber())),e.docString!=null&&(r.docString=String(e.docString)),e.graph!=null){if(typeof e.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");r.graph=h.onnx.GraphProto.fromObject(e.graph)}if(e.metadataProps){if(!Array.isArray(e.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");r.metadataProps=[];for(var o=0;o<e.metadataProps.length;++o){if(typeof e.metadataProps[o]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");r.metadataProps[o]=h.onnx.StringStringEntryProto.fromObject(e.metadataProps[o])}}if(e.trainingInfo){if(!Array.isArray(e.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");r.trainingInfo=[];for(var o=0;o<e.trainingInfo.length;++o){if(typeof e.trainingInfo[o]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");r.trainingInfo[o]=h.onnx.TrainingInfoProto.fromObject(e.trainingInfo[o])}}if(e.functions){if(!Array.isArray(e.functions))throw TypeError(".onnx.ModelProto.functions: array expected");r.functions=[];for(var o=0;o<e.functions.length;++o){if(typeof e.functions[o]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");r.functions[o]=h.onnx.FunctionProto.fromObject(e.functions[o])}}return r},t.toObject=function(e,r){r||(r={});var o={};if((r.arrays||r.defaults)&&(o.opsetImport=[],o.metadataProps=[],o.trainingInfo=[],o.functions=[]),r.defaults){if(y.Long){var s=new y.Long(0,0,!1);o.irVersion=r.longs===String?s.toString():r.longs===Number?s.toNumber():s}else o.irVersion=r.longs===String?"0":0;if(o.producerName="",o.producerVersion="",o.domain="",y.Long){var s=new y.Long(0,0,!1);o.modelVersion=r.longs===String?s.toString():r.longs===Number?s.toNumber():s}else o.modelVersion=r.longs===String?"0":0;o.docString="",o.graph=null}if(e.irVersion!=null&&e.hasOwnProperty("irVersion")&&(typeof e.irVersion=="number"?o.irVersion=r.longs===String?String(e.irVersion):e.irVersion:o.irVersion=r.longs===String?y.Long.prototype.toString.call(e.irVersion):r.longs===Number?new y.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber():e.irVersion),e.producerName!=null&&e.hasOwnProperty("producerName")&&(o.producerName=e.producerName),e.producerVersion!=null&&e.hasOwnProperty("producerVersion")&&(o.producerVersion=e.producerVersion),e.domain!=null&&e.hasOwnProperty("domain")&&(o.domain=e.domain),e.modelVersion!=null&&e.hasOwnProperty("modelVersion")&&(typeof e.modelVersion=="number"?o.modelVersion=r.longs===String?String(e.modelVersion):e.modelVersion:o.modelVersion=r.longs===String?y.Long.prototype.toString.call(e.modelVersion):r.longs===Number?new y.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber():e.modelVersion),e.docString!=null&&e.hasOwnProperty("docString")&&(o.docString=e.docString),e.graph!=null&&e.hasOwnProperty("graph")&&(o.graph=h.onnx.GraphProto.toObject(e.graph,r)),e.opsetImport&&e.opsetImport.length){o.opsetImport=[];for(var i=0;i<e.opsetImport.length;++i)o.opsetImport[i]=h.onnx.OperatorSetIdProto.toObject(e.opsetImport[i],r)}if(e.metadataProps&&e.metadataProps.length){o.metadataProps=[];for(var i=0;i<e.metadataProps.length;++i)o.metadataProps[i]=h.onnx.StringStringEntryProto.toObject(e.metadataProps[i],r)}if(e.trainingInfo&&e.trainingInfo.length){o.trainingInfo=[];for(var i=0;i<e.trainingInfo.length;++i)o.trainingInfo[i]=h.onnx.TrainingInfoProto.toObject(e.trainingInfo[i],r)}if(e.functions&&e.functions.length){o.functions=[];for(var i=0;i<e.functions.length;++i)o.functions[i]=h.onnx.FunctionProto.toObject(e.functions[i],r)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.ModelProto"},t}(),a.StringStringEntryProto=function(){function t(n){if(n)for(var e=Object.keys(n),r=0;r<e.length;++r)n[e[r]]!=null&&(this[e[r]]=n[e[r]])}return t.prototype.key="",t.prototype.value="",t.create=function(e){return new t(e)},t.encode=function(e,r){return r||(r=Ee.create()),e.key!=null&&Object.hasOwnProperty.call(e,"key")&&r.uint32(10).string(e.key),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&r.uint32(18).string(e.value),r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof R||(e=R.create(e));for(var o=r===void 0?e.len:e.pos+r,s=new h.onnx.StringStringEntryProto;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:{s.key=e.string();break}case 2:{s.value=e.string();break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":e.key!=null&&e.hasOwnProperty("key")&&!y.isString(e.key)?"key: string expected":e.value!=null&&e.hasOwnProperty("value")&&!y.isString(e.value)?"value: string expected":null},t.fromObject=function(e){if(e instanceof h.onnx.StringStringEntryProto)return e;var r=new h.onnx.StringStringEntryProto;return e.key!=null&&(r.key=String(e.key)),e.value!=null&&(r.value=String(e.value)),r},t.toObject=function(e,r){r||(r={});var o={};return r.defaults&&(o.key="",o.value=""),e.key!=null&&e.hasOwnProperty("key")&&(o.key=e.key),e.value!=null&&e.hasOwnProperty("value")&&(o.value=e.value),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.StringStringEntryProto"},t}(),a.TensorAnnotation=function(){function t(n){if(this.quantParameterTensorNames=[],n)for(var e=Object.keys(n),r=0;r<e.length;++r)n[e[r]]!=null&&(this[e[r]]=n[e[r]])}return t.prototype.tensorName="",t.prototype.quantParameterTensorNames=y.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ee.create()),e.tensorName!=null&&Object.hasOwnProperty.call(e,"tensorName")&&r.uint32(10).string(e.tensorName),e.quantParameterTensorNames!=null&&e.quantParameterTensorNames.length)for(var o=0;o<e.quantParameterTensorNames.length;++o)h.onnx.StringStringEntryProto.encode(e.quantParameterTensorNames[o],r.uint32(18).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof R||(e=R.create(e));for(var o=r===void 0?e.len:e.pos+r,s=new h.onnx.TensorAnnotation;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:{s.tensorName=e.string();break}case 2:{s.quantParameterTensorNames&&s.quantParameterTensorNames.length||(s.quantParameterTensorNames=[]),s.quantParameterTensorNames.push(h.onnx.StringStringEntryProto.decode(e,e.uint32()));break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.tensorName!=null&&e.hasOwnProperty("tensorName")&&!y.isString(e.tensorName))return"tensorName: string expected";if(e.quantParameterTensorNames!=null&&e.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(e.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var r=0;r<e.quantParameterTensorNames.length;++r){var o=h.onnx.StringStringEntryProto.verify(e.quantParameterTensorNames[r]);if(o)return"quantParameterTensorNames."+o}}return null},t.fromObject=function(e){if(e instanceof h.onnx.TensorAnnotation)return e;var r=new h.onnx.TensorAnnotation;if(e.tensorName!=null&&(r.tensorName=String(e.tensorName)),e.quantParameterTensorNames){if(!Array.isArray(e.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");r.quantParameterTensorNames=[];for(var o=0;o<e.quantParameterTensorNames.length;++o){if(typeof e.quantParameterTensorNames[o]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");r.quantParameterTensorNames[o]=h.onnx.StringStringEntryProto.fromObject(e.quantParameterTensorNames[o])}}return r},t.toObject=function(e,r){r||(r={});var o={};if((r.arrays||r.defaults)&&(o.quantParameterTensorNames=[]),r.defaults&&(o.tensorName=""),e.tensorName!=null&&e.hasOwnProperty("tensorName")&&(o.tensorName=e.tensorName),e.quantParameterTensorNames&&e.quantParameterTensorNames.length){o.quantParameterTensorNames=[];for(var s=0;s<e.quantParameterTensorNames.length;++s)o.quantParameterTensorNames[s]=h.onnx.StringStringEntryProto.toObject(e.quantParameterTensorNames[s],r)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.TensorAnnotation"},t}(),a.GraphProto=function(){function t(n){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],n)for(var e=Object.keys(n),r=0;r<e.length;++r)n[e[r]]!=null&&(this[e[r]]=n[e[r]])}return t.prototype.node=y.emptyArray,t.prototype.name="",t.prototype.initializer=y.emptyArray,t.prototype.sparseInitializer=y.emptyArray,t.prototype.docString="",t.prototype.input=y.emptyArray,t.prototype.output=y.emptyArray,t.prototype.valueInfo=y.emptyArray,t.prototype.quantizationAnnotation=y.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ee.create()),e.node!=null&&e.node.length)for(var o=0;o<e.node.length;++o)h.onnx.NodeProto.encode(e.node[o],r.uint32(10).fork()).ldelim();if(e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(18).string(e.name),e.initializer!=null&&e.initializer.length)for(var o=0;o<e.initializer.length;++o)h.onnx.TensorProto.encode(e.initializer[o],r.uint32(42).fork()).ldelim();if(e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(82).string(e.docString),e.input!=null&&e.input.length)for(var o=0;o<e.input.length;++o)h.onnx.ValueInfoProto.encode(e.input[o],r.uint32(90).fork()).ldelim();if(e.output!=null&&e.output.length)for(var o=0;o<e.output.length;++o)h.onnx.ValueInfoProto.encode(e.output[o],r.uint32(98).fork()).ldelim();if(e.valueInfo!=null&&e.valueInfo.length)for(var o=0;o<e.valueInfo.length;++o)h.onnx.ValueInfoProto.encode(e.valueInfo[o],r.uint32(106).fork()).ldelim();if(e.quantizationAnnotation!=null&&e.quantizationAnnotation.length)for(var o=0;o<e.quantizationAnnotation.length;++o)h.onnx.TensorAnnotation.encode(e.quantizationAnnotation[o],r.uint32(114).fork()).ldelim();if(e.sparseInitializer!=null&&e.sparseInitializer.length)for(var o=0;o<e.sparseInitializer.length;++o)h.onnx.SparseTensorProto.encode(e.sparseInitializer[o],r.uint32(122).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof R||(e=R.create(e));for(var o=r===void 0?e.len:e.pos+r,s=new h.onnx.GraphProto;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:{s.node&&s.node.length||(s.node=[]),s.node.push(h.onnx.NodeProto.decode(e,e.uint32()));break}case 2:{s.name=e.string();break}case 5:{s.initializer&&s.initializer.length||(s.initializer=[]),s.initializer.push(h.onnx.TensorProto.decode(e,e.uint32()));break}case 15:{s.sparseInitializer&&s.sparseInitializer.length||(s.sparseInitializer=[]),s.sparseInitializer.push(h.onnx.SparseTensorProto.decode(e,e.uint32()));break}case 10:{s.docString=e.string();break}case 11:{s.input&&s.input.length||(s.input=[]),s.input.push(h.onnx.ValueInfoProto.decode(e,e.uint32()));break}case 12:{s.output&&s.output.length||(s.output=[]),s.output.push(h.onnx.ValueInfoProto.decode(e,e.uint32()));break}case 13:{s.valueInfo&&s.valueInfo.length||(s.valueInfo=[]),s.valueInfo.push(h.onnx.ValueInfoProto.decode(e,e.uint32()));break}case 14:{s.quantizationAnnotation&&s.quantizationAnnotation.length||(s.quantizationAnnotation=[]),s.quantizationAnnotation.push(h.onnx.TensorAnnotation.decode(e,e.uint32()));break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.node!=null&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(var r=0;r<e.node.length;++r){var o=h.onnx.NodeProto.verify(e.node[r]);if(o)return"node."+o}}if(e.name!=null&&e.hasOwnProperty("name")&&!y.isString(e.name))return"name: string expected";if(e.initializer!=null&&e.hasOwnProperty("initializer")){if(!Array.isArray(e.initializer))return"initializer: array expected";for(var r=0;r<e.initializer.length;++r){var o=h.onnx.TensorProto.verify(e.initializer[r]);if(o)return"initializer."+o}}if(e.sparseInitializer!=null&&e.hasOwnProperty("sparseInitializer")){if(!Array.isArray(e.sparseInitializer))return"sparseInitializer: array expected";for(var r=0;r<e.sparseInitializer.length;++r){var o=h.onnx.SparseTensorProto.verify(e.sparseInitializer[r]);if(o)return"sparseInitializer."+o}}if(e.docString!=null&&e.hasOwnProperty("docString")&&!y.isString(e.docString))return"docString: string expected";if(e.input!=null&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var r=0;r<e.input.length;++r){var o=h.onnx.ValueInfoProto.verify(e.input[r]);if(o)return"input."+o}}if(e.output!=null&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(var r=0;r<e.output.length;++r){var o=h.onnx.ValueInfoProto.verify(e.output[r]);if(o)return"output."+o}}if(e.valueInfo!=null&&e.hasOwnProperty("valueInfo")){if(!Array.isArray(e.valueInfo))return"valueInfo: array expected";for(var r=0;r<e.valueInfo.length;++r){var o=h.onnx.ValueInfoProto.verify(e.valueInfo[r]);if(o)return"valueInfo."+o}}if(e.quantizationAnnotation!=null&&e.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(e.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var r=0;r<e.quantizationAnnotation.length;++r){var o=h.onnx.TensorAnnotation.verify(e.quantizationAnnotation[r]);if(o)return"quantizationAnnotation."+o}}return null},t.fromObject=function(e){if(e instanceof h.onnx.GraphProto)return e;var r=new h.onnx.GraphProto;if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.GraphProto.node: array expected");r.node=[];for(var o=0;o<e.node.length;++o){if(typeof e.node[o]!="object")throw TypeError(".onnx.GraphProto.node: object expected");r.node[o]=h.onnx.NodeProto.fromObject(e.node[o])}}if(e.name!=null&&(r.name=String(e.name)),e.initializer){if(!Array.isArray(e.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");r.initializer=[];for(var o=0;o<e.initializer.length;++o){if(typeof e.initializer[o]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");r.initializer[o]=h.onnx.TensorProto.fromObject(e.initializer[o])}}if(e.sparseInitializer){if(!Array.isArray(e.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");r.sparseInitializer=[];for(var o=0;o<e.sparseInitializer.length;++o){if(typeof e.sparseInitializer[o]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");r.sparseInitializer[o]=h.onnx.SparseTensorProto.fromObject(e.sparseInitializer[o])}}if(e.docString!=null&&(r.docString=String(e.docString)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.GraphProto.input: array expected");r.input=[];for(var o=0;o<e.input.length;++o){if(typeof e.input[o]!="object")throw TypeError(".onnx.GraphProto.input: object expected");r.input[o]=h.onnx.ValueInfoProto.fromObject(e.input[o])}}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.GraphProto.output: array expected");r.output=[];for(var o=0;o<e.output.length;++o){if(typeof e.output[o]!="object")throw TypeError(".onnx.GraphProto.output: object expected");r.output[o]=h.onnx.ValueInfoProto.fromObject(e.output[o])}}if(e.valueInfo){if(!Array.isArray(e.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");r.valueInfo=[];for(var o=0;o<e.valueInfo.length;++o){if(typeof e.valueInfo[o]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");r.valueInfo[o]=h.onnx.ValueInfoProto.fromObject(e.valueInfo[o])}}if(e.quantizationAnnotation){if(!Array.isArray(e.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");r.quantizationAnnotation=[];for(var o=0;o<e.quantizationAnnotation.length;++o){if(typeof e.quantizationAnnotation[o]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");r.quantizationAnnotation[o]=h.onnx.TensorAnnotation.fromObject(e.quantizationAnnotation[o])}}return r},t.toObject=function(e,r){r||(r={});var o={};if((r.arrays||r.defaults)&&(o.node=[],o.initializer=[],o.input=[],o.output=[],o.valueInfo=[],o.quantizationAnnotation=[],o.sparseInitializer=[]),r.defaults&&(o.name="",o.docString=""),e.node&&e.node.length){o.node=[];for(var s=0;s<e.node.length;++s)o.node[s]=h.onnx.NodeProto.toObject(e.node[s],r)}if(e.name!=null&&e.hasOwnProperty("name")&&(o.name=e.name),e.initializer&&e.initializer.length){o.initializer=[];for(var s=0;s<e.initializer.length;++s)o.initializer[s]=h.onnx.TensorProto.toObject(e.initializer[s],r)}if(e.docString!=null&&e.hasOwnProperty("docString")&&(o.docString=e.docString),e.input&&e.input.length){o.input=[];for(var s=0;s<e.input.length;++s)o.input[s]=h.onnx.ValueInfoProto.toObject(e.input[s],r)}if(e.output&&e.output.length){o.output=[];for(var s=0;s<e.output.length;++s)o.output[s]=h.onnx.ValueInfoProto.toObject(e.output[s],r)}if(e.valueInfo&&e.valueInfo.length){o.valueInfo=[];for(var s=0;s<e.valueInfo.length;++s)o.valueInfo[s]=h.onnx.ValueInfoProto.toObject(e.valueInfo[s],r)}if(e.quantizationAnnotation&&e.quantizationAnnotation.length){o.quantizationAnnotation=[];for(var s=0;s<e.quantizationAnnotation.length;++s)o.quantizationAnnotation[s]=h.onnx.TensorAnnotation.toObject(e.quantizationAnnotation[s],r)}if(e.sparseInitializer&&e.sparseInitializer.length){o.sparseInitializer=[];for(var s=0;s<e.sparseInitializer.length;++s)o.sparseInitializer[s]=h.onnx.SparseTensorProto.toObject(e.sparseInitializer[s],r)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.GraphProto"},t}(),a.TensorProto=function(){function t(n){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],n)for(var e=Object.keys(n),r=0;r<e.length;++r)n[e[r]]!=null&&(this[e[r]]=n[e[r]])}return t.prototype.dims=y.emptyArray,t.prototype.dataType=0,t.prototype.segment=null,t.prototype.floatData=y.emptyArray,t.prototype.int32Data=y.emptyArray,t.prototype.stringData=y.emptyArray,t.prototype.int64Data=y.emptyArray,t.prototype.name="",t.prototype.docString="",t.prototype.rawData=y.newBuffer([]),t.prototype.externalData=y.emptyArray,t.prototype.dataLocation=0,t.prototype.doubleData=y.emptyArray,t.prototype.uint64Data=y.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ee.create()),e.dims!=null&&e.dims.length){r.uint32(10).fork();for(var o=0;o<e.dims.length;++o)r.int64(e.dims[o]);r.ldelim()}if(e.dataType!=null&&Object.hasOwnProperty.call(e,"dataType")&&r.uint32(16).int32(e.dataType),e.segment!=null&&Object.hasOwnProperty.call(e,"segment")&&h.onnx.TensorProto.Segment.encode(e.segment,r.uint32(26).fork()).ldelim(),e.floatData!=null&&e.floatData.length){r.uint32(34).fork();for(var o=0;o<e.floatData.length;++o)r.float(e.floatData[o]);r.ldelim()}if(e.int32Data!=null&&e.int32Data.length){r.uint32(42).fork();for(var o=0;o<e.int32Data.length;++o)r.int32(e.int32Data[o]);r.ldelim()}if(e.stringData!=null&&e.stringData.length)for(var o=0;o<e.stringData.length;++o)r.uint32(50).bytes(e.stringData[o]);if(e.int64Data!=null&&e.int64Data.length){r.uint32(58).fork();for(var o=0;o<e.int64Data.length;++o)r.int64(e.int64Data[o]);r.ldelim()}if(e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(66).string(e.name),e.rawData!=null&&Object.hasOwnProperty.call(e,"rawData")&&r.uint32(74).bytes(e.rawData),e.doubleData!=null&&e.doubleData.length){r.uint32(82).fork();for(var o=0;o<e.doubleData.length;++o)r.double(e.doubleData[o]);r.ldelim()}if(e.uint64Data!=null&&e.uint64Data.length){r.uint32(90).fork();for(var o=0;o<e.uint64Data.length;++o)r.uint64(e.uint64Data[o]);r.ldelim()}if(e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(98).string(e.docString),e.externalData!=null&&e.externalData.length)for(var o=0;o<e.externalData.length;++o)h.onnx.StringStringEntryProto.encode(e.externalData[o],r.uint32(106).fork()).ldelim();return e.dataLocation!=null&&Object.hasOwnProperty.call(e,"dataLocation")&&r.uint32(112).int32(e.dataLocation),r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof R||(e=R.create(e));for(var o=r===void 0?e.len:e.pos+r,s=new h.onnx.TensorProto;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:{if(s.dims&&s.dims.length||(s.dims=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.dims.push(e.int64());else s.dims.push(e.int64());break}case 2:{s.dataType=e.int32();break}case 3:{s.segment=h.onnx.TensorProto.Segment.decode(e,e.uint32());break}case 4:{if(s.floatData&&s.floatData.length||(s.floatData=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.floatData.push(e.float());else s.floatData.push(e.float());break}case 5:{if(s.int32Data&&s.int32Data.length||(s.int32Data=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.int32Data.push(e.int32());else s.int32Data.push(e.int32());break}case 6:{s.stringData&&s.stringData.length||(s.stringData=[]),s.stringData.push(e.bytes());break}case 7:{if(s.int64Data&&s.int64Data.length||(s.int64Data=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.int64Data.push(e.int64());else s.int64Data.push(e.int64());break}case 8:{s.name=e.string();break}case 12:{s.docString=e.string();break}case 9:{s.rawData=e.bytes();break}case 13:{s.externalData&&s.externalData.length||(s.externalData=[]),s.externalData.push(h.onnx.StringStringEntryProto.decode(e,e.uint32()));break}case 14:{s.dataLocation=e.int32();break}case 10:{if(s.doubleData&&s.doubleData.length||(s.doubleData=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.doubleData.push(e.double());else s.doubleData.push(e.double());break}case 11:{if(s.uint64Data&&s.uint64Data.length||(s.uint64Data=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.uint64Data.push(e.uint64());else s.uint64Data.push(e.uint64());break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.dims!=null&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var r=0;r<e.dims.length;++r)if(!y.isInteger(e.dims[r])&&!(e.dims[r]&&y.isInteger(e.dims[r].low)&&y.isInteger(e.dims[r].high)))return"dims: integer|Long[] expected"}if(e.dataType!=null&&e.hasOwnProperty("dataType")&&!y.isInteger(e.dataType))return"dataType: integer expected";if(e.segment!=null&&e.hasOwnProperty("segment")){var o=h.onnx.TensorProto.Segment.verify(e.segment);if(o)return"segment."+o}if(e.floatData!=null&&e.hasOwnProperty("floatData")){if(!Array.isArray(e.floatData))return"floatData: array expected";for(var r=0;r<e.floatData.length;++r)if(typeof e.floatData[r]!="number")return"floatData: number[] expected"}if(e.int32Data!=null&&e.hasOwnProperty("int32Data")){if(!Array.isArray(e.int32Data))return"int32Data: array expected";for(var r=0;r<e.int32Data.length;++r)if(!y.isInteger(e.int32Data[r]))return"int32Data: integer[] expected"}if(e.stringData!=null&&e.hasOwnProperty("stringData")){if(!Array.isArray(e.stringData))return"stringData: array expected";for(var r=0;r<e.stringData.length;++r)if(!(e.stringData[r]&&typeof e.stringData[r].length=="number"||y.isString(e.stringData[r])))return"stringData: buffer[] expected"}if(e.int64Data!=null&&e.hasOwnProperty("int64Data")){if(!Array.isArray(e.int64Data))return"int64Data: array expected";for(var r=0;r<e.int64Data.length;++r)if(!y.isInteger(e.int64Data[r])&&!(e.int64Data[r]&&y.isInteger(e.int64Data[r].low)&&y.isInteger(e.int64Data[r].high)))return"int64Data: integer|Long[] expected"}if(e.name!=null&&e.hasOwnProperty("name")&&!y.isString(e.name))return"name: string expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!y.isString(e.docString))return"docString: string expected";if(e.rawData!=null&&e.hasOwnProperty("rawData")&&!(e.rawData&&typeof e.rawData.length=="number"||y.isString(e.rawData)))return"rawData: buffer expected";if(e.externalData!=null&&e.hasOwnProperty("externalData")){if(!Array.isArray(e.externalData))return"externalData: array expected";for(var r=0;r<e.externalData.length;++r){var o=h.onnx.StringStringEntryProto.verify(e.externalData[r]);if(o)return"externalData."+o}}if(e.dataLocation!=null&&e.hasOwnProperty("dataLocation"))switch(e.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:break}if(e.doubleData!=null&&e.hasOwnProperty("doubleData")){if(!Array.isArray(e.doubleData))return"doubleData: array expected";for(var r=0;r<e.doubleData.length;++r)if(typeof e.doubleData[r]!="number")return"doubleData: number[] expected"}if(e.uint64Data!=null&&e.hasOwnProperty("uint64Data")){if(!Array.isArray(e.uint64Data))return"uint64Data: array expected";for(var r=0;r<e.uint64Data.length;++r)if(!y.isInteger(e.uint64Data[r])&&!(e.uint64Data[r]&&y.isInteger(e.uint64Data[r].low)&&y.isInteger(e.uint64Data[r].high)))return"uint64Data: integer|Long[] expected"}return null},t.fromObject=function(e){if(e instanceof h.onnx.TensorProto)return e;var r=new h.onnx.TensorProto;if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.TensorProto.dims: array expected");r.dims=[];for(var o=0;o<e.dims.length;++o)y.Long?(r.dims[o]=y.Long.fromValue(e.dims[o])).unsigned=!1:typeof e.dims[o]=="string"?r.dims[o]=parseInt(e.dims[o],10):typeof e.dims[o]=="number"?r.dims[o]=e.dims[o]:typeof e.dims[o]=="object"&&(r.dims[o]=new y.LongBits(e.dims[o].low>>>0,e.dims[o].high>>>0).toNumber())}if(e.dataType!=null&&(r.dataType=e.dataType|0),e.segment!=null){if(typeof e.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");r.segment=h.onnx.TensorProto.Segment.fromObject(e.segment)}if(e.floatData){if(!Array.isArray(e.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");r.floatData=[];for(var o=0;o<e.floatData.length;++o)r.floatData[o]=Number(e.floatData[o])}if(e.int32Data){if(!Array.isArray(e.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");r.int32Data=[];for(var o=0;o<e.int32Data.length;++o)r.int32Data[o]=e.int32Data[o]|0}if(e.stringData){if(!Array.isArray(e.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");r.stringData=[];for(var o=0;o<e.stringData.length;++o)typeof e.stringData[o]=="string"?y.base64.decode(e.stringData[o],r.stringData[o]=y.newBuffer(y.base64.length(e.stringData[o])),0):e.stringData[o].length>=0&&(r.stringData[o]=e.stringData[o])}if(e.int64Data){if(!Array.isArray(e.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");r.int64Data=[];for(var o=0;o<e.int64Data.length;++o)y.Long?(r.int64Data[o]=y.Long.fromValue(e.int64Data[o])).unsigned=!1:typeof e.int64Data[o]=="string"?r.int64Data[o]=parseInt(e.int64Data[o],10):typeof e.int64Data[o]=="number"?r.int64Data[o]=e.int64Data[o]:typeof e.int64Data[o]=="object"&&(r.int64Data[o]=new y.LongBits(e.int64Data[o].low>>>0,e.int64Data[o].high>>>0).toNumber())}if(e.name!=null&&(r.name=String(e.name)),e.docString!=null&&(r.docString=String(e.docString)),e.rawData!=null&&(typeof e.rawData=="string"?y.base64.decode(e.rawData,r.rawData=y.newBuffer(y.base64.length(e.rawData)),0):e.rawData.length>=0&&(r.rawData=e.rawData)),e.externalData){if(!Array.isArray(e.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");r.externalData=[];for(var o=0;o<e.externalData.length;++o){if(typeof e.externalData[o]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");r.externalData[o]=h.onnx.StringStringEntryProto.fromObject(e.externalData[o])}}switch(e.dataLocation){default:if(typeof e.dataLocation=="number"){r.dataLocation=e.dataLocation;break}break;case"DEFAULT":case 0:r.dataLocation=0;break;case"EXTERNAL":case 1:r.dataLocation=1;break}if(e.doubleData){if(!Array.isArray(e.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");r.doubleData=[];for(var o=0;o<e.doubleData.length;++o)r.doubleData[o]=Number(e.doubleData[o])}if(e.uint64Data){if(!Array.isArray(e.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");r.uint64Data=[];for(var o=0;o<e.uint64Data.length;++o)y.Long?(r.uint64Data[o]=y.Long.fromValue(e.uint64Data[o])).unsigned=!0:typeof e.uint64Data[o]=="string"?r.uint64Data[o]=parseInt(e.uint64Data[o],10):typeof e.uint64Data[o]=="number"?r.uint64Data[o]=e.uint64Data[o]:typeof e.uint64Data[o]=="object"&&(r.uint64Data[o]=new y.LongBits(e.uint64Data[o].low>>>0,e.uint64Data[o].high>>>0).toNumber(!0))}return r},t.toObject=function(e,r){r||(r={});var o={};if((r.arrays||r.defaults)&&(o.dims=[],o.floatData=[],o.int32Data=[],o.stringData=[],o.int64Data=[],o.doubleData=[],o.uint64Data=[],o.externalData=[]),r.defaults&&(o.dataType=0,o.segment=null,o.name="",r.bytes===String?o.rawData="":(o.rawData=[],r.bytes!==Array&&(o.rawData=y.newBuffer(o.rawData))),o.docString="",o.dataLocation=r.enums===String?"DEFAULT":0),e.dims&&e.dims.length){o.dims=[];for(var s=0;s<e.dims.length;++s)typeof e.dims[s]=="number"?o.dims[s]=r.longs===String?String(e.dims[s]):e.dims[s]:o.dims[s]=r.longs===String?y.Long.prototype.toString.call(e.dims[s]):r.longs===Number?new y.LongBits(e.dims[s].low>>>0,e.dims[s].high>>>0).toNumber():e.dims[s]}if(e.dataType!=null&&e.hasOwnProperty("dataType")&&(o.dataType=e.dataType),e.segment!=null&&e.hasOwnProperty("segment")&&(o.segment=h.onnx.TensorProto.Segment.toObject(e.segment,r)),e.floatData&&e.floatData.length){o.floatData=[];for(var s=0;s<e.floatData.length;++s)o.floatData[s]=r.json&&!isFinite(e.floatData[s])?String(e.floatData[s]):e.floatData[s]}if(e.int32Data&&e.int32Data.length){o.int32Data=[];for(var s=0;s<e.int32Data.length;++s)o.int32Data[s]=e.int32Data[s]}if(e.stringData&&e.stringData.length){o.stringData=[];for(var s=0;s<e.stringData.length;++s)o.stringData[s]=r.bytes===String?y.base64.encode(e.stringData[s],0,e.stringData[s].length):r.bytes===Array?Array.prototype.slice.call(e.stringData[s]):e.stringData[s]}if(e.int64Data&&e.int64Data.length){o.int64Data=[];for(var s=0;s<e.int64Data.length;++s)typeof e.int64Data[s]=="number"?o.int64Data[s]=r.longs===String?String(e.int64Data[s]):e.int64Data[s]:o.int64Data[s]=r.longs===String?y.Long.prototype.toString.call(e.int64Data[s]):r.longs===Number?new y.LongBits(e.int64Data[s].low>>>0,e.int64Data[s].high>>>0).toNumber():e.int64Data[s]}if(e.name!=null&&e.hasOwnProperty("name")&&(o.name=e.name),e.rawData!=null&&e.hasOwnProperty("rawData")&&(o.rawData=r.bytes===String?y.base64.encode(e.rawData,0,e.rawData.length):r.bytes===Array?Array.prototype.slice.call(e.rawData):e.rawData),e.doubleData&&e.doubleData.length){o.doubleData=[];for(var s=0;s<e.doubleData.length;++s)o.doubleData[s]=r.json&&!isFinite(e.doubleData[s])?String(e.doubleData[s]):e.doubleData[s]}if(e.uint64Data&&e.uint64Data.length){o.uint64Data=[];for(var s=0;s<e.uint64Data.length;++s)typeof e.uint64Data[s]=="number"?o.uint64Data[s]=r.longs===String?String(e.uint64Data[s]):e.uint64Data[s]:o.uint64Data[s]=r.longs===String?y.Long.prototype.toString.call(e.uint64Data[s]):r.longs===Number?new y.LongBits(e.uint64Data[s].low>>>0,e.uint64Data[s].high>>>0).toNumber(!0):e.uint64Data[s]}if(e.docString!=null&&e.hasOwnProperty("docString")&&(o.docString=e.docString),e.externalData&&e.externalData.length){o.externalData=[];for(var s=0;s<e.externalData.length;++s)o.externalData[s]=h.onnx.StringStringEntryProto.toObject(e.externalData[s],r)}return e.dataLocation!=null&&e.hasOwnProperty("dataLocation")&&(o.dataLocation=r.enums===String?h.onnx.TensorProto.DataLocation[e.dataLocation]===void 0?e.dataLocation:h.onnx.TensorProto.DataLocation[e.dataLocation]:e.dataLocation),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.TensorProto"},t.DataType=function(){var n={},e=Object.create(n);return e[n[0]="UNDEFINED"]=0,e[n[1]="FLOAT"]=1,e[n[2]="UINT8"]=2,e[n[3]="INT8"]=3,e[n[4]="UINT16"]=4,e[n[5]="INT16"]=5,e[n[6]="INT32"]=6,e[n[7]="INT64"]=7,e[n[8]="STRING"]=8,e[n[9]="BOOL"]=9,e[n[10]="FLOAT16"]=10,e[n[11]="DOUBLE"]=11,e[n[12]="UINT32"]=12,e[n[13]="UINT64"]=13,e[n[14]="COMPLEX64"]=14,e[n[15]="COMPLEX128"]=15,e[n[16]="BFLOAT16"]=16,e[n[17]="FLOAT8E4M3FN"]=17,e[n[18]="FLOAT8E4M3FNUZ"]=18,e[n[19]="FLOAT8E5M2"]=19,e[n[20]="FLOAT8E5M2FNUZ"]=20,e}(),t.Segment=function(){function n(e){if(e)for(var r=Object.keys(e),o=0;o<r.length;++o)e[r[o]]!=null&&(this[r[o]]=e[r[o]])}return n.prototype.begin=y.Long?y.Long.fromBits(0,0,!1):0,n.prototype.end=y.Long?y.Long.fromBits(0,0,!1):0,n.create=function(r){return new n(r)},n.encode=function(r,o){return o||(o=Ee.create()),r.begin!=null&&Object.hasOwnProperty.call(r,"begin")&&o.uint32(8).int64(r.begin),r.end!=null&&Object.hasOwnProperty.call(r,"end")&&o.uint32(16).int64(r.end),o},n.encodeDelimited=function(r,o){return this.encode(r,o).ldelim()},n.decode=function(r,o){r instanceof R||(r=R.create(r));for(var s=o===void 0?r.len:r.pos+o,i=new h.onnx.TensorProto.Segment;r.pos<s;){var u=r.uint32();switch(u>>>3){case 1:{i.begin=r.int64();break}case 2:{i.end=r.int64();break}default:r.skipType(u&7);break}}return i},n.decodeDelimited=function(r){return r instanceof R||(r=new R(r)),this.decode(r,r.uint32())},n.verify=function(r){return typeof r!="object"||r===null?"object expected":r.begin!=null&&r.hasOwnProperty("begin")&&!y.isInteger(r.begin)&&!(r.begin&&y.isInteger(r.begin.low)&&y.isInteger(r.begin.high))?"begin: integer|Long expected":r.end!=null&&r.hasOwnProperty("end")&&!y.isInteger(r.end)&&!(r.end&&y.isInteger(r.end.low)&&y.isInteger(r.end.high))?"end: integer|Long expected":null},n.fromObject=function(r){if(r instanceof h.onnx.TensorProto.Segment)return r;var o=new h.onnx.TensorProto.Segment;return r.begin!=null&&(y.Long?(o.begin=y.Long.fromValue(r.begin)).unsigned=!1:typeof r.begin=="string"?o.begin=parseInt(r.begin,10):typeof r.begin=="number"?o.begin=r.begin:typeof r.begin=="object"&&(o.begin=new y.LongBits(r.begin.low>>>0,r.begin.high>>>0).toNumber())),r.end!=null&&(y.Long?(o.end=y.Long.fromValue(r.end)).unsigned=!1:typeof r.end=="string"?o.end=parseInt(r.end,10):typeof r.end=="number"?o.end=r.end:typeof r.end=="object"&&(o.end=new y.LongBits(r.end.low>>>0,r.end.high>>>0).toNumber())),o},n.toObject=function(r,o){o||(o={});var s={};if(o.defaults){if(y.Long){var i=new y.Long(0,0,!1);s.begin=o.longs===String?i.toString():o.longs===Number?i.toNumber():i}else s.begin=o.longs===String?"0":0;if(y.Long){var i=new y.Long(0,0,!1);s.end=o.longs===String?i.toString():o.longs===Number?i.toNumber():i}else s.end=o.longs===String?"0":0}return r.begin!=null&&r.hasOwnProperty("begin")&&(typeof r.begin=="number"?s.begin=o.longs===String?String(r.begin):r.begin:s.begin=o.longs===String?y.Long.prototype.toString.call(r.begin):o.longs===Number?new y.LongBits(r.begin.low>>>0,r.begin.high>>>0).toNumber():r.begin),r.end!=null&&r.hasOwnProperty("end")&&(typeof r.end=="number"?s.end=o.longs===String?String(r.end):r.end:s.end=o.longs===String?y.Long.prototype.toString.call(r.end):o.longs===Number?new y.LongBits(r.end.low>>>0,r.end.high>>>0).toNumber():r.end),s},n.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},n.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TensorProto.Segment"},n}(),t.DataLocation=function(){var n={},e=Object.create(n);return e[n[0]="DEFAULT"]=0,e[n[1]="EXTERNAL"]=1,e}(),t}(),a.SparseTensorProto=function(){function t(n){if(this.dims=[],n)for(var e=Object.keys(n),r=0;r<e.length;++r)n[e[r]]!=null&&(this[e[r]]=n[e[r]])}return t.prototype.values=null,t.prototype.indices=null,t.prototype.dims=y.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ee.create()),e.values!=null&&Object.hasOwnProperty.call(e,"values")&&h.onnx.TensorProto.encode(e.values,r.uint32(10).fork()).ldelim(),e.indices!=null&&Object.hasOwnProperty.call(e,"indices")&&h.onnx.TensorProto.encode(e.indices,r.uint32(18).fork()).ldelim(),e.dims!=null&&e.dims.length){r.uint32(26).fork();for(var o=0;o<e.dims.length;++o)r.int64(e.dims[o]);r.ldelim()}return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof R||(e=R.create(e));for(var o=r===void 0?e.len:e.pos+r,s=new h.onnx.SparseTensorProto;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:{s.values=h.onnx.TensorProto.decode(e,e.uint32());break}case 2:{s.indices=h.onnx.TensorProto.decode(e,e.uint32());break}case 3:{if(s.dims&&s.dims.length||(s.dims=[]),(i&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.dims.push(e.int64());else s.dims.push(e.int64());break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.values!=null&&e.hasOwnProperty("values")){var r=h.onnx.TensorProto.verify(e.values);if(r)return"values."+r}if(e.indices!=null&&e.hasOwnProperty("indices")){var r=h.onnx.TensorProto.verify(e.indices);if(r)return"indices."+r}if(e.dims!=null&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var o=0;o<e.dims.length;++o)if(!y.isInteger(e.dims[o])&&!(e.dims[o]&&y.isInteger(e.dims[o].low)&&y.isInteger(e.dims[o].high)))return"dims: integer|Long[] expected"}return null},t.fromObject=function(e){if(e instanceof h.onnx.SparseTensorProto)return e;var r=new h.onnx.SparseTensorProto;if(e.values!=null){if(typeof e.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");r.values=h.onnx.TensorProto.fromObject(e.values)}if(e.indices!=null){if(typeof e.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");r.indices=h.onnx.TensorProto.fromObject(e.indices)}if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");r.dims=[];for(var o=0;o<e.dims.length;++o)y.Long?(r.dims[o]=y.Long.fromValue(e.dims[o])).unsigned=!1:typeof e.dims[o]=="string"?r.dims[o]=parseInt(e.dims[o],10):typeof e.dims[o]=="number"?r.dims[o]=e.dims[o]:typeof e.dims[o]=="object"&&(r.dims[o]=new y.LongBits(e.dims[o].low>>>0,e.dims[o].high>>>0).toNumber())}return r},t.toObject=function(e,r){r||(r={});var o={};if((r.arrays||r.defaults)&&(o.dims=[]),r.defaults&&(o.values=null,o.indices=null),e.values!=null&&e.hasOwnProperty("values")&&(o.values=h.onnx.TensorProto.toObject(e.values,r)),e.indices!=null&&e.hasOwnProperty("indices")&&(o.indices=h.onnx.TensorProto.toObject(e.indices,r)),e.dims&&e.dims.length){o.dims=[];for(var s=0;s<e.dims.length;++s)typeof e.dims[s]=="number"?o.dims[s]=r.longs===String?String(e.dims[s]):e.dims[s]:o.dims[s]=r.longs===String?y.Long.prototype.toString.call(e.dims[s]):r.longs===Number?new y.LongBits(e.dims[s].low>>>0,e.dims[s].high>>>0).toNumber():e.dims[s]}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.SparseTensorProto"},t}(),a.TensorShapeProto=function(){function t(n){if(this.dim=[],n)for(var e=Object.keys(n),r=0;r<e.length;++r)n[e[r]]!=null&&(this[e[r]]=n[e[r]])}return t.prototype.dim=y.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ee.create()),e.dim!=null&&e.dim.length)for(var o=0;o<e.dim.length;++o)h.onnx.TensorShapeProto.Dimension.encode(e.dim[o],r.uint32(10).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof R||(e=R.create(e));for(var o=r===void 0?e.len:e.pos+r,s=new h.onnx.TensorShapeProto;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:{s.dim&&s.dim.length||(s.dim=[]),s.dim.push(h.onnx.TensorShapeProto.Dimension.decode(e,e.uint32()));break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.dim!=null&&e.hasOwnProperty("dim")){if(!Array.isArray(e.dim))return"dim: array expected";for(var r=0;r<e.dim.length;++r){var o=h.onnx.TensorShapeProto.Dimension.verify(e.dim[r]);if(o)return"dim."+o}}return null},t.fromObject=function(e){if(e instanceof h.onnx.TensorShapeProto)return e;var r=new h.onnx.TensorShapeProto;if(e.dim){if(!Array.isArray(e.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");r.dim=[];for(var o=0;o<e.dim.length;++o){if(typeof e.dim[o]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");r.dim[o]=h.onnx.TensorShapeProto.Dimension.fromObject(e.dim[o])}}return r},t.toObject=function(e,r){r||(r={});var o={};if((r.arrays||r.defaults)&&(o.dim=[]),e.dim&&e.dim.length){o.dim=[];for(var s=0;s<e.dim.length;++s)o.dim[s]=h.onnx.TensorShapeProto.Dimension.toObject(e.dim[s],r)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.TensorShapeProto"},t.Dimension=function(){function n(r){if(r)for(var o=Object.keys(r),s=0;s<o.length;++s)r[o[s]]!=null&&(this[o[s]]=r[o[s]])}n.prototype.dimValue=null,n.prototype.dimParam=null,n.prototype.denotation="";var e;return Object.defineProperty(n.prototype,"value",{get:y.oneOfGetter(e=["dimValue","dimParam"]),set:y.oneOfSetter(e)}),n.create=function(o){return new n(o)},n.encode=function(o,s){return s||(s=Ee.create()),o.dimValue!=null&&Object.hasOwnProperty.call(o,"dimValue")&&s.uint32(8).int64(o.dimValue),o.dimParam!=null&&Object.hasOwnProperty.call(o,"dimParam")&&s.uint32(18).string(o.dimParam),o.denotation!=null&&Object.hasOwnProperty.call(o,"denotation")&&s.uint32(26).string(o.denotation),s},n.encodeDelimited=function(o,s){return this.encode(o,s).ldelim()},n.decode=function(o,s){o instanceof R||(o=R.create(o));for(var i=s===void 0?o.len:o.pos+s,u=new h.onnx.TensorShapeProto.Dimension;o.pos<i;){var l=o.uint32();switch(l>>>3){case 1:{u.dimValue=o.int64();break}case 2:{u.dimParam=o.string();break}case 3:{u.denotation=o.string();break}default:o.skipType(l&7);break}}return u},n.decodeDelimited=function(o){return o instanceof R||(o=new R(o)),this.decode(o,o.uint32())},n.verify=function(o){if(typeof o!="object"||o===null)return"object expected";var s={};if(o.dimValue!=null&&o.hasOwnProperty("dimValue")&&(s.value=1,!y.isInteger(o.dimValue)&&!(o.dimValue&&y.isInteger(o.dimValue.low)&&y.isInteger(o.dimValue.high))))return"dimValue: integer|Long expected";if(o.dimParam!=null&&o.hasOwnProperty("dimParam")){if(s.value===1)return"value: multiple values";if(s.value=1,!y.isString(o.dimParam))return"dimParam: string expected"}return o.denotation!=null&&o.hasOwnProperty("denotation")&&!y.isString(o.denotation)?"denotation: string expected":null},n.fromObject=function(o){if(o instanceof h.onnx.TensorShapeProto.Dimension)return o;var s=new h.onnx.TensorShapeProto.Dimension;return o.dimValue!=null&&(y.Long?(s.dimValue=y.Long.fromValue(o.dimValue)).unsigned=!1:typeof o.dimValue=="string"?s.dimValue=parseInt(o.dimValue,10):typeof o.dimValue=="number"?s.dimValue=o.dimValue:typeof o.dimValue=="object"&&(s.dimValue=new y.LongBits(o.dimValue.low>>>0,o.dimValue.high>>>0).toNumber())),o.dimParam!=null&&(s.dimParam=String(o.dimParam)),o.denotation!=null&&(s.denotation=String(o.denotation)),s},n.toObject=function(o,s){s||(s={});var i={};return s.defaults&&(i.denotation=""),o.dimValue!=null&&o.hasOwnProperty("dimValue")&&(typeof o.dimValue=="number"?i.dimValue=s.longs===String?String(o.dimValue):o.dimValue:i.dimValue=s.longs===String?y.Long.prototype.toString.call(o.dimValue):s.longs===Number?new y.LongBits(o.dimValue.low>>>0,o.dimValue.high>>>0).toNumber():o.dimValue,s.oneofs&&(i.value="dimValue")),o.dimParam!=null&&o.hasOwnProperty("dimParam")&&(i.dimParam=o.dimParam,s.oneofs&&(i.value="dimParam")),o.denotation!=null&&o.hasOwnProperty("denotation")&&(i.denotation=o.denotation),i},n.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},n.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TensorShapeProto.Dimension"},n}(),t}(),a.TypeProto=function(){function t(e){if(e)for(var r=Object.keys(e),o=0;o<r.length;++o)e[r[o]]!=null&&(this[r[o]]=e[r[o]])}t.prototype.tensorType=null,t.prototype.sequenceType=null,t.prototype.mapType=null,t.prototype.optionalType=null,t.prototype.sparseTensorType=null,t.prototype.denotation="";var n;return Object.defineProperty(t.prototype,"value",{get:y.oneOfGetter(n=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:y.oneOfSetter(n)}),t.create=function(r){return new t(r)},t.encode=function(r,o){return o||(o=Ee.create()),r.tensorType!=null&&Object.hasOwnProperty.call(r,"tensorType")&&h.onnx.TypeProto.Tensor.encode(r.tensorType,o.uint32(10).fork()).ldelim(),r.sequenceType!=null&&Object.hasOwnProperty.call(r,"sequenceType")&&h.onnx.TypeProto.Sequence.encode(r.sequenceType,o.uint32(34).fork()).ldelim(),r.mapType!=null&&Object.hasOwnProperty.call(r,"mapType")&&h.onnx.TypeProto.Map.encode(r.mapType,o.uint32(42).fork()).ldelim(),r.denotation!=null&&Object.hasOwnProperty.call(r,"denotation")&&o.uint32(50).string(r.denotation),r.sparseTensorType!=null&&Object.hasOwnProperty.call(r,"sparseTensorType")&&h.onnx.TypeProto.SparseTensor.encode(r.sparseTensorType,o.uint32(66).fork()).ldelim(),r.optionalType!=null&&Object.hasOwnProperty.call(r,"optionalType")&&h.onnx.TypeProto.Optional.encode(r.optionalType,o.uint32(74).fork()).ldelim(),o},t.encodeDelimited=function(r,o){return this.encode(r,o).ldelim()},t.decode=function(r,o){r instanceof R||(r=R.create(r));for(var s=o===void 0?r.len:r.pos+o,i=new h.onnx.TypeProto;r.pos<s;){var u=r.uint32();switch(u>>>3){case 1:{i.tensorType=h.onnx.TypeProto.Tensor.decode(r,r.uint32());break}case 4:{i.sequenceType=h.onnx.TypeProto.Sequence.decode(r,r.uint32());break}case 5:{i.mapType=h.onnx.TypeProto.Map.decode(r,r.uint32());break}case 9:{i.optionalType=h.onnx.TypeProto.Optional.decode(r,r.uint32());break}case 8:{i.sparseTensorType=h.onnx.TypeProto.SparseTensor.decode(r,r.uint32());break}case 6:{i.denotation=r.string();break}default:r.skipType(u&7);break}}return i},t.decodeDelimited=function(r){return r instanceof R||(r=new R(r)),this.decode(r,r.uint32())},t.verify=function(r){if(typeof r!="object"||r===null)return"object expected";var o={};if(r.tensorType!=null&&r.hasOwnProperty("tensorType")){o.value=1;{var s=h.onnx.TypeProto.Tensor.verify(r.tensorType);if(s)return"tensorType."+s}}if(r.sequenceType!=null&&r.hasOwnProperty("sequenceType")){if(o.value===1)return"value: multiple values";o.value=1;{var s=h.onnx.TypeProto.Sequence.verify(r.sequenceType);if(s)return"sequenceType."+s}}if(r.mapType!=null&&r.hasOwnProperty("mapType")){if(o.value===1)return"value: multiple values";o.value=1;{var s=h.onnx.TypeProto.Map.verify(r.mapType);if(s)return"mapType."+s}}if(r.optionalType!=null&&r.hasOwnProperty("optionalType")){if(o.value===1)return"value: multiple values";o.value=1;{var s=h.onnx.TypeProto.Optional.verify(r.optionalType);if(s)return"optionalType."+s}}if(r.sparseTensorType!=null&&r.hasOwnProperty("sparseTensorType")){if(o.value===1)return"value: multiple values";o.value=1;{var s=h.onnx.TypeProto.SparseTensor.verify(r.sparseTensorType);if(s)return"sparseTensorType."+s}}return r.denotation!=null&&r.hasOwnProperty("denotation")&&!y.isString(r.denotation)?"denotation: string expected":null},t.fromObject=function(r){if(r instanceof h.onnx.TypeProto)return r;var o=new h.onnx.TypeProto;if(r.tensorType!=null){if(typeof r.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");o.tensorType=h.onnx.TypeProto.Tensor.fromObject(r.tensorType)}if(r.sequenceType!=null){if(typeof r.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");o.sequenceType=h.onnx.TypeProto.Sequence.fromObject(r.sequenceType)}if(r.mapType!=null){if(typeof r.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");o.mapType=h.onnx.TypeProto.Map.fromObject(r.mapType)}if(r.optionalType!=null){if(typeof r.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");o.optionalType=h.onnx.TypeProto.Optional.fromObject(r.optionalType)}if(r.sparseTensorType!=null){if(typeof r.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");o.sparseTensorType=h.onnx.TypeProto.SparseTensor.fromObject(r.sparseTensorType)}return r.denotation!=null&&(o.denotation=String(r.denotation)),o},t.toObject=function(r,o){o||(o={});var s={};return o.defaults&&(s.denotation=""),r.tensorType!=null&&r.hasOwnProperty("tensorType")&&(s.tensorType=h.onnx.TypeProto.Tensor.toObject(r.tensorType,o),o.oneofs&&(s.value="tensorType")),r.sequenceType!=null&&r.hasOwnProperty("sequenceType")&&(s.sequenceType=h.onnx.TypeProto.Sequence.toObject(r.sequenceType,o),o.oneofs&&(s.value="sequenceType")),r.mapType!=null&&r.hasOwnProperty("mapType")&&(s.mapType=h.onnx.TypeProto.Map.toObject(r.mapType,o),o.oneofs&&(s.value="mapType")),r.denotation!=null&&r.hasOwnProperty("denotation")&&(s.denotation=r.denotation),r.sparseTensorType!=null&&r.hasOwnProperty("sparseTensorType")&&(s.sparseTensorType=h.onnx.TypeProto.SparseTensor.toObject(r.sparseTensorType,o),o.oneofs&&(s.value="sparseTensorType")),r.optionalType!=null&&r.hasOwnProperty("optionalType")&&(s.optionalType=h.onnx.TypeProto.Optional.toObject(r.optionalType,o),o.oneofs&&(s.value="optionalType")),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},t.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TypeProto"},t.Tensor=function(){function e(r){if(r)for(var o=Object.keys(r),s=0;s<o.length;++s)r[o[s]]!=null&&(this[o[s]]=r[o[s]])}return e.prototype.elemType=0,e.prototype.shape=null,e.create=function(o){return new e(o)},e.encode=function(o,s){return s||(s=Ee.create()),o.elemType!=null&&Object.hasOwnProperty.call(o,"elemType")&&s.uint32(8).int32(o.elemType),o.shape!=null&&Object.hasOwnProperty.call(o,"shape")&&h.onnx.TensorShapeProto.encode(o.shape,s.uint32(18).fork()).ldelim(),s},e.encodeDelimited=function(o,s){return this.encode(o,s).ldelim()},e.decode=function(o,s){o instanceof R||(o=R.create(o));for(var i=s===void 0?o.len:o.pos+s,u=new h.onnx.TypeProto.Tensor;o.pos<i;){var l=o.uint32();switch(l>>>3){case 1:{u.elemType=o.int32();break}case 2:{u.shape=h.onnx.TensorShapeProto.decode(o,o.uint32());break}default:o.skipType(l&7);break}}return u},e.decodeDelimited=function(o){return o instanceof R||(o=new R(o)),this.decode(o,o.uint32())},e.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.elemType!=null&&o.hasOwnProperty("elemType")&&!y.isInteger(o.elemType))return"elemType: integer expected";if(o.shape!=null&&o.hasOwnProperty("shape")){var s=h.onnx.TensorShapeProto.verify(o.shape);if(s)return"shape."+s}return null},e.fromObject=function(o){if(o instanceof h.onnx.TypeProto.Tensor)return o;var s=new h.onnx.TypeProto.Tensor;if(o.elemType!=null&&(s.elemType=o.elemType|0),o.shape!=null){if(typeof o.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");s.shape=h.onnx.TensorShapeProto.fromObject(o.shape)}return s},e.toObject=function(o,s){s||(s={});var i={};return s.defaults&&(i.elemType=0,i.shape=null),o.elemType!=null&&o.hasOwnProperty("elemType")&&(i.elemType=o.elemType),o.shape!=null&&o.hasOwnProperty("shape")&&(i.shape=h.onnx.TensorShapeProto.toObject(o.shape,s)),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},e.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TypeProto.Tensor"},e}(),t.Sequence=function(){function e(r){if(r)for(var o=Object.keys(r),s=0;s<o.length;++s)r[o[s]]!=null&&(this[o[s]]=r[o[s]])}return e.prototype.elemType=null,e.create=function(o){return new e(o)},e.encode=function(o,s){return s||(s=Ee.create()),o.elemType!=null&&Object.hasOwnProperty.call(o,"elemType")&&h.onnx.TypeProto.encode(o.elemType,s.uint32(10).fork()).ldelim(),s},e.encodeDelimited=function(o,s){return this.encode(o,s).ldelim()},e.decode=function(o,s){o instanceof R||(o=R.create(o));for(var i=s===void 0?o.len:o.pos+s,u=new h.onnx.TypeProto.Sequence;o.pos<i;){var l=o.uint32();switch(l>>>3){case 1:{u.elemType=h.onnx.TypeProto.decode(o,o.uint32());break}default:o.skipType(l&7);break}}return u},e.decodeDelimited=function(o){return o instanceof R||(o=new R(o)),this.decode(o,o.uint32())},e.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.elemType!=null&&o.hasOwnProperty("elemType")){var s=h.onnx.TypeProto.verify(o.elemType);if(s)return"elemType."+s}return null},e.fromObject=function(o){if(o instanceof h.onnx.TypeProto.Sequence)return o;var s=new h.onnx.TypeProto.Sequence;if(o.elemType!=null){if(typeof o.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");s.elemType=h.onnx.TypeProto.fromObject(o.elemType)}return s},e.toObject=function(o,s){s||(s={});var i={};return s.defaults&&(i.elemType=null),o.elemType!=null&&o.hasOwnProperty("elemType")&&(i.elemType=h.onnx.TypeProto.toObject(o.elemType,s)),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},e.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TypeProto.Sequence"},e}(),t.Map=function(){function e(r){if(r)for(var o=Object.keys(r),s=0;s<o.length;++s)r[o[s]]!=null&&(this[o[s]]=r[o[s]])}return e.prototype.keyType=0,e.prototype.valueType=null,e.create=function(o){return new e(o)},e.encode=function(o,s){return s||(s=Ee.create()),o.keyType!=null&&Object.hasOwnProperty.call(o,"keyType")&&s.uint32(8).int32(o.keyType),o.valueType!=null&&Object.hasOwnProperty.call(o,"valueType")&&h.onnx.TypeProto.encode(o.valueType,s.uint32(18).fork()).ldelim(),s},e.encodeDelimited=function(o,s){return this.encode(o,s).ldelim()},e.decode=function(o,s){o instanceof R||(o=R.create(o));for(var i=s===void 0?o.len:o.pos+s,u=new h.onnx.TypeProto.Map;o.pos<i;){var l=o.uint32();switch(l>>>3){case 1:{u.keyType=o.int32();break}case 2:{u.valueType=h.onnx.TypeProto.decode(o,o.uint32());break}default:o.skipType(l&7);break}}return u},e.decodeDelimited=function(o){return o instanceof R||(o=new R(o)),this.decode(o,o.uint32())},e.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.keyType!=null&&o.hasOwnProperty("keyType")&&!y.isInteger(o.keyType))return"keyType: integer expected";if(o.valueType!=null&&o.hasOwnProperty("valueType")){var s=h.onnx.TypeProto.verify(o.valueType);if(s)return"valueType."+s}return null},e.fromObject=function(o){if(o instanceof h.onnx.TypeProto.Map)return o;var s=new h.onnx.TypeProto.Map;if(o.keyType!=null&&(s.keyType=o.keyType|0),o.valueType!=null){if(typeof o.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");s.valueType=h.onnx.TypeProto.fromObject(o.valueType)}return s},e.toObject=function(o,s){s||(s={});var i={};return s.defaults&&(i.keyType=0,i.valueType=null),o.keyType!=null&&o.hasOwnProperty("keyType")&&(i.keyType=o.keyType),o.valueType!=null&&o.hasOwnProperty("valueType")&&(i.valueType=h.onnx.TypeProto.toObject(o.valueType,s)),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},e.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TypeProto.Map"},e}(),t.Optional=function(){function e(r){if(r)for(var o=Object.keys(r),s=0;s<o.length;++s)r[o[s]]!=null&&(this[o[s]]=r[o[s]])}return e.prototype.elemType=null,e.create=function(o){return new e(o)},e.encode=function(o,s){return s||(s=Ee.create()),o.elemType!=null&&Object.hasOwnProperty.call(o,"elemType")&&h.onnx.TypeProto.encode(o.elemType,s.uint32(10).fork()).ldelim(),s},e.encodeDelimited=function(o,s){return this.encode(o,s).ldelim()},e.decode=function(o,s){o instanceof R||(o=R.create(o));for(var i=s===void 0?o.len:o.pos+s,u=new h.onnx.TypeProto.Optional;o.pos<i;){var l=o.uint32();switch(l>>>3){case 1:{u.elemType=h.onnx.TypeProto.decode(o,o.uint32());break}default:o.skipType(l&7);break}}return u},e.decodeDelimited=function(o){return o instanceof R||(o=new R(o)),this.decode(o,o.uint32())},e.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.elemType!=null&&o.hasOwnProperty("elemType")){var s=h.onnx.TypeProto.verify(o.elemType);if(s)return"elemType."+s}return null},e.fromObject=function(o){if(o instanceof h.onnx.TypeProto.Optional)return o;var s=new h.onnx.TypeProto.Optional;if(o.elemType!=null){if(typeof o.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");s.elemType=h.onnx.TypeProto.fromObject(o.elemType)}return s},e.toObject=function(o,s){s||(s={});var i={};return s.defaults&&(i.elemType=null),o.elemType!=null&&o.hasOwnProperty("elemType")&&(i.elemType=h.onnx.TypeProto.toObject(o.elemType,s)),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},e.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TypeProto.Optional"},e}(),t.SparseTensor=function(){function e(r){if(r)for(var o=Object.keys(r),s=0;s<o.length;++s)r[o[s]]!=null&&(this[o[s]]=r[o[s]])}return e.prototype.elemType=0,e.prototype.shape=null,e.create=function(o){return new e(o)},e.encode=function(o,s){return s||(s=Ee.create()),o.elemType!=null&&Object.hasOwnProperty.call(o,"elemType")&&s.uint32(8).int32(o.elemType),o.shape!=null&&Object.hasOwnProperty.call(o,"shape")&&h.onnx.TensorShapeProto.encode(o.shape,s.uint32(18).fork()).ldelim(),s},e.encodeDelimited=function(o,s){return this.encode(o,s).ldelim()},e.decode=function(o,s){o instanceof R||(o=R.create(o));for(var i=s===void 0?o.len:o.pos+s,u=new h.onnx.TypeProto.SparseTensor;o.pos<i;){var l=o.uint32();switch(l>>>3){case 1:{u.elemType=o.int32();break}case 2:{u.shape=h.onnx.TensorShapeProto.decode(o,o.uint32());break}default:o.skipType(l&7);break}}return u},e.decodeDelimited=function(o){return o instanceof R||(o=new R(o)),this.decode(o,o.uint32())},e.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.elemType!=null&&o.hasOwnProperty("elemType")&&!y.isInteger(o.elemType))return"elemType: integer expected";if(o.shape!=null&&o.hasOwnProperty("shape")){var s=h.onnx.TensorShapeProto.verify(o.shape);if(s)return"shape."+s}return null},e.fromObject=function(o){if(o instanceof h.onnx.TypeProto.SparseTensor)return o;var s=new h.onnx.TypeProto.SparseTensor;if(o.elemType!=null&&(s.elemType=o.elemType|0),o.shape!=null){if(typeof o.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");s.shape=h.onnx.TensorShapeProto.fromObject(o.shape)}return s},e.toObject=function(o,s){s||(s={});var i={};return s.defaults&&(i.elemType=0,i.shape=null),o.elemType!=null&&o.hasOwnProperty("elemType")&&(i.elemType=o.elemType),o.shape!=null&&o.hasOwnProperty("shape")&&(i.shape=h.onnx.TensorShapeProto.toObject(o.shape,s)),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},e.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TypeProto.SparseTensor"},e}(),t}(),a.OperatorSetIdProto=function(){function t(n){if(n)for(var e=Object.keys(n),r=0;r<e.length;++r)n[e[r]]!=null&&(this[e[r]]=n[e[r]])}return t.prototype.domain="",t.prototype.version=y.Long?y.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(e,r){return r||(r=Ee.create()),e.domain!=null&&Object.hasOwnProperty.call(e,"domain")&&r.uint32(10).string(e.domain),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&r.uint32(16).int64(e.version),r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof R||(e=R.create(e));for(var o=r===void 0?e.len:e.pos+r,s=new h.onnx.OperatorSetIdProto;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:{s.domain=e.string();break}case 2:{s.version=e.int64();break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":e.domain!=null&&e.hasOwnProperty("domain")&&!y.isString(e.domain)?"domain: string expected":e.version!=null&&e.hasOwnProperty("version")&&!y.isInteger(e.version)&&!(e.version&&y.isInteger(e.version.low)&&y.isInteger(e.version.high))?"version: integer|Long expected":null},t.fromObject=function(e){if(e instanceof h.onnx.OperatorSetIdProto)return e;var r=new h.onnx.OperatorSetIdProto;return e.domain!=null&&(r.domain=String(e.domain)),e.version!=null&&(y.Long?(r.version=y.Long.fromValue(e.version)).unsigned=!1:typeof e.version=="string"?r.version=parseInt(e.version,10):typeof e.version=="number"?r.version=e.version:typeof e.version=="object"&&(r.version=new y.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber())),r},t.toObject=function(e,r){r||(r={});var o={};if(r.defaults)if(o.domain="",y.Long){var s=new y.Long(0,0,!1);o.version=r.longs===String?s.toString():r.longs===Number?s.toNumber():s}else o.version=r.longs===String?"0":0;return e.domain!=null&&e.hasOwnProperty("domain")&&(o.domain=e.domain),e.version!=null&&e.hasOwnProperty("version")&&(typeof e.version=="number"?o.version=r.longs===String?String(e.version):e.version:o.version=r.longs===String?y.Long.prototype.toString.call(e.version):r.longs===Number?new y.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber():e.version),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.OperatorSetIdProto"},t}(),a.OperatorStatus=function(){var t={},n=Object.create(t);return n[t[0]="EXPERIMENTAL"]=0,n[t[1]="STABLE"]=1,n}(),a.FunctionProto=function(){function t(n){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],n)for(var e=Object.keys(n),r=0;r<e.length;++r)n[e[r]]!=null&&(this[e[r]]=n[e[r]])}return t.prototype.name="",t.prototype.input=y.emptyArray,t.prototype.output=y.emptyArray,t.prototype.attribute=y.emptyArray,t.prototype.attributeProto=y.emptyArray,t.prototype.node=y.emptyArray,t.prototype.docString="",t.prototype.opsetImport=y.emptyArray,t.prototype.domain="",t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ee.create()),e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(10).string(e.name),e.input!=null&&e.input.length)for(var o=0;o<e.input.length;++o)r.uint32(34).string(e.input[o]);if(e.output!=null&&e.output.length)for(var o=0;o<e.output.length;++o)r.uint32(42).string(e.output[o]);if(e.attribute!=null&&e.attribute.length)for(var o=0;o<e.attribute.length;++o)r.uint32(50).string(e.attribute[o]);if(e.node!=null&&e.node.length)for(var o=0;o<e.node.length;++o)h.onnx.NodeProto.encode(e.node[o],r.uint32(58).fork()).ldelim();if(e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(66).string(e.docString),e.opsetImport!=null&&e.opsetImport.length)for(var o=0;o<e.opsetImport.length;++o)h.onnx.OperatorSetIdProto.encode(e.opsetImport[o],r.uint32(74).fork()).ldelim();if(e.domain!=null&&Object.hasOwnProperty.call(e,"domain")&&r.uint32(82).string(e.domain),e.attributeProto!=null&&e.attributeProto.length)for(var o=0;o<e.attributeProto.length;++o)h.onnx.AttributeProto.encode(e.attributeProto[o],r.uint32(90).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof R||(e=R.create(e));for(var o=r===void 0?e.len:e.pos+r,s=new h.onnx.FunctionProto;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:{s.name=e.string();break}case 4:{s.input&&s.input.length||(s.input=[]),s.input.push(e.string());break}case 5:{s.output&&s.output.length||(s.output=[]),s.output.push(e.string());break}case 6:{s.attribute&&s.attribute.length||(s.attribute=[]),s.attribute.push(e.string());break}case 11:{s.attributeProto&&s.attributeProto.length||(s.attributeProto=[]),s.attributeProto.push(h.onnx.AttributeProto.decode(e,e.uint32()));break}case 7:{s.node&&s.node.length||(s.node=[]),s.node.push(h.onnx.NodeProto.decode(e,e.uint32()));break}case 8:{s.docString=e.string();break}case 9:{s.opsetImport&&s.opsetImport.length||(s.opsetImport=[]),s.opsetImport.push(h.onnx.OperatorSetIdProto.decode(e,e.uint32()));break}case 10:{s.domain=e.string();break}default:e.skipType(i&7);break}}return s},t.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.name!=null&&e.hasOwnProperty("name")&&!y.isString(e.name))return"name: string expected";if(e.input!=null&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var r=0;r<e.input.length;++r)if(!y.isString(e.input[r]))return"input: string[] expected"}if(e.output!=null&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(var r=0;r<e.output.length;++r)if(!y.isString(e.output[r]))return"output: string[] expected"}if(e.attribute!=null&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(var r=0;r<e.attribute.length;++r)if(!y.isString(e.attribute[r]))return"attribute: string[] expected"}if(e.attributeProto!=null&&e.hasOwnProperty("attributeProto")){if(!Array.isArray(e.attributeProto))return"attributeProto: array expected";for(var r=0;r<e.attributeProto.length;++r){var o=h.onnx.AttributeProto.verify(e.attributeProto[r]);if(o)return"attributeProto."+o}}if(e.node!=null&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(var r=0;r<e.node.length;++r){var o=h.onnx.NodeProto.verify(e.node[r]);if(o)return"node."+o}}if(e.docString!=null&&e.hasOwnProperty("docString")&&!y.isString(e.docString))return"docString: string expected";if(e.opsetImport!=null&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(var r=0;r<e.opsetImport.length;++r){var o=h.onnx.OperatorSetIdProto.verify(e.opsetImport[r]);if(o)return"opsetImport."+o}}return e.domain!=null&&e.hasOwnProperty("domain")&&!y.isString(e.domain)?"domain: string expected":null},t.fromObject=function(e){if(e instanceof h.onnx.FunctionProto)return e;var r=new h.onnx.FunctionProto;if(e.name!=null&&(r.name=String(e.name)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.FunctionProto.input: array expected");r.input=[];for(var o=0;o<e.input.length;++o)r.input[o]=String(e.input[o])}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.FunctionProto.output: array expected");r.output=[];for(var o=0;o<e.output.length;++o)r.output[o]=String(e.output[o])}if(e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");r.attribute=[];for(var o=0;o<e.attribute.length;++o)r.attribute[o]=String(e.attribute[o])}if(e.attributeProto){if(!Array.isArray(e.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");r.attributeProto=[];for(var o=0;o<e.attributeProto.length;++o){if(typeof e.attributeProto[o]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");r.attributeProto[o]=h.onnx.AttributeProto.fromObject(e.attributeProto[o])}}if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.FunctionProto.node: array expected");r.node=[];for(var o=0;o<e.node.length;++o){if(typeof e.node[o]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");r.node[o]=h.onnx.NodeProto.fromObject(e.node[o])}}if(e.docString!=null&&(r.docString=String(e.docString)),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");r.opsetImport=[];for(var o=0;o<e.opsetImport.length;++o){if(typeof e.opsetImport[o]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");r.opsetImport[o]=h.onnx.OperatorSetIdProto.fromObject(e.opsetImport[o])}}return e.domain!=null&&(r.domain=String(e.domain)),r},t.toObject=function(e,r){r||(r={});var o={};if((r.arrays||r.defaults)&&(o.input=[],o.output=[],o.attribute=[],o.node=[],o.opsetImport=[],o.attributeProto=[]),r.defaults&&(o.name="",o.docString="",o.domain=""),e.name!=null&&e.hasOwnProperty("name")&&(o.name=e.name),e.input&&e.input.length){o.input=[];for(var s=0;s<e.input.length;++s)o.input[s]=e.input[s]}if(e.output&&e.output.length){o.output=[];for(var s=0;s<e.output.length;++s)o.output[s]=e.output[s]}if(e.attribute&&e.attribute.length){o.attribute=[];for(var s=0;s<e.attribute.length;++s)o.attribute[s]=e.attribute[s]}if(e.node&&e.node.length){o.node=[];for(var s=0;s<e.node.length;++s)o.node[s]=h.onnx.NodeProto.toObject(e.node[s],r)}if(e.docString!=null&&e.hasOwnProperty("docString")&&(o.docString=e.docString),e.opsetImport&&e.opsetImport.length){o.opsetImport=[];for(var s=0;s<e.opsetImport.length;++s)o.opsetImport[s]=h.onnx.OperatorSetIdProto.toObject(e.opsetImport[s],r)}if(e.domain!=null&&e.hasOwnProperty("domain")&&(o.domain=e.domain),e.attributeProto&&e.attributeProto.length){o.attributeProto=[];for(var s=0;s<e.attributeProto.length;++s)o.attributeProto[s]=h.onnx.AttributeProto.toObject(e.attributeProto[s],r)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ye.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.FunctionProto"},t}(),a}();$u.exports=h});function $r(a,t){if(!a)throw new Error(typeof t=="string"?t:t())}function sn(a){return new TextDecoder().decode(a)}var Te,fr,ci,Je,Yn,je,nt,z,an,cr,pr,dr,ue=D(()=>{"use strict";Wn();Jo();Te=Dr(kr());hr();fr=class{static arraysEqual(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}},ci=class{static preprocessInputShapes(t,n){let e=t.length===1?[1,t[0]]:t,r=n.length===1?[n[0],1]:n;return[e,r]}static postprocessOutputShape(t,n,e){n===1&&t.splice(t.length-2,1),e===1&&t.pop()}static calcMatMulShape(t,n){return t[1]!==n[0]?void 0:[t[0],n[1]]}},Je=class a{static calcShape(t,n,e=!1){let r=t.length,o=n.length;if(r===0)return n;if(o===0)return t;let s=Math.max(t.length,n.length),i=new Array(s);if(e){if(r<2||o<2)return;let u=ci.calcMatMulShape([t[r-2],t[r-1]],[n[o-2],n[o-1]]);if(u===void 0)return;[i[s-2],i[s-1]]=u}for(let u=e?3:1;u<=s;u++){let l=r-u<0?1:t[r-u],f=o-u<0?1:n[o-u];if(l!==f&&l>1&&f>1)return;i[s-u]=Math.max(l,f)}return i}static index(t,n){let e=new Array(n.length);return a.fillIndex(t,n,e),e}static fillIndex(t,n,e){let r=t.length-n.length;for(let o=0;o<n.length;o++)e[o]=t[r+o]%n[o]}static calc(t,n,e,r,o){let s=a.calcShape(t.dims,n.dims);if(s){if(r&&!z.areEqual(s,t.dims))return;let i=z.size(s),u=r?t:new Re(s,o||t.type);if(s.length===0)u.set([],e(t.get([]),n.get([])));else{let l=new Array(s.length),f=new Array(t.dims.length),p=new Array(n.dims.length),b=0,x=0,I=!1,v=!1;t.dims.length===0&&(b=t.get([]),I=!0),n.dims.length===0&&(x=n.get([]),v=!0);let S;for(let L=0;L<i;L++){S=L;for(let B=s.length-1;B>=0;B--)l[B]=S%s[B],S=Math.floor(S/s[B]);I||(a.fillIndex(l,t.dims,f),b=t.get(f)),v||(a.fillIndex(l,n.dims,p),x=n.get(p)),u.set(l,e(b,x))}}return u}}static isValidBroadcast(t,n){let e=t.length,r=n.length;if(e>r)return!1;for(let o=1;o<=e;o++)if(t[e-o]!==1&&t[e-o]!==n[r-o])return!1;return!0}static getBroadcastDims(t,n){let e=t.length,r=[];for(let o=0;o<e;o++){let s=e-1-o,i=t[s]||1;(n[n.length-1-o]||1)>1&&i===1&&r.unshift(s)}return r}},Yn=class{static getShapeOfGemmResult(t,n,e,r,o){if(t.length!==2||e.length!==2)throw new Error("shape need to be of size 2");let s,i,u;n?(s=t[1],i=t[0]):(s=t[0],i=t[1]);let l=-1;if(r?(u=e[0],l=1):(u=e[1],l=0),e[l]!==i)throw new Error("dimension mismatch");if(s<=0||u<=0||i<=0)throw new Error("invalid shape specified");if(o&&!Je.isValidBroadcast(o,[s,u]))throw new Error("gemm: invalid bias shape for broadcast");return[s,u,i]}},je=class a{static tensorDataTypeFromProto(t){switch(t){case Te.onnx.TensorProto.DataType.INT8:return"int8";case Te.onnx.TensorProto.DataType.UINT8:return"uint8";case Te.onnx.TensorProto.DataType.BOOL:return"bool";case Te.onnx.TensorProto.DataType.INT16:return"int16";case Te.onnx.TensorProto.DataType.UINT16:return"uint16";case Te.onnx.TensorProto.DataType.INT32:return"int32";case Te.onnx.TensorProto.DataType.UINT32:return"uint32";case Te.onnx.TensorProto.DataType.FLOAT:return"float32";case Te.onnx.TensorProto.DataType.DOUBLE:return"float64";case Te.onnx.TensorProto.DataType.STRING:return"string";case Te.onnx.TensorProto.DataType.INT64:return"int32";case Te.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${Te.onnx.TensorProto.DataType[t]}`)}}static tensorDataTypeStringToEnum(t){switch(t){case"int8":return Te.onnx.TensorProto.DataType.INT8;case"uint8":return Te.onnx.TensorProto.DataType.UINT8;case"bool":return Te.onnx.TensorProto.DataType.BOOL;case"int16":return Te.onnx.TensorProto.DataType.INT16;case"uint16":return Te.onnx.TensorProto.DataType.UINT16;case"int32":return Te.onnx.TensorProto.DataType.INT32;case"uint32":return Te.onnx.TensorProto.DataType.UINT32;case"float32":return Te.onnx.TensorProto.DataType.FLOAT;case"float64":return Te.onnx.TensorProto.DataType.DOUBLE;case"string":return Te.onnx.TensorProto.DataType.STRING;case"int64":return Te.onnx.TensorProto.DataType.INT64;case"uint64":return Te.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${t}`)}}static tensorDimsFromProto(t){return t.map(n=>Ut.isLong(n)?n.toNumber():n)}static tensorValueTypeFromProto(t){return{tensorType:a.tensorDataTypeFromProto(t.elemType),shape:{dims:a.tensorDimsFromProto(t.shape.dim.map(n=>n.dimValue))}}}static tensorDimsFromORTFormat(t){let n=[];for(let e=0;e<t.dimsLength();e++)n.push(nt.longToNumber(t.dims(e)));return n}static tensorAttributesFromORTFormat(t){let n=[];for(let e=0;e<t.attributesLength();e++)n.push(t.attributes(e));return n}},nt=class{static longToNumber(t,n){return Ut.isLong(t)?t.toNumber():t instanceof O.Long?Ut.fromValue({low:t.low,high:t.high,unsigned:n??!1}).toNumber():t}static isLong(t){return Ut.isLong(t)||t instanceof O.Long}},z=class a{static size(t){return a.getSizeFromDimensionRange(t,0,t.length)}static sizeFromDimension(t,n){if(n<0||n>t.length)throw new Error(`invalid dimension of ${n} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return a.getSizeFromDimensionRange(t,n,t.length)}static sizeToDimension(t,n){if(n<0||n>t.length)throw new Error(`invalid dimension of ${n} for sizeToDimension as Tensor has ${t.length} dimensions.`);return a.getSizeFromDimensionRange(t,0,n)}static getSizeFromDimensionRange(t,n,e){let r=1;for(let o=n;o<e;o++){if(t[o]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");r*=t[o]}return r}static computeStrides(t){let n=t.length;if(n===0)return[];if(n===1)return[1];let e=new Array(n);e[n-1]=1,e[n-2]=t[n-1];for(let r=n-3;r>=0;--r)e[r]=e[r+1]*t[r+1];return e}static transpose(t){return t.slice().reverse()}static indicesToOffset(t,n,e){e===void 0&&(e=t.length);let r=0;for(let o=0;o<e;++o)r+=n[o]*t[o];return r}static offsetToIndices(t,n){let e=n.length;if(e===0)return[];if(e===1)return[t*n[0]];let r=new Array(n.length);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}static normalizeAxis(t,n){if(t<-n&&t>=n)throw new Error("unsupported axis for this operation.");return t<0?t+n:t}static normalizeAxes(t,n){return t.map(e=>this.normalizeAxis(e,n))}static incrementIndex(t,n,e){if(n.length===0||t.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(e===void 0)e=n.length;else if(e<=0||e>n.length)throw new Error("Incorrect axis to increment on");for(let r=e-1;r>=0&&(t[r]++,!(t[r]<n[r]));--r)t[r]=0}static calculateReshapedDims(t,n){if(n.length===0){if(t.length===0||a.size(t)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let e=n.length,r=new Array(e),o=-1,s=1;for(let u=0;u<e;u++){if(n[u]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(n[u]===-1){if(o!==-1)throw new Error("at most one dimension in shape hints can be -1");o=u}else{if(n[u]===0){if(u>=t.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");r[u]=t[u]}else r[u]=n[u];s*=r[u]}}let i=a.size(t);if(o!==-1){if(i%s!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${t}] Output shape: [${n}]`);r[o]=i/s}else if(s!==i)throw new Error("reshapedDims and originalDims don't have matching sizes");return r}static sortBasedOnPerm(t,n){return n?n.map(e=>t[e]):t.slice().reverse()}static padShape(t,n){let e=t.length;return t.map((r,o)=>r+n[o]+n[o+e])}static areEqual(t,n){return t.length!==n.length?!1:t.every((e,r)=>e===n[r])}static validateDimsAndCalcSize(t){if(t.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let n=1;for(let e of t){if(!Number.isInteger(e))throw new TypeError(`Invalid shape: ${e} is not an integer`);if(e<0||e>2147483647)throw new TypeError(`Invalid shape: length ${e} is not allowed`);n*=e}return n}static flattenShape(t,n){n<0&&(n+=t.length);let e=t.reduce((s,i)=>s*i,1),r=t.slice(n).reduce((s,i)=>s*i,1);return[e/r,r]}static squeezeShape(t,n){let e=new Array;n=a.normalizeAxes(n,t.length);for(let r=0;r<t.length;r++){let o=n.indexOf(r)>=0;if(o&&t[r]!==1)throw new Error("squeeze an axis of size different than 1");(n.length===0&&t[r]>1||n.length>0&&!o)&&e.push(t[r])}return e}static unsqueezeShape(t,n){let e=new Array(t.length+n.length);e.fill(0);for(let o=0;o<n.length;o++){let s=a.normalizeAxis(n[o],e.length);if(s>=e.length)throw new Error("'axes' has an out of range axis");if(e[s]!==0)throw new Error("'axes' has a duplicate axis");e[s]=1}let r=0;for(let o=0;o<e.length;o++)e[o]===0&&(e[o]=t[r++]);if(r!==t.length)throw new Error("the unsqueezed dimension could not be established");return e}},an=class a{static splitShape(t,n,e,r){if(e.length===0){if(!r)throw new Error("need to know number of outputs when the 'split' attribute is not specified");a.determineSplit(t[n],r,e)}let o=[],s=[0];for(let i=0;i<e.length;++i){i!==0&&s.push(s[i-1]+e[i-1]);let u=t.slice();u[n]=e[i],o.push(u)}return[o,s]}static determineSplit(t,n,e){if(t%n!==0)throw new Error("cannot split tensor to equal sized parts");for(let r=0;r<n;++r)e.push(t/n)}},cr=class a{static adjustPoolAttributes(t,n,e,r,o,s){if(!t&&e.length!==n.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let i=0;i<n.length-2;i++)i>=e.length?e.push(n[i+2]):e[i]=n[i+2];for(let i=0;i<e.length;i++)if(i<r.length){if(r[i]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(let i=0;i<e.length;i++)if(i<o.length){if(o[i]<0)throw new Error("dilations should be greater than or equal to 1")}else o.push(1);for(let i=0;i<e.length*2;i++)if(i<s.length){if(s[i]<0)throw new Error("pad should be greater than or equal to 1")}else s.push(0);for(let i=0;i<e.length;i++){if(e[i]<=0)throw new Error("kernel shapes need to be greater than 0");if(s[i]>=e[i]||s[i+e.length]>=e[i])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,n,e,r,o,s){if(s){if(o.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let i=0;i<t.length-2;i++)a.adjustPadAndReturnShape(t[i+2],n[i],e[i],r[i],o,i,i+t.length-2,s)}}static computePoolOutputShape(t,n,e,r,o,s,i){if(n.length<=0)throw new Error("input shape must be of size greater than 0");let u=[n[0],n[1]];return a.computeShapeHelper(t,n,u,e,r,o,s,i),u}static computeConvOutputShape(t,n,e,r,o,s,i){if(t.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let u=[t[0],n[0]];return a.computeShapeHelper(!1,t,u,e,r,o,s,i),u}static computeShapeHelper(t,n,e,r,o,s,i,u){if(t)for(let l=0;l<n.length-2;l++)e.push(1);else for(let l=0;l<n.length-2;l++)e.push(a.adjustPadAndReturnShape(n[l+2],r[l],o[l],s[l],i,l,l+n.length-2,u))}static adjustPadAndReturnShape(t,n,e,r,o,s,i,u){let l=e*(r-1)+1;if(u&&u!=="NOTSET")switch(u){case"VALID":return o[s]=0,o[i]=0,Math.floor((t-l)/n+1);case"SAME_LOWER":case"SAME_UPPER":if(e!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let p=((t+n-1)/n-1)*n+r-t;return o[s]=Math.floor(u==="SAME_LOWER"?(p+1)/2:p/2),o[i]=p-o[s],Math.floor((t+p-r)/n+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+o[s]+o[i]-l)/n+1)}},pr=-34028234663852886e22,dr=34028234663852886e22});function Xd(a){switch(a){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${a}`)}}function Bu(a){switch(a){case re.onnx.TensorProto.DataType.UINT8:case re.onnx.TensorProto.DataType.INT8:case re.onnx.TensorProto.DataType.BOOL:return 1;case re.onnx.TensorProto.DataType.UINT16:case re.onnx.TensorProto.DataType.INT16:return 2;case re.onnx.TensorProto.DataType.FLOAT:case re.onnx.TensorProto.DataType.INT32:case re.onnx.TensorProto.DataType.UINT32:return 4;case re.onnx.TensorProto.DataType.INT64:case re.onnx.TensorProto.DataType.DOUBLE:case re.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${re.onnx.TensorProto.DataType[a]}`)}}function Kd(a,t){return new(Mu(t))(a)}function Mu(a){switch(a){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function di(a,t){if(t===re.onnx.TensorProto.DataType.INT64||t===pi.TensorDataType.INT64){if(a.greaterThanOrEqual(2147483648)||a.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else if(t===re.onnx.TensorProto.DataType.UINT32||t===pi.TensorDataType.UINT32||t===re.onnx.TensorProto.DataType.UINT64||t===pi.TensorDataType.UINT64){if(a.greaterThanOrEqual(4294967296)||a.lessThan(0))throw new TypeError("uint64 is not supported")}else throw new TypeError(`not a LONG type: ${re.onnx.TensorProto.DataType[t]}`);return a.toNumber()}function Ru(a,t,n){switch(t){case re.onnx.TensorProto.DataType.BOOL:case re.onnx.TensorProto.DataType.UINT8:return a.getUint8(n);case re.onnx.TensorProto.DataType.INT8:return a.getInt8(n);case re.onnx.TensorProto.DataType.UINT16:return a.getUint16(n,!0);case re.onnx.TensorProto.DataType.INT16:return a.getInt16(n,!0);case re.onnx.TensorProto.DataType.FLOAT:return a.getFloat32(n,!0);case re.onnx.TensorProto.DataType.INT32:return a.getInt32(n,!0);case re.onnx.TensorProto.DataType.UINT32:return a.getUint32(n,!0);case re.onnx.TensorProto.DataType.INT64:return di(Ut.fromBits(a.getUint32(n,!0),a.getUint32(n+4,!0),!1),t);case re.onnx.TensorProto.DataType.DOUBLE:return a.getFloat64(n,!0);case re.onnx.TensorProto.DataType.UINT64:return di(Ut.fromBits(a.getUint32(n,!0),a.getUint32(n+4,!0),!0),t);default:throw new Error(`cannot read from DataView for type ${re.onnx.TensorProto.DataType[t]}`)}}var Nu,re,pi,Re,hr=D(()=>{"use strict";Nu=Dr(As());Jo();tn();re=Dr(kr());ue();pi=j.experimental.fbs,Re=class a{constructor(t,n,e,r,o,s=Nu.Guid.create()){this.dims=t;this.type=n;this.dataProvider=e;this.asyncDataProvider=r;this.cache=o;this.dataId=s;this.size=z.validateDimsAndCalcSize(t);let i=this.size,u=e===void 0&&r===void 0&&o===void 0;if(o!==void 0&&o.length!==i)throw new RangeError("Input dims doesn't match data length.");if(n==="string"){if(o!==void 0&&(!Array.isArray(o)||!o.every(l=>typeof l=="string")))throw new TypeError("cache should be a string array");u&&(this.cache=new Array(i))}else{if(o!==void 0){let l=Mu(n);if(!(o instanceof l))throw new TypeError(`cache should be type ${l.name}`)}if(u){let l=new ArrayBuffer(i*Xd(n));this.cache=Kd(l,n)}}}get data(){if(this.cache===void 0){let t=this.dataProvider(this.dataId);if(t.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=t}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(t){return this.data[z.indicesToOffset(t,this.strides)]}set(t,n){this.data[z.indicesToOffset(t,this.strides)]=n}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=z.computeStrides(this.dims)),this._strides}static fromProto(t){if(!t)throw new Error("cannot construct Value from an empty tensor");let n=je.tensorDataTypeFromProto(t.dataType),e=je.tensorDimsFromProto(t.dims),r=new a(e,n);if(n==="string")t.stringData.forEach((o,s)=>{r.data[s]=sn(o)});else if(t.rawData&&typeof t.rawData.byteLength=="number"&&t.rawData.byteLength>0){let o=r.data,s=new DataView(t.rawData.buffer,t.rawData.byteOffset,t.rawData.byteLength),i=Bu(t.dataType),u=t.rawData.byteLength/i;if(t.rawData.byteLength%i!==0)throw new Error("invalid buffer length");if(o.length!==u)throw new Error("buffer length mismatch");for(let l=0;l<u;l++){let f=Ru(s,t.dataType,l*i);o[l]=f}}else{let o;switch(t.dataType){case re.onnx.TensorProto.DataType.FLOAT:o=t.floatData;break;case re.onnx.TensorProto.DataType.INT32:case re.onnx.TensorProto.DataType.INT16:case re.onnx.TensorProto.DataType.UINT16:case re.onnx.TensorProto.DataType.INT8:case re.onnx.TensorProto.DataType.UINT8:case re.onnx.TensorProto.DataType.BOOL:o=t.int32Data;break;case re.onnx.TensorProto.DataType.INT64:o=t.int64Data;break;case re.onnx.TensorProto.DataType.DOUBLE:o=t.doubleData;break;case re.onnx.TensorProto.DataType.UINT32:case re.onnx.TensorProto.DataType.UINT64:o=t.uint64Data;break;default:throw new Error("unspecific error")}if(o==null)throw new Error("failed to populate data from a tensorproto value");let s=r.data;if(s.length!==o.length)throw new Error("array length mismatch");for(let i=0;i<o.length;i++){let u=o[i];Ut.isLong(u)?s[i]=di(u,t.dataType):s[i]=u}}return r}static fromData(t,n,e){return new a(n,e,void 0,void 0,t)}static fromOrtTensor(t){if(!t)throw new Error("cannot construct Value from an empty tensor");let n=je.tensorDimsFromORTFormat(t),e=je.tensorDataTypeFromProto(t.dataType()),r=new a(n,e);if(e==="string")for(let o=0;o<t.stringDataLength();o++)r.data[o]=t.stringData(o);else if(t.rawDataArray()&&typeof t.rawDataLength()=="number"&&t.rawDataLength()>0){let o=r.data,s=new DataView(t.rawDataArray().buffer,t.rawDataArray().byteOffset,t.rawDataLength()),i=Bu(t.dataType()),u=t.rawDataLength()/i;if(t.rawDataLength()%i!==0)throw new Error("invalid buffer length");if(o.length!==u)throw new Error("buffer length mismatch");for(let l=0;l<u;l++){let f=Ru(s,t.dataType(),l*i);o[l]=f}}return r}}});function Y(a){return a===1?Jd:Zd}function Gu(a){let t=Y(a);return`${t.version}
      precision highp float;
      ${t.attribute} vec3 position;
      ${t.attribute} vec2 textureCoord;

      ${t.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function Uu(a){let t=Y(a);return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFrag} vec2 TexCoords;
    ${t.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function zu(a,t){let n=Y(a);return`
  void main() {
    int indices[${t}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${n.output} = result;
  }
  `}var Jd,Zd,Oe=D(()=>{"use strict";Jd={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},Zd={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}});var oe=D(()=>{"use strict"});async function hi(a,t=e=>0,n){return new Promise((e,r)=>{let o=0,s=()=>{if(a()){e();return}o++;let i=t(o);if(n!=null&&o>=n){r();return}setTimeout(s,i)};s()})}function Xn(a){return $r(typeof a<"u"&&a.length!==0,()=>"empty string found for sampler name"),"get"+a.charAt(0).toUpperCase()+a.slice(1)}function Wu(a){return $r(typeof a<"u"&&a.length!==0,()=>"empty string found for sampler name"),"get"+a.charAt(0).toUpperCase()+a.slice(1)+"AtOutCoords"}function Br(a,t){let n=JSON.parse(JSON.stringify(a));return n=t,n}function Rr(a,t){return t.map(n=>a[n]).join(", ")}function Ze(a){if(a<=1)return"int";if(a===2)return"ivec2";if(a===3)return"ivec3";if(a===4)return"ivec4";if(a===5)return"ivec5";if(a===6)return"ivec6";throw Error(`GPU for rank ${a} is not yet supported`)}function It(a=6){return["x","y","z","w","u","v"].slice(0,a)}var Lt=D(()=>{"use strict";ue()});function Qd(a,t){return It(t).map(n=>`${a}.${n}`)}function Nr(a,t){return t===1?[a]:Qd(a,t)}function Ft(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var mr=D(()=>{"use strict";Lt()});function th(a,t,n){if(a===0)return"false";if(a===1)return`rc > ${t[0]}`;let e="";for(let r=a-2;r<a;r++)e+=`${n[r]} >= ${t[r-a+2]}`,r<a-1&&(e+="||");return e}function rh(a,t){let n=a.length;if(n===0)return"getA(), 0, 0, 0";if(n===1)return`getA(rc),
            rc + 1 >= ${a[0]} ? 0. : getA(rc + 1),
            0, 0`;let e="r, c",r="r, cp1",o="rp1, c",s="rp1, cp1",i="";if(n>2)for(let u=0;u<n-2;++u)i=i+`${t[u]},`;return`getA(${i}${e}),
          rEdge ? 0. : getA(${i}${o}),
          cEdge ? 0. : getA(${i}${r}),
          rEdge || cEdge ? 0. : getA(${i}${s})`}function nh(a,t,n,e){return a===0||a===1?"":`
    int r = ${t[a-2]};
    int c = ${t[a-1]};
    int rp1 = ${t[a-2]} + 1;
    int cp1 = ${t[a-1]} + 1;
    bool rEdge = rp1 >= ${e};
    bool cEdge = cp1 >= ${n};
    `}var Vu,eh,Hu,ju=D(()=>{"use strict";Oe();oe();Lt();mr();Vu={name:"pack",inputNames:["A"],inputTypes:[1]},eh=(a,t)=>{let n=Y(a.session.backend.glContext.version),e=t.dims,r=e.length,o=t.dims.length,s=Ze(o),i=Nr("rc",o),u=nh(o,i,e[e.length-2],e[e.length-1]),l;r===0?l=[1,1]:r===1?l=[e[0],1]:l=[e[o-1],e[o-2]];let f=th(o,l,i),p=rh(e,i),b=`
        void main() {
          ${s} rc = getOutputCoords();

          if(${f}) {
            ${n.output} = vec4(0);
          } else {
            ${u}

            ${n.output} = vec4(${p});
          }
        }
      `;return{...Vu,hasMain:!0,output:{dims:t.dims,type:t.type,textureType:2},shaderSource:b}},Hu=(a,t)=>({...Vu,get:()=>eh(a,t)})});function mi(a){if(a.length===0)return[1,1,1];let t=1;for(let n=0;n<a.length-2;++n)t*=a[n];return[t,a.length>1?a[a.length-2]:1,a[a.length-1]]}function Yu(a,t){let n=!1;return a.length===0||t.length===0?n=!0:a.length<2||t.length<2?n=a[a.length-1]===t[t.length-1]:n=a[a.length-1]===t[t.length-1]&&a[a.length-2]===t[t.length-2],n}function ah(a){let t=z.computeStrides(a),n=["b","r","c"],e="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t.map((o,s)=>{let i=`int ${n[s]} = ${e} / ${o}`,u=s===t.length-1?`int ${n[s+1]} = ${e} - ${n[s]} * ${o}`:`index -= ${n[s]} * ${o}`;return`${i}; ${u};`}).join("")}
      return ivec3(b, r, c);
    }
  `}function sh(a){let t=z.computeStrides(a);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${t[0]} + coords.z * ${t[1]} + coords.y;
  }
`}var oh,ih,qu,Xu=D(()=>{"use strict";ue();Oe();oe();mr();oh=a=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${a}`}),ih=(a,t,n,e)=>{let r=t.dims,o=e,s="";for(let l=0;l<4;l++){let f="";switch(l){case 0:f="outputCoords = rc;";break;case 1:f="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:f="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:f="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}s+=`
        ${f}
        ${l>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${l}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${l>0?"}":""}
      `}let i=Y(a.session.backend.glContext.version),u=`
      ${ah(r)}
      ${sh(o)}
      ${Ft()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${o[2]};
        int cols = ${o[1]};

        ${s}
        ${i.output} = result;
      }
    `;return{...n,output:{dims:o,type:t.type,textureType:2},shaderSource:u,hasMain:!0}},qu=(a,t,n)=>{let e=oh(n);return{...e,get:()=>ih(a,t,e,n)}}});var bi,Ku=D(()=>{"use strict";Oe();oe();bi=(a,t)=>{let n=t.shape,e=Y(a.session.backend.glContext.version),r=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${e.texture2D}(X,TexCoords).r;
      ${e.output} = encodeAsUint8(value);
    }`,o={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:n,type:t.tensor.type,textureType:3},shaderSource:r,hasMain:!0};return a.executeProgram(o,[t.tensor])}});function lh(a,t){if(a===1)return"rc";let n="";for(let e=0;e<a;e++)n+=t[e],e<a-1&&(n+=",");return n}var Ju,uh,Zu,Qu=D(()=>{"use strict";Oe();oe();Lt();mr();Ju={name:"unpack",inputNames:["A"],inputTypes:[2]},uh=(a,t)=>{let n=t.dims.length,e=Nr("rc",n),r=e.slice(-2),o=Ze(n),s=Ft(),u=t.dims.length===0?"":lh(n,e),l=n<=1?"rc":`vec2(${r.join(",")})`,f=Y(a.session.backend.glContext.version),p=`
    ${s}
    void main() {
      ${o} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${u});

       ${f.output} = vec4(getChannel(packedInput, ${l}), 0, 0, 0);
     }
   `;return{...Ju,hasMain:!0,output:{dims:t.dims,type:t.type,textureType:0},shaderSource:p}},Zu=(a,t)=>({...Ju,get:()=>uh(a,t)})});var Kn,un,Jn,ln=D(()=>{"use strict";lt();Kn=class{constructor(t,n=1){if(n===1)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=n;else if(n===4)this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=n;else throw new Error(`Invalid number of channels: ${n}`)}encode(t,n){let e,r;return t.constructor!==Float32Array&&(fe.warning("Encoder","data was not of type Float32; creating new Float32Array"),r=new Float32Array(t)),n*this.channelSize>t.length?(fe.warning("Encoder","Source data too small. Allocating larger array"),r=t,e=this.allocate(n*this.channelSize),r.forEach((o,s)=>e[s]=o)):(r=t,e=r),e}allocate(t){return new Float32Array(t*4)}decode(t,n){return this.channelSize===1?t.filter((r,o)=>o%4===0).subarray(0,n):t.subarray(0,n)}},un=class{constructor(t,n=1,e){if(n!==1&&n!==4)throw new Error(`Invalid number of channels: ${n}`);this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=n,this.textureType=e||t.FLOAT}encode(t,n){let e=t;return this.channelSize===1&&(fe.verbose("Encoder","Exploding into a larger array"),e=this.allocate(n),t.forEach((r,o)=>e[o*4]=r)),e}allocate(t){return new Float32Array(t*4)}decode(t,n){return this.channelSize===1?t.filter((r,o)=>o%4===0).subarray(0,n):t.subarray(0,n)}},Jn=class{constructor(t,n=1){this.channelSize=4;if(n===1)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=n;else if(n===4)this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=n;else throw new Error(`Invalid number of channels: ${n}`)}encode(t,n){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}allocate(t){return new Uint8Array(t*this.channelSize)}decode(t,n){if(t instanceof Uint8Array)return t.subarray(0,n);throw new Error(`Invalid array type: ${t.constructor}`)}}});var fn,el,gi,tl=D(()=>{"use strict";ue();oe();fn=(a,t,n)=>{let e=n===0||n===1?1:4,r=n===2,o=n===1||n===2,s=n===4?t.length-1:void 0,i=n===4?t.map((u,l)=>l===t.length-1?u*4:u):void 0;return gi(a,t,e,i,{isPacked:r,reverseWH:o,breakAxis:s})},el=(a,t,n)=>{let e=fn(a,t,n);return[e.width,e.height]},gi=(a,t,n=1,e,r)=>{let o=!!(r&&r.isPacked),[s,i]=a.computeTextureWH(o&&e||t,r),u=t.length,l=t.slice(0);if(u===0&&(l=[1]),n===1)e=t;else if(o){if(n!==4)throw new Error("a packed texture must be 4-channel");e=t,u>0&&(l[u-1]=Math.ceil(l[u-1]/2)),u>1&&(l[u-2]=Math.ceil(l[u-2]/2))}else if(!e)throw new Error("Unpacked shape is needed when using channels > 1");return{width:s,height:i,channels:n,isPacked:o,shape:l,strides:z.computeStrides(l),unpackedShape:e,reversedWH:r&&r.reverseWH}}});var ch,Zn,nl=D(()=>{"use strict";lt();hr();ue();ju();Xu();Ku();Qu();ln();tl();oe();ch=(a,t)=>{let n=t.map(r=>`${r.unpackedShape.join(",")};${r.width}x${r.height}`).join("_"),e=a.name;return a.cacheHint&&(e+="["+a.cacheHint+"]"),e+=":"+n,e},Zn=class{constructor(t){this.session=t;this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(t,n){return el(this.session.layoutStrategy,t,n)}executeProgram(t,n){if(n.length<t.inputNames.length)throw new Error(`Input size mustn't be less than ${t.inputNames.length}.`);if(t.inputNames.length!==t.inputTypes.length)throw new Error("input names size does not match input types");let e=[];for(let l=0;l<t.inputNames.length;++l)e[l]=this.getOrCreateTextureData(n[l],t.inputTypes[l]);let r=ch(t,e),o=this.session.programManager.getArtifact(r),s=o?o.programInfo:typeof t.get=="function"?t.get():t,i=fn(this.session.layoutStrategy,s.output.dims,s.output.textureType),u=this.createTextureData(i,s.output.type);return o||(o=this.session.programManager.build(s,e,u),this.session.programManager.setArtifact(r,o)),this.runProgram(o,e,u),u}run(t,n){return this.executeProgram(t,n).tensor}runProgram(t,n,e){for(let r=0;r<n.length;++r)if(!!n[r].isPacked!=(t.programInfo.inputTypes[r]===2))throw new Error(`input[${r}] property packed inconsistent`);if(!!e.isPacked!=(t.programInfo.output.textureType===2))throw new Error("output property packed inconsistent");this.session.programManager.run(t,n,e)}getOrCreateTextureData(t,n){let e=this.getTextureData(t.dataId,n===2);if(!e&&(e=this.getTextureData(t.dataId,n!==2),e))return n===2?this.pack(e):this.unpack(e);if(!e){let r=fn(this.session.layoutStrategy,t.dims,n);if(n===4){let i=t.dims;if(i.length===4){let u=[i[0],Math.ceil(i[1]*i[2]*i[3]/4)],l=fn(this.session.layoutStrategy,u,n),f=t.numberData;if(i[1]*i[2]*i[3]%4!==0){let p=i[0],b=i[1]*i[2]*i[3],x=Math.ceil(b*1/4)*4,I=p*x;f=new Float32Array(I);for(let v=0;v<p;++v){let S=v*b,L=v*x+v%1*b;f.set(t.numberData.subarray(S,S+b),L)}}return this.createTextureData(l,t.type,f,t,1)}}if(n===2){let o=gi(this.session.layoutStrategy,t.dims,1,[],{reverseWH:!0}),s=this.createTextureData(o,t.type,t.numberData,t,1);e=this.pack(s)}else e=this.createTextureData(r,t.type,t.numberData,t,1)}return e}createTextureDataFromLayoutBindTensor(t,n,e,r){return this.createTextureData(t,n,e,r,1)}createTextureData(t,n,e,r,o){fe.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(t)}]`);let s=this.session.textureManager.createTextureFromLayout(n,t,e,o);return this.createTextureDataFromTexture(t,n,s,r)}reshapeUnpacked(t,n){let e=this.getOrCreateTextureData(t,0),r={channels:e.channels,height:e.height,width:e.width,shape:n.length!==0?n:[1],strides:z.computeStrides(n),unpackedShape:n};return this.createTextureDataFromTexture(r,t.type,e.texture).tensor}reshapePacked(t,n){let e=this.getOrCreateTextureData(t,2);if(Yu(t.dims,n)){let l={channels:e.channels,height:e.height,width:e.width,shape:n.length!==0?n:[1],strides:z.computeStrides(n),unpackedShape:n,isPacked:!0};return this.createTextureDataFromTexture(l,t.type,e.texture).tensor}let r=mi(t.dims),o=mi(n),s=this.reshapePacked(t,r),i=this.run(qu(this,s,o),[s]);return this.reshapePacked(i,n)}cast(t,n){let e=this.getOrCreateTextureData(t,0);return this.createTextureDataFromTexture(e,n,e.texture).tensor}createTextureDataFromTexture(t,n,e,r,o){let s={...t,tensor:r||new Re(t.unpackedShape,n,i=>this.readTexture(s),async i=>this.readTextureAsync(s),void 0,o),texture:e};return this.setTextureData(s.tensor.dataId,s,t.isPacked),s}getTextureData(t,n=!1){return this.session.isInitializer(t)?this.session.getTextureData(t,n):n?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,n,e=!1){this.session.isInitializer(t)?this.session.setTextureData(t,n,e):(e?this.packedTextureDataCache:this.unpackedTextureDataCache).set(t,n)}isTextureLayoutCached(t,n=!1){return!!this.getTextureData(t.dataId,n)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.unpackedTextureDataCache=new Map}readTexture(t){return t.isPacked?this.readTexture(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(bi(this,t))}async readTextureAsync(t){return t.isPacked?this.readTextureAsync(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(bi(this,t))}pack(t){return this.executeProgram(Hu(this,t.tensor),[t.tensor])}unpack(t){return this.executeProgram(Zu(this,t.tensor),[t.tensor])}}});var yi,ee,ze=D(()=>{"use strict";yi=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this._cacheKey}},ee=a=>new yi(a)});var ol,il,al,ph,dh,sl=D(()=>{"use strict";ze();Oe();oe();ol={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},il=(a,t,n)=>(dh(t),[a.run({...ol,cacheHint:n.cacheKey,get:()=>ph(a,t,n)},t)]),al=a=>{let t=a.attributes.getFloat("epsilon",1e-5),n=a.attributes.getFloat("momentum",.9),e=a.attributes.getInt("spatial",1);return ee({epsilon:t,momentum:n,spatial:e})},ph=(a,t,n)=>{let e=Y(a.session.backend.glContext.version),r=t[0].dims.length,[o,s]=a.calculateTextureWidthAndHeight(t[1].dims,0),i=`
  float process(int[${r}] indices) {
    vec2 position = offsetToCoords(indices[1], ${o}, ${s});
    float scale = getColorAsFloat(${e.texture2D}(Scale, position));
    float mean = getColorAsFloat(${e.texture2D}(Mean, position));
    float variance = getColorAsFloat(${e.texture2D}(Variance, position));
    float b = getColorAsFloat(${e.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${n.epsilon})) ) + b;
  }`;return{...ol,output:{dims:t[0].dims,type:t[0].type,textureType:0},shaderSource:i}},dh=a=>{if(!a||a.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let t=a[0],n=a[1],e=a[2],r=a[3],o=a[4];if(t.dims.length<3||n.dims.length!==1||e.dims.length!==1||r.dims.length!==1||o.dims.length!==1)throw new Error("invalid input shape.");if(n.dims[0]!==t.dims[1]||e.dims[0]!==t.dims[1]||r.dims[0]!==t.dims[1]||o.dims[0]!==t.dims[1])throw new Error("invalid input shape.");if(t.type!=="float32"&&t.type!=="float64"||n.type!=="float32"&&n.type!=="float64"||e.type!=="float32"&&e.type!=="float64"||r.type!=="float32"&&r.type!=="float64"||o.type!=="float32"&&o.type!=="float64")throw new Error("invalid input tensor types.")}});var Qn,dt,U,cn,eo,zt=D(()=>{"use strict";Qn=class{constructor(t,n,e,r){this.glContext=t;this.programInfo=n;this.inputTextureLayouts=e;this.outputTextureLayout=r}},dt=class{constructor(t){this.context=t}},U=class{constructor(t,n){this.routineBody=t;this.dependencies=n}},cn=class{constructor(t,n,e){this.name=t;e?this.dependencies=e:this.dependencies=[],n&&(this.routineBody=n)}addDependency(t){t&&this.dependencies.push(t)}},eo=class{static returnOrderedNodes(t){if(!t||t.length===0)return[];if(t.length===1)return t;let n=new Set,e=new Set,r=new Array;return this.createOrderedNodes(t,n,e,r),r}static createOrderedNodes(t,n,e,r){for(let o=0;o<t.length;++o)this.dfsTraverse(t[o],n,e,r)}static dfsTraverse(t,n,e,r){if(!t||e.has(t.name))return;if(n.has(t.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");n.add(t.name);let o=t.dependencies;if(o&&o.length>0)for(let s=0;s<o.length;++s)this.dfsTraverse(o[s],n,e,r);r.push(t),e.add(t.name),n.delete(t.name)}}});function mh(){let a="add_";return{body:`
  float ${a}(float a, float b) {
    return a + b;
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:a,type:0}}function bh(){let a="div_";return{body:`
  float ${a}(float a, float b) {
    return a / b;
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:a,type:0}}function gh(){let a="mul_";return{body:`
  float ${a}(float a, float b) {
    return a * b;
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:a,type:0}}function yh(){let a="sub_";return{body:`
  float ${a}(float a, float b) {
    return a - b;
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:a,type:0}}function Th(){let a="equal_";return{body:`
  float ${a}(float a, float b) {
    return float(a == b);
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:a,type:0}}function xh(){let a="greater_";return{body:`
  float ${a}(float a, float b) {
    return float(a > b);
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:a,type:0}}function vh(){let a="less_";return{body:`
  float ${a}(float a, float b) {
    return float(a < b);
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:a,type:0}}function wh(){let a="and_";return{body:`
  float ${a}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:a,type:0}}function _h(){let a="or_";return{body:`
  float ${a}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:a,type:0}}function Oh(){let a="xor_";return{body:`
  float ${a}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:a,type:0}}function Ih(){return Ah("pow")}function Sh(){let a="prelu_";return{body:`
  float ${a}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:a,type:0}}function Ah(a){let t=`${a}_`;return{body:`
  float ${t}(float a, float b) {
    return ${a}(a, b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return ${a}(v1, v2);
  }
  `,name:t,type:0}}var ht,Ph,ul,ll,fl,cl,pl,dl,hl,ml,bl,gl,yl,Tl,xl=D(()=>{"use strict";ue();zt();Oe();oe();ht=(a,t,n,e=t[0].type,r)=>{let o=a.session.pack?2:0;return{name:n.name,inputNames:["A","B"],inputTypes:[o,o],cacheHint:r,get:()=>Ph(a,t,n,e)}},Ph=(a,t,n,e=t[0].type)=>{let r=a.session.pack?2:0,o=!z.areEqual(t[0].dims,t[1].dims),s=t[0].dims,i=a.session.pack;if(o){let f=Je.calcShape(t[0].dims,t[1].dims,!1);if(!f)throw new Error("Can't perform binary op on the given tensors");s=f;let p=s.length,b=t[0].dims.length!==0?t[0].dims.length:1,x=t[1].dims.length!==0?t[1].dims.length:1,I=t[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",v=t[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",S=Y(a.session.backend.glContext.version),L=i?`
      ${n.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${n.name}(a, b);
        ${S.output} = result;
      }`:`
      ${n.body}
      float process(int indices[${p}]) {
        int aindices[${b}];
        int bindices[${x}];
        ${I}
        ${v}
        return ${n.name}(_A(aindices), _B(bindices));
      }`;return{name:n.name,inputNames:["A","B"],inputTypes:[r,r],output:{dims:s,type:e,textureType:r},shaderSource:L,hasMain:i}}let u=Y(a.session.backend.glContext.version),l=`
    ${n.body}
    void main() {
      vec4 v1 = ${u.texture2D}(A, TexCoords);
      vec4 v2 = ${u.texture2D}(B, TexCoords);
      vec4 result = ${n.name}(v1, v2);
      ${u.output} = result;
    }
    `;return{name:n.name,inputNames:["A","B"],inputTypes:[r,r],output:{dims:t[0].dims,type:e,textureType:r},shaderSource:l,hasMain:!0}},ul=(a,t)=>[a.run(ht(a,t,mh()),t)],ll=(a,t)=>[a.run(ht(a,t,wh(),"bool"),t)],fl=(a,t)=>[a.run(ht(a,t,bh()),t)],cl=(a,t)=>[a.run(ht(a,t,Th(),"bool"),t)],pl=(a,t)=>[a.run(ht(a,t,xh(),"bool"),t)],dl=(a,t)=>[a.run(ht(a,t,vh(),"bool"),t)],hl=(a,t)=>[a.run(ht(a,t,gh()),t)],ml=(a,t)=>[a.run(ht(a,t,_h(),"bool"),t)],bl=(a,t)=>[a.run(ht(a,t,Ih()),t)],gl=(a,t)=>[a.run(ht(a,t,Sh()),t)],yl=(a,t)=>[a.run(ht(a,t,yh()),t)],Tl=(a,t)=>[a.run(ht(a,t,Oh(),"bool"),t)]});var vl,wl,Dh,_l=D(()=>{"use strict";ue();vl=(a,t,n)=>(Dh(t),[a.cast(t[0],n)]),wl=a=>je.tensorDataTypeFromProto(a.attributes.getInt("to")),Dh=a=>{if(!a||a.length!==1)throw new Error("Cast requires 1 input.");if(a[0].type==="string")throw new Error("Invalid input type.")}});var Lh,Fh,Ol,to,Il=D(()=>{"use strict";Oe();oe();Lt();mr();Lh=(a,t)=>({name:"Concat (packed)",inputNames:Array.from({length:a},(n,e)=>`X${e}`),inputTypes:Array(a).fill(2),cacheHint:t}),Fh=(a,t,n,e)=>{let r=n[0].dims.slice();if(e>=r.length||e<-1*r.length)throw new Error("axis specified for concat doesn't match input dimensionality");e<0&&(e=r.length+e);let o=r.slice(0);for(let N=1;N<n.length;N++){let he=n[N].dims.slice();for(let Ie=0;Ie<r.length;Ie++)if(Ie===e)o[e]+=he[Ie];else if(r[Ie]!==he[Ie])throw new Error("non concat dimensions must match")}let s=o.length,i=Nr("coords",s),u=Ze(s),l=Ft(),f=n.map(N=>N.dims),p=It(s),b=new Array(f.length-1);b[0]=f[0][e];for(let N=1;N<b.length;N++)b[N]=b[N-1]+f[N][e];let x=p[e],I=p.slice(-2),v=p.join(),S=`if (${x} < ${b[0]}) {
        return getChannel(
            getX0(${v}), vec2(${I.join()}));
        }`;for(let N=1;N<b.length;N++){let he=b[N-1];S+=`
            if (${x} < ${b[N]}  && ${x} >= ${b[N-1]}) {
              return getChannel(
                getX${N}(${to(p,x,he)}),
                vec2(${to(I,x,he)}));
            }`}let L=b.length,B=b[b.length-1];S+=`
            return getChannel(
              getX${L}(${to(p,x,B)}),
              vec2(${to(I,x,B)}));`;let M=Y(a.session.backend.glContext.version),Q=`
          ${l}
          float getValue(${p.map(N=>"int "+N)}) {
            ${S}
          }

          void main() {
            ${u} coords = getOutputCoords();
            int lastDim = coords.${p[s-1]};
            coords.${p[s-1]} = coords.${p[s-2]};
            coords.${p[s-2]} = lastDim;

            vec4 result = vec4(getValue(${i}), 0., 0., 0.);

            ${i[s-1]} = ${i[s-1]} + 1;
            if (${i[s-1]} < ${o[s-1]}) {
              result.g = getValue(${i});
            }

            ${i[s-2]} = ${i[s-2]} + 1;
            if (${i[s-2]} < ${o[s-2]}) {
              result.a = getValue(${i});
            }

            ${i[s-1]} = ${i[s-1]} - 1;
            if (${i[s-2]} < ${o[s-2]} &&
                ${i[s-1]} < ${o[s-1]}) {
              result.b = getValue(${i});
            }
            ${M.output} = result;
          }
        `;return{...t,output:{dims:o,type:n[0].type,textureType:2},shaderSource:Q,hasMain:!0}},Ol=(a,t,n)=>{let e=Lh(t.length,n.cacheKey);return{...e,get:()=>Fh(a,e,t,n.axis)}},to=(a,t,n)=>{let e=a.indexOf(t);return a.map((o,s)=>s===e?`${o} - ${n}`:o).join()}});var Sl,Ch,kh,$h,Al,Bh,Rh,Nh,Pl,Mh,El=D(()=>{"use strict";ze();oe();Il();Sl=(a,t,n)=>(Mh(t),a.session.pack&&t[0].dims.length>1?[a.run(Ol(a,t,n),t)]:[a.run($h(a,t,n),t)]),Ch=(a,t)=>({name:"Concat",inputNames:Array.from({length:a},(n,e)=>`X${e}`),inputTypes:Array(a).fill(0),cacheHint:t}),kh=(a,t,n,e)=>{let r=n[0].dims.slice();if(e>=r.length||e<-1*r.length)throw new Error("axis specified for concat doesn't match input dimensionality");e<0&&(e=r.length+e);let o=r.slice(0);for(let x=1;x<n.length;x++){let I=n[x].dims.slice();for(let v=0;v<r.length;v++)if(v===e)o[e]+=I[v];else if(r[v]!==I[v])throw new Error("non concat dimensions must match")}let s=o.length,i=new Array(n.length),u=0;for(let x=0;x<i.length;++x)u+=n[x].dims[e],i[x]=u;let l="";n.length<5?l=Al(i):l=Bh(i);let f=Rh(n.length,s),p=Nh(i),b=`
        ${f}
        ${p}
        ${l}
        float process(int indices[${s}]) {
          int textureIndex = getTextureWhereDataResides (indices[${e}]);

          if(textureIndex != 0) {
            indices[${e}] = indices[${e}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return{...t,output:{dims:o,type:n[0].type,textureType:0},shaderSource:b}},$h=(a,t,n)=>{let e=Ch(t.length,n.cacheKey);return{...e,get:()=>kh(a,e,t,n.axis)}},Al=a=>`int getTextureWhereDataResides(int index) {
      ${a.map((n,e)=>`if(index<${n}) {return ${e};}
`).join("")}
    }`,Bh=a=>Al(a),Rh=(a,t)=>{let n=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${t}]) {`];for(let e=0;e<a;++e)e===0?n.push(`	if (textureIndex == ${e}) { return _X${e}(indices); }`):e===a-1?n.push(`	else { return _X${e}(indices); }`):n.push(`	else if (textureIndex == ${e}) { return _X${e}(indices); }`);return n.push("	}"),n.join(`
`)},Nh=a=>{let t=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let n=0;n<a.length;++n)n===0?t.push(`	if (index == ${n}) { return ${a[n]}; }`):n===a.length-1?t.push(`	else { return ${a[n]}; }`):t.push(`	else if (index == ${n}) { return ${a[n]}; }`);return t.push("	}"),t.join(`
`)},Pl=a=>ee({axis:a.attributes.getInt("axis")}),Mh=a=>{if(!a||a.length<1)throw new Error("too few inputs");let t=a[0].type,n=a[0].dims.length;if(t==="string")throw new Error("string tensor is not supported yet");for(let e of a){if(e.type!==t)throw new Error("input tensors should be one type");if(e.dims.length!==n)throw new Error("input tensors should have the same shape")}}});function Gh(){return mt("abs")}function Uh(){return mt("acos")}function zh(){return mt("asin")}function Wh(){return mt("atan")}function Vh(){return mt("ceil")}function Hh(){return mt("cos")}function jh(a){let t="elu";return{body:`
  const float alpha = float(${a});

  float ${t}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(${t}_(v.x), ${t}_(v.y), ${t}_(v.z), ${t}_(v.w));
  }
  `,name:t,type:0}}function qh(){return mt("exp")}function Yh(){return mt("floor")}function Ti(a,t){let n="clip";return{body:`
  const float min = float(${a});
  const float max = float(${t});

  float ${n}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${n}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:n,type:0}}function Xh(){let a="indentity";return{body:`
  float ${a}_(float a) {
    return a;
  }
  vec4 ${a}_(vec4 v) {
    return v;
  }
  `,name:a,type:0}}function Kh(a){let t="leakyRelu";return{body:`
  const float alpha = float(${a});

  float ${t}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(${t}_(v.x), ${t}_(v.y), ${t}_(v.z), ${t}_(v.w));
  }
  `,name:t,type:0}}function Jh(){return mt("log")}function Zh(){let a="neg";return{body:`
  float ${a}_(float a) {
    return -a;
  }
  vec4 ${a}_(vec4 v) {
    return -v;
  }
  `,name:a,type:0}}function Qh(){let a="not";return{body:`
  float ${a}_(float a) {
    return float( ! bool(a) );
  }
  bool ${a}_(bool a) {
    return !a;
  }
  vec4 ${a}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${a}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:a,type:0}}function em(){return mt("sin")}function xi(){let a="relu";return{body:`
  float ${a}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${a}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:a,type:0}}function vi(){let a="sigmoid";return{body:`
  float ${a}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${a}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:a,type:0}}function tm(){return mt("sqrt")}function rm(){return mt("tan")}function nm(){let a="tanh";return{body:`
  float ${a}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${a}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:a,type:0}}function mt(a){return{body:`
  float ${a}_(float a) {
    return ${a}(a);
  }
  vec4 ${a}_(vec4 v) {
    return ${a}(v);
  }
  `,name:a,type:0}}var om,De,Dl,Ll,Fl,Cl,wi,kl,$l,im,Bl,Rl,Nl,Ml,Gl,Ul,_i,zl,Wl,Vl,Hl,jl,ql,Yl,Xl,Kl,Jl,Zl,Oi=D(()=>{"use strict";ze();ue();zt();Oe();oe();om=(a,t,n,e)=>{let r=a.session.pack?2:0,o=Y(a.session.backend.glContext.version);return{...t,output:{dims:n.dims,type:n.type,textureType:r},shaderSource:`
     ${e.body}
     void main() {
       vec4 v = ${o.texture2D}(A, TexCoords);
       v = ${e.name}_(v);
       ${o.output} = v;
     }
     `,hasMain:!0}},De=(a,t,n,e)=>{let r=a.session.pack?2:0,o={name:n.name,inputTypes:[r],inputNames:["A"],cacheHint:e};return{...o,get:()=>om(a,o,t,n)}},Dl=(a,t)=>[a.run(De(a,t[0],Gh()),t)],Ll=(a,t)=>[a.run(De(a,t[0],Uh()),t)],Fl=(a,t)=>[a.run(De(a,t[0],zh()),t)],Cl=(a,t)=>[a.run(De(a,t[0],Wh()),t)],wi=(a,t,n)=>[a.run(De(a,t[0],Ti(n.min,n.max),n.cacheKey),t)],kl=a=>ee({min:a.attributes.getFloat("min",pr),max:a.attributes.getFloat("max",dr)}),$l=(a,t)=>{let n=im(a,t);return wi(a,[t[0]],n)},im=(a,t)=>{if(t.length>=3&&(!a.session.isInitializer(t[1].dataId)||!a.session.isInitializer(t[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let n=t.length>=3?t[1].numberData[0]:pr,e=t.length>=3?t[2].numberData[0]:dr;return ee({min:n,max:e})},Bl=(a,t)=>[a.run(De(a,t[0],Vh()),t)],Rl=(a,t)=>[a.run(De(a,t[0],Hh()),t)],Nl=(a,t,n)=>[a.run(De(a,t[0],jh(n.alpha),n.cacheKey),t)],Ml=a=>ee({alpha:a.attributes.getFloat("alpha",1)}),Gl=(a,t)=>[a.run(De(a,t[0],qh()),t)],Ul=(a,t)=>[a.run(De(a,t[0],Yh()),t)],_i=(a,t)=>[a.run(De(a,t[0],Xh()),t)],zl=(a,t,n)=>[a.run(De(a,t[0],Kh(n.alpha),n.cacheKey),t)],Wl=a=>ee({alpha:a.attributes.getFloat("alpha",.01)}),Vl=(a,t)=>[a.run(De(a,t[0],Jh()),t)],Hl=(a,t)=>[a.run(De(a,t[0],Zh()),t)],jl=(a,t)=>[a.run(De(a,t[0],Qh()),t)],ql=(a,t)=>[a.run(De(a,t[0],xi()),t)],Yl=(a,t)=>[a.run(De(a,t[0],vi()),t)],Xl=(a,t)=>[a.run(De(a,t[0],em()),t)],Kl=(a,t)=>[a.run(De(a,t[0],tm()),t)],Jl=(a,t)=>[a.run(De(a,t[0],rm()),t)],Zl=(a,t)=>[a.run(De(a,t[0],nm()),t)]});function Ct(a){let t;switch(a.activation){case"Relu":t=xi();break;case"Sigmoid":t=vi();break;case"Clip":t=Ti(a.clipMin,a.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let n=t.name,e=t.body,r=`value = ${n}_(value);`;return{activationFunction:e,applyActivation:r}}var Mr,br=D(()=>{"use strict";ue();Oi();Mr=a=>{let t=a.getString("activation","");if(t==="Clip"){let[n,e]=a.getFloats("activation_params",[pr,dr]);return{activation:t,clipMax:e,clipMin:n,activationCacheKey:`${t}:${n},${e}`}}return{activation:t,activationCacheKey:t}}});var sm,um,Ql,ef=D(()=>{"use strict";lt();Oe();oe();ro();br();sm=(a,t)=>({name:"GroupedConv",inputNames:a?["X","W","Bias"]:["X","W"],inputTypes:a?[0,0,0]:[0,0],cacheHint:t}),um=(a,t,n,e)=>{let o=t.length>2?"value += getBias(output_channel);":"",s=t[0].dims.slice(),i=t[1].dims.slice(),u=i[0]/e.group;fe.verbose("GroupedConv",`autpPad:${e.autoPad}, dilations:${e.dilations}, group:${e.group}, kernelShape:${e.kernelShape}, pads:${e.pads}, strides:${e.strides}`);let l=Gr(s,i,e.dilations,e.pads,e.strides),f=Y(a.session.backend.glContext.version),{activationFunction:p,applyActivation:b}=Ct(e),x=`
  const ivec2 strides = ivec2(${e.strides[0]}, ${e.strides[1]});
  const ivec2 pads = ivec2(${e.pads[0]}, ${e.pads[1]});
  ${p}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${u};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${i[1]}; wInChannel++) {
      int input_channel = group_id * ${i[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${i[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${e.dilations[0]};

        if (xHeight < 0 || xHeight >= ${s[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${i[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${e.dilations[1]};
          if (xWidth < 0 || xWidth >= ${s[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${o}
    ${b}
    ${f.output} = vec4(value, .0, .0, .0);
  }
`;return{...n,output:{dims:l,type:t[0].type,textureType:0},shaderSource:x,hasMain:!0}},Ql=(a,t,n)=>{let e=sm(t.length>2,n.cacheKey);return{...e,get:()=>um(a,t,e,n)}}});var lm,fm,tf,rf=D(()=>{"use strict";Oe();oe();mr();lm=a=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:a}),fm=(a,t,n,e,r,o)=>{let s=n.dims,i=e.dims,u=2,l=3,f=r.length,p=[i[1]*i[2]*i[3],r[2]*r[3]],b=i[2]*i[3],x=Ft(),I=Y(a.session.backend.glContext.version),v="";for(let L=0;L<=1;L++)for(let B=0;B<=1;B++)v+=`
            blockIndex = rc.x + ${B};
            pos = rc.y + ${L};

            if(blockIndex < ${p[1]} && pos < ${p[0]}) {
              offsetY = int(blockIndex / (${r[f-1]})) * ${o.strides[0]} -
                ${o.pads[0]};
              d0 = offsetY + ${o.dilations[0]} * (imod(pos, ${b}) / ${i[2]});

              if(d0 < ${s[u]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${r[f-1]}) * ${o.strides[1]} -
                  ${o.pads[1]};
                d1 = offsetX + ${o.dilations[1]} * imod(imod(pos, ${b}), ${i[2]});

                if(d1 < ${s[l]} && d1 >= 0) {

                  ch = int(float(pos)/ ${b}.);
                    innerDims = vec2(d0, d1);
                    result[${L*2+B}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let S=`
      ${x}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${v}
          ${I.output} = result;
      }
            `;return{...t,output:{dims:p,type:n.type,textureType:2},shaderSource:S,hasMain:!0}},tf=(a,t,n,e,r)=>{let o=lm(r.cacheKey);return{...o,get:()=>fm(a,o,t,n,e,r)}}});function pm(a,t,n){let e=t[0].dims,r=t[1].dims,o=Je.calcShape(e,r,!0);if(!o)throw new Error("Can't use matmul on the given tensors");let s=Ze(o.length),i=It(),{activationFunction:u,applyActivation:l}=Ct(n),f=t.length>2,p=f?"value += getBiasForMatmul();":"",b=f?`${Si(s,i,t[2].dims,o,!1)}`:"",x=o.length,I=e.length,v=r.length,S=e[e.length-1],L=`
    ${u}
    ${b}
    float process(int indices[${x}]) {
        int a[${I}];
        int b[${v}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${S}; ++k) {
            a[${I-1}] = k;
            b[${v-2}] = k;
            value += _A(a) * _B(b);
        }
        ${p}
        ${l}
        return value;
    }`;return{...a,output:{dims:o,type:t[0].type,textureType:0},shaderSource:L}}function Ii(a,t){let n=cm(a.length>2,t.activationCacheKey);return{...n,get:()=>pm(n,a,t)}}function Si(a,t,n,e,r){let o="",s=n.length,i=e.length,u=i-s;i<2&&s>0?o="coords":o=n.map((v,S)=>`coords.${t[S+u]}`).join(", ");let f=Je.getBroadcastDims(n,e).map(v=>`coords.${t[v+u]} = 0;`).join(`
`),b=z.size(n)===1,x="vec4(outputValue.xx, outputValue.yy)";return b&&(x="vec4(outputValue.x)"),r?`
vec4 getBiasForMatmul() {
  ${a} coords = getOutputCoords();
  ${f}
  vec4 outputValue = getBias(${o});
  return ${x};
}`:`
float getBiasForMatmul() {
  ${a} coords = getOutputCoords();
  ${f}
  return getBias(coords.x);
}`}var nf,of,cm,dm,no=D(()=>{"use strict";ue();oe();Lt();br();Ai();nf=(a,t,n)=>(dm(t),a.session.pack?[a.run(oo(a,t,n),t)]:[a.run(Ii(t,n),t)]),of=a=>Mr(a.attributes),cm=(a,t)=>({name:"MatMul",inputNames:a?["A","B","Bias"]:["A","B"],inputTypes:a?[0,0,0]:[0,0],cacheHint:t});dm=a=>{if(!a||a.length!==2)throw new Error("MatMul requires 2 inputs.");if(a[0].dims[a[0].dims.length-1]!==a[1].dims[a[1].dims.length-2])throw new Error("shared dimension does not match.");if(a[0].type!=="float32"&&a[0].type!=="float64"||a[1].type!=="float32"&&a[1].type!=="float64")throw new Error("inputs should be float type");if(a[0].type!==a[1].type)throw new Error("inputs types should match")}});function bm(a,t,n,e){let r=[],o=[],s=n[0].dims,i=n[1].dims,u=s.length,l=i.length,f=e.length,p=f-u,b=f-l;r=s.map((M,Q)=>`coords.${t[Q+p]}`),r[u-1]="i*2",r.join(", "),o=i.map((M,Q)=>`coords.${t[Q+b]}`),o[l-2]="i*2",o.join(", ");let x=Je.getBroadcastDims(s,e),I=Je.getBroadcastDims(i,e),v=x.map(M=>`coords.${t[M+p]} = 0;`).join(`
`),S=I.map(M=>`coords.${t[M+b]} = 0;`).join(`
`),L=`int lastDim = coords.${t[f-1]};
  coords.${t[f-1]} = coords.${t[f-2]};
  coords.${t[f-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${a} coords = getOutputCoords();
  ${L}
  ${v}
  vec4 outputValue = getA(${r});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${a} coords = getOutputCoords();
  ${L}
  ${S}
  vec4 outputValue = getB(${o});
  return outputValue;
}`}function gm(a,t){let n="";for(let e=0;e<t-2;e++)n+=`rc.${a[e]}, `;return n+=`rc.${a[t-2]}, i*2`,n}function ym(a,t){let n="";for(let e=0;e<t-2;e++)n+=`rc.${a[e]}, `;return n+=`i*2, rc.${a[t-1]}`,n}var hm,mm,oo,Ai=D(()=>{"use strict";ue();Oe();oe();Lt();br();no();hm=(a,t)=>({name:"MatMul (packed)",inputNames:a?["A","B","Bias"]:["A","B"],inputTypes:a?[2,2,2]:[2,2],cacheHint:t}),mm=(a,t,n,e)=>{let r=n.length>2,o=r?"value += getBiasForMatmul();":"",s=n[0].dims,i=n[1].dims,u=Je.calcShape(s,i,!0),l=!z.areEqual(n[0].dims,n[1].dims);if(!u)throw new Error("Can't use matmul on the given tensors");let f=s[s.length-1],p=Math.ceil(f/2),b=s.length,x=i.length,I=Y(a.session.backend.glContext.version),v=Ze(u.length),S=u.length,L=It(),{activationFunction:B,applyActivation:M}=Ct(e),Q=r?`${Si(v,L,n[2].dims,u,!0)}`:"",N=l?`${bm(v,L,n,u)}`:"",he=l?"getAAtOutCoordsMatmul(i)":`getA(${gm(L,b)})`,Ie=l?"getBAtOutCoordsMatmul(i)":`getB(${ym(L,x)})`,xe=l?"":`${v} rc =
          getOutputCoords(); int lastDim = rc.${L[S-1]}; rc.${L[S-1]} =
          rc.${L[S-2]}; rc.${L[S-2]} = lastDim;
      `,V=`
            ${N}
            ${Q}
            ${B}
            void main() {
              ${xe}

              vec4 value = vec4(0);
              for (int i = 0; i < ${p}; i++) {
                vec4 a = ${he};
                vec4 b = ${Ie};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${o}
              ${M}
              ${I.output} = value;
            }`;return{...t,output:{dims:u,type:n[0].type,textureType:2},shaderSource:V,hasMain:!0}},oo=(a,t,n)=>{let e=hm(t.length>2,n.activationCacheKey);return{...e,get:()=>mm(a,e,t,n)}}});var af,sf=D(()=>{"use strict";ro();rf();Ai();af=(a,t,n)=>{let e=t[0].dims,r=t[1].dims,o=Gr(e,r,n.dilations,n.pads,n.strides),s=a.run(tf(a,t[0],t[1],o,n),[t[0]]),i=a.reshapePacked(t[1],[r[0],r[1]*r[2]*r[3]]),u=t.length===3?[i,s,t[2]]:[i,s],l=a.run(oo(a,u,n),u);return a.reshapePacked(l,o)}});var Tm,xm,uf,Pi,Ei=D(()=>{"use strict";oe();Tm=a=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:a}),xm=(a,t,n,e,r,o)=>{let s=n.dims,i=e.dims,u=r.length,l=Pi(s,i,r,4),f=`
        const int XC = ${s[1]};
        const int XH = ${s[2]};
        const int XW = ${s[3]};
        const int KH = ${o.kernelShape[0]};
        const int KW = ${o.kernelShape[1]};
        const int dilationH = ${o.dilations[0]};
        const int dilationW = ${o.dilations[1]};
        const int strideH = ${o.strides[0]};
        const int strideW = ${o.strides[1]};
        const int padH = ${o.pads[0]};
        const int padW = ${o.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${u}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${s.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return{...t,output:{dims:l,type:n.type,textureType:4},shaderSource:f}},uf=(a,t,n,e,r)=>{let o=Tm(r.cacheKey);return{...o,get:()=>xm(a,o,t,n,e,r)}},Pi=(a,t,n,e=4)=>[n[0],n[2],n[3],Math.ceil(a[1]*t[2]*t[3]/e)]});var vm,wm,lf,ff=D(()=>{"use strict";ue();Oe();oe();br();Ei();vm=(a,t)=>({name:"ConvDotProduct",inputNames:a?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:a?[0,4,0]:[0,4],cacheKey:t.activationCacheKey}),wm=(a,t,n,e,r)=>{let o=n[0].dims,s=n[1].dims,i=[s[0],Math.ceil(o[1]*s[2]*s[3]/4)],u=Pi(o,s,e),[l,f]=a.calculateTextureWidthAndHeight(i,4),p=z.computeStrides(u),[b,x]=a.calculateTextureWidthAndHeight(u,4),I=e.length,v=n.length<3?"0.0":"_B(b)",S=Math.ceil(o[1]*s[2]*s[3]/4),{activationFunction:L,applyActivation:B}=Ct(r),M=Y(a.session.backend.glContext.version),Q=`
${L}
float process(int indices[${I}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${p[0]} + im2col[1] * ${p[1]} + im2col[2] * ${p[2]};
  int kernelOffset = indices[1] * ${i[1]};
  float value = ${v};
  for (int i = 0; i < ${S}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${b}, ${x});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${l}, ${f});
    value += dot(${M.texture2D}(Im2Col, im2colCoords), ${M.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${B}
  return value;
}`;return{...t,output:{dims:e,type:n[0].type,textureType:0},shaderSource:Q}},lf=(a,t,n,e)=>{let r=vm(t.length>2,e);return{...r,get:()=>wm(a,r,t,n,e)}}});var Gr,Di,_m,Om,Im,Sm,Li,Am,ro=D(()=>{"use strict";ze();ue();ef();sf();ff();br();Ei();no();Gr=(a,t,n,e,r)=>{let o=a[0],s=a.slice(2),i=s.length,u=t[0],f=t.slice(2).map((I,v)=>I+(I-1)*(n[v]-1)),b=s.map((I,v)=>I+e[v]+e[v+i]).map((I,v)=>Math.floor((I-f[v]+r[v])/r[v]));return[o,u].concat(...b)},Di=(a,t,n)=>(Am(t,n),_m(a,t,n)),_m=(a,t,n)=>{let e=Sm(n,t),r=a.session.pack,o=e.kernelShape[0]===1&&e.kernelShape[1]===1;return e.group>1?[a.run(Ql(a,t,e),t)]:o&&r?[Om(a,t,e)]:r&&t[0].dims.length===4&&t[0].dims[0]===1&&!o?[af(a,t,e)]:[Im(a,t,e)]},Om=(a,t,n)=>{let e=t[0].dims,r=t[1].dims,o=Gr(e,r,n.dilations,n.pads,n.strides),s=a.reshapeUnpacked(t[0],[e[1],e[2]*e[3]]),i=a.reshapeUnpacked(t[1],[r[0],r[1]]),u=t.length>2?[i,s,t[2]]:[i,s],l=a.run(Ii(u,n),u);return a.reshapeUnpacked(l,o)},Im=(a,t,n)=>{let e=t[0].dims,r=t[1].dims,o=Gr(e,r,n.dilations,n.pads,n.strides),s=a.run(uf(a,t[0],t[1],o,n),[t[0]]),i=t.length===3?[s,t[1],t[2]]:[s,t[1]];return a.run(lf(a,t,o,n),i)},Sm=(a,t)=>{let n=a.kernelShape.slice();if(a.kernelShape.length===0)for(let o=2;o<t[1].dims.length;++o)n.push(t[1].dims[o]);let e=a.pads.slice();cr.adjustPadsBasedOnAutoPad(t[0].dims,a.strides,a.dilations,n,e,a.autoPad);let r=Object.assign({},a);return Object.assign(r,{kernelShape:n,pads:e,cacheKey:a.cacheKey}),r},Li=a=>{let t=a.attributes,n=Mr(t),e=t.getString("auto_pad","NOTSET"),r=t.getInts("dilations",[1,1]),o=t.getInt("group",1),s=t.getInts("kernel_shape",[]),i=t.getInts("pads",[0,0,0,0]),u=t.getInts("strides",[1,1]);return ee({autoPad:e,dilations:r,group:o,kernelShape:s,pads:i,strides:u,...n})},Am=(a,t)=>{if(!a||a.length!==2&&a.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(a[0].dims.length!==4||a[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let n=a[0].dims[1],e=a[1].dims[1]*t.group;if(n!==e)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(a.length===3&&(a[2].dims.length!==1||a[1].dims[0]!==a[2].dims[0]))throw new Error("invalid bias");let r=a[0].dims.length-2;if(t.dilations.length!==r)throw new Error(`dilations should be ${r}D`);if(t.strides.length!==r)throw new Error(`strides should be ${r}D`);if(t.pads.length!==r*2)throw new Error(`pads should be ${r*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==a[1].dims.length-2)throw new Error("invalid kernel shape");if(a[0].type!=="float32"||a[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(a.length===3&&a[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}});var Pm,Em,Dm,cf,Lm,Fm,Cm,km,$m,Bm,pf,Rm,df=D(()=>{"use strict";ze();Oe();oe();br();Pm=(a,t,n,e,r,o)=>(a-1)*t+n+(e-1)*r+1-o,Em=(a,t,n,e,r)=>{let o=Math.floor(a/2);t==="SAME_UPPER"?(n[e]=o,n[r]=a-o):t==="SAME_LOWER"&&(n[e]=a-o,n[r]=o)},Dm=(a,t,n,e,r,o,s,i)=>{let u=a.length-2,l=i.length===0;for(let f=0;f<u;++f){let p=l?a[f+2]*o[f]:i[f],b=Pm(a[f+2],o[f],r[f],t[f],n[f],p);Em(b,e,r,f,f+u),l&&i.push(o[f]*(a[f+2]-1)+s[f]+(t[f]-1)*n[f]+1-r[f]-r[f+u])}},cf=(a,t,n)=>(Rm(t,n),Lm(a,t,n)),Lm=(a,t,n)=>{let e=Bm(n,t);return[$m(a,t,e)]},Fm=(a,t)=>({name:"ConvTranspose",inputNames:a?["X","W","B"]:["X","W"],inputTypes:a?[0,0,0]:[0,0],cacheHint:t}),Cm=(a,t,n,e)=>{let o=t.length>2?"getB(output_channel)":"0.0",s=t[0].dims,i=t[1].dims,u=i[1],l=i[0]/e.group,f=[t[0].dims[0],t[1].dims[1]*e.group,...e.outputShape],p=Y(a.session.backend.glContext.version),{activationFunction:b,applyActivation:x}=Ct(e),I=`
  const ivec2 strides = ivec2(${e.strides[0]}, ${e.strides[1]});
  const ivec2 pads = ivec2(${e.pads[0]}, ${e.pads[1]});
  ${b}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${u};
    int wOutChannel = output_channel - group_id * ${u};

    float value = ${o};
    for (int inChannelOffset = 0; inChannelOffset < ${l}; inChannelOffset++) {
      int input_channel = group_id * ${l} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${i[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${i[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${e.dilations[0]}, wHOff * ${e.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${s[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${s[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${x}
    ${p.output} = vec4(value, .0, .0, .0);
  }
`;return{...n,output:{dims:f,type:t[0].type,textureType:0},shaderSource:I,hasMain:!0}},km=(a,t,n)=>{let e=Fm(t.length>2,n.cacheKey);return{...e,get:()=>Cm(a,t,e,n)}},$m=(a,t,n)=>a.run(km(a,t,n),t),Bm=(a,t)=>{let n=a.kernelShape.slice();if(a.kernelShape.length===0)for(let i=2;i<t[1].dims.length;++i)n.push(t[1].dims[i]);let e=a.pads.slice(),r=a.outputShape.slice(),o=t[0].dims;Dm(o,n,a.dilations,a.autoPad,e,a.strides,a.outputPadding,r);let s=Object.assign({},a);return Object.assign(s,{kernelShape:n,pads:e,outputShape:r,cacheKey:a.cacheKey}),s},pf=a=>{let t=a.attributes,n=Mr(t),e=t.getString("auto_pad","NOTSET"),r=t.getInts("dilations",[1,1]),o=t.getInt("group",1),s=t.getInts("kernel_shape",[]),i=t.getInts("output_padding",[0,0]),u=t.getInts("output_shape",[]),l=t.getInts("pads",[0,0,0,0]),f=t.getInts("strides",[1,1]);return ee({autoPad:e,dilations:r,group:o,kernelShape:s,outputPadding:i,outputShape:u,pads:l,strides:f,...n})},Rm=(a,t)=>{if(!a||a.length!==2&&a.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(a[0].dims.length!==4||a[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let n=a[0].dims[1],e=a[1].dims[0];if(n!==e)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let r=a[1].dims[1]*t.group;if(a.length===3&&(a[2].dims.length!==1||a[2].dims[0]!==r))throw new Error("invalid bias");let o=a[0].dims.length-2;if(t.dilations.length!==o)throw new Error(`dilations should be ${o}D`);if(t.strides.length!==o)throw new Error(`strides should be ${o}D`);if(t.pads.length!==o*2)throw new Error(`pads should be ${o*2}D`);if(t.outputPadding.length!==o)throw new Error(`output_padding should be ${o}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==a[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==a[0].dims.length-2)throw new Error("invalid output shape");if(a[0].type!=="float32"||a[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(a.length===3&&a[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}});var hf,gr,mf,Nm,bf,Mm,Gm,Um,io=D(()=>{"use strict";ze();ue();oe();hf={name:"Transpose",inputNames:["A"],inputTypes:[0]},gr=(a,t,n)=>(Um(t),[a.run({...hf,cacheHint:n.cacheKey,get:()=>Nm(a,t[0],n.perm)},t)]),mf=a=>ee({perm:a.attributes.getInts("perm",[])}),Nm=(a,t,n)=>{let e=t.dims;n=bf(e,n);let r=Mm(e,n),o=e.length,s=`
      ${Gm("perm",n,o)}
      float process(int indices[${o}]) {
        int a[${o}];
        perm(a, indices);
        return _A(a);
      }`;return{...hf,output:{dims:r,type:t.type,textureType:0},shaderSource:s}},bf=(a,t)=>(t&&t.length!==a.length&&(t=[...a.keys()].reverse()),t),Mm=(a,t)=>(t=bf(a,t),z.sortBasedOnPerm(a,t)),Gm=(a,t,n)=>{let e=[];e.push(`void ${a}(out int a[${n}], int src[${n}]) {`);for(let r=0;r<n;++r)e.push(`	a[${t[r]}]=src[${r}];`);return e.push("	}"),e.join(`
`)},Um=a=>{if(!a||a.length!==1)throw new Error("Transpose requires 1 input.");if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("input should be float tensor")}});var gf,yf,zm,Tf=D(()=>{"use strict";io();gf=(a,t,n)=>{zm(t);let e=n.blocksize,r=e*e,o=n.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],s=n.mode==="DCR"?[t[0].dims[0],e,e,t[0].dims[1]/r,t[0].dims[2],t[0].dims[3]]:[t[0].dims[0],t[0].dims[1]/r,e,e,t[0].dims[2],t[0].dims[3]],i=a.reshapeUnpacked(t[0],s),u={perm:o,cacheKey:`${o}`},[l]=gr(a,[i],u),f=[t[0].dims[0],t[0].dims[1]/r,t[0].dims[2]*e,t[0].dims[3]*e];return[a.reshapeUnpacked(l,f)]},yf=a=>{let t=a.attributes.getInt("blocksize");if(t<1)throw new Error(`blocksize must be >= 1, but got : ${t} for DepthToSpace`);let n=a.attributes.getString("mode","DCR");if(n!=="DCR"&&n!=="CRD")throw new Error(`unrecognized mode: ${n} for DepthToSpace`);return{mode:n,blocksize:t}},zm=a=>{if(a.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${a.length}`);if(a[0].type==="string"||a[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}});var xf,vf,Wm,wf=D(()=>{"use strict";ue();xf=(a,t,n)=>{Wm(t,n);let e=z.flattenShape(t[0].dims,n);return[a.reshapeUnpacked(t[0],e)]},vf=a=>a.attributes.getInt("axis",1),Wm=(a,t)=>{if(!a||a.length!==1)throw new Error("Flatten requires 1 input.");let n=a[0].dims.length;if(n===0)throw new Error("scalar tensor is not supported.");if(t<-n||t>n)throw new Error("Invalid axis");if(a[0].type==="string")throw new Error("string tensor is not supported.")}});var Qt,pn=D(()=>{"use strict";Qt=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]});var _f,Of,Vm,Hm,jm,qm,If=D(()=>{"use strict";ze();pn();ue();oe();_f=(a,t,n)=>(qm(t,n.axis),[a.run(jm(a,t,n),t)]),Of=a=>ee({axis:a.attributes.getInt("axis",0)}),Vm={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},Hm=(a,t,n,e)=>{let r=n[0].dims.slice(),o=n[1].dims.slice(),s=new Array(r.length+o.length-1);e=z.normalizeAxis(e,r.length);let i=[];for(let b=0;b<s.length;b++)b<e?(s[b]=r[b],i.push(`inputIdx[${b}] = outputIdx[${b}];`)):b<e+o.length?(s[b]=o[b-e],i.push(`indexDataIdx[${b-e}] = outputIdx[${b}];`)):(s[b]=r[b-o.length+1],i.push(`inputIdx[${b-o.length+1}] = outputIdx[${b}];`));let u=s.length||1,l=r.length,f=o.length||1,p=`
      float process(int outputIdx[${u}]) {
        int inputIdx[${l}];
        int indexDataIdx[${f}];
        indexDataIdx[0] = 0;
        ${i.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${e}] = idx < 0 ? idx + ${r[e]} : idx;
        return _A(inputIdx);
      }`;return{...t,output:{dims:s,type:n[0].type,textureType:0},shaderSource:p}},jm=(a,t,n)=>{let e={...Vm,cacheHint:n.cacheKey};return{...e,get:()=>Hm(a,e,t,n.axis)}},qm=(a,t)=>{if(!a||a.length!==2)throw new Error("Gather requires 2 inputs.");let n=a[0].dims.length;if(n<1)throw new Error("Invalid input shape.");if(t<-n||t>n-1)throw new Error("Invalid axis.");if(Qt.indexOf(a[0].type)===-1)throw new Error("Invaid input type.");if(a[1].type!=="int32"&&a[1].type!=="int16")throw new Error("Invaid input type.")}});var Fi,Sf,Af,Pf,Ym,Xm,Km,Ef=D(()=>{"use strict";ze();ue();oe();Fi=(a,t,n)=>(Km(t,n),[a.run(Ym(t,n),t)]),Sf=(a,t)=>{let n=a.attributes.getInt("transA",0)!==0,e=a.attributes.getInt("transB",0)!==0,r=a.attributes.getFloat("alpha",1),o=a.attributes.getFloat("beta",1);return ee({transA:n,transB:e,alpha:r,beta:o,isOptionalC:t})},Af=a=>Sf(a,!1),Pf=a=>Sf(a,!0),Ym=(a,t)=>{let n={name:"Gemm",inputNames:a.length===3?["A","B","C"]:["A","B"],inputTypes:a.length===3?[0,0,0]:[0,0],key:t.cacheKey};return{...n,get:()=>Xm(n,a,t)}},Xm=(a,t,n)=>{let e=t[0].dims.slice(),r=t[1].dims.slice(),[o,s]=Yn.getShapeOfGemmResult(e,n.transA,r,n.transB,t.length===3?t[2].dims:void 0),i=[o,s];if(!i)throw new Error("Can't use gemm on the given tensors");let u=e[e.length-1],l="";n.transA&&(u=e[0]),n.transA&&n.transB?l="value += _A_T(a) * _B_T(b);":n.transA&&!n.transB?l="value += _A_T(a) * _B(b);":!n.transA&&n.transB?l="value += _A(a) * _B_T(b);":!n.transA&&!n.transB&&(l="value += _A(a) * _B(b);");let f=i.length,p=t.length===3?`int c[${t[2].dims.length}];`:"",b=t.length===3?"bcastIndices_C(indices, c);":"",x=t.length===3?"value += beta * _C(c);":"",I=`
      float process(int indices[${f}]) {
          int a[${f}];
          int b[${f}];
          ${p}

          copyVec(indices, a);
          copyVec(indices, b);
          ${b}

          float value = 0.0;
          for (int k=0; k<${u}; ++k) {
              a[${f-1}] = k;
              b[${f-2}] = k;
              ${l}
          }

          value = value * alpha;
          ${x}
          return value;
      }`;return{...a,output:{dims:i,type:t[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:n.alpha},{name:"beta",type:"float",data:n.beta}],shaderSource:I}},Km=(a,t)=>{if(!a)throw new Error("Input is missing");if(t.isOptionalC&&(a.length<2||a.length>3))throw new Error("Invaid input shape.");if(!t.isOptionalC&&a.length!==3)throw new Error("Gemm requires 3 inputs");if(a.length===3&&a[2].dims.length!==1&&a[2].dims.length!==2)throw new Error("Invalid input shape of C");if(a[0].type!=="float32"&&a[0].type!=="float64"||a[1].type!=="float32"&&a[1].type!=="float64"||a.length===3&&a[2].type!=="float32"&&a[2].type!=="float64")throw new Error("Invalid input type.");if(a[0].type!==a[1].type||a.length===3&&a[0].type!==a[2].type)throw new Error("Input types are mismatched")}});var Df,Lf,Jm,Zm,Qm,eb,tb,Ff=D(()=>{"use strict";ze();oe();Df=(a,t,n)=>(tb(t),[a.run(Qm(a,t,n),t)]),Lf=a=>{let t=a.attributes.getFloat("scale"),n=a.attributes.getFloats("bias");return ee({scale:t,bias:n})},Jm={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},Zm=(a,t,n,e)=>{let r=n[0].dims.slice(),o=r.length,i=`
      ${eb(e.bias.length)}
      float process(int indices[${o}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return{...t,output:{dims:r,type:n[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:e.bias.length,data:e.bias},{name:"scale",type:"float",data:e.scale}],shaderSource:i}},Qm=(a,t,n)=>{let e={...Jm,cacheHint:n.cacheKey};return{...e,get:()=>Zm(a,e,t,n)}},eb=a=>{let t=[`float getBias(float bias[${a}], int channel) {`];for(let n=0;n<a;++n)n===0?t.push(`	if (channel == ${n}) { return bias[${n}]; }`):n===a-1?t.push(`	else { return bias[${n}]; }`):t.push(`	else if (channel == ${n}) { return bias[${n}]; }`);return t.push("	}"),t.join(`
`)},tb=a=>{if(!a||a.length!==1)throw new Error("ImageScaler requires 1 input.");if(a[0].dims.length!==4)throw new Error("Invalid input shape.");if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("Invalid input type.")}});var kf,$f,Cf,rb,nb,ob,ib,ab,sb,Bf=D(()=>{"use strict";Oe();oe();kf=(a,t,n)=>{sb(t);let e=a.run(nb(t[0]),t);return[a.run(ab(a,t[0],n,e.dims),[t[0],e,t[1],t[2]])]},$f=a=>a.attributes.getFloat("epsilon",1e-5),Cf={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},rb=(a,t)=>{let n=t.dims.slice(),e=n[1],r=n[2]*n[3],o=[n[0],e],s=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${n[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${n[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${r});
        temp = 0.0;
        for(int a2=0; a2<${n[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${n[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${r});

        return v;
      }`;return{...a,output:{dims:o,type:t.type,textureType:4},shaderSource:s}},nb=a=>({...Cf,get:()=>rb(Cf,a)}),ob={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},ib=(a,t,n,e,r)=>{let o=Y(a.session.backend.glContext.version),[s,i]=a.calculateTextureWidthAndHeight(r,4),[u,l]=[s/4,i],f=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${u}, ${l});
        return ${o.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return{...t,output:{dims:n.dims,type:n.type,textureType:0},variables:[{name:"epsilon",type:"float",data:e}],shaderSource:f}},ab=(a,t,n,e)=>{let r={...ob,cacheHint:`${n}`};return{...r,get:()=>ib(a,r,t,n,e)}},sb=a=>{if(!a||a.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let t=a[0],n=a[1],e=a[2];if(t.dims.length<3||n.dims.length!==1||e.dims.length!==1)throw new Error("Invalid input shape.");if(n.dims[0]!==t.dims[1]||e.dims[0]!==t.dims[1])throw new Error("Input shapes are mismatched.");if(t.type!=="float32"&&t.type!=="float64"||n.type!=="float32"&&n.type!=="float64"||e.type!=="float32"&&e.type!=="float64")throw new Error("Invalid input type.");if(a[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}});function ub(a,t){let n=a[0].dims[1],e=a[0].dims.length,r=-Math.floor((t.size-1)/2),o=Math.ceil((t.size-1)/2),s=`float(${t.alpha}) / float(${t.size})`,i=`float(${t.bias})`,u=`float(${t.beta})`,l=`
    float process(int indices[${e}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${r}; i <= ${o}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${n}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${i} + ${s} * square_sum, ${u});
    }`;return{...Mf,cacheHint:t.cacheKey,output:{dims:a[0].dims,type:a[0].type,textureType:0},shaderSource:l}}function lb(a,t){return{...Mf,cacheHint:t.cacheKey,get:()=>ub(a,t)}}var Rf,Nf,Mf,fb,Gf=D(()=>{"use strict";ze();oe();Rf=(a,t,n)=>(fb(t),[a.run(lb(t,n),t)]),Nf=a=>{let t=a.attributes.getFloat("alpha",1e-4),n=a.attributes.getFloat("beta",.75),e=a.attributes.getFloat("bias",1),r=a.attributes.getInt("size");return ee({alpha:t,beta:n,bias:e,size:r})},Mf={name:"LRN",inputNames:["X"],inputTypes:[0]};fb=a=>{if(!a||a.length!==1)throw new Error("LRN requires 1 input.");if(a[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(a[0].type!=="float32")throw new Error("input should be float type")}});var cb,Ci,Uf,zf,Wf,pb,db,hb,mb,bb,gb,yb,Tb,Vf=D(()=>{"use strict";ze();ue();Oe();oe();cb={name:"Pad",inputNames:["A"],inputTypes:[0]},Ci=(a,t,n)=>(hb(t),[a.run({...cb,cacheHint:n.cacheKey,get:()=>db(a,t[0],n)},t)]),Uf=a=>{let t=a.attributes.getString("mode","constant"),n=a.attributes.getFloat("value",0),e=a.attributes.getInts("pads");return ee({mode:t,value:n,pads:e})},zf=(a,t,n)=>{mb(t);let e=pb(a,t,n);return Ci(a,[t[0]],e)},Wf=a=>a.attributes.getString("mode","constant"),pb=(a,t,n)=>{if(!a.session.isInitializer(t[1].dataId)||t.length>=3&&!a.session.isInitializer(t[2].dataId))throw new Error("dynamic pad attributes are not allowed");let e=Array.from(t[1].integerData),r=t.length>=3?t[2].floatData[0]:0;return ee({mode:n,pads:e,value:r})},db=(a,t,n)=>{let e=z.padShape(t.dims.slice(),n.pads),r=e.length,s=`
      ${bb(a,t,n)}
      float process(int[${r}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:e,type:t.type,textureType:0},shaderSource:s}},hb=a=>{if(!a||a.length!==1)throw new Error("Pad requires 1 input");if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("Invalid input type.")},mb=a=>{if(!a||a.length!==2&&a.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(a[1].type!=="int32")throw new Error("Invalid input type.");if(a.length>=3&&a[2].type==="string")throw new Error("Invalid input type.")},bb=(a,t,n)=>{let e=Y(a.session.backend.glContext.version),[r,o]=a.calculateTextureWidthAndHeight(t.dims,0),s=z.computeStrides(t.dims);switch(n.mode){case"constant":return gb(e,t.dims,s,r,o,n.pads,n.value);case"reflect":return yb(e,t.dims,s,r,o,n.pads);case"edge":return Tb(e,t.dims,s,r,o,n.pads);default:throw new Error("Invalid mode")}},gb=(a,t,n,e,r,o,s)=>{let i=t.length,u="";for(let l=i-1;l>=0;--l)u+=`
        k = m[${l}] - ${o[l]};
        if (k < 0)  return constant;
        if (k >= ${t[l]}) return constant;
        offset += k * ${n[l]};
        `;return`
      float padA(int m[${i}]) {
        const float constant = float(${s});
        int offset = 0;
        int k = 0;
        ${u}
        vec2 coords = offsetToCoords(offset, ${e}, ${r});
        float value = getColorAsFloat(${a.texture2D}(A, coords));
        return value;
      }
      `},yb=(a,t,n,e,r,o)=>{let s=t.length,i="";for(let u=s-1;u>=0;--u)i+=`
        k = m[${u}] - ${o[u]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(t[u]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${t[u]}) { k = _2n_1 - k; }
        }
        offset += k * ${n[u]};
        `;return`
      float padA(int m[${s}]) {
        int offset = 0;
        int k = 0;
        ${i}
        vec2 coords = offsetToCoords(offset, ${e}, ${r});
        float value = getColorAsFloat(${a.texture2D}(A, coords));
        return value;
      }
      `},Tb=(a,t,n,e,r,o)=>{let s=t.length,i="";for(let u=s-1;u>=0;--u)i+=`
        k = m[${u}] - ${o[u]};
        if (k < 0)  k = 0;
        if (k >= ${t[u]}) k = ${t[u]-1};
        offset += k * ${n[u]};
      `;return`
      float padA(int m[${s}]) {
        int offset = 0;
        int k = 0;
        ${i}
        vec2 coords = offsetToCoords(offset, ${e}, ${r});
        float value = getColorAsFloat(${a.texture2D}(A, coords));
        return value;
      }
      `}});var jf,qf,Yf,Xf,Kf,Jf,Zf,Qf,ec,xb,Hf,tc,so,rc,ao,vb,nc=D(()=>{"use strict";ze();ue();oe();jf=(a,t,n)=>{so(t);let e={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:n.cacheKey};return[a.run({...e,get:()=>Yf(t,e,!1,n)},t)]},qf=a=>{let t=a.attributes.getString("auto_pad","NOTSET"),n=a.attributes.getInt("ceil_mode",0),e=a.attributes.getInt("count_include_pad",0)!==0,r=a.attributes.getInts("kernel_shape"),o=a.attributes.getInts("strides",[]),s=a.attributes.getInts("pads",[]);if(n!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return ee({autoPad:t,ceilMode:n,countIncludePad:e,kernelShape:r,strides:o,pads:s})},Yf=(a,t,n,e)=>{let[r,o]=ec(a,e,n),s=z.size(r.kernelShape),i="value += _X(x);",u="";r.countIncludePad?u+=`value /= float(${s});`:u+=`value /= float(${s} - pad);`;let f=`
        ${rc(a[0].dims,r,i,u,"0.0")}
      `;return{...t,output:{dims:o,type:a[0].type,textureType:0},shaderSource:f}},Xf=(a,t,n)=>{so(t);let e={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${n.countIncludePad}`};return[a.run({...e,get:()=>Yf(t,e,!0,n)},t)]},Kf=a=>{let t=a.attributes.getInt("count_include_pad",0)!==0;return ee({autoPad:"",ceilMode:0,countIncludePad:t,kernelShape:[],strides:[],pads:[]})},Jf=(a,t,n)=>{so(t);let e={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:n.cacheKey};return[a.run({...e,get:()=>Qf(t,e,!1,n)},t)]},Zf=a=>{let t=a.attributes.getString("auto_pad","NOTSET"),n=a.attributes.getInt("ceil_mode",0),e=a.attributes.getInts("kernel_shape"),r=a.attributes.getInts("strides",[]),o=a.attributes.getInts("pads",[]),s=a.attributes.getInt("storage_order",0),i=a.attributes.getInts("dilations",[]);if(s!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(n!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return ee({autoPad:t,ceilMode:n,countIncludePad:!1,kernelShape:e,strides:r,pads:o,storageOrder:s,dilations:i})},Qf=(a,t,n,e)=>{let[r,o]=ec(a,e,n),s=`
      value = max(_X(x), value);
    `,i="",l=`
      ${rc(a[0].dims,r,s,i,"-1e5")}
    `;return{...t,output:{dims:o,type:a[0].type,textureType:0},shaderSource:l}},ec=(a,t,n)=>{let e=a[0].dims.slice(),r=Object.hasOwnProperty.call(t,"dilations"),o=t.kernelShape.slice(),s=t.strides.slice(),i=r?t.dilations.slice():[],u=t.pads.slice();cr.adjustPoolAttributes(n,e,o,s,i,u);let l=cr.computePoolOutputShape(n,e,s,i,o,u,t.autoPad),f=Object.assign({},t);return r?Object.assign(f,{kernelShape:o,strides:s,pads:u,dilations:i,cacheKey:t.cacheKey}):Object.assign(f,{kernelShape:o,strides:s,pads:u,cacheKey:t.cacheKey}),[f,l]},xb={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},Hf={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},tc=(a,t)=>(so(t),[a.run({...Hf,get:()=>Qf(t,Hf,!0,xb)},t)]),so=a=>{if(!a||a.length!==1)throw new Error("Pool ops requires 1 input.");if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("Invalid input type.")},rc=(a,t,n,e,r)=>{let o=a.length;if(t.kernelShape.length<=2){let s=t.kernelShape[t.kernelShape.length-1],i=t.strides[t.strides.length-1],u=t.pads[t.pads.length/2-1],l=t.pads[t.pads.length-1],f=a[o-1],p="",b="",x="";if(u+l!==0?p=`
          for (int i = 0; i < ${s}; i++) {
            x[${o} - 1] = indices[${o} - 1] * ${i} - ${u} + i;
            if (x[${o} - 1] < 0 || x[${o} - 1] >= ${f}) {
              pad++;
              continue;
            }
            ${n}
          }`:p=`
          for (int i = 0; i < ${s}; i++) {
            x[${o} - 1] = indices[${o} - 1] * ${i} - ${u} + i;
            ${n}
          }`,t.kernelShape.length===2){let v=t.kernelShape[t.kernelShape.length-2],S=t.strides[t.strides.length-2],L=t.pads[t.pads.length/2-2],B=t.pads[t.pads.length-2],M=a[o-2];L+B!==0?b=`
            for (int j = 0; j < ${v}; j++) {
              x[${o} - 2] = indices[${o} - 2] * ${S} - ${L} + j;
              if (x[${o} - 2] < 0 || x[${o} - 2] >= ${M}) {
                pad+= ${s};
                continue;
              }
          `:b=`
            for (int j = 0; j < ${v}; j++) {
              x[${o} - 2] = indices[${o} - 2] * ${S} - ${L} + j;
            `,x=`
          }
        `}return`
        float process(int indices[${o}]) {
          int x[${o}];
          copyVec(indices, x);

          float value = ${r};
          int pad = 0;
          ${b}
          ${p}
          ${x}
          ${e}
          return value;
        }
      `}else{let s=z.size(t.kernelShape),i=z.computeStrides(t.kernelShape),u=i.length,l=t.pads.length,f=vb(u),p=ao(a,"inputDims"),b=ao(t.pads,"pads"),x=ao(i,"kernelStrides"),I=ao(t.strides,"strides"),v=t.pads.reduce((B,M)=>B+M),S="";return v?S=`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${n}
          }`:S=`
          }
          ${n}
        `,`
        ${f}
        float process(int indices[${o}]) {
          int x[${o}];
          copyVec(indices, x);
          int offset[${u}];
          int pads[${l}];
          int inputDims[${o}];
          int kernelStrides[${u}];
          int strides[${u}];
          ${b}
          ${p}
          ${I}
          ${x}

          float value = ${r};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${s}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${o} - ${u}; j < ${o}; j++) {
              x[j] = indices[j] * strides[j - ${o} + ${u}]
                + offset[j - ${o} + ${u}] - pads[j - 2];
              ${S}
          }
          ${e}

          return value;
        }
      `}},ao=(a,t)=>{let n="";for(let e=0;e<a.length;e++)n+=`
      ${t}[${e}] = ${a[e]};
    `;return n},vb=a=>`
  void offsetToIndices(int offset, int[${a}] strides, out int[${a}] indices) {
    if (${a} == 0) {
      return;
    }
    for (int i = 0; i < ${a} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${a} - 1] = offset;
  }`});var yr,er,wb,_b,oc,ic,ac,sc,uc,lc,fc,cc=D(()=>{"use strict";ze();pn();ue();oe();yr=(a,t,n,e,r)=>{_b(t);let o={name:e,inputNames:["A"],inputTypes:[0]};return[a.run({...o,cacheHint:n.cacheKey,get:()=>wb(a,t,n,e,r,o)},t)]},er=a=>{let t=a.attributes.getInts("axes",[]),n=a.attributes.getInt("keepdims",1)===1;return ee({axes:t,keepDims:n})},wb=(a,t,n,e,r,o)=>{let s=[],i=t[0].dims.length||1,u=[],l=z.normalizeAxes(n.axes,t[0].dims.length),f=r(t,l),p=f[1];for(let I=0;I<t[0].dims.length;I++)l.indexOf(I)>=0||l.length===0?(n.keepDims&&s.push(1),p=`
          for(int j${I} = 0; j${I} < ${t[0].dims[I]}; j${I}++) {
            inputIdx[${I}] = j${I};
            ${p}
          }`):(u.push(`inputIdx[${I}] = outputIdx[${s.length}];`),s.push(t[0].dims[I]));let x=`
      float process(int outputIdx[${s.length||1}]) {
        float value;                 // final result
        int inputIdx[${i}];      // addressing input data
        ${u.join(`
`)}
        ${f[0]}       // init ops for reduce max/min
        ${p}
        ${f[2]}       // final computation for reduce mean
        return value;
      }`;return{...o,output:{dims:s,type:t[0].type,textureType:0},shaderSource:x}},_b=a=>{if(!a||a.length!==1)throw new Error("Reduce op requires 1 input.");if(Qt.indexOf(a[0].type)===-1)throw new Error("Invalid input type.")},oc=(a,t,n)=>yr(a,t,n,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),ic=(a,t,n)=>yr(a,t,n,"ReduceMean",(r,o)=>{let s=1;for(let i=0;i<r[0].dims.length;i++)(o.indexOf(i)>=0||o.length===0)&&(s*=r[0].dims[i]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${s}.;`]}),ac=(a,t,n)=>yr(a,t,n,"ReduceMax",(r,o)=>{let s=[];for(let i=0;i<r[0].dims.length;i++)(o.indexOf(i)>=0||o.length===0)&&s.push(`inputIdx[${i}] = 0;`);return[`${s.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),sc=(a,t,n)=>yr(a,t,n,"ReduceMin",(r,o)=>{let s=[];for(let i=0;i<r[0].dims.length;i++)(o.indexOf(i)>=0||o.length===0)&&s.push(`inputIdx[${i}] = 0;`);return[`${s.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),uc=(a,t,n)=>yr(a,t,n,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),lc=(a,t,n)=>yr(a,t,n,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),fc=(a,t,n)=>yr(a,t,n,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])});var pc,dc=D(()=>{"use strict";ue();pc=(a,t)=>{let n=z.calculateReshapedDims(t[0].dims,t[1].integerData);return a.session.pack?[a.reshapePacked(t[0],n)]:[a.reshapeUnpacked(t[0],n)]}});var hc,ki,mc,bc,dn,Ob,$i,uo,Bi=D(()=>{"use strict";ze();Oe();oe();hc={name:"Upsample",inputNames:["X"],inputTypes:[0]},ki=(a,t,n)=>($i(t,n),[a.run({...hc,cacheHint:n.cacheKey,get:()=>Ob(a,t,n)},t)]),mc=a=>dn(a,7),bc=a=>dn(a,9),dn=(a,t)=>{let n=t>=10,e=a.attributes.getString("mode","nearest");if(e!=="nearest"&&e!=="linear"&&(t<11||e!=="cubic"))throw new Error(`unrecognized mode: ${e}`);let r=[];t<9&&(r=a.attributes.getFloats("scales"),uo(r,e,n));let o=a.attributes.getFloat("extrapolation_value",0),s=t>10?a.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(s)===-1)throw new Error(`coordinate_transform_mode '${s}' is not supported`);let i=s==="tf_crop_and_resize",u=i,l=e==="nearest"&&t>=11?a.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(l)===-1)throw new Error(`nearest_mode '${l}' is not supported`);let f=a.attributes.getFloat("cubic_coeff_a",-.75),p=a.attributes.getInt("exclude_outside",0)!==0;if(p&&e!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let b=t<11?!0:e==="nearest"&&s==="asymmetric"&&l==="floor",x=0,I=0,v=0;return t>10?a.inputs.length>2?(x=1,I=2,v=3):(I=1,v=2):t===9&&(I=1),ee({opset:t,isResize:n,mode:e,scales:r,extrapolationValue:o,coordinateTransformMode:s,useExtrapolation:u,needRoiInput:i,nearestMode:l,cubicCoefficientA:f,excludeOutside:p,useNearest2xOptimization:b,roiInputIdx:x,scalesInputIdx:I,sizesInputIdx:v})},Ob=(a,t,n)=>{let e=Y(a.session.backend.glContext.version),[r,o]=a.calculateTextureWidthAndHeight(t[0].dims,0),s=t[0].dims.map((v,S)=>Math.floor(v*n.scales[S])),[i,u]=a.calculateTextureWidthAndHeight(s,0),l=s.length,f=new Array(l),p=new Array(l),b=`
      int output_pitches[${l}];
      int input_pitches[${l}];
      `;for(let v=l-1;v>=0;v--)f[v]=v===l-1?1:f[v+1]*s[v+1],p[v]=v===l-1?1:p[v+1]*t[0].dims[v+1],b+=`
        output_pitches[${v}] = ${f[v]};
        input_pitches[${v}] = ${p[v]};
        `;let x=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${r}, ${o});
        float value = getColorAsFloat(${e.texture2D}(X, coords));
        return value;
      }
      `,I=n.mode==="nearest"?`
    ${x}
    float process(int indices[${l}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${i}, ${u});

      ${b}

      int d, m;
      for (int dim = 0; dim < ${l}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:l===4?`
    ${x}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${i}, ${u});

      ${b}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${t[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${x}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${i}, ${u});

      ${b}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${t[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return{...hc,output:{dims:s,type:t[0].type,textureType:0},shaderSource:I,variables:[{name:"scales",type:"int",arrayLength:n.scales.length,data:n.scales.map(v=>Math.ceil(v))}]}},$i=(a,t)=>{if(!a||t.opset<9&&a.length!==1||t.opset>=9&&t.opset<11&&a.length!==2||t.opset>=11&&a.length<2)throw new Error("invalid inputs.");if(t.scales.length>0&&a[0].dims.length!==t.scales.length)throw new Error("Invalid input shape.");if(a[0].type==="string")throw new Error("Invalid input tensor types.")},uo=(a,t,n)=>{if(n){for(let e of a)if(e<=0)throw new Error("Scale value should be greater than 0.")}else for(let e of a)if(e<1)throw new Error("Scale value should be greater than or equal to 1.");if((t==="linear"||t==="cubic")&&a.length!==2&&(a.length!==4||a[0]!==1||a[1]!==1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${n?"Resize":"Upsample"} opeartor.`)}});var Ri,Ni,gc,yc,Ib,Sb,Ab,Pb,Tc=D(()=>{"use strict";Oe();oe();Lt();mr();Bi();Ri={name:"Resize",inputNames:["A"],inputTypes:[2]},Ni=(a,t,n)=>($i(t,n),[a.run({...Ri,cacheHint:n.cacheKey,get:()=>Ib(a,t,n)},t)]),gc=a=>dn(a,10),yc=a=>dn(a,11),Ib=(a,t,n)=>{let e=Y(a.session.backend.glContext.version),[r,o]=Sb(t,n);if(r.every(M=>M===1)&&n.coordinateTransformMode!=="tf_crop_and_resize")return{...Ri,output:{dims:o,type:t[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${e.texture2D}(X, TexCoords);
                    ${e.output} = v;
                }`};let i=o.length;if(i<2)throw new Error(`output dimension should be at least 2, but got ${i}`);let u=o[i-2],l=o[i-1],f=t[0].dims;if(i!==f.length)throw new Error(`output dimension should match input ${f.length}, but got ${i}`);let p=f[i-2],b=f[i-1],x=r[i-2],I=r[i-1],v="";if(n.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${n.mode}'`);switch(n.coordinateTransformMode){case"asymmetric":v=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":v=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":v=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${l}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${u}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${l}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${u}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":v=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${l}.0 - 1.0, ${u}.0 - 1.0, ${l}.0 - 1.0,
                            ${u}.0 - 1.0);
                        vec4 original = vec4(${b}.0 - 1.0, ${p}.0 - 1.0, ${b}.0 - 1.0,
                            ${p}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${n.coordinateTransformMode}'`)}let S=Ze(i),L=Ft(),B=`
            const vec2 inputWH = vec2(${p}.0, ${b}.0);
            const vec4 scaleWHWH = vec4(float(${x}), float(${I}), float(${x}), float(${I}));
            ${L}
            ${v}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${S} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${u-1};
                bool hasNextCol = rc.z < ${l-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${e.output} = vec4(newValue);
            }
        `;return{...Ri,output:{dims:o,type:t[0].type,textureType:2},hasMain:!0,shaderSource:B}},Sb=(a,t)=>{let e=a[0].dims,r=t.scales,o;if(r.length===0){let i=a[t.scalesInputIdx];if(i&&i.size!==0){if(a[t.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");r=Ab(i,t.mode,t.isResize)}else{let u=a[t.sizesInputIdx];if(!u||u.size===0)throw new Error("Either scales or sizes MUST be provided as input.");o=Array.from(u.integerData),r=Pb(o,e,t.mode,t.isResize)}}else if(a[t.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let s=o||e.map((i,u)=>Math.floor(i*r[u]));return[r,s]},Ab=(a,t,n)=>{let e=Array.from(a.floatData);return uo(e,t,n),e},Pb=(a,t,n,e)=>{let r=t.length,o=new Array(r);for(let s=0,i=r;s<i;s++)if(t[s]===0){if(a[s]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");o[s]=1}else o[s]=a[s]/t[s];return uo(o,n,e),o}});var xc,Eb,vc=D(()=>{"use strict";hr();xc=(a,t)=>(Eb(t),[new Re([t[0].dims.length],"int32",void 0,void 0,new Int32Array(t[0].dims))]),Eb=a=>{if(!a||a.length!==1)throw new Error("Shape requires 1 input.")}});var Mi,wc,_c,Oc,Db,Ic,Lb,Fb,Sc=D(()=>{"use strict";ze();pn();ue();oe();Mi={name:"Slice",inputNames:["A"],inputTypes:[0]},wc=(a,t,n)=>(Db(t),[a.run({...Mi,cacheHint:n.cacheKey,get:()=>Oc(a,t[0],n)},t)]),_c=a=>{let t=a.attributes.getInts("starts"),n=a.attributes.getInts("ends"),e=a.attributes.getInts("axes",[]);return ee({starts:t,ends:n,axes:e})},Oc=(a,t,n)=>{let e=n.axes.length===0?t.dims.slice(0).map((p,b)=>b):n.axes,r=z.normalizeAxes(e,t.dims.length),o=n.starts.map((p,b)=>p>t.dims[r[b]]-1?t.dims[r[b]]:z.normalizeAxis(p,t.dims[r[b]])),s=n.ends.map((p,b)=>p>t.dims[r[b]]-1?t.dims[r[b]]:z.normalizeAxis(p,t.dims[r[b]])),i=t.dims.slice(),u=[];for(let p=0;p<r.length;p++)i[r[p]]=s[p]-o[p],o[p]>0&&u.push(`outputIdx[${r[p]}] += ${o[p]};`);let f=`
      float process(int outputIdx[${i.length}]) {
        ${u.join(`
      `)}
        return _A(outputIdx);
      }`;return{...Mi,output:{dims:i,type:t.type,textureType:0},shaderSource:f}},Db=a=>{if(!a||a.length!==1)throw new Error("Slice requires 1 input.");if(Qt.indexOf(a[0].type)===-1)throw new Error("Invalid input type.")},Ic=(a,t)=>{Fb(t);let n=Lb(a,t);return[a.run({...Mi,cacheHint:n.cacheKey,get:()=>Oc(a,t[0],n)},[t[0]])]},Lb=(a,t)=>{if(!a.session.isInitializer(t[1].dataId)||!a.session.isInitializer(t[2].dataId)||t.length>=4&&!a.session.isInitializer(t[3].dataId)||t.length>=5&&!a.session.isInitializer(t[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(t.length>=5&&t[4].integerData.some(s=>s!==1))throw new Error("currently non-1 steps is not supported for Slice");let n=Array.from(t[1].integerData),e=Array.from(t[2].integerData),r=t.length>=4?Array.from(t[3].integerData):[],o=`${r};${n};${e}`;return{starts:n,ends:e,axes:r,cacheKey:o}},Fb=a=>{if(!a||a.length<3||a.length>5)throw new Error("Invalid input number.");if(a[1].type!=="int32"||a[1].dims.length!==1)throw new Error("Invalid input type.");if(a[2].type!=="int32"||a[2].dims.length!==1)throw new Error("Invalid input type.");if(a.length>=4&&(a[3].type!=="int32"||a[3].dims.length!==1))throw new Error("Invalid input type.");if(a.length>=5&&(a[4].type!=="int32"||a[4].dims.length!==1))throw new Error("Invalid input type.")}});var Ac,Pc,Ec,Dc,Lc,Fc,Cc,kc,Cb,kb,$b,$c,Bc=D(()=>{"use strict";ze();ue();Oe();oe();io();Ac={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},Pc={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},Ec={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},Dc=(a,t,n)=>{$c(t);let e=t[0].dims.slice(),r=z.normalizeAxis(n.axis,e.length),o=z.sizeToDimension(e,r),s=z.sizeFromDimension(e,r);return kc(a,t,n,o,s)},Lc=a=>ee({axis:a.attributes.getInt("axis",1)}),Fc=a=>ee({axis:a.attributes.getInt("axis",-1)}),Cc=(a,t,n)=>{$c(t);let e=t[0].dims.slice(),r=z.normalizeAxis(n.axis,e.length),o=e.length,s=r!==o-1,i=[],u=[],l=[],f;s&&(u=Array.from({length:o}).map((I,v)=>v),u[r]=o-1,u[o-1]=r,u.map(I=>i.push(e[I])),f=ee({perm:u}),l=gr(a,t,f));let p=s?z.sizeToDimension(i,o-1):z.sizeToDimension(e,o-1),b=s?z.sizeFromDimension(i,o-1):z.sizeFromDimension(e,o-1),x=kc(a,s?l:t,n,p,b);return s?gr(a,x,f):x},kc=(a,t,n,e,r)=>{let o=Cb(a,t[0],e,r,[e]),s=a.run({...Ac,cacheHint:n.cacheKey,get:()=>o},t),i=kb(a,t[0],e,r,o.output.dims,[e]),u=a.run({...Pc,cacheHint:n.cacheKey,get:()=>i},[t[0],s]),l=$b(a,t[0],e,r,o.output.dims,i.output.dims);return[a.run({...Ec,cacheHint:n.cacheKey,get:()=>l},[t[0],s,u])]},Cb=(a,t,n,e,r)=>{let[o,s]=a.calculateTextureWidthAndHeight(t.dims,0),i=r.length;if(n<1||e<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(r.length!==1)throw new Error("Dimensionality of the output should be 1");if(r[0]!==n)throw new Error("Shape of the output should be equal to logical row count");let u=Y(a.session.backend.glContext.version),l=`
      float process(int[${i}] indices) {
        int logical_row_start_offset = indices[0] * ${e};

        float max = getColorAsFloat(${u.texture2D}(A, offsetToCoords(logical_row_start_offset, ${o},
        ${s} )));
        for(int i=1; i<${e}; ++i)
        {
          float current = getColorAsFloat(${u.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${o}, ${s})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return{...Ac,output:{dims:r,type:t.type,textureType:0},shaderSource:l}},kb=(a,t,n,e,r,o)=>{let[s,i]=a.calculateTextureWidthAndHeight(t.dims,0),u=o.length;if(n<1||e<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(o.length!==1)throw new Error("Dimensionality of the output should be 1");if(o[0]!==n)throw new Error("Shape of the output should be equal to logical row count");if(r.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(r[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");let l=Y(a.session.backend.glContext.version),f=`
      float process(int[${u}] indices) {
        int logical_row_start_offset = indices[0] * ${e};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${e}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${l.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${s}, ${i}))) - max);
        }

        return norm_factor;
      }`;return{...Pc,output:{dims:o,type:t.type,textureType:0},shaderSource:f}},$b=(a,t,n,e,r,o)=>{let[s,i]=a.calculateTextureWidthAndHeight(t.dims,0),u=t.dims.length;if(n<1||e<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(r.length!==1||o.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(r[0]!==n||o[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");let l=`
      float process(int[${u}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${s}, ${i});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${e};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return{...Ec,output:{dims:t.dims,type:t.type,textureType:0},shaderSource:l}},$c=a=>{if(!a||a.length!==1)throw new Error("Softmax requires 1 input.");if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("Invalid input type")}});var Rc,Nc,Mc,Bb,Rb,Nb,Gc=D(()=>{"use strict";ze();ue();oe();Rc={name:"Split",inputNames:["A"],inputTypes:[0]},Nc=(a,t,n)=>{Nb(t);let e=z.normalizeAxis(n.axis,t[0].dims.length),r=Bb(a,t,e,n),o=[];for(let s=0;s<r;++s)o.push(a.run({...Rc,cacheHint:`${n.cacheKey};${s}`,get:()=>Rb(a,t[0],n,e,s)},t));return o},Mc=a=>{let t=a.attributes.getInt("axis",0),n=a.attributes.getInts("split",[]),e=a.outputs.length;return ee({axis:t,split:n,numOutputs:e})},Bb=(a,t,n,e)=>{let[,r]=an.splitShape(t[0].dims,n,e.split,e.numOutputs);return r.length},Rb=(a,t,n,e,r)=>{let[o,s]=an.splitShape(t.dims,e,n.split,n.numOutputs),i=s[r],u=o[r],f=`
      float process(int indices[${u.length}]) {
        indices[${e}] += ${i};
        return _A(indices);
      }
    `;return{...Rc,cacheHint:`${n.cacheKey}:${r}`,output:{dims:u,type:t.type,textureType:0},shaderSource:f}},Nb=a=>{if(!a||a.length!==1)throw new Error("Split requires one input.");if(a[0].type!=="int8"&&a[0].type!=="uint8"&&a[0].type!=="int16"&&a[0].type!=="uint16"&&a[0].type!=="int32"&&a[0].type!=="uint32"&&a[0].type!=="float32"&&a[0].type!=="float64"&&a[0].type!=="bool")throw new Error("Invalid input type.")}});var Gi,Uc,zc,Mb,Gb,Wc=D(()=>{"use strict";ue();Gi=(a,t,n)=>{Mb(t);let e=z.squeezeShape(t[0].dims,n);return[a.reshapeUnpacked(t[0],e)]},Uc=(a,t)=>(Gb(t),Gi(a,[t[0]],Array.from(t[1].integerData))),zc=a=>a.attributes.getInts("axes"),Mb=a=>{if(!a||a.length!==1)throw new Error("Squeeze requires 1 input.");if(a[0].type==="string")throw new Error("invalid input tensor types.")},Gb=a=>{if(!a||a.length!==2)throw new Error("Squeeze requires 2 inputs.");if(a[1].type!=="int32")throw new Error("Invalid input type.")}});var Vc,Ub,zb,Hc=D(()=>{"use strict";Oe();oe();Vc=(a,t)=>{zb(t);let n={name:"Sum",inputNames:t.map((r,o)=>`X${o}`),inputTypes:new Array(t.length).fill(0)};return[a.run({...n,get:()=>Ub(a,t,n)},t)]},Ub=(a,t,n)=>{let e=Y(a.session.backend.glContext.version),r=t[0].dims.slice(),s=`
      void main() {
        vec4 result = ${t.map((i,u)=>`${e.texture2D}(X${u},TexCoords)`).join(" + ")};
        ${e.output} = result;
      }
    `;return{...n,output:{dims:r,type:t[0].type,textureType:0},hasMain:!0,shaderSource:s}},zb=a=>{if(!a||a.length===0)throw new Error("Sum requires inputs.");let t=a[0].dims.length;for(let n=1;n<a.length;n++){if(t!==a[n].dims.length)throw new Error("Input shapes are mismatched.");for(let e=0;e<t;e++)if(a[0].dims[e]!==a[n].dims[e])throw new Error("Input shapes are not matched.")}if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("Invalid input type.");for(let n=1;n<a.length;n++)if(a[0].type!==a[n].type)throw new Error("Input types are not matched.")}});var jc,Wb,Vb,qc=D(()=>{"use strict";pn();oe();jc=(a,t)=>{Vb(t);let n={name:"Tile",inputNames:["A"],inputTypes:[0]};return[a.run({...n,get:()=>Wb(a,t,n)},t)]},Wb=(a,t,n)=>{let e=t[0].dims.slice(),r=new Array(e.length),o=[];for(let u=0;u<e.length;u++)r[u]=e[u]*t[1].numberData[u],o.push(`inputIdx[${u}] = int(mod(float(outputIdx[${u}]), ${e[u]}.));`);let s=r.length,i=`
      float process(int outputIdx[${s}]) {
        int inputIdx[${s}];
        ${o.join(`
`)}
        return _A(inputIdx);
      }
    `;return{...n,output:{dims:r,type:t[0].type,textureType:0},shaderSource:i}},Vb=a=>{if(!a||a.length!==2)throw new Error("Tile requires 2 input.");if(a[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(a[1].dims[0]!==a[0].dims.length)throw new Error("Invalid input shape.");if(Qt.indexOf(a[0].type)===-1)throw new Error("Invalid input type.");if(a[1].type!=="int32"&&a[1].type!=="int16")throw new Error("Invalid repeat type.")}});var Ui,Yc,Xc,Hb,jb,Kc=D(()=>{"use strict";ue();Ui=(a,t,n)=>{Hb(t);let e=z.unsqueezeShape(t[0].dims,n);return[a.reshapeUnpacked(t[0],e)]},Yc=(a,t)=>(jb(t),Ui(a,[t[0]],Array.from(t[1].integerData))),Xc=a=>a.attributes.getInts("axes"),Hb=a=>{if(!a||a.length!==1)throw new Error("Unsqueeze requires 1 input.");if(a[0].type==="string")throw new Error("invalid input tensor types.")},jb=a=>{if(!a||a.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(a[1].type!=="int32")throw new Error("Invalid input type.")}});var Jc,Zc=D(()=>{"use strict";sl();xl();_l();El();ro();df();Tf();wf();If();Ef();Ff();Bf();Gf();no();Vf();nc();cc();dc();Tc();vc();Sc();Bc();Gc();Wc();Hc();qc();io();Oi();Kc();Bi();Jc=[["Abs","","6+",Dl],["Acos","","7+",Ll],["Add","","7+",ul],["And","","7+",ll],["Asin","","7+",Fl],["Atan","","7+",Cl],["AveragePool","","7+",jf,qf],["BatchNormalization","","7+",il,al],["Cast","","6+",vl,wl],["Ceil","","6+",Bl],["Clip","","6-10",wi,kl],["Clip","","11+",$l],["Concat","","4+",Sl,Pl],["Conv","","1+",Di,Li],["ConvTranspose","","1+",cf,pf],["Cos","","7+",Rl],["Div","","7+",fl],["Dropout","","7+",_i],["DepthToSpace","","1+",gf,yf],["Equal","","7+",cl],["Elu","","6+",Nl,Ml],["Exp","","6+",Gl],["Flatten","","1+",xf,vf],["Floor","","6+",Ul],["FusedConv","com.microsoft","1+",Di,Li],["Gather","","1+",_f,Of],["Gemm","","7-10",Fi,Af],["Gemm","","11+",Fi,Pf],["GlobalAveragePool","","1+",Xf,Kf],["GlobalMaxPool","","1+",tc],["Greater","","7+",pl],["Identity","","1+",_i],["ImageScaler","","1+",Df,Lf],["InstanceNormalization","","6+",kf,$f],["LeakyRelu","","6+",zl,Wl],["Less","","7+",dl],["LRN","","1+",Rf,Nf],["Log","","6+",Vl],["MatMul","","1+",nf,of],["MaxPool","","1+",Jf,Zf],["Mul","","7+",hl],["Neg","","6+",Hl],["Not","","1+",jl],["Or","","7+",ml],["Pad","","2-10",Ci,Uf],["Pad","","11+",zf,Wf],["Pow","","7+",bl],["PRelu","","7+",gl],["ReduceLogSum","","1+",lc,er],["ReduceMax","","1+",ac,er],["ReduceMean","","1+",ic,er],["ReduceMin","","1+",sc,er],["ReduceProd","","1+",uc,er],["ReduceSum","","1-12",oc,er],["ReduceSumSquare","","1+",fc,er],["Relu","","6+",ql],["Reshape","","5+",pc],["Resize","","10",Ni,gc],["Resize","","11+",Ni,yc],["Shape","","1+",xc],["Sigmoid","","6+",Yl],["Sin","","7+",Xl],["Slice","","10+",Ic],["Slice","","1-9",wc,_c],["Softmax","","1-12",Dc,Lc],["Softmax","","13+",Cc,Fc],["Split","","2-12",Nc,Mc],["Sqrt","","6+",Kl],["Squeeze","","1-12",Gi,zc],["Squeeze","","13+",Uc],["Sub","","7+",yl],["Sum","","6+",Vc],["Tan","","7+",Jl],["Tanh","","6+",Zl],["Tile","","6+",jc],["Transpose","","1+",gr,mf],["Upsample","","7-8",ki,mc],["Upsample","","9",ki,bc],["Unsqueeze","","1-12",Ui,Xc],["Unsqueeze","","13+",Yc],["Xor","","7+",Tl]]});function ep(a){let t={},n;for(;(n=Qc.exec(a))!==null;){let e=n[3].split(",").map(r=>{let o=r.trim().split(" ");return o&&o.length===2?{type:o[0],name:o[1]}:null}).filter(r=>r!==null);t[n[2]]={params:e,body:n[4]}}for(let e in t){let r=qb.replace("__FUNC__",e),o=new RegExp(r,"gm");for(;(n=o.exec(a))!==null;){let s=n[1],i=n[2],u=n[3].split(","),l=s?`${s} ${i};`:"",f=t[e].body,p="";t[e].params.forEach((x,I)=>{x&&(p+=`${x.type} ${x.name} = ${u[I]};
`)}),f=`${p}
 ${f}`,f=f.replace("return",`${i} = `);let b=`
      ${l}
      {
        ${f}
      }
      `;a=a.replace(n[0],b)}}return a=a.replace(Qc,""),a}var Qc,qb,tp=D(()=>{"use strict";Qc=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,qb="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function Ur(a,t){let n=[],e=[],r=t!=null&&Array.isArray(t)&&t.length===0,o=t==null||r?null:Yb(t,a).sort(),s=0;for(let i=0;i<a.length;++i){if(o!=null){if(o[s]===i&&a[i]!==1)throw new Error(`Can't squeeze axis ${i} since its dim '${a[i]}' is not 1`);(o[s]==null||o[s]>i)&&a[i]===1&&(n.push(a[i]),e.push(i)),o[s]<=i&&s++}a[i]!==1&&(n.push(a[i]),e.push(i))}return{newShape:n,keptDims:e}}function Yb(a,t){let n=t.length;return a=a==null?t.map((e,r)=>r):[].concat(a),$r(a.every(e=>e>=-n&&e<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${a}`),$r(a.every(Xb),()=>`All values in axis param must be integers but got axis ${a}`),a.map(e=>e<0?n+e:e)}function Xb(a){return a%1===0}function Kb(a){if(a.length===0)return 1;let t=a[0];for(let n=1;n<a.length;n++)t*=a[n];return t}function rp(a){let t=Math.ceil(Math.sqrt(a));return[t,Math.ceil(a/t)]}var lo,zi=D(()=>{"use strict";lt();ue();lo=class{constructor(t){this.maxTextureSize=t}computeTextureWH(t,n){let e=this.computeTexture(t,n);return n&&n.isPacked&&(e[0]/=2,e[1]/=2),n&&n.reverseWH?[e[1],e[0]]:e}computeTexture(t,n){let e=n&&n.isPacked;if(t.length===0)return e?[2,2]:[1,1];let r=this.maxTextureSize;if(n&&n.breakAxis!==void 0){let i=n.breakAxis>=t.length?1:t.slice(n.breakAxis).reduce((l,f)=>l*f),u=n.breakAxis<=0?1:t.slice(0,n.breakAxis).reduce((l,f)=>l*f);if(i>r||u>r)fe.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${t}, breakAxis:${n.breakAxis}`);else return[i,u]}let o=t.slice(0);e&&(r=r*2,o=o.map((i,u)=>u>=o.length-2?o[u]%2===0?o[u]:o[u]+1:o[u]),o.length===1&&(o=[2,o[0]])),o.length!==2&&(o=Ur(o).newShape);let s=Kb(o);return o.length<=1&&s<=r?[1,s]:o.length===2&&o[0]<=r&&o[1]<=r?o:o.length===3&&o[0]*o[1]<=r&&o[2]<=r?[o[0]*o[1],o[2]]:o.length===3&&o[0]<=r&&o[1]*o[2]<=r?[o[0],o[1]*o[2]]:o.length===4&&o[0]*o[1]*o[2]<=r&&o[3]<=r?[o[0]*o[1]*o[2],o[3]]:o.length===4&&o[0]<=r&&o[1]*o[2]*o[3]<=r?[o[0],o[1]*o[2]*o[3]]:e?rp(s/4).map(i=>i*2):rp(s)}}});var fo,np=D(()=>{"use strict";ue();zt();Oe();zi();Lt();fo=class extends dt{constructor(n){super(n)}getFunctions(){return{...this.offsetToCoords(),...this.coordsToOffset(),...this.toVec(),...this.valueFrom(),...this.getCommonUtilFuncs(),...this.getInputsSamplingSnippets(),...this.getOutputSamplingSnippet()}}getCustomTypes(){return{}}offsetToCoords(){let n="offsetToCoords";return{offsetToCoords:new U(`
      vec2 ${n}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let n="coordsToOffset";return{coordsToOffset:new U(`
      int ${n}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let n=this.context.outputTextureLayout;return n.isPacked?this.getPackedOutputSamplingSnippet(n):this.getUnpackedOutputSamplingSnippet(n)}getPackedOutputSamplingSnippet(n){let e=n.unpackedShape,r=[n.width,n.height],o={},s="getOutputCoords";switch(e.length){case 0:o[s]=this.getOutputScalarCoords();break;case 1:o[s]=this.getOutputPacked1DCoords(e,r);break;case 2:o[s]=this.getOutputPacked2DCoords(e,r);break;case 3:o[s]=this.getOutputPacked3DCoords(e,r);break;default:o[s]=this.getOutputPackedNDCoords(e,r)}let u=`
      void setOutput(vec4 val) {
        ${Y(this.context.glContext.version).output} = val;
      }
    `,l="floatTextureSetRGBA";return o[l]=new U(u),o}getUnpackedOutputSamplingSnippet(n){let e=n.unpackedShape,r=[n.width,n.height],o={},s="getOutputCoords";switch(e.length){case 0:o[s]=this.getOutputScalarCoords();break;case 1:o[s]=this.getOutputUnpacked1DCoords(e,r);break;case 2:o[s]=this.getOutputUnpacked2DCoords(e,r);break;case 3:o[s]=this.getOutputUnpacked3DCoords(e,r);break;case 4:o[s]=this.getOutputUnpacked4DCoords(e,r);break;case 5:o[s]=this.getOutputUnpacked5DCoords(e,r);break;case 6:o[s]=this.getOutputUnpacked6DCoords(e,r);break;default:throw new Error(`Unsupported output dimensionality: ${e.length}`)}let u=`
        void setOutput(float val) {
          ${Y(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `,l="floatTextureSetR";return o[l]=new U(u),o}getOutputScalarCoords(){return new U(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(n,e){let r=e,o="";return r[0]===1?(o=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${r[1]}.0);
          }
        `,new U(o)):r[1]===1?(o=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${r[0]}.0);
          }
        `,new U(o)):(o=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${r[0]}, ${r[1]}));
          return 2 * (resTexRC.y * ${r[0]} + resTexRC.x);
        }
      `,new U(o))}getOutputPacked2DCoords(n,e){let r="";if(fr.arraysEqual(n,e))return r=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${e[0]}, ${e[1]}));
        }
      `,new U(r);let o=e,s=Math.ceil(n[1]/2);return r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${o[0]}, ${o[1]}));

          int index = resTexRC.y * ${o[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${s}) * 2;
          int c = 2 * (index / ${s});

          return ivec2(r, c);
        }
      `,new U(r)}getOutputPacked3DCoords(n,e){let r=[e[0],e[1]],o=Math.ceil(n[2]/2),s=o*Math.ceil(n[1]/2),i=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${r[0]}, ${r[1]}));
          int index = resTexRC.y * ${r[0]} + resTexRC.x;

          int b = index / ${s};
          index -= b * ${s};

          // reverse r and c order for packed texture
          int r = imod(index, ${o}) * 2;
          int c = 2 * (index / ${o});

          return ivec3(b, r, c);
        }
      `;return new U(i)}getOutputPackedNDCoords(n,e){let r=[e[0],e[1]],o=Math.ceil(n[n.length-1]/2),s=o*Math.ceil(n[n.length-2]/2),i=s,u="",l="b, r, c";for(let p=2;p<n.length-1;p++)i*=n[n.length-p-1],u=`
      int b${p} = index / ${i};
      index -= b${p} * ${i};
    `+u,l=`b${p}, `+l;let f=`
      ivec${n.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.y * ${r[0]} + resTexRC.x;

        ${u}

        int b = index / ${s};
        index -= b * ${s};

        // reverse r and c order for packed texture
        int r = imod(index, ${o}) * 2;
        int c = 2 * (index / ${o});

        return ivec${n.length}(${l});
      }
    `;return new U(f)}getOutputUnpacked1DCoords(n,e){let r=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          return resTexRC.y * ${e[0]} + resTexRC.x;
        }
      `;return new U(r)}getOutputUnpacked2DCoords(n,e){let r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          int r = index / ${n[1]};
          int c = index - r * ${n[1]};
          return ivec2(r, c);
        }
      `;return new U(r)}getOutputUnpacked3DCoords(n,e){let r="",o=n.length,s=null;o<2&&(s=[]),s=new Array(o-1),s[o-2]=n[o-1];for(let l=o-3;l>=0;--l)s[l]=s[l+1]*n[l+1];let i=["r","c","d"],u=s.map((l,f)=>{let p=`int ${i[f]} = index / ${l}`,b=f===s.length-1?`int ${i[f+1]} = index - ${i[f]} * ${l}`:`index -= ${i[f]} * ${l}`;return`${p}; ${b};`}).join("");return r=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec3(r, c, d);
        }
      `,new U(r)}getOutputUnpacked4DCoords(n,e){let r="",o=n.length,s=null;o<2&&(s=[]),s=new Array(o-1),s[o-2]=n[o-1];for(let l=o-3;l>=0;--l)s[l]=s[l+1]*n[l+1];let i=["r","c","d","d2"],u=s.map((l,f)=>{let p=`int ${i[f]} = index / ${l}`,b=f===s.length-1?`int ${i[f+1]} = index - ${i[f]} * ${l}`:`index -= ${i[f]} * ${l}`;return`${p}; ${b};`}).join("");return r=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec4(r, c, d, d2);
        }
      `,new U(r)}getOutputUnpacked5DCoords(n,e){let r="",o=n.length,s=null;o<2&&(s=[]),s=new Array(o-1),s[o-2]=n[o-1];for(let l=o-3;l>=0;--l)s[l]=s[l+1]*n[l+1];let i=["r","c","d","d2","d3"],u=s.map((l,f)=>{let p=`int ${i[f]} = index / ${l}`,b=f===s.length-1?`int ${i[f+1]} = index - ${i[f]} * ${l}`:`index -= ${i[f]} * ${l}`;return`${p}; ${b};`}).join("");return r=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec5(r, c, d, d2, d3);
        }
      `,new U(r)}getOutputUnpacked6DCoords(n,e){let r="",o=n.length,s=null;o<2&&(s=[]),s=new Array(o-1),s[o-2]=n[o-1];for(let l=o-3;l>=0;--l)s[l]=s[l+1]*n[l+1];let i=["r","c","d","d2","d3","d4"],u=s.map((l,f)=>{let p=`int ${i[f]} = index / ${l}`,b=f===s.length-1?`int ${i[f+1]} = index - ${i[f]} * ${l}`:`index -= ${i[f]} * ${l}`;return`${p}; ${b};`}).join("");return r=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${e[0]}, ${e[1]}));
         int index = resTexRC.y * ${e[0]} + resTexRC.x;
         ${u}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new U(r)}getCommonUtilFuncs(){let n={},e="uvFromFlat";n[e]=new U(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),e="packedUVfrom1D",n[e]=new U(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom2D",n[e]=new U(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom3D",n[e]=new U(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="sampleTexture";let r=Y(this.context.glContext.version);return n[e]=new U(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${r.texture2D}(textureSampler, uv).r;
        }`),n}getInputsSamplingSnippets(){let n={},e=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((r,o)=>{let s=this.context.inputTextureLayouts[o],i=Xn(r);s.isPacked?n[i]=this.getPackedSamplerFromInput(i,r,s):n[i]=this.getUnpackedSamplerFromInput(i,r,s);let u=Wu(r);s.unpackedShape.length<=e.unpackedShape.length&&(s.isPacked?n[u]=this.getPackedSamplerAtOutputCoords(u,s,e,r):n[u]=this.getUnpackedSamplerAtOutputCoords(u,s,e,r))}),n}getPackedSamplerAtOutputCoords(n,e,r,o){let s=e.unpackedShape,i=r.unpackedShape,l=Xn(o),f=s.length,p=i.length,b=Je.getBroadcastDims(s,i),x=Ze(p),I=p-f,v,S=It();f===0?v="":p<2&&b.length>=1?v="coords = 0;":v=b.map(V=>`coords.${S[V+I]} = 0;`).join(`
`);let L="";p<2&&f>0?L="coords":L=s.map((V,we)=>`coords.${S[we+I]}`).join(", ");let B="return outputValue;",Q=z.size(s)===1,he=z.size(i)===1;if(f===1&&!Q&&!he)B=`
        return vec4(outputValue.xy, outputValue.xy);
      `;else if(Q&&!he)p===1?B=`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:B=`
          return vec4(outputValue.x);
        `;else if(b.length){let V=f-2,we=f-1;b.indexOf(V)>-1&&b.indexOf(we)>-1?B="return vec4(outputValue.x);":b.indexOf(V)>-1?B="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":b.indexOf(we)>-1&&(B="return vec4(outputValue.xx, outputValue.zz);")}let Ie=`
        int lastDim = coords.${S[p-1]};
        coords.${S[p-1]} = coords.${S[p-2]};
        coords.${S[p-2]} = lastDim;
      `,xe=`
      vec4 ${n}() {
        ${x} coords = getOutputCoords();
        ${Ie}
        ${v}
        vec4 outputValue = ${l}(${L});
        ${B}
      }
    `;return new U(xe,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(n,e,r,o){let s=[r.width,r.height],i=[e.width,e.height],u=e.unpackedShape.length,l=r.unpackedShape.length,f=e.unpackedShape,p=r.unpackedShape,b=Xn(o);if(u===l&&fr.arraysEqual(i,s)){let Q=`
          float ${n}() {
            return sampleTexture(${o}, TexCoords);
          }
        `;return new U(Q,["coordinates.sampleTexture"])}let x=Ze(l),I=Je.getBroadcastDims(f,p),v=l-u,S,L=It();u===0?S="":l<2&&I.length>=1?S="coords = 0;":S=I.map(Q=>`coords.${L[Q+v]} = 0;`).join(`
`);let B="";l<2&&u>0?B="coords":B=e.unpackedShape.map((Q,N)=>`coords.${L[N+v]}`).join(", ");let M=`
        float ${n}() {
          ${x} coords = getOutputCoords();
          ${S}
          return ${b}(${B});
        }
      `;return new U(M,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(n,e,r){switch(r.unpackedShape.length){case 0:return this.getPackedSamplerScalar(n,e);case 1:return this.getPackedSampler1D(n,e,r);case 2:return this.getPackedSampler2D(n,e,r);case 3:return this.getPackedSampler3D(n,e,r);default:return this.getPackedSamplerND(n,e,r)}}getUnpackedSamplerFromInput(n,e,r){let o=r.unpackedShape;switch(o.length){case 0:return this.getUnpackedSamplerScalar(n,e,r);case 1:return this.getUnpackedSampler1D(n,e,r);case 2:return this.getUnpackedSampler2D(n,e,r);case 3:return this.getUnpackedSampler3D(n,e,r);case 4:return this.getUnpackedSampler4D(n,e,r);case 5:return this.getUnpackedSampler5D(n,e,r);case 6:return this.getUnpackedSampler6D(n,e,r);default:throw new Error(`Unsupported dimension ${o.length}-D`)}}getPackedSamplerScalar(n,e){let r=Y(this.context.glContext.version),o=`
          vec4 ${n}() {
            return ${r.texture2D}(${e}, halfCR);
          }
        `;return new U(o)}getPackedSampler1D(n,e,r){let o=[r.width,r.height],s=[o[1],o[0]],i=Y(this.context.glContext.version),l=`vec4 ${n}(int index) {
      vec2 uv = packedUVfrom1D(
      ${s[0]}, ${s[1]}, index);
      return ${i.texture2D}(${e}, uv);
    }`;return new U(l,["coordinates.packedUVfrom1D"])}getPackedSampler2D(n,e,r){let o=r.unpackedShape,s=[r.width,r.height],i=Y(this.context.glContext.version),u=s[0],l=s[1];if(s!=null&&fr.arraysEqual(o,s)){let I=`vec4 ${n}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${u}.0);
        return ${i.texture2D}(${e}, uv);
      }`;return new U(I)}let f=s,p=Math.ceil(o[1]/2),x=`vec4 ${n}(int row, int col) {
      vec2 uv = packedUVfrom2D(${f[1]}, ${f[0]}, ${p}, row, col);
      return ${i.texture2D}(${e}, uv);
    }`;return new U(x,["coordinates.packedUVfrom2D"])}getPackedSampler3D(n,e,r){let o=r.unpackedShape,s=[r.width,r.height],i=[s[0],s[1]],u=Y(this.context.glContext.version);if(o[0]===1){let v=o.slice(1),S=[1,2],L=Br(o,v),B=["b","row","col"],M=JSON.parse(JSON.stringify(r));M.unpackedShape=L;let Q=this.getPackedSamplerFromInput(n,e,M),he=`${Q.routineBody}
      vec4 ${n}(int b, int row, int col) {
        return ${n}(${Rr(B,S)});
      } `;return new U(he,Q.dependencies)}let l=i[0],f=i[1],p=Math.ceil(o[2]/2),b=p*Math.ceil(o[1]/2),I=`vec4 ${n}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${f}, ${l}, ${b}, ${p}, b, row, col);
      return ${u.texture2D}(${e}, uv);}`;return new U(I,["coordinates.packedUVfrom3D"])}getPackedSamplerND(n,e,r){let o=r.unpackedShape,s=o.length,i=[r.width,r.height],u=Y(this.context.glContext.version),l=[i[0],i[1]],f=l[1],p=l[0],b=Math.ceil(o[s-1]/2),x=b*Math.ceil(o[s-2]/2),I="int b, int row, int col",v=`b * ${x} + (row / 2) * ${b} + (col / 2)`;for(let B=2;B<s-1;B++)I=`int b${B}, `+I,x*=o[s-B-1],v=`b${B} * ${x} + `+v;let L=`vec4 ${n}(${I}) {
      int index = ${v};
      int texR = index / ${p};
      int texC = index - texR * ${p};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}, ${f});
      return ${u.texture2D}(${e}, uv);
    }`;return new U(L)}getUnpackedSamplerScalar(n,e,r){let[o,s]=[r.width,r.height];if(o===1&&s===1){let u=`
          float ${n}() {
            return sampleTexture(${e}, halfCR);
          }
        `;return new U(u,["coordinates.sampleTexture"])}let i=`
        float ${n}() {
          int offset_${e} = coordsToOffset(TexCoords, ${o}, ${s});
          vec2 uv = uvFromFlat(${o}, ${s}, offset_${e});
          return sampleTexture(${e}, uv);
        }
      `;return new U(i,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(n,e,r){let o=r.width,s=r.height;if(s===1&&o===1){let u=`
        float ${n}(int index) {
          return sampleTexture(${e}, halfCR);
        }
      `;return new U(u,["coordinates.sampleTexture"])}if(s===1){let u=`
          float ${n}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${o}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new U(u,["coordinates.sampleTexture"])}if(o===1){let u=`
          float ${n}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${s}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new U(u,["coordinates.sampleTexture"])}let i=`
        float ${n}(int index) {
          vec2 uv = uvFromFlat(${o}, ${s}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new U(i,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(n,e,r){let o=r.unpackedShape,s=[r.height,r.width];if(s!=null&&fr.arraysEqual(o,s)){let x=s[1],I=s[0],v=`
          float ${n}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${x}.0, ${I}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new U(v,["coordinates.sampleTexture"])}let{newShape:i,keptDims:u}=Ur(o),l=i;if(l.length<o.length){let x=Br(o,l),I=JSON.parse(JSON.stringify(r));I.unpackedShape=x;let v=["col","row"],S=`
          ${this.getUnpackedSamplerFromInput(n,e,I).routineBody}
          float ${n}(int row, int col) {
            return ${n}(${Rr(v,u)});
          }
        `;return new U(S,["coordinates.sampleTexture"])}let f=s[1],p=s[0];if(p===1){let x=`
          float ${n}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${f}, ${p});
            float index = dot(vec3(row, col, offset_${e}), vec3(${o[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${f}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new U(x,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(f===1){let x=`
          float ${n}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${f}, ${p});
            float index = dot(vec3(row, col, offset_${e}), vec3(${o[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${p}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new U(x,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let b=`
        float ${n}(int row, int col) {
          int index = col * ${o[1]} + row;
          vec2 uv = uvFromFlat(${f}, ${p}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new U(b,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(n,e,r){let o=r.unpackedShape,s=o[1]*o[2],i=o[2],{newShape:u,keptDims:l}=Ur(o),f=u;if(f.length<o.length){let I=Br(o,f),v=["batch","col","row"],S=JSON.parse(JSON.stringify(r));S.unpackedShape=I;let L=this.getUnpackedSamplerFromInput(n,e,S),B=l.reverse(),M=`
          ${L.routineBody}
          float ${n}(int batch, int row, int col) {
            return ${n}(${Rr(v,B)});
          }
        `;return new U(M,L.dependencies)}let p=r.width,b=r.height,x=`
          float ${n}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${s} + col * ${i} + row;
            vec2 uv = uvFromFlat(${p}, ${b}, index);
            return sampleTexture(${e}, uv);
          }
      `;return new U(x,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(n,e,r){let o=r.unpackedShape,s=o[3],i=o[2]*s,u=o[1]*i,l=r.width,f=r.height,p=`
        float ${n}(int row, int col, int depth, int depth2) {
          int index = row * ${u} + col * ${i} +
              depth2 * ${s} + depth;
          vec2 uv = uvFromFlat(${l}, ${f}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new U(p,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(n,e,r){let o=r.unpackedShape,s=o[4],i=o[3]*s,u=o[2]*i,l=o[1]*u,{newShape:f,keptDims:p}=Ur(o);if(f.length<o.length){let v=Br(o,f),S=["row","col","depth","depth2","depth3"],L=JSON.parse(JSON.stringify(r));L.unpackedShape=v;let B=`
          ${this.getUnpackedSamplerFromInput(n,e,L).routineBody}
          float ${n}(int row, int col, int depth, int depth2, int depth3) {
            return ${n}(${Rr(S,p)});
          }
        `;return new U(B,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let b=r.width,x=r.height,I=`
        float ${n}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${l} + col * ${u} + depth * ${i} +
          depth3 * ${s} + depth2;
          vec2 uv = uvFromFlat(${b}, ${x}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new U(I,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(n,e,r){let o=r.unpackedShape,s=o[5],i=o[4]*s,u=o[3]*i,l=o[2]*u,f=o[1]*l,{newShape:p,keptDims:b}=Ur(o);if(p.length<o.length){let S=Br(o,p),L=["row","col","depth","depth2","depth3","depth4"],B=JSON.parse(JSON.stringify(r));B.unpackedShape=S;let M=`
            ${this.getUnpackedSamplerFromInput(n,e,B).routineBody}
            float ${n}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${n}(${Rr(L,b)});
            }
          `;return new U(M,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let x=r.width,I=r.height,v=`
          float ${n}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${f} + col * ${l} + depth * ${u} +
            depth2 * ${i} + depth3 * ${s} + depth4;
            vec2 uv = uvFromFlat(${x}, ${I}, index);
            return sampleTexture(${e}, uv);
          }
        `;return new U(v,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let n=this.context.outputTextureLayout,e=n.shape.length,r=n.strides,o=n.width,s=n.height,i=[];for(let l=0;l<e-1;++l)i.push(`
        c[${l}] = offset / ${r[l]};`),i.push(`
        offset -= c[${l}] * ${r[l]};`);i.push(`
        c[${e-1}] = offset;`);let u=`
      void toVec(vec2 texCoords, out int c[${e}]) {
        int offset = coordsToOffset(texCoords, ${o}, ${s});
        ${i.join("")}
      }
      void toVec(int offset, out int c[${e}]) {
        ${i.join("")}
      }
    `;return{toVec:new U(u,["coordinates.coordsToOffset"])}}valueFrom(){let n={};return this.context.programInfo.inputNames.forEach((e,r)=>{let o=this.context.inputTextureLayouts[r],i=(o.unpackedShape.length>0?o.unpackedShape:o.shape).length,u=`_${e}`;n[u]=new U(this.getValueFromSingle(e,i,o.width,o.height,!1),[`shapeUtils.indicesToOffset${u}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),u=u+"_T",n[u]=new U(this.getValueFromSingle(e,i,o.width,o.height,!0),[`shapeUtils.indicesToOffset${u}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),n}getValueFromSingle(n,e,r,o,s){let i=`_${n}`;s&&(i=i+"_T");let u=Y(this.context.glContext.version);return`
        float ${i}(int m[${e}]) {
          int offset = indicesToOffset${i}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${o});
          float value = getColorAsFloat(${u.texture2D}(${n}, coords));
          return value;
        }
        `}getPackedValueFrom(n,e,r,o,s){let i=`_${n}_Pack`;s&&(i=i+"_T");let u=Y(this.context.glContext.version);return`
        vec4 ${i}(int m[${e}]) {
          int offset = indicesToOffset_${n}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${o});
          return ${u.texture2D}(${n}, coords);
        }
        `}}});var co,op=D(()=>{"use strict";zt();co=class a extends dt{constructor(t){super(t)}getFunctions(){return{...this.encodeFloat32(),...this.decodeFloat32()}}getCustomTypes(){return{}}encodeFloat32(){return{encode:new U(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new U(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let t=a.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new U(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${t}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let t=a.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new U(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${t}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let t=new ArrayBuffer(4),n=new Uint32Array(t),e=new Uint8Array(t);if(n[0]=3735928559,e[0]===239)return!0;if(e[0]===222)return!1;throw new Error("unknown endianness")}}});var po,ip=D(()=>{"use strict";zt();Oe();po=class extends dt{constructor(t){super(t)}getFunctions(){return{...this.setFragColor(),...this.getColorAsFloat()}}getCustomTypes(){return{}}setFragColor(){let t=Y(this.context.glContext.version);return{setFragColor:new U(`
        void setFragColor(float value) {
            ${t.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new U(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}});var ho,ap=D(()=>{"use strict";zt();ho=class a extends dt{constructor(t){super(t)}getFunctions(){return{...this.bcastIndex(),...this.bcastMatmulIndex(),...this.offsetToIndices(),...this.indicesToOffset(),...this.incrementIndices()}}getCustomTypes(){return{}}bcastIndex(){let t=this.context.outputTextureLayout.shape.length,n={};return this.context.programInfo.inputNames.forEach((e,r)=>{let o=this.context.inputTextureLayouts[r].unpackedShape;if(o.length<=t){let s=o.length,i=t-s,u=`bcastIndices_${e}`,l="";for(let p=0;p<s;++p)l+=`
          realIndices[${p}] = int( mod(float(bcastedIndices[${i+p}]), ${o[p]}.0) );
          `;let f=`
        void ${u} (int bcastedIndices[${t}], out int realIndices[${s}]) {
          ${l}
        }
        `;n[u]=new U(f)}}),n}bcastMatmulIndex(){let t=this.context.outputTextureLayout.shape.length,n={};return this.context.programInfo.inputNames.forEach((e,r)=>{let o=this.context.inputTextureLayouts[r].shape;if(!(o.length<2||o.length>t)){let s=o.length,i=t-s,u=`bcastMatmulIndices_${e}`,l="";for(let p=0;p<s-2;++p)l+=`
          realIndices[${p}] = int( mod(float(bcastedIndices[${i+p}]), ${o[p]}.0) );
          `;let f=`
        void ${u}(int bcastedIndices[${t}], out int realIndices[${s}]) {
          ${l}
          realIndices[${s-1}] = bcastedIndices[${t-1}];
          realIndices[${s-2}] = bcastedIndices[${t-2}];
        }
        `;n[u]=new U(f)}}),n}indicesToOffset(){let t={};return this.context.programInfo.inputNames.forEach((n,e)=>{let r=this.context.inputTextureLayouts[e].shape,o=this.context.inputTextureLayouts[e].strides,s=r.length,i=`indicesToOffset_${n}`;t[i]=new U(a.indexToOffsetSingle(i,s,o)),i=`indicesToOffset_${n}_T`,t[i]=new U(a.indexToOffsetSingle(i,s,o.slice().reverse()))}),t}static indexToOffsetSingle(t,n,e){let r="";for(let o=n-1;o>=0;--o)r+=`
        offset += indices[${o}] * ${e[o]};
        `;return`
      int ${t}(int indices[${n}]) {
        int offset = 0;
        ${r}
        return offset;
      }
      `}offsetToIndices(){let t={};return this.context.programInfo.inputNames.forEach((n,e)=>{let r=this.context.inputTextureLayouts[e].shape,o=this.context.inputTextureLayouts[e].strides,s=r.length,i=`offsetToIndices_${n}`;t[i]=new U(a.offsetToIndicesSingle(i,s,o)),i=`offsetToIndices_${n}_T`,t[i]=new U(a.offsetToIndicesSingle(i,s,o.slice().reverse()))}),t}static offsetToIndicesSingle(t,n,e){let r=[];for(let o=0;o<n-1;++o)r.push(`
      indices[${o}] = offset / ${e[o]};`),r.push(`
        offset -= indices[${o}] * ${e[o]};`);return r.push(`
      indices[${n-1}] = offset;`),`
      void ${t}(int offset, out int indices[${n}]) {
        ${r.join("")}
      }
      `}incrementIndices(){let t={};return this.context.programInfo.inputNames.forEach((n,e)=>{let r=this.context.inputTextureLayouts[e].shape,o=r.length,s=`incrementIndices_${n}`,i="";for(let l=0;l<o;++l)i+=`
        shape[${l}] = ${r[l]};`;let u=`
        void ${s}(int axis, out int indices[${o}]) {
          int shape[${o}];
          ${i};
          for(int i = ${o} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;t[s]=new U(u)}),t}}});var mo,sp=D(()=>{"use strict";zt();mo=class extends dt{constructor(t){super(t)}getCustomTypes(){return{}}getFunctions(){return{...this.binaryVecFunctions(),...this.copyVec(),...this.setVecItem(),...this.getVecItem()}}binaryVecFunctions(){let n=this.context.outputTextureLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},r={};for(let o in e){let s=`${o}Vec`,i="";for(let l=0;l<n;++l)i+=`
          dest[${l}] ${e[o]} src[${l}];
          `;let u=`
        void ${s}(int src[${n}], out int dest[${n}]) {
          ${i}
        }
        `;r[s]=new U(u)}return r}copyVec(){let n=this.context.outputTextureLayout.shape.length,e="";for(let o=0;o<n;++o)e+=`
        dest[${o}] = src[${o}];
        `;let r=`
      void copyVec(int src[${n}], out int dest[${n}]) {
        ${e}
      }
      `;return{copyVec:new U(r)}}setVecItem(){let n=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index =${n} + index;
        if (index == 0)
            m[0] = value;
        `;for(let o=1;o<n-1;++o)e+=`
        else if (index == ${o})
            m[${o}] = value;
            `;e+=`
        else
            m[${n-1}] = value;
        `;let r=`
      void setVecItem(out int m[${n}], int index, int value) {
        ${e}
      }
        `;return{setVecItem:new U(r)}}getVecItem(){let n=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index = ${n} + index;
        if (index == 0)
            return m[0];
      `;for(let o=1;o<n-1;++o)e+=`
        else if (index == ${o})
            return m[${o}];
      `;e+=`
        else
            return m[${n-1}];
        `;let r=`
      int getVecItem(int m[${n}], int index) {
        ${e}
      }
    `;return{getVecItem:new U(r)}}}});var Wi,up=D(()=>{"use strict";np();op();ip();ap();sp();Wi={encoding:co,fragcolor:po,vec:mo,shapeUtils:ho,coordinates:fo}});var bo,lp=D(()=>{"use strict";zt();tp();up();Oe();bo=class{constructor(t,n,e,r){this.libs={};this.glslLibRoutineDependencyGraph={};this.context=new Qn(t,n,e,r),Object.keys(Wi).forEach(s=>{let i=new Wi[s](this.context);this.libs[s]=i});let o=this.glslLibRoutineDependencyGraph;for(let s in this.libs){let u=this.libs[s].getFunctions();for(let l in u){let f=s+"."+l,p;o[f]?(p=o[f],p.routineBody=u[l].routineBody):(p=new cn(f,u[l].routineBody),o[f]=p);let b=u[l].dependencies;if(b)for(let x=0;x<b.length;++x)if(o[b[x]])p.addDependency(o[b[x]]);else{let I=new cn(b[x]);o[b[x]]=I,p.addDependency(I)}}}}preprocess(){let t=this.context.programInfo,n=t.shaderSource;return this.context.programInfo.hasMain||(n=`${n}
      ${zu(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),n=ep(n),`${Uu(this.context.glContext.version)}
    ${this.getUniforms(t.inputNames,t.variables)}
    ${this.getImports(n)}
    ${n}`}getImports(t){let n=this.selectGlslLibRoutinesToBeIncluded(t);if(n.length===0)return"";let e="";for(let r=0;r<n.length;++r)if(n[r].routineBody)e+=n[r].routineBody+`
`;else throw new Error(`Missing body for the Glsl Library routine: ${n[r].name}`);return e}selectGlslLibRoutinesToBeIncluded(t){let n=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(e=>{let r=e.split(".")[1];t.indexOf(r)!==-1&&n.push(this.glslLibRoutineDependencyGraph[e])}),eo.returnOrderedNodes(n)}getUniforms(t,n){let e=[];if(t)for(let r of t)e.push(`uniform sampler2D ${r};`);if(n)for(let r of n)e.push(`uniform ${r.type} ${r.name}${r.arrayLength?`[${r.arrayLength}]`:""};`);return e.join(`
`)}}});var go,fp=D(()=>{"use strict";xt();lt();lp();Oe();go=class{constructor(t,n,e){this.profiler=t;this.glContext=n;this.textureLayoutStrategy=e;this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,n){this.repo.set(t,n)}run(t,n,e){this.profiler.event("op",`ProgramManager.run ${t.programInfo.name??"unknown kernel"}`,()=>{let r=this.glContext.gl,o=t.program;r.useProgram(o);try{this.bindOutput(e),this.attributesBound||this.bindAttributes(t.attribLocations),this.bindUniforms(t.uniformLocations,t.programInfo.variables??[],n)}catch(s){throw fe.error("ProgramManager",t.programInfo.shaderSource),s}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(t=>this.glContext.deleteProgram(t.program))}build(t,n,e){return this.profiler.event("backend","ProgramManager.build",()=>{let r=new bo(this.glContext,t,n,e),o=r.preprocess(),s=this.compile(o);return{programInfo:t,program:s,uniformLocations:this.getUniformLocations(s,r.context.programInfo.inputNames,r.context.programInfo.variables),attribLocations:this.getAttribLocations(s)}})}compile(t){if(!this.vertexShader){fe.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let r=Gu(this.glContext.version);this.vertexShader=this.glContext.compileShader(r,this.glContext.gl.VERTEX_SHADER)}te.debug&&fe.verbose("ProrgramManager",`FragShader:
${t}
`);let n=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),e=this.glContext.createProgram(this.vertexShader,n);return this.glContext.deleteShader(n),e}bindOutput(t){let n=t.width,e=t.height;fe.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${n}/${e}, shape=${t.shape}, type=${t.tensor.type}`),this.glContext.attachFramebuffer(t.texture,n,e)}bindAttributes(t){let n=t.position,e=t.textureCoord;this.glContext.setVertexAttributes(n,e),this.attributesBound=!0}bindUniforms(t,n,e){let r=this.glContext.gl,o=0;for(let{name:s,type:i,location:u,arrayLength:l}of t){let f=n.find(p=>p.name===s)?.data;if(i!=="sampler2D"&&!f)throw new Error(`variable '${s}' does not have data defined in program info`);switch(i){case"sampler2D":this.bindTexture(e[o],u,o),o++;break;case"float":l?r.uniform1fv(u,f):r.uniform1f(u,f);break;case"int":l?r.uniform1iv(u,f):r.uniform1i(u,f);break;default:throw new Error(`Uniform not implemented: ${i}`)}}}bindTexture(t,n,e){this.glContext.bindTextureToUniform(t.texture,e,n)}getAttribLocations(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}}getUniformLocations(t,n,e){let r=[];if(n)for(let o of n)r.push({name:o,type:"sampler2D",location:this.getUniformLocation(t,o)});if(e)for(let o of e)r.push({...o,location:this.getUniformLocation(t,o.name)});return r}getUniformLocation(t,n){let r=this.glContext.gl.getUniformLocation(t,n);if(r===null)throw new Error(`Uniform ${n} not found.`);return r}getAttribLocation(t,n){return this.glContext.gl.getAttribLocation(t,n)}}});var yo,cp=D(()=>{"use strict";lt();ln();yo=class{constructor(t,n,e,r){this.glContext=t;this.layoutStrategy=n;this.profiler=e;this.config=r;this.pendingRead=new Map;r.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(t,n,e,r){let o=this.toEncoderType(t),s=this.glContext.getEncoder(o,n.channels||1,r);if(n.isPacked&&r===1)throw new Error("not implemented");let i=n.width,u=n.height,l,f;if(this.config.reuseTextures){l=`${i}x${u}_${s.format}_${s.internalFormat}_${s.textureType}`,f=this.inUseTextures.get(l),f||(f=[],this.inUseTextures.set(l,f));let b=this.idleTextures.get(l);if(b&&b.length>0){let x=b.pop();return f.push(x),r===1&&this.glContext.updateTexture(x,i,u,s,this.toTextureData(t,e)),x}}fe.verbose("TextureManager",`Creating new texture of size ${n.width}x${n.height}`);let p=this.glContext.allocateTexture(i,u,s,this.toTextureData(t,e));return this.config.reuseTextures&&(f.push(p),this.textureLookup.set(p,l)),p}readTexture(t,n,e){return e||(e=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let r=t.shape.reduce((s,i)=>s*i)*e,o=this.glContext.readTexture(t.texture,t.width,t.height,r,this.toEncoderType(n),e);return this.toTensorData(n,o)})}async readTextureAsync(t,n,e){let r=t.tensor.dataId;if(e||(e=1),this.pendingRead.has(r)){let o=this.pendingRead.get(r);return new Promise(s=>o?.push(s))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(r,[]);let o=t.shape.reduce((l,f)=>l*f)*e;await this.glContext.createAndWaitForFence();let s=this.glContext.readTexture(t.texture,t.width,t.height,o,this.toEncoderType(n),e),i=this.toTensorData(n,s),u=this.pendingRead.get(r);return this.pendingRead.delete(r),u?.forEach(l=>l(i)),i})}readUint8TextureAsFloat(t){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let n=t.shape.reduce((r,o)=>r*o),e=this.glContext.readTexture(t.texture,t.width,t.height,n*4,"byte",4);return new Float32Array(e.buffer,e.byteOffset,n)})}releaseTexture(t,n){let e;if(this.config.reuseTextures&&(e=this.textureLookup.get(t.texture),e)){n&&this.textureLookup.delete(e);let r=this.inUseTextures.get(e);if(r){let o=r.indexOf(t.texture);if(o!==-1){r.splice(o,1);let s=this.idleTextures.get(e);s||(s=[],this.idleTextures.set(e,s)),s.push(t.texture)}}}(!e||n)&&(fe.verbose("TextureManager",`Deleting texture of size ${t.width}x${t.height}`),this.glContext.deleteTexture(t.texture))}toTensorData(t,n){switch(t){case"int16":return n instanceof Int16Array?n:Int16Array.from(n);case"int32":return n instanceof Int32Array?n:Int32Array.from(n);case"int8":return n instanceof Int8Array?n:Int8Array.from(n);case"uint16":return n instanceof Uint16Array?n:Uint16Array.from(n);case"uint32":return n instanceof Uint32Array?n:Uint32Array.from(n);case"uint8":case"bool":return n instanceof Uint8Array?n:Uint8Array.from(n);case"float32":return n instanceof Float32Array?n:Float32Array.from(n);case"float64":return n instanceof Float64Array?n:Float64Array.from(n);default:throw new Error(`TensorData type ${t} is not supported`)}}toTextureData(t,n){if(n)return n instanceof Float32Array?n:new Float32Array(n)}toEncoderType(t){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}});var To,pp=D(()=>{"use strict";lt();Ss();nl();Zc();fp();zi();cp();To=class{constructor(t,n){this.backend=t;this.context=n;this.layoutStrategy=new lo(t.glContext.maxTextureSize),this.programManager=new go(this.context.profiler,t.glContext,this.layoutStrategy),this.textureManager=new yo(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:t.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=t.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Zn(this)}onGraphInitialized(t){let n=t.getValues().filter(e=>e.from===-1&&e.tensor).map(e=>e.tensor.dataId);this.initializers=new Set(n)}isInitializer(t){return this.initializers?this.initializers.has(t):!1}addInitializer(t){this.initializers.add(t)}getTextureData(t,n){return n?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,n,e=!1){fe.verbose("WebGLSessionHandler","Storing Texture data in cache"),e?this.packedTextureDataCache.set(t,n):this.unpackedTextureDataCache.set(t,n)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.unpackedTextureDataCache=new Map}resolve(t,n,e){let r=Is(t,n,Jc);return{impl:r.opImpl,context:r.opInit?r.opInit(t,e):t}}}});function Jb(a){let t=0;for(;t<a.length&&a[t]();++t);return t-1}var hn,dp=D(()=>{"use strict";xt();ln();ln();Lt();hn=class{constructor(t,n){this.frameBufferBound=!1;this.itemsToPoll=[];this.gl=t,this.version=n,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(t,n,e,r){let o=this.gl,s=o.createTexture();o.bindTexture(o.TEXTURE_2D,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);let i=r?e.encode(r,t*n):null;return o.texImage2D(o.TEXTURE_2D,0,e.internalFormat,t,n,0,e.format,e.textureType,i),this.checkError(),s}updateTexture(t,n,e,r,o){let s=this.gl;s.bindTexture(s.TEXTURE_2D,t);let i=r.encode(o,n*e);s.texSubImage2D(s.TEXTURE_2D,0,0,0,n,e,r.format,r.textureType,i),this.checkError()}attachFramebuffer(t,n,e){let r=this.gl;r.bindTexture(r.TEXTURE_2D,t),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),this.checkError(),r.viewport(0,0,n,e),r.scissor(0,0,n,e)}readTexture(t,n,e,r,o,s){let i=this.gl;s||(s=1),this.frameBufferBound||this.attachFramebuffer(t,n,e);let u=this.getEncoder(o,s),l=u.allocate(n*e);return i.bindTexture(i.TEXTURE_2D,t),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0),i.readPixels(0,0,n,e,i.RGBA,u.textureType,l),this.checkError(),u.decode(l,r)}isFramebufferReady(){return!0}getActiveTexture(){let t=this.gl;return`TEXTURE${t.getParameter(this.gl.ACTIVE_TEXTURE)-t.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(t,n){let e=this.gl;e.vertexAttribPointer(t,3,e.FLOAT,!1,20,0),e.enableVertexAttribArray(t),n!==-1&&(e.vertexAttribPointer(n,2,e.FLOAT,!1,20,12),e.enableVertexAttribArray(n)),this.checkError()}createProgram(t,n){let e=this.gl,r=e.createProgram();return e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),r}compileShader(t,n){let e=this.gl,r=e.createShader(n);if(!r)throw new Error(`createShader() returned null with type ${n}`);if(e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${e.getShaderInfoLog(r)}
Shader source:
${t}`);return r}deleteShader(t){this.gl.deleteShader(t)}bindTextureToUniform(t,n,e){let r=this.gl;r.activeTexture(r.TEXTURE0+n),this.checkError(),r.bindTexture(r.TEXTURE_2D,t),this.checkError(),r.uniform1i(e,n),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(te.debug){let t=this.gl,n=t.getError(),e="";switch(n){case t.NO_ERROR:return;case t.INVALID_ENUM:e="INVALID_ENUM";break;case t.INVALID_VALUE:e="INVALID_VALUE";break;case t.INVALID_OPERATION:e="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:e="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:e="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:e="CONTEXT_LOST_WEBGL";break;default:e=`Unknown WebGL Error: ${n.toString(16)}`}throw new Error(e)}}deleteTexture(t){this.gl.deleteTexture(t)}deleteProgram(t){this.gl.deleteProgram(t)}getEncoder(t,n,e=0){if(this.version===2)return new Kn(this.gl,n);switch(t){case"float":return e===1||this.isRenderFloat32Supported?new un(this.gl,n):new un(this.gl,n,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Jn(this.gl,n);default:throw new Error(`Invalid dataType: ${t}`)}}clearActiveTextures(){let t=this.gl;for(let n=0;n<this.maxTextureImageUnits;++n)t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let t=this.gl,n=t.createBuffer();if(!n)throw new Error("createBuffer() returned null");let e=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),this.checkError(),n}createFramebuffer(){let t=this.gl.createFramebuffer();if(!t)throw new Error("createFramebuffer returned null");return t}queryVitalParameters(){let t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let t=this.gl,n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);let e=this.version===2?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,e,1,1,0,t.RGBA,t.FLOAT,null);let r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);let o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),o}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let t=this.gl,n,e,r,o,s;try{n=t.createTexture(),e=t.createFramebuffer(),t.bindTexture(t.TEXTURE_2D,n);let i=this.version===2?t.RGBA32F:t.RGBA;return t.texImage2D(t.TEXTURE_2D,0,i,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.enable(t.BLEND),r=t.createShader(t.VERTEX_SHADER),!r||(t.shaderSource(r,"void main(){}"),t.compileShader(r),o=t.createShader(t.FRAGMENT_SHADER),!o)||(t.shaderSource(o,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),t.compileShader(o),s=t.createProgram(),!s)?!1:(t.attachShader(s,r),t.attachShader(s,o),t.linkProgram(s),t.useProgram(s),t.drawArrays(t.POINTS,0,1),t.getError()===t.NO_ERROR)}finally{t.disable(t.BLEND),s&&t.deleteProgram(s),r&&t.deleteShader(r),o&&t.deleteShader(o),e&&(t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(e)),n&&(t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(n))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,n=this.disjointTimerQueryWebgl2Extension,e=t.createQuery();return t.beginQuery(n.TIME_ELAPSED_EXT,e),e}else throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,n=this.disjointTimerQueryWebgl2Extension;t.endQuery(n.TIME_ELAPSED_EXT);return}else throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(t){let n=!1,e=!1;if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let r=this.gl,o=this.disjointTimerQueryWebgl2Extension;n=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE),e=r.getParameter(o.GPU_DISJOINT_EXT)}else throw new Error("WebGL1 profiling currently not supported");return n&&!e}getTimerResult(t){let n=0;if(this.version===2){let e=this.gl;n=e.getQueryParameter(t,e.QUERY_RESULT),e.deleteQuery(t)}else throw new Error("WebGL1 profiling currently not supported");return n/1e6}async waitForQueryAndGetTime(t){return await hi(()=>this.isTimerResultAvailable(t)),this.getTimerResult(t)}async createAndWaitForFence(){let t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let n,e=t,r=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),r===null?n=()=>!0:n=()=>{let o=e.clientWaitSync(r,0,0);return o===e.ALREADY_SIGNALED||o===e.CONDITION_SATISFIED},{query:r,isFencePassed:n}}async pollFence(t){return new Promise(n=>{this.addItemToPoll(()=>t.isFencePassed(),()=>n())})}pollItems(){let t=Jb(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=t;++n){let{resolveFn:e}=this.itemsToPoll[n];e()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}async addItemToPoll(t,n){this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),!(this.itemsToPoll.length>1)&&await hi(()=>(this.pollItems(),this.itemsToPoll.length===0))}}});function Vi(a){let t;if((!a||a==="webgl2")&&"webgl2"in zr?t=zr.webgl2:(!a||a==="webgl")&&"webgl"in zr&&(t=zr.webgl),!t)try{let e=Qb();t=hp(e,a)}catch{let r=Zb();t=hp(r,a)}a=a||t.version===1?"webgl":"webgl2";let n=t.gl;return zr[a]=t,n.isContextLost()?(delete zr[a],Vi(a)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),t)}function hp(a,t){let n={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1},e,r=n;if((!t||t==="webgl2")&&(e=a.getContext("webgl2",r),e))try{return new hn(e,2)}catch(o){fe.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${o}`)}if((!t||t==="webgl")&&(e=a.getContext("webgl",r)||a.getContext("experimental-webgl",r),e))try{return new hn(e,1)}catch(o){fe.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${o}`)}throw new Error("WebGL is not supported")}function Zb(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let a=document.createElement("canvas");return a.width=1,a.height=1,a}function Qb(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var zr,mp=D(()=>{"use strict";lt();dp();zr={}});var xo,bp=D(()=>{"use strict";xt();lt();pp();mp();xo=class{get contextId(){return te.webgl.contextId}set contextId(t){te.webgl.contextId=t}get matmulMaxBatchSize(){return te.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(t){te.webgl.matmulMaxBatchSize=t}get textureCacheMode(){return te.webgl.textureCacheMode}set textureCacheMode(t){te.webgl.textureCacheMode=t}get pack(){return te.webgl.pack}set pack(t){te.webgl.pack=t}get async(){return te.webgl.async}set async(t){te.webgl.async=t}initialize(){try{return this.glContext=Vi(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),fe.setWithEnv(te),te.webgl.context||Object.defineProperty(te.webgl,"context",{value:this.glContext.gl}),fe.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(t){return fe.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${t}`),!1}}createSessionHandler(t){return new To(this,t)}dispose(){this.glContext.dispose()}}});async function Hi(a){if(a){let t=typeof a=="string"?[a]:a;for(let n of t){let e=gp.get(n);if(e)return e;let r=await tg(n);if(r)return r}}else return Hi(["webgl"]);throw new Error("no available backend to use")}async function tg(a){let t=eg;if(typeof t[a]<"u"&&rg(t[a])){let n=t[a],e=n.initialize();if(typeof e=="object"&&"then"in e&&(e=await e),e)return gp.set(a,n),n}}function rg(a){let t=a;return"initialize"in t&&typeof t.initialize=="function"&&"createSessionHandler"in t&&typeof t.createSessionHandler=="function"&&"dispose"in t&&typeof t.dispose=="function"}var gp,eg,yp=D(()=>{"use strict";bp();gp=new Map,eg={webgl:new xo}});var ji,vo,Tp=D(()=>{"use strict";lt();ji=class{constructor(t,n){this.op=t;this.node=n}},vo=class{constructor(t,n,e){this.graph=t;this.profiler=e;this.initialize(n)}initialize(t){this.profiler.event("session","ExecutionPlan.initialize",()=>{let n=this.graph.getNodes();if(n.length!==t.length)throw new Error("The size of nodes and OPs do not match.");this._ops=t.map((e,r)=>new ji(e,n[r])),this.reset(),this._starter=[],this._ops.forEach((e,r)=>{let o=!0;for(let s of e.node.inputs)if(!this._values[s]&&this.graph.getInputIndices().indexOf(s)===-1){o=!1;break}o&&this._starter.push(r)})})}reset(){this._values=this.graph.getValues().map(t=>t.tensor)}async execute(t,n){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();let e=t.createInferenceHandler(),r=this.graph.getInputIndices();if(n.length!==r.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${n.length} expected: ${r.length}`);n.forEach((f,p)=>{let b=r[p];this._values[b]=f});let o=this._starter.slice(0),s=this.graph.getValues(),i=this.graph.getNodes(),u=0;for(;u<o.length;){let f=o[u++],p=this._ops[f],b=p.node.inputs.map(S=>this._values[S]);if(b.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${p.node}`);let x=b;fe.verbose("ExecPlan",`Runing op:${p.node.name} (${x.map((S,L)=>`'${p.node.inputs[L]}': ${S.type}[${S.dims.join(",")}]`).join(", ")})`);let I=await this.profiler.event("node",p.node.name,async()=>p.op.impl(e,x,p.op.context));if(I.length!==p.node.outputs.length)throw new Error("the size of output does not match model definition.");I.forEach((S,L)=>{let B=p.node.outputs[L];if(this._values[B])throw new Error(`output [${B}] already has value: op:${p.node.name}`);this._values[B]=S});let v=new Set;I.forEach((S,L)=>{let B=p.node.outputs[L];for(let M of s[B].to){let Q=i[M],N=!0;for(let he of Q.inputs)if(!this._values[he]){N=!1;break}N&&v.add(M)}}),o.push(...v)}let l=[];for(let f=0;f<this.graph.getOutputIndices().length;f++){let p=this.graph.getOutputIndices()[f],b=this._values[p];if(b===void 0)throw new Error(`required output [${p}] does not have value`);p===0?await b.getData():b.data,l.push(b)}return fe.verbose("ExecPlan","disposing of inferenceHandler"),e.dispose(),l})}}});var ne,bt,mn,xp=D(()=>{"use strict";tn();ne=Dr(kr());hr();ue();bt=j.experimental.fbs,mn=class a{constructor(t){if(this._attributes=new Map,t!=null){for(let n of t)n instanceof ne.onnx.AttributeProto?this._attributes.set(n.name,[a.getValue(n),a.getType(n)]):n instanceof bt.Attribute&&this._attributes.set(n.name(),[a.getValue(n),a.getType(n)]);if(this._attributes.size<t.length)throw new Error("duplicated attribute names")}}set(t,n,e){this._attributes.set(t,[e,n])}delete(t){this._attributes.delete(t)}getFloat(t,n){return this.get(t,"float",n)}getInt(t,n){return this.get(t,"int",n)}getString(t,n){return this.get(t,"string",n)}getTensor(t,n){return this.get(t,"tensor",n)}getFloats(t,n){return this.get(t,"floats",n)}getInts(t,n){return this.get(t,"ints",n)}getStrings(t,n){return this.get(t,"strings",n)}getTensors(t,n){return this.get(t,"tensors",n)}get(t,n,e){let r=this._attributes.get(t);if(r===void 0){if(e!==void 0)return e;throw new Error(`required attribute not found: ${t}`)}if(r[1]!==n)throw new Error(`type mismatch: expected ${n} but got ${r[1]}`);return r[0]}static getType(t){let n=t instanceof ne.onnx.AttributeProto?t.type:t.type();switch(n){case ne.onnx.AttributeProto.AttributeType.FLOAT:return"float";case ne.onnx.AttributeProto.AttributeType.INT:return"int";case ne.onnx.AttributeProto.AttributeType.STRING:return"string";case ne.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case ne.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case ne.onnx.AttributeProto.AttributeType.INTS:return"ints";case ne.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case ne.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${ne.onnx.AttributeProto.AttributeType[n]}`)}}static getValue(t){let n=t instanceof ne.onnx.AttributeProto?t.type:t.type();if(n===ne.onnx.AttributeProto.AttributeType.GRAPH||n===ne.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let e=this.getValueNoCheck(t);if(n===ne.onnx.AttributeProto.AttributeType.INT&&nt.isLong(e))return nt.longToNumber(e);if(n===ne.onnx.AttributeProto.AttributeType.INTS){let r=e,o=new Array(r.length);for(let s=0;s<r.length;s++){let i=r[s];o[s]=nt.longToNumber(i)}return o}if(n===ne.onnx.AttributeProto.AttributeType.TENSOR)return t instanceof ne.onnx.AttributeProto?Re.fromProto(e):Re.fromOrtTensor(e);if(n===ne.onnx.AttributeProto.AttributeType.TENSORS){if(t instanceof ne.onnx.AttributeProto)return e.map(o=>Re.fromProto(o));if(t instanceof bt.Attribute)return e.map(o=>Re.fromOrtTensor(o))}return n===ne.onnx.AttributeProto.AttributeType.STRING&&t instanceof ne.onnx.AttributeProto?sn(e):n===ne.onnx.AttributeProto.AttributeType.STRINGS&&t instanceof ne.onnx.AttributeProto?e.map(sn):e}static getValueNoCheck(t){return t instanceof ne.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(t):this.getValueNoCheckFromOrtFormat(t)}static getValueNoCheckFromOnnxFormat(t){switch(t.type){case ne.onnx.AttributeProto.AttributeType.FLOAT:return t.f;case ne.onnx.AttributeProto.AttributeType.INT:return t.i;case ne.onnx.AttributeProto.AttributeType.STRING:return t.s;case ne.onnx.AttributeProto.AttributeType.TENSOR:return t.t;case ne.onnx.AttributeProto.AttributeType.GRAPH:return t.g;case ne.onnx.AttributeProto.AttributeType.FLOATS:return t.floats;case ne.onnx.AttributeProto.AttributeType.INTS:return t.ints;case ne.onnx.AttributeProto.AttributeType.STRINGS:return t.strings;case ne.onnx.AttributeProto.AttributeType.TENSORS:return t.tensors;case ne.onnx.AttributeProto.AttributeType.GRAPHS:return t.graphs;default:throw new Error(`unsupported attribute type: ${ne.onnx.AttributeProto.AttributeType[t.type]}`)}}static getValueNoCheckFromOrtFormat(t){switch(t.type()){case bt.AttributeType.FLOAT:return t.f();case bt.AttributeType.INT:return t.i();case bt.AttributeType.STRING:return t.s();case bt.AttributeType.TENSOR:return t.t();case bt.AttributeType.GRAPH:return t.g();case bt.AttributeType.FLOATS:return t.floatsArray();case bt.AttributeType.INTS:{let n=[];for(let e=0;e<t.intsLength();e++)n.push(t.ints(e));return n}case bt.AttributeType.STRINGS:{let n=[];for(let e=0;e<t.stringsLength();e++)n.push(t.strings(e));return n}case bt.AttributeType.TENSORS:{let n=[];for(let e=0;e<t.tensorsLength();e++)n.push(t.tensors(e));return n}default:throw new Error(`unsupported attribute type: ${bt.AttributeType[t.type()]}`)}}}});var Yi,wo,Xi,kt,_o,qi,vp=D(()=>{"use strict";xp();tn();Yi=Dr(kr());hr();ue();wo=j.experimental.fbs,Xi={from:(a,t)=>new qi(a,t)},kt=class{constructor(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=je.tensorValueTypeFromProto(t.type.tensorType))}get from(){return this._from}get to(){return this._to}},_o=class{constructor(t,n){t instanceof Yi.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new mn(t.attribute)):t instanceof wo.Node&&(this.name=n??t.name(),this.opType=t.opType(),this.attributes=new mn(je.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0}},qi=class{constructor(t,n){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(n),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(t){if(t instanceof Yi.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else if(t instanceof wo.Graph)this.buildGraphFromOrtFormat(t);else throw new TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(t){let n=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let e=new Map;if(!t.input)throw new Error("missing information in graph: input");let r=[];for(let o of t.input){if(n.has(o.name))throw new Error(`duplicated input name: ${o.name}`);let s=this._allData.push(new kt(o))-1;n.set(o.name,s),r.push(o.name)}if(!t.initializer)throw new Error("missing information in graph: initializer");for(let o of t.initializer){let s=n.get(o.name);if(s===void 0){let i=new kt;i.type={shape:{dims:je.tensorDimsFromProto(o.dims)},tensorType:je.tensorDataTypeFromProto(o.dataType)},s=this._allData.push(i)-1,n.set(o.name,s)}this._allData[s]._from=-1,this._allData[s].tensor=Re.fromProto(o)}for(let o=0;o<this._allData.length;o++)this._allData[o].tensor||(this._allInputIndices.push(o),this._allInputNames.push(r[o]));if(!t.output)throw new Error("missing information in graph: output");for(let o of t.output){if(n.has(o.name))throw new Error(`duplicated output name: ${o.name}`);let s=this._allData.push(new kt(o))-1;n.set(o.name,s),this._allOutputIndices.push(s),this._allOutputNames.push(o.name)}if(!t.node)throw new Error("missing information in graph: node");for(let o of t.node){if(!o.name)for(let i=0;;i++){let u=`unnamed_${o.opType}_${i}`;if(!e.has(u)){o.name=u;break}}if(e.has(o.name))throw new Error(`duplicated node name: ${o.name}`);let s=this._nodes.push(new _o(o))-1;e.set(o.name,s)}for(let o=0;o<this._nodes.length;o++){let s=this._nodes[o],i=t.node[o];if(!i.output)throw new Error(`missing output for node: ${i.name}`);for(let u of i.output){let l=n.get(u);if(typeof l>"u"&&(l=this._allData.push(new kt)-1,n.set(u,l)),s.outputs.push(l),this._allData[l]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${l}`);if(this._allData[l]._from=o,i.opType==="Constant"){if(!i.attribute||i.attribute.length!==1||!i.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!i.output||i.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");s.outputs.pop(),s.executeNode=!1,this._allData[l]._from=-1,this._allData[l].tensor=Re.fromProto(i.attribute[0].t)}}}for(let o=0;o<this._nodes.length;o++){let s=this._nodes[o],i=t.node[o];if(!i.input)throw new Error(`missing input for node: ${i.name}`);for(let u of i.input){let l=n.get(u);if(typeof l>"u"){if(u===""&&(i.input.length===3||i.input.length===4)&&i.opType==="Resize")continue;throw new Error(`unrecognized input '${u}' for node: ${i.name}`)}s.inputs.push(l),this._allData[l]._to.push(o)}}return!0}buildGraphFromOrtFormat(t){let n=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let e=new Map,r=[];for(let o=0;o<t.inputsLength();o++){let s=t.inputs(o);if(n.has(s))throw new Error(`duplicated input name: ${s}`);for(let i=0;i<t.nodeArgsLength();i++)if(t.nodeArgs(i)?.name()===s){let u=new kt;if(t.nodeArgs(i)?.type()?.valueType()!==wo.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let f=t.nodeArgs(i).type().value(new wo.TensorTypeAndShape),p=je.tensorDataTypeFromProto(f.elemType()),b=f.shape(),x=[];for(let v=0;v<b.dimLength();v++)x.push(nt.longToNumber(b.dim(v).value().dimValue()));u.type={shape:{dims:x},tensorType:p};let I=this._allData.push(u)-1;n.set(s,I),r.push(s)}}for(let o=0;o<t.initializersLength();o++){let s=t.initializers(o),i=n.get(s.name());if(i===void 0){let u=new kt,l=je.tensorDimsFromORTFormat(s),f=je.tensorDataTypeFromProto(s.dataType());u.type={shape:{dims:l},tensorType:f},i=this._allData.push(u)-1,n.set(s.name(),i)}this._allData[i]._from=-1,this._allData[i].tensor=Re.fromOrtTensor(s)}for(let o=0;o<this._allData.length;o++)this._allData[o].tensor||(this._allInputIndices.push(o),this._allInputNames.push(r[o]));for(let o=0;o<t.outputsLength();o++){let s=t.outputs(o);if(n.has(s))throw new Error(`duplicated output name: ${s}`);let i=this._allData.push(new kt)-1;n.set(s,i),this._allOutputIndices.push(i),this._allOutputNames.push(s)}if(!t.nodes)throw new Error("missing information in graph: node");for(let o=0;o<t.nodesLength();o++){let s=t.nodes(o),i=s.name();if(!i)for(let l=0;i=`unnamed_${s.opType()}_${l}`,!!e.has(i);l++);if(e.has(i))throw new Error(`duplicated node name: ${i}`);let u=this._nodes.push(new _o(s,i))-1;e.set(i,u)}for(let o=0;o<this._nodes.length;o++){let s=this._nodes[o],i=t.nodes(o);if(i==null)throw new Error(`No node exists at index ${o}`);if(i?.outputsLength()===0)throw new Error(`missing output for node: ${i.name}`);for(let u=0;u<i?.outputsLength();u++){let l=i?.outputs(u),f=n.get(l);if(typeof f>"u"&&(f=this._allData.push(new kt)-1,n.set(l,f)),s.outputs.push(f),this._allData[f]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${f}`);if(this._allData[f]._from=o,i.opType()==="Constant"){if(i.attributesLength()!==1||!i.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(i.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");s.outputs.pop(),s.executeNode=!1,this._allData[f]._from=-1,this._allData[f].tensor=Re.fromOrtTensor(i.attributes(0).t())}}}for(let o=0;o<this._nodes.length;o++){let s=this._nodes[o],i=t.nodes(o);if(i.inputsLength()===0)throw new Error(`missing input for node: ${i.name}`);for(let u=0;u<i.inputsLength();u++){let l=i.inputs(u),f=n.get(l);if(typeof f>"u")throw new Error(`unrecognized input '${l}' for node: ${i.name()}`);s.inputs.push(f),this._allData[f]._to.push(o)}}}checkIsAcyclic(){let t=new Set;this._allInputIndices.forEach(r=>{this._allData[r]._to.forEach(s=>{t.add(s)})});let n=Array.from(t),e=new Array(this._nodes.length).fill("white");for(;n.length>0;){let r=n.pop();e[r]==="gray"?e[r]="black":(n.push(r),e[r]="gray",this._nodes[r].outputs.forEach(o=>{let s=this._allData[o];if(typeof s.tensor<"u")throw new Error("node outputs should not be initialized");if(s._from!==r)throw new Error("from property of the Value object doesn't match index of Node being processed");s._to.forEach(i=>{if(e[i]==="gray")throw new Error("model graph is cyclic");e[i]==="white"&&n.push(i)})}))}}transformGraph(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let t=0,n=new Array(this._nodes.length,0),e=0;for(let r=0;r<this._nodes.length;r++)n[r]=e,this._nodes[r].executeNode?(e!==r&&(this._nodes[e]=this._nodes[r]),e++):this._nodes[r].outputs.forEach(o=>{this._allData[o]._from=-2});this._nodes.splice(e,this._nodes.length-e);for(let r=0;r<this._allData.length;r++){let o=this._allData[r];o._from!==void 0&&o._from!==-1&&o._from!==-2&&(o._from=n[o._from]);for(let s=0;s<o._to.length;s++)if(o._to[s]>=0)o._to[s]=n[o._to[s]];else throw new Error("Trying to update a removed node")}t=0;for(let r=0;r<this._allData.length;r++){if(this._allData[r].from===-2&&this._allOutputIndices.indexOf(r+t)===-1){t++,this._allData.splice(r,1),r--;continue}if(t>0){let o=-1;this._allData[r].from!==void 0&&this._allData[r].from!==-1?(o=this._nodes[this._allData[r].from].outputs.indexOf(r+t),o!==-1&&(this._nodes[this._allData[r].from].outputs[o]=r)):(o=this._allInputIndices.indexOf(r+t),o!==-1&&(this._allInputIndices[o]=r)),this._allData[r].to.forEach(s=>{o=this._nodes[s].inputs.indexOf(r+t),o!==-1&&(this._nodes[s].inputs[o]=r)}),this._allData[r].to.length===0&&(o=this._allOutputIndices.indexOf(r+t),o!==-1&&(this._allOutputIndices[o]=r))}}}deleteNode(t){let n=this._nodes[t];if(n.outputs.length>1){for(let i=1;i<n.outputs.length;i++)if(this._allData[n.outputs[i]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}n.executeNode=!1;let e=n.inputs[0],r=n.outputs[0],o=this._allData[r].to;for(let i=0;i<n.inputs.length;i++){let u=this._allData[n.inputs[i]].to.indexOf(t);if(u===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[n.inputs[i]].to.splice(u,1)}this._allData[r]._to=[];let s=this._allOutputIndices.indexOf(r);if(s!==-1&&(this._allOutputIndices[s]=e),o&&o.length>0)for(let i of o){let u=this._nodes[i].inputs.indexOf(r);if(u===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[i].inputs[u]=e,this._allData[e].to.push(i)}}removeAllDropoutNodes(){let t=0;for(let n of this._nodes){if(n.opType==="Dropout"){if(n.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(n.outputs.length!==1&&n.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(n.outputs.length===2&&this._allData[n.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(t)}t++}}removeAllIdentityNodes(){let t=0;for(let n of this._nodes)n.opType==="Identity"&&this.deleteNode(t),t++}isActivation(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let t of this._nodes)if(t.opType==="Conv"){let n=this._allData[t.outputs[0]]._to;if(n.length===1&&this.isActivation(this._nodes[n[0]])){let e=this._nodes[n[0]];if(e.opType==="Clip")if(e.inputs.length===1)try{t.attributes.set("activation_params","floats",[e.attributes.getFloat("min"),e.attributes.getFloat("max")])}catch{t.attributes.set("activation_params","floats",[pr,dr])}else if(e.inputs.length>=3&&this._allData[e.inputs[1]].tensor!==void 0&&this._allData[e.inputs[2]].tensor!==void 0)t.attributes.set("activation_params","floats",[this._allData[e.inputs[1]].tensor.floatData[0],this._allData[e.inputs[2]].tensor.floatData[0]]);else continue;t.attributes.set("activation","string",e.opType),this.deleteNode(n[0])}}}}});var wp,ng,Oo,_p=D(()=>{"use strict";Wn();vp();tn();wp=Dr(kr());ue();ng=j.experimental.fbs,Oo=class{constructor(){}load(t,n,e){if(!e)try{this.loadFromOnnxFormat(t,n);return}catch(r){if(e!==void 0)throw r}this.loadFromOrtFormat(t,n)}loadFromOnnxFormat(t,n){let e=wp.onnx.ModelProto.decode(t);if(nt.longToNumber(e.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=e.opsetImport.map(o=>({domain:o.domain,version:nt.longToNumber(o.version)})),this._graph=Xi.from(e.graph,n)}loadFromOrtFormat(t,n){let e=new O.ByteBuffer(t),r=ng.InferenceSession.getRootAsInferenceSession(e).model();if(nt.longToNumber(r.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let s=0;s<r.opsetImportLength();s++){let i=r.opsetImport(s);this._opsets.push({domain:i?.domain(),version:nt.longToNumber(i.version())})}this._graph=Xi.from(r.graph(),n)}get graph(){return this._graph}get opsets(){return this._opsets}}});var Io,Op=D(()=>{"use strict";yp();Tp();lt();_p();Io=class{constructor(t={}){this._initialized=!1,this.backendHint=t.backendHint,this.profiler=Un.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(t,n,e){await this.profiler.event("session","Session.loadModel",async()=>{let r=await Hi(this.backendHint);if(this.sessionHandler=r.createSessionHandler(this.context),this._model=new Oo,typeof t=="string"){let o=t.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let s=await(void 0)(t);this.initialize(s,o)}else{let i=await(await fetch(t)).arrayBuffer();this.initialize(new Uint8Array(i),o)}}else if(ArrayBuffer.isView(t))this.initialize(t);else{let o=new Uint8Array(t,n||0,e||t.byteLength);this.initialize(o)}})}initialize(t,n){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let e=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(t,e,n),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new vo(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(t){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{let n=this.normalizeAndValidateInputs(t),e=await this._executionPlan.execute(this.sessionHandler,n);return this.createOutput(e)})}normalizeAndValidateInputs(t){let n=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==n.length)throw new Error(`incorrect input array length: expected ${n.length} but got ${t.length}`)}else{if(t.size!==n.length)throw new Error(`incorrect input map size: expected ${n.length} but got ${t.size}`);let e=new Array(t.size),r=0;for(let o=0;o<n.length;++o){let s=t.get(n[o]);if(!s)throw new Error(`missing input tensor for: '${name}'`);e[r++]=s}t=e}if(!this.context.graphInputTypes||this.context.graphInputTypes.length===0||!this.context.graphInputDims||this.context.graphInputDims.length===0){let e=this._model.graph.getInputIndices(),r=this._model.graph.getValues(),o=new Array(e.length);for(let s=0;s<e.length;++s){let i=r[e[s]];o[s]=i.type.shape.dims,this.context.graphInputTypes.push(i.type.tensorType),this.context.graphInputDims.push(t[s].dims)}this.validateInputTensorDims(o,t,!0)}else this.validateInputTensorDims(this.context.graphInputDims,t,!1);return this.validateInputTensorTypes(this.context.graphInputTypes,t),t}validateInputTensorTypes(t,n){for(let e=0;e<n.length;e++){let r=t[e],o=n[e].type;if(r!==o)throw new Error(`input tensor[${e}] check failed: expected type '${r}' but got ${o}`)}}validateInputTensorDims(t,n,e){for(let r=0;r<n.length;r++){let o=t[r],s=n[r].dims;if(!this.compareTensorDims(o,s,e))throw new Error(`input tensor[${r}] check failed: expected shape '[${o.join(",")}]' but got [${s.join(",")}]`)}}compareTensorDims(t,n,e){if(t.length!==n.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==n[r]&&(!e||t[r]!==0))return!1;return!0}createOutput(t){let n=this._model.graph.getOutputNames();if(t.length!==n.length)throw new Error("expected number of outputs do not match number of generated outputs");let e=new Map;for(let r=0;r<n.length;++r)e.set(n[r],t[r]);return e}initializeOps(t){let n=t.getNodes();this._ops=new Array(n.length);for(let e=0;e<n.length;e++)this._ops[e]=this.sessionHandler.resolve(n[e],this._model.opsets,t)}}});var So,Ip=D(()=>{"use strict";xt();hr();So=class{constructor(t){this.session=t;this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(t,n,e){let r=new Map;for(let i in t)if(Object.hasOwnProperty.call(t,i)){let u=t[i];r.set(i,new Re(u.dims,u.type,void 0,void 0,u.data))}let o=await this.session.run(r),s={};return o.forEach((i,u)=>{s[u]=new Ge(i.type,i.data,i.dims)}),s}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}});var Sp={};Er(Sp,{onnxjsBackend:()=>ig});var Ki,ig,Ap=D(()=>{"use strict";Op();Ip();Ki=class{async init(){}async createInferenceSessionHandler(t,n){let e=new Io(n);return typeof t=="string"?await e.loadModel(t):await e.loadModel(t),new So(e)}},ig=new Ki});var Ji={};Er(Ji,{readFile:()=>ag});var ag,Zi=D(()=>{ag=void 0});var Qi={};Er(Qi,{join:()=>sg});var sg,ea=D(()=>{sg=void 0});var Dp=be((Ep,ta)=>{"use strict";var Pp=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(a=a||__filename),function(t={}){var n=t,e,r;n.ready=new Promise((m,T)=>{e=m,r=T});var o=Object.assign({},n),s="./this.program",i=typeof window=="object",u=typeof importScripts=="function",l=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",f="",p,b,x;if(l){var I=(Zi(),ir(Ji)),v=(ea(),ir(Qi));f=u?v.dirname(f)+"/":__dirname+"/",p=(m,T)=>(m=m.startsWith("file://")?new URL(m):v.normalize(m),I.readFileSync(m,T?void 0:"utf8")),x=m=>(m=p(m,!0),m.buffer||(m=new Uint8Array(m)),m),b=(m,T,w,A=!0)=>{m=m.startsWith("file://")?new URL(m):v.normalize(m),I.readFile(m,A?void 0:"utf8",($,W)=>{$?w($):T(A?W.buffer:W)})},!n.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),n.inspect=()=>"[Emscripten Module object]"}else(i||u)&&(u?f=self.location.href:typeof document<"u"&&document.currentScript&&(f=document.currentScript.src),a&&(f=a),f.indexOf("blob:")!==0?f=f.substr(0,f.replace(/[?#].*/,"").lastIndexOf("/")+1):f="",p=m=>{var T=new XMLHttpRequest;return T.open("GET",m,!1),T.send(null),T.responseText},u&&(x=m=>{var T=new XMLHttpRequest;return T.open("GET",m,!1),T.responseType="arraybuffer",T.send(null),new Uint8Array(T.response)}),b=(m,T,w)=>{var A=new XMLHttpRequest;A.open("GET",m,!0),A.responseType="arraybuffer",A.onload=()=>{A.status==200||A.status==0&&A.response?T(A.response):w()},A.onerror=w,A.send(null)});var S=n.print||console.log.bind(console),L=n.printErr||console.error.bind(console);Object.assign(n,o),o=null,n.thisProgram&&(s=n.thisProgram);var B;n.wasmBinary&&(B=n.wasmBinary);var M=n.noExitRuntime||!0;typeof WebAssembly!="object"&&qe("no native wasm support detected");var Q,N,he=!1,Ie,xe,V,we;function H(){var m=Q.buffer;n.HEAP8=Ie=new Int8Array(m),n.HEAP16=new Int16Array(m),n.HEAP32=V=new Int32Array(m),n.HEAPU8=xe=new Uint8Array(m),n.HEAPU16=new Uint16Array(m),n.HEAPU32=we=new Uint32Array(m),n.HEAPF32=new Float32Array(m),n.HEAPF64=new Float64Array(m)}var Ce,gt=[],J=[],X=[];function rr(){var m=n.preRun.shift();gt.unshift(m)}var ke=0,Xe=null,me=null;function qe(m){throw n.onAbort&&n.onAbort(m),m="Aborted("+m+")",L(m),he=!0,m=new WebAssembly.RuntimeError(m+". Build with -sASSERTIONS for more info."),r(m),m}function Tr(m){return m.startsWith("data:application/octet-stream;base64,")}var Qe;if(Qe="ort-wasm.wasm",!Tr(Qe)){var Vt=Qe;Qe=n.locateFile?n.locateFile(Vt,f):f+Vt}function it(m){if(m==Qe&&B)return new Uint8Array(B);if(x)return x(m);throw"both async and sync fetching of the wasm failed"}function Ht(m){if(!B&&(i||u)){if(typeof fetch=="function"&&!m.startsWith("file://"))return fetch(m,{credentials:"same-origin"}).then(T=>{if(!T.ok)throw"failed to load wasm binary file at '"+m+"'";return T.arrayBuffer()}).catch(()=>it(m));if(b)return new Promise((T,w)=>{b(m,A=>T(new Uint8Array(A)),w)})}return Promise.resolve().then(()=>it(m))}function $e(m,T,w){return Ht(m).then(A=>WebAssembly.instantiate(A,T)).then(A=>A).then(w,A=>{L("failed to asynchronously prepare wasm: "+A),qe(A)})}function yt(m,T){var w=Qe;return B||typeof WebAssembly.instantiateStreaming!="function"||Tr(w)||w.startsWith("file://")||l||typeof fetch!="function"?$e(w,m,T):fetch(w,{credentials:"same-origin"}).then(A=>WebAssembly.instantiateStreaming(A,m).then(T,function($){return L("wasm streaming compile failed: "+$),L("falling back to ArrayBuffer instantiation"),$e(w,m,T)}))}var at,Be=m=>{for(;0<m.length;)m.shift()(n)};function Ne(m){this.xa=m-24,this.Ga=function(T){we[this.xa+4>>2>>>0]=T},this.Fa=function(T){we[this.xa+8>>2>>>0]=T},this.za=function(T,w){this.Ea(),this.Ga(T),this.Fa(w)},this.Ea=function(){we[this.xa+16>>2>>>0]=0}}var Tt=0,st=0,jt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,qt=(m,T,w)=>{T>>>=0;var A=T+w;for(w=T;m[w]&&!(w>=A);)++w;if(16<w-T&&m.buffer&&jt)return jt.decode(m.subarray(T,w));for(A="";T<w;){var $=m[T++];if($&128){var W=m[T++]&63;if(($&224)==192)A+=String.fromCharCode(($&31)<<6|W);else{var K=m[T++]&63;$=($&240)==224?($&15)<<12|W<<6|K:($&7)<<18|W<<12|K<<6|m[T++]&63,65536>$?A+=String.fromCharCode($):($-=65536,A+=String.fromCharCode(55296|$>>10,56320|$&1023))}}else A+=String.fromCharCode($)}return A},xr=(m,T)=>(m>>>=0)?qt(xe,m,T):"",vr=m=>{for(var T=0,w=0;w<m.length;++w){var A=m.charCodeAt(w);127>=A?T++:2047>=A?T+=2:55296<=A&&57343>=A?(T+=4,++w):T+=3}return T},$t=(m,T,w,A)=>{if(w>>>=0,!(0<A))return 0;var $=w;A=w+A-1;for(var W=0;W<m.length;++W){var K=m.charCodeAt(W);if(55296<=K&&57343>=K){var pe=m.charCodeAt(++W);K=65536+((K&1023)<<10)|pe&1023}if(127>=K){if(w>=A)break;T[w++>>>0]=K}else{if(2047>=K){if(w+1>=A)break;T[w++>>>0]=192|K>>6}else{if(65535>=K){if(w+2>=A)break;T[w++>>>0]=224|K>>12}else{if(w+3>=A)break;T[w++>>>0]=240|K>>18,T[w++>>>0]=128|K>>12&63}T[w++>>>0]=128|K>>6&63}T[w++>>>0]=128|K&63}}return T[w>>>0]=0,w-$},Bt=m=>m%4===0&&(m%100!==0||m%400===0),Rt=[0,31,60,91,121,152,182,213,244,274,305,335],Vr=[0,31,59,90,120,151,181,212,243,273,304,334],yn=m=>{var T=vr(m)+1,w=nr(T);return w&&$t(m,xe,w,T),w},wr={},Tn=()=>{if(!St){var m={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"},T;for(T in wr)wr[T]===void 0?delete m[T]:m[T]=wr[T];var w=[];for(T in m)w.push(`${T}=${m[T]}`);St=w}return St},St,_r=[null,[],[]],Or=[31,29,31,30,31,30,31,31,30,31,30,31],Hr=[31,28,31,30,31,30,31,31,30,31,30,31];function xn(m){var T=Array(vr(m)+1);return $t(m,T,0,T.length),T}function jr(m,T,w,A){function $(P,ce,ve){for(P=typeof P=="number"?P.toString():P||"";P.length<ce;)P=ve[0]+P;return P}function W(P,ce){return $(P,ce,"0")}function K(P,ce){function ve(_n){return 0>_n?-1:0<_n?1:0}var Pt;return(Pt=ve(P.getFullYear()-ce.getFullYear()))===0&&(Pt=ve(P.getMonth()-ce.getMonth()))===0&&(Pt=ve(P.getDate()-ce.getDate())),Pt}function pe(P){switch(P.getDay()){case 0:return new Date(P.getFullYear()-1,11,29);case 1:return P;case 2:return new Date(P.getFullYear(),0,3);case 3:return new Date(P.getFullYear(),0,2);case 4:return new Date(P.getFullYear(),0,1);case 5:return new Date(P.getFullYear()-1,11,31);case 6:return new Date(P.getFullYear()-1,11,30)}}function We(P){var ce=P.ta;for(P=new Date(new Date(P.ua+1900,0,1).getTime());0<ce;){var ve=P.getMonth(),Pt=(Bt(P.getFullYear())?Or:Hr)[ve];if(ce>Pt-P.getDate())ce-=Pt-P.getDate()+1,P.setDate(1),11>ve?P.setMonth(ve+1):(P.setMonth(0),P.setFullYear(P.getFullYear()+1));else{P.setDate(P.getDate()+ce);break}}return ve=new Date(P.getFullYear()+1,0,4),ce=pe(new Date(P.getFullYear(),0,4)),ve=pe(ve),0>=K(ce,P)?0>=K(ve,P)?P.getFullYear()+1:P.getFullYear():P.getFullYear()-1}m>>>=0,T>>>=0,w>>>=0,A>>>=0;var Ve=V[A+40>>2>>>0];A={Ca:V[A>>2>>>0],Ba:V[A+4>>2>>>0],va:V[A+8>>2>>>0],ya:V[A+12>>2>>>0],wa:V[A+16>>2>>>0],ua:V[A+20>>2>>>0],sa:V[A+24>>2>>>0],ta:V[A+28>>2>>>0],Ha:V[A+32>>2>>>0],Aa:V[A+36>>2>>>0],Da:Ve?xr(Ve):""},w=xr(w),Ve={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var He in Ve)w=w.replace(new RegExp(He,"g"),Ve[He]);var Jr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Zr="January February March April May June July August September October November December".split(" ");Ve={"%a":P=>Jr[P.sa].substring(0,3),"%A":P=>Jr[P.sa],"%b":P=>Zr[P.wa].substring(0,3),"%B":P=>Zr[P.wa],"%C":P=>W((P.ua+1900)/100|0,2),"%d":P=>W(P.ya,2),"%e":P=>$(P.ya,2," "),"%g":P=>We(P).toString().substring(2),"%G":P=>We(P),"%H":P=>W(P.va,2),"%I":P=>(P=P.va,P==0?P=12:12<P&&(P-=12),W(P,2)),"%j":P=>{for(var ce=0,ve=0;ve<=P.wa-1;ce+=(Bt(P.ua+1900)?Or:Hr)[ve++]);return W(P.ya+ce,3)},"%m":P=>W(P.wa+1,2),"%M":P=>W(P.Ba,2),"%n":()=>`
`,"%p":P=>0<=P.va&&12>P.va?"AM":"PM","%S":P=>W(P.Ca,2),"%t":()=>"	","%u":P=>P.sa||7,"%U":P=>W(Math.floor((P.ta+7-P.sa)/7),2),"%V":P=>{var ce=Math.floor((P.ta+7-(P.sa+6)%7)/7);if(2>=(P.sa+371-P.ta-2)%7&&ce++,ce)ce==53&&(ve=(P.sa+371-P.ta)%7,ve==4||ve==3&&Bt(P.ua)||(ce=1));else{ce=52;var ve=(P.sa+7-P.ta-1)%7;(ve==4||ve==5&&Bt(P.ua%400-1))&&ce++}return W(ce,2)},"%w":P=>P.sa,"%W":P=>W(Math.floor((P.ta+7-(P.sa+6)%7)/7),2),"%y":P=>(P.ua+1900).toString().substring(2),"%Y":P=>P.ua+1900,"%z":P=>{P=P.Aa;var ce=0<=P;return P=Math.abs(P)/60,(ce?"+":"-")+("0000"+(P/60*100+P%60)).slice(-4)},"%Z":P=>P.Da,"%%":()=>"%"},w=w.replace(/%%/g,"\0\0");for(He in Ve)w.includes(He)&&(w=w.replace(new RegExp(He,"g"),Ve[He](A)));return w=w.replace(/\0\0/g,"%"),He=xn(w),He.length>T?0:(Ie.set(He,m>>>0),He.length-1)}var Nt=[],At=void 0,qr=[];function Ir(m,T){if(!At){At=new WeakMap;var w=Ce.length;if(At)for(var A=0;A<0+w;A++){var $=A,W=Nt[$];W||($>=Nt.length&&(Nt.length=$+1),Nt[$]=W=Ce.get($)),($=W)&&At.set($,A)}}if(w=At.get(m)||0)return w;if(qr.length)w=qr.pop();else{try{Ce.grow(1)}catch(pe){throw pe instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":pe}w=Ce.length-1}try{A=w,Ce.set(A,m),Nt[A]=Ce.get(A)}catch(pe){if(!(pe instanceof TypeError))throw pe;if(typeof WebAssembly.Function=="function"){A=WebAssembly.Function,$={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"},W={parameters:[],results:T[0]=="v"?[]:[$[T[0]]]};for(var K=1;K<T.length;++K)W.parameters.push($[T[K]]);T=new A(W,m)}else{for(A=[1],$=T.slice(0,1),T=T.slice(1),W={i:127,p:127,j:126,f:125,d:124},A.push(96),K=T.length,128>K?A.push(K):A.push(K%128|128,K>>7),K=0;K<T.length;++K)A.push(W[T[K]]);$=="v"?A.push(0):A.push(1,W[$]),T=[0,97,115,109,1,0,0,0,1],$=A.length,128>$?T.push($):T.push($%128|128,$>>7),T.push.apply(T,A),T.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),T=new WebAssembly.Module(new Uint8Array(T)),T=new WebAssembly.Instance(T,{e:{f:m}}).exports.f}A=w,Ce.set(A,T),Nt[A]=Ce.get(A)}return At.set(m,w),w}var Z={a:function(m,T,w){throw m>>>=0,new Ne(m).za(T>>>0,w>>>0),Tt=m,st++,Tt},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},l:()=>!0,o:function(m,T,w){m=T+2097152>>>0<4194305-!!m?(m>>>0)+4294967296*T:NaN,w>>>=0,m=new Date(1e3*m),V[w>>2>>>0]=m.getUTCSeconds(),V[w+4>>2>>>0]=m.getUTCMinutes(),V[w+8>>2>>>0]=m.getUTCHours(),V[w+12>>2>>>0]=m.getUTCDate(),V[w+16>>2>>>0]=m.getUTCMonth(),V[w+20>>2>>>0]=m.getUTCFullYear()-1900,V[w+24>>2>>>0]=m.getUTCDay(),V[w+28>>2>>>0]=(m.getTime()-Date.UTC(m.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},p:function(m,T,w){m=T+2097152>>>0<4194305-!!m?(m>>>0)+4294967296*T:NaN,w>>>=0,m=new Date(1e3*m),V[w>>2>>>0]=m.getSeconds(),V[w+4>>2>>>0]=m.getMinutes(),V[w+8>>2>>>0]=m.getHours(),V[w+12>>2>>>0]=m.getDate(),V[w+16>>2>>>0]=m.getMonth(),V[w+20>>2>>>0]=m.getFullYear()-1900,V[w+24>>2>>>0]=m.getDay(),V[w+28>>2>>>0]=(Bt(m.getFullYear())?Rt:Vr)[m.getMonth()]+m.getDate()-1|0,V[w+36>>2>>>0]=-(60*m.getTimezoneOffset()),T=new Date(m.getFullYear(),6,1).getTimezoneOffset();var A=new Date(m.getFullYear(),0,1).getTimezoneOffset();V[w+32>>2>>>0]=(T!=A&&m.getTimezoneOffset()==Math.min(A,T))|0},q:function(m){m>>>=0;var T=new Date(V[m+20>>2>>>0]+1900,V[m+16>>2>>>0],V[m+12>>2>>>0],V[m+8>>2>>>0],V[m+4>>2>>>0],V[m>>2>>>0],0),w=V[m+32>>2>>>0],A=T.getTimezoneOffset(),$=new Date(T.getFullYear(),6,1).getTimezoneOffset(),W=new Date(T.getFullYear(),0,1).getTimezoneOffset(),K=Math.min(W,$);return 0>w?V[m+32>>2>>>0]=+($!=W&&K==A):0<w!=(K==A)&&($=Math.max(W,$),T.setTime(T.getTime()+6e4*((0<w?K:$)-A))),V[m+24>>2>>>0]=T.getDay(),V[m+28>>2>>>0]=(Bt(T.getFullYear())?Rt:Vr)[T.getMonth()]+T.getDate()-1|0,V[m>>2>>>0]=T.getSeconds(),V[m+4>>2>>>0]=T.getMinutes(),V[m+8>>2>>>0]=T.getHours(),V[m+12>>2>>>0]=T.getDate(),V[m+16>>2>>>0]=T.getMonth(),V[m+20>>2>>>0]=T.getYear(),m=T.getTime()/1e3,Yr((at=m,1<=+Math.abs(at)?0<at?+Math.floor(at/4294967296)>>>0:~~+Math.ceil((at-+(~~at>>>0))/4294967296)>>>0:0)),m>>>0},m:function(){return-52},n:function(){},t:function(m,T,w){function A(We){return(We=We.toTimeString().match(/\(([A-Za-z ]+)\)$/))?We[1]:"GMT"}w>>>=0;var $=new Date().getFullYear(),W=new Date($,0,1),K=new Date($,6,1);$=W.getTimezoneOffset();var pe=K.getTimezoneOffset();we[m>>>0>>2>>>0]=60*Math.max($,pe),V[T>>>0>>2>>>0]=+($!=pe),m=A(W),T=A(K),m=yn(m),T=yn(T),pe<$?(we[w>>2>>>0]=m,we[w+4>>2>>>0]=T):(we[w>>2>>>0]=T,we[w+4>>2>>>0]=m)},d:()=>{qe("")},h:function(){return Date.now()},u:function(){return 4294901760},b:()=>performance.now(),I:function(m,T,w){return T>>>=0,xe.copyWithin(m>>>0>>>0,T>>>0,T+(w>>>0)>>>0)},s:function(m){m>>>=0;var T=xe.length;if(4294901760<m)return!1;for(var w=1;4>=w;w*=2){var A=T*(1+.2/w);A=Math.min(A,m+100663296);var $=Math;A=Math.max(m,A);e:{$=$.min.call($,4294901760,A+(65536-A%65536)%65536)-Q.buffer.byteLength+65535>>>16;try{Q.grow($),H();var W=1;break e}catch{}W=void 0}if(W)return!0}return!1},C:function(m,T){m>>>=0,T>>>=0;var w=0;return Tn().forEach(function(A,$){var W=T+w;for($=we[m+4*$>>2>>>0]=W,W=0;W<A.length;++W)Ie[$++>>0>>>0]=A.charCodeAt(W);Ie[$>>0>>>0]=0,w+=A.length+1}),0},D:function(m,T){m>>>=0,T>>>=0;var w=Tn();we[m>>2>>>0]=w.length;var A=0;return w.forEach(function($){A+=$.length+1}),we[T>>2>>>0]=A,0},f:()=>52,k:function(){return 52},r:function(){return 70},j:function(m,T,w,A){T>>>=0,w>>>=0,A>>>=0;for(var $=0,W=0;W<w;W++){var K=we[T>>2>>>0],pe=we[T+4>>2>>>0];T+=8;for(var We=0;We<pe;We++){var Ve=xe[K+We>>>0],He=_r[m];Ve===0||Ve===10?((m===1?S:L)(qt(He,0)),He.length=0):He.push(Ve)}$+=pe}return we[A>>2>>>0]=$,0},B:jr,c:function(m,T,w,A){return jr(m>>>0,T>>>0,w>>>0,A>>>0)},i:function(m,T,w,A){let $=Ce.length;m=new Uint8Array(xe.slice(m+T,m+w));try{var W=new WebAssembly.Module(m),K=new WebAssembly.Instance(W,{env:{memory:Q}}),pe;for(pe in K.exports)Ir(K.exports[pe]);return $<Ce.length?$:A}catch(We){return console.log(We),A}}};(function(){function m(w){if(w=w.exports,N=w=wn(w),Q=N.K,H(),Ce=N.na,J.unshift(N.L),ke--,n.monitorRunDependencies&&n.monitorRunDependencies(ke),ke==0&&(Xe!==null&&(clearInterval(Xe),Xe=null),me)){var A=me;me=null,A()}return w}var T={a:Z};if(ke++,n.monitorRunDependencies&&n.monitorRunDependencies(ke),n.instantiateWasm)try{return n.instantiateWasm(T,m)}catch(w){L("Module.instantiateWasm callback failed with error: "+w),r(w)}return yt(T,function(w){m(w.instance)}).catch(r),{}})(),n._OrtInit=(m,T)=>(n._OrtInit=N.M)(m,T),n._OrtGetLastError=(m,T)=>(n._OrtGetLastError=N.N)(m,T),n._OrtCreateSessionOptions=(m,T,w,A,$,W,K,pe,We,Ve)=>(n._OrtCreateSessionOptions=N.O)(m,T,w,A,$,W,K,pe,We,Ve),n._OrtAppendExecutionProvider=(m,T)=>(n._OrtAppendExecutionProvider=N.P)(m,T),n._OrtAddFreeDimensionOverride=(m,T,w)=>(n._OrtAddFreeDimensionOverride=N.Q)(m,T,w),n._OrtAddSessionConfigEntry=(m,T,w)=>(n._OrtAddSessionConfigEntry=N.R)(m,T,w),n._OrtReleaseSessionOptions=m=>(n._OrtReleaseSessionOptions=N.S)(m),n._OrtCreateSession=(m,T,w)=>(n._OrtCreateSession=N.T)(m,T,w),n._OrtReleaseSession=m=>(n._OrtReleaseSession=N.U)(m),n._OrtGetInputOutputCount=(m,T,w)=>(n._OrtGetInputOutputCount=N.V)(m,T,w),n._OrtGetInputName=(m,T)=>(n._OrtGetInputName=N.W)(m,T),n._OrtGetOutputName=(m,T)=>(n._OrtGetOutputName=N.X)(m,T),n._OrtFree=m=>(n._OrtFree=N.Y)(m),n._OrtCreateTensor=(m,T,w,A,$,W)=>(n._OrtCreateTensor=N.Z)(m,T,w,A,$,W),n._OrtGetTensorData=(m,T,w,A,$)=>(n._OrtGetTensorData=N._)(m,T,w,A,$),n._OrtReleaseTensor=m=>(n._OrtReleaseTensor=N.$)(m),n._OrtCreateRunOptions=(m,T,w,A)=>(n._OrtCreateRunOptions=N.aa)(m,T,w,A),n._OrtAddRunConfigEntry=(m,T,w)=>(n._OrtAddRunConfigEntry=N.ba)(m,T,w),n._OrtReleaseRunOptions=m=>(n._OrtReleaseRunOptions=N.ca)(m),n._OrtCreateBinding=m=>(n._OrtCreateBinding=N.da)(m),n._OrtBindInput=(m,T,w)=>(n._OrtBindInput=N.ea)(m,T,w),n._OrtBindOutput=(m,T,w,A)=>(n._OrtBindOutput=N.fa)(m,T,w,A),n._OrtClearBoundOutputs=m=>(n._OrtClearBoundOutputs=N.ga)(m),n._OrtReleaseBinding=m=>(n._OrtReleaseBinding=N.ha)(m),n._OrtRunWithBinding=(m,T,w,A,$)=>(n._OrtRunWithBinding=N.ia)(m,T,w,A,$),n._OrtRun=(m,T,w,A,$,W,K,pe)=>(n._OrtRun=N.ja)(m,T,w,A,$,W,K,pe),n._OrtEndProfiling=m=>(n._OrtEndProfiling=N.ka)(m);var nr=n._malloc=m=>(nr=n._malloc=N.la)(m);n._free=m=>(n._free=N.ma)(m);var Yr=m=>(Yr=N.oa)(m),Mt=()=>(Mt=N.pa)(),Xr=m=>(Xr=N.qa)(m),vn=m=>(vn=N.ra)(m);n.___start_em_js=905600,n.___stop_em_js=906212;function wn(m){m=Object.assign({},m);var T=A=>()=>A()>>>0,w=A=>$=>A($)>>>0;return m.__errno_location=T(m.__errno_location),m.malloc=w(m.malloc),m.stackSave=T(m.stackSave),m.stackAlloc=w(m.stackAlloc),m}n.stackAlloc=vn,n.stackSave=Mt,n.stackRestore=Xr,n.addFunction=Ir,n.UTF8ToString=xr,n.stringToUTF8=(m,T,w)=>$t(m,xe,T,w),n.lengthBytesUTF8=vr;var Sr;me=function m(){Sr||Kr(),Sr||(me=m)};function Kr(){function m(){if(!Sr&&(Sr=!0,n.calledRun=!0,!he)){if(Be(J),e(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;){var T=n.postRun.shift();X.unshift(T)}Be(X)}}if(!(0<ke)){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)rr();Be(gt),0<ke||(n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),m()},1)):m())}}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();return Kr(),t.ready}})();typeof Ep=="object"&&typeof ta=="object"?ta.exports=Pp:typeof define=="function"&&define.amd&&define([],()=>Pp)});var Lp=be(()=>{});var Fp=be(()=>{});var Cp={};Er(Cp,{cpus:()=>ug});var ug,kp=D(()=>{ug=void 0});var Rp=be((Bp,ra)=>{"use strict";var $p=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(a=a||__filename),function(t={}){function n(){return J.buffer!=me.buffer&&it(),me}function e(){return J.buffer!=me.buffer&&it(),qe}function r(){return J.buffer!=me.buffer&&it(),Tr}function o(){return J.buffer!=me.buffer&&it(),Qe}function s(){return J.buffer!=me.buffer&&it(),Vt}var i=t,u,l;i.ready=new Promise((c,d)=>{u=c,l=d});var f=Object.assign({},i),p="./this.program",b=(c,d)=>{throw d},x=typeof window=="object",I=typeof importScripts=="function",v=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",S=i.ENVIRONMENT_IS_PTHREAD||!1,L="";function B(c){return i.locateFile?i.locateFile(c,L):L+c}var M,Q,N;if(v){var he=(Zi(),ir(Ji)),Ie=(ea(),ir(Qi));L=I?Ie.dirname(L)+"/":__dirname+"/",M=(d,g)=>(d=d.startsWith("file://")?new URL(d):Ie.normalize(d),he.readFileSync(d,g?void 0:"utf8")),N=d=>(d=M(d,!0),d.buffer||(d=new Uint8Array(d)),d),Q=(d,g,_,F=!0)=>{d=d.startsWith("file://")?new URL(d):Ie.normalize(d),he.readFile(d,F?void 0:"utf8",(C,G)=>{C?_(C):g(F?G.buffer:G)})},!i.thisProgram&&1<process.argv.length&&(p=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),b=(d,g)=>{throw process.exitCode=d,g},i.inspect=()=>"[Emscripten Module object]";let c;try{c=Lp()}catch(d){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),d}global.Worker=c.Worker}else(x||I)&&(I?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),typeof a<"u"&&a&&(L=a),L.indexOf("blob:")!==0?L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1):L="",v||(M=c=>{var d=new XMLHttpRequest;return d.open("GET",c,!1),d.send(null),d.responseText},I&&(N=c=>{var d=new XMLHttpRequest;return d.open("GET",c,!1),d.responseType="arraybuffer",d.send(null),new Uint8Array(d.response)}),Q=(c,d,g)=>{var _=new XMLHttpRequest;_.open("GET",c,!0),_.responseType="arraybuffer",_.onload=()=>{_.status==200||_.status==0&&_.response?d(_.response):g()},_.onerror=g,_.send(null)}));v&&typeof performance>"u"&&(global.performance=Fp().performance);var xe=console.log.bind(console),V=console.error.bind(console);v&&(xe=(...c)=>he.writeSync(1,c.join(" ")+`
`),V=(...c)=>he.writeSync(2,c.join(" ")+`
`));var we=i.print||xe,H=i.printErr||V;Object.assign(i,f),f=null,i.thisProgram&&(p=i.thisProgram),i.quit&&(b=i.quit);var Ce;i.wasmBinary&&(Ce=i.wasmBinary);var gt=i.noExitRuntime||!0;typeof WebAssembly!="object"&&$t("no native wasm support detected");var J,X,rr,ke=!1,Xe,me,qe,Tr,Qe,Vt;function it(){var c=J.buffer;i.HEAP8=me=new Int8Array(c),i.HEAP16=new Int16Array(c),i.HEAP32=Tr=new Int32Array(c),i.HEAPU8=qe=new Uint8Array(c),i.HEAPU16=new Uint16Array(c),i.HEAPU32=Qe=new Uint32Array(c),i.HEAPF32=new Float32Array(c),i.HEAPF64=Vt=new Float64Array(c)}var Ht=i.INITIAL_MEMORY||16777216;if(5242880<=Ht||$t("INITIAL_MEMORY should be larger than STACK_SIZE, was "+Ht+"! (STACK_SIZE=5242880)"),S)J=i.wasmMemory;else if(i.wasmMemory)J=i.wasmMemory;else if(J=new WebAssembly.Memory({initial:Ht/65536,maximum:65536,shared:!0}),!(J.buffer instanceof SharedArrayBuffer))throw H("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),v&&H("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");it(),Ht=J.buffer.byteLength;var $e,yt=[],at=[],Be=[],Ne=0;function Tt(){return gt||0<Ne}var st=0,jt=null,qt=null;function xr(){st++,i.monitorRunDependencies&&i.monitorRunDependencies(st)}function vr(){if(st--,i.monitorRunDependencies&&i.monitorRunDependencies(st),st==0&&(jt!==null&&(clearInterval(jt),jt=null),qt)){var c=qt;qt=null,c()}}function $t(c){throw i.onAbort&&i.onAbort(c),c="Aborted("+c+")",H(c),ke=!0,Xe=1,c=new WebAssembly.RuntimeError(c+". Build with -sASSERTIONS for more info."),l(c),c}function Bt(c){return c.startsWith("data:application/octet-stream;base64,")}var Rt;Rt="ort-wasm-threaded.wasm",Bt(Rt)||(Rt=B(Rt));function Vr(c){if(c==Rt&&Ce)return new Uint8Array(Ce);if(N)return N(c);throw"both async and sync fetching of the wasm failed"}function yn(c){if(!Ce&&(x||I)){if(typeof fetch=="function"&&!c.startsWith("file://"))return fetch(c,{credentials:"same-origin"}).then(d=>{if(!d.ok)throw"failed to load wasm binary file at '"+c+"'";return d.arrayBuffer()}).catch(()=>Vr(c));if(Q)return new Promise((d,g)=>{Q(c,_=>d(new Uint8Array(_)),g)})}return Promise.resolve().then(()=>Vr(c))}function wr(c,d,g){return yn(c).then(_=>WebAssembly.instantiate(_,d)).then(_=>_).then(g,_=>{H("failed to asynchronously prepare wasm: "+_),$t(_)})}function Tn(c,d){var g=Rt;return Ce||typeof WebAssembly.instantiateStreaming!="function"||Bt(g)||g.startsWith("file://")||v||typeof fetch!="function"?wr(g,c,d):fetch(g,{credentials:"same-origin"}).then(_=>WebAssembly.instantiateStreaming(_,c).then(d,function(F){return H("wasm streaming compile failed: "+F),H("falling back to ArrayBuffer instantiation"),wr(g,c,d)}))}var St;function _r(c){this.name="ExitStatus",this.message=`Program terminated with exit(${c})`,this.status=c}function Or(c){c.terminate(),c.onmessage=()=>{}}function Hr(c){(c=Z.Ma[c])||$t(),Z.mb(c)}function xn(c){var d=Z.gb();if(!d)return 6;Z.Pa.push(d),Z.Ma[c.Oa]=d,d.Oa=c.Oa;var g={cmd:"run",start_routine:c.nb,arg:c.fb,pthread_ptr:c.Oa};return v&&d.unref(),d.postMessage(g,c.tb),0}var jr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Nt=(c,d,g)=>{d>>>=0;var _=d+g;for(g=d;c[g]&&!(g>=_);)++g;if(16<g-d&&c.buffer&&jr)return jr.decode(c.buffer instanceof SharedArrayBuffer?c.slice(d,g):c.subarray(d,g));for(_="";d<g;){var F=c[d++];if(F&128){var C=c[d++]&63;if((F&224)==192)_+=String.fromCharCode((F&31)<<6|C);else{var G=c[d++]&63;F=(F&240)==224?(F&15)<<12|C<<6|G:(F&7)<<18|C<<12|G<<6|c[d++]&63,65536>F?_+=String.fromCharCode(F):(F-=65536,_+=String.fromCharCode(55296|F>>10,56320|F&1023))}}else _+=String.fromCharCode(F)}return _},At=(c,d)=>(c>>>=0)?Nt(e(),c,d):"";function qr(c){if(S)return _e(1,1,c);Xe=c,Tt()||(Z.ob(),i.onExit&&i.onExit(c),ke=!0),b(c,new _r(c))}var Ir=c=>{if(Xe=c,S)throw Yr(c),"unwind";qr(c)},Z={Sa:[],Pa:[],$a:[],Ma:{},Wa:function(){S?Z.ib():Z.hb()},hb:function(){yt.unshift(()=>{xr(),Z.jb(()=>vr())})},ib:function(){Z.receiveObjectTransfer=Z.lb,Z.threadInitTLS=Z.Za,Z.setExitStatus=Z.Ya,gt=!1},Ya:function(c){Xe=c},yb:["$terminateWorker"],ob:function(){for(var c of Z.Pa)Or(c);for(c of Z.Sa)Or(c);Z.Sa=[],Z.Pa=[],Z.Ma=[]},mb:function(c){var d=c.Oa;delete Z.Ma[d],Z.Sa.push(c),Z.Pa.splice(Z.Pa.indexOf(c),1),c.Oa=0,Mo(d)},lb:function(){},Za:function(){Z.$a.forEach(c=>c())},kb:c=>new Promise(d=>{c.onmessage=C=>{C=C.data;var G=C.cmd;if(C.targetThread&&C.targetThread!=In()){var le=Z.Ma[C.xb];le?le.postMessage(C,C.transferList):H('Internal error! Worker sent a message "'+G+'" to target pthread '+C.targetThread+", but that thread no longer exists!")}else G==="checkMailbox"?On():G==="spawnThread"?xn(C):G==="cleanupThread"?Hr(C.thread):G==="killThread"?(C=C.thread,G=Z.Ma[C],delete Z.Ma[C],Or(G),Mo(C),Z.Pa.splice(Z.Pa.indexOf(G),1),G.Oa=0):G==="cancelThread"?Z.Ma[C.thread].postMessage({cmd:"cancel"}):G==="loaded"?(c.loaded=!0,d(c)):G==="alert"?alert("Thread "+C.threadId+": "+C.text):C.target==="setimmediate"?c.postMessage(C):G==="callHandler"?i[C.handler](...C.args):G&&H("worker sent an unknown command "+G)},c.onerror=C=>{throw H("worker sent an error! "+C.filename+":"+C.lineno+": "+C.message),C},v&&(c.on("message",function(C){c.onmessage({data:C})}),c.on("error",function(C){c.onerror(C)}));var g=[],_=["onExit","onAbort","print","printErr"],F;for(F of _)i.hasOwnProperty(F)&&g.push(F);c.postMessage({cmd:"load",handlers:g,urlOrBlob:i.mainScriptUrlOrBlob||a,wasmMemory:J,wasmModule:rr})}),jb:function(c){c()},eb:function(){var c=B("ort-wasm-threaded.worker.js");c=new Worker(c),Z.Sa.push(c)},gb:function(){return Z.Sa.length==0&&(Z.eb(),Z.kb(Z.Sa[0])),Z.Sa.pop()}};i.PThread=Z;var nr=c=>{for(;0<c.length;)c.shift()(i)};i.establishStackSpace=function(){var c=In(),d=r()[c+52>>2>>>0];c=r()[c+56>>2>>>0],Ha(d,d-c),Sn(d)};function Yr(c){if(S)return _e(2,0,c);Ir(c)}var Mt=[],Xr=c=>{var d=Mt[c];return d||(c>=Mt.length&&(Mt.length=c+1),Mt[c]=d=$e.get(c)),d};i.invokeEntryPoint=function(c,d){c=Xr(c)(d),Tt()?Z.Ya(c):Go(c)};function vn(c){this.Va=c-24,this.cb=function(d){o()[this.Va+4>>2>>>0]=d},this.bb=function(d){o()[this.Va+8>>2>>>0]=d},this.Wa=function(d,g){this.ab(),this.cb(d),this.bb(g)},this.ab=function(){o()[this.Va+16>>2>>>0]=0}}var wn=0,Sr=0;function Kr(c,d,g,_){return S?_e(3,1,c,d,g,_):m(c,d,g,_)}function m(c,d,g,_){if(c>>>=0,d>>>=0,g>>>=0,_>>>=0,typeof SharedArrayBuffer>"u")return H("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var F=[];return S&&F.length===0?Kr(c,d,g,_):(c={nb:g,Oa:c,fb:_,tb:F},S?(c.vb="spawnThread",postMessage(c,F),0):xn(c))}function T(c,d,g){return S?_e(4,1,c,d,g):0}function w(c,d){if(S)return _e(5,1,c,d)}var A=c=>{for(var d=0,g=0;g<c.length;++g){var _=c.charCodeAt(g);127>=_?d++:2047>=_?d+=2:55296<=_&&57343>=_?(d+=4,++g):d+=3}return d},$=(c,d,g,_)=>{if(g>>>=0,!(0<_))return 0;var F=g;_=g+_-1;for(var C=0;C<c.length;++C){var G=c.charCodeAt(C);if(55296<=G&&57343>=G){var le=c.charCodeAt(++C);G=65536+((G&1023)<<10)|le&1023}if(127>=G){if(g>=_)break;d[g++>>>0]=G}else{if(2047>=G){if(g+1>=_)break;d[g++>>>0]=192|G>>6}else{if(65535>=G){if(g+2>=_)break;d[g++>>>0]=224|G>>12}else{if(g+3>=_)break;d[g++>>>0]=240|G>>18,d[g++>>>0]=128|G>>12&63}d[g++>>>0]=128|G>>6&63}d[g++>>>0]=128|G&63}}return d[g>>>0]=0,g-F},W=(c,d,g)=>$(c,e(),d,g);function K(c,d){if(S)return _e(6,1,c,d)}function pe(c,d,g){if(S)return _e(7,1,c,d,g)}function We(c,d,g){return S?_e(8,1,c,d,g):0}function Ve(c,d){if(S)return _e(9,1,c,d)}function He(c,d,g){if(S)return _e(10,1,c,d,g)}function Jr(c,d,g,_){if(S)return _e(11,1,c,d,g,_)}function Zr(c,d,g,_){if(S)return _e(12,1,c,d,g,_)}function P(c,d,g,_){if(S)return _e(13,1,c,d,g,_)}function ce(c){if(S)return _e(14,1,c)}function ve(c,d){if(S)return _e(15,1,c,d)}function Pt(c,d,g){if(S)return _e(16,1,c,d,g)}var _n=c=>{if(!ke)try{if(c(),!Tt())try{S?Go(Xe):Ir(Xe)}catch(d){d instanceof _r||d=="unwind"||b(1,d)}}catch(d){d instanceof _r||d=="unwind"||b(1,d)}};function $o(c){c>>>=0,typeof Atomics.ub=="function"&&(Atomics.ub(r(),c>>2,c).value.then(On),c+=128,Atomics.store(r(),c>>2,1))}i.__emscripten_thread_mailbox_await=$o;function On(){var c=In();c&&($o(c),_n(()=>Wa()))}i.checkMailbox=On;var Ar=c=>c%4===0&&(c%100!==0||c%400===0),_a=[0,31,60,91,121,152,182,213,244,274,305,335],Oa=[0,31,59,90,120,151,181,212,243,273,304,334];function Ia(c,d,g,_,F,C,G,le){return S?_e(17,1,c,d,g,_,F,C,G,le):-52}function Sa(c,d,g,_,F,C,G){if(S)return _e(18,1,c,d,g,_,F,C,G)}var Aa=c=>{var d=A(c)+1,g=Ga(d);return g&&W(c,g,d),g},xd=c=>{var d=Uo();return c=c(),Sn(d),c};function _e(c,d){var g=arguments.length-2,_=arguments;return xd(()=>{for(var F=zo(8*g),C=F>>3,G=0;G<g;G++){var le=_[2+G];s()[C+G>>>0]=le}return za(c,g,F,d)})}var Bo=[],Ro={},Pa=()=>{if(!No){var c={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"},d;for(d in Ro)Ro[d]===void 0?delete c[d]:c[d]=Ro[d];var g=[];for(d in c)g.push(`${d}=${c[d]}`);No=g}return No},No;function Ea(c,d){if(S)return _e(19,1,c,d);c>>>=0,d>>>=0;var g=0;return Pa().forEach(function(_,F){var C=d+g;for(F=o()[c+4*F>>2>>>0]=C,C=0;C<_.length;++C)n()[F++>>0>>>0]=_.charCodeAt(C);n()[F>>0>>>0]=0,g+=_.length+1}),0}function Da(c,d){if(S)return _e(20,1,c,d);c>>>=0,d>>>=0;var g=Pa();o()[c>>2>>>0]=g.length;var _=0;return g.forEach(function(F){_+=F.length+1}),o()[d>>2>>>0]=_,0}function La(c){return S?_e(21,1,c):52}function Fa(c,d,g,_){return S?_e(22,1,c,d,g,_):52}function Ca(c,d,g,_,F){return S?_e(23,1,c,d,g,_,F):70}var vd=[null,[],[]];function ka(c,d,g,_){if(S)return _e(24,1,c,d,g,_);d>>>=0,g>>>=0,_>>>=0;for(var F=0,C=0;C<g;C++){var G=o()[d>>2>>>0],le=o()[d+4>>2>>>0];d+=8;for(var ut=0;ut<le;ut++){var Me=e()[G+ut>>>0],et=vd[c];Me===0||Me===10?((c===1?we:H)(Nt(et,0)),et.length=0):et.push(Me)}F+=le}return o()[_>>2>>>0]=F,0}var $a=[31,29,31,30,31,30,31,31,30,31,30,31],Ba=[31,28,31,30,31,30,31,31,30,31,30,31];function wd(c){var d=Array(A(c)+1);return $(c,d,0,d.length),d}var _d=(c,d)=>{n().set(c,d>>>0)};function Ra(c,d,g,_){function F(E,de,Se){for(E=typeof E=="number"?E.toString():E||"";E.length<de;)E=Se[0]+E;return E}function C(E,de){return F(E,de,"0")}function G(E,de){function Se(Xa){return 0>Xa?-1:0<Xa?1:0}var or;return(or=Se(E.getFullYear()-de.getFullYear()))===0&&(or=Se(E.getMonth()-de.getMonth()))===0&&(or=Se(E.getDate()-de.getDate())),or}function le(E){switch(E.getDay()){case 0:return new Date(E.getFullYear()-1,11,29);case 1:return E;case 2:return new Date(E.getFullYear(),0,3);case 3:return new Date(E.getFullYear(),0,2);case 4:return new Date(E.getFullYear(),0,1);case 5:return new Date(E.getFullYear()-1,11,31);case 6:return new Date(E.getFullYear()-1,11,30)}}function ut(E){var de=E.Qa;for(E=new Date(new Date(E.Ra+1900,0,1).getTime());0<de;){var Se=E.getMonth(),or=(Ar(E.getFullYear())?$a:Ba)[Se];if(de>or-E.getDate())de-=or-E.getDate()+1,E.setDate(1),11>Se?E.setMonth(Se+1):(E.setMonth(0),E.setFullYear(E.getFullYear()+1));else{E.setDate(E.getDate()+de);break}}return Se=new Date(E.getFullYear()+1,0,4),de=le(new Date(E.getFullYear(),0,4)),Se=le(Se),0>=G(de,E)?0>=G(Se,E)?E.getFullYear()+1:E.getFullYear():E.getFullYear()-1}c>>>=0,d>>>=0,g>>>=0,_>>>=0;var Me=r()[_+40>>2>>>0];_={rb:r()[_>>2>>>0],qb:r()[_+4>>2>>>0],Ta:r()[_+8>>2>>>0],Xa:r()[_+12>>2>>>0],Ua:r()[_+16>>2>>>0],Ra:r()[_+20>>2>>>0],Na:r()[_+24>>2>>>0],Qa:r()[_+28>>2>>>0],zb:r()[_+32>>2>>>0],pb:r()[_+36>>2>>>0],sb:Me?At(Me):""},g=At(g),Me={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var et in Me)g=g.replace(new RegExp(et,"g"),Me[et]);var qa="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ya="January February March April May June July August September October November December".split(" ");Me={"%a":E=>qa[E.Na].substring(0,3),"%A":E=>qa[E.Na],"%b":E=>Ya[E.Ua].substring(0,3),"%B":E=>Ya[E.Ua],"%C":E=>C((E.Ra+1900)/100|0,2),"%d":E=>C(E.Xa,2),"%e":E=>F(E.Xa,2," "),"%g":E=>ut(E).toString().substring(2),"%G":E=>ut(E),"%H":E=>C(E.Ta,2),"%I":E=>(E=E.Ta,E==0?E=12:12<E&&(E-=12),C(E,2)),"%j":E=>{for(var de=0,Se=0;Se<=E.Ua-1;de+=(Ar(E.Ra+1900)?$a:Ba)[Se++]);return C(E.Xa+de,3)},"%m":E=>C(E.Ua+1,2),"%M":E=>C(E.qb,2),"%n":()=>`
`,"%p":E=>0<=E.Ta&&12>E.Ta?"AM":"PM","%S":E=>C(E.rb,2),"%t":()=>"	","%u":E=>E.Na||7,"%U":E=>C(Math.floor((E.Qa+7-E.Na)/7),2),"%V":E=>{var de=Math.floor((E.Qa+7-(E.Na+6)%7)/7);if(2>=(E.Na+371-E.Qa-2)%7&&de++,de)de==53&&(Se=(E.Na+371-E.Qa)%7,Se==4||Se==3&&Ar(E.Ra)||(de=1));else{de=52;var Se=(E.Na+7-E.Qa-1)%7;(Se==4||Se==5&&Ar(E.Ra%400-1))&&de++}return C(de,2)},"%w":E=>E.Na,"%W":E=>C(Math.floor((E.Qa+7-(E.Na+6)%7)/7),2),"%y":E=>(E.Ra+1900).toString().substring(2),"%Y":E=>E.Ra+1900,"%z":E=>{E=E.pb;var de=0<=E;return E=Math.abs(E)/60,(de?"+":"-")+("0000"+(E/60*100+E%60)).slice(-4)},"%Z":E=>E.sb,"%%":()=>"%"},g=g.replace(/%%/g,"\0\0");for(et in Me)g.includes(et)&&(g=g.replace(new RegExp(et,"g"),Me[et](_)));return g=g.replace(/\0\0/g,"%"),et=wd(g),et.length>d?0:(_d(et,c),et.length-1)}var Pr=void 0,Na=[];function Ma(c,d){if(!Pr){Pr=new WeakMap;var g=$e.length;if(Pr)for(var _=0;_<0+g;_++){var F=Xr(_);F&&Pr.set(F,_)}}if(g=Pr.get(c)||0)return g;if(Na.length)g=Na.pop();else{try{$e.grow(1)}catch(le){throw le instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":le}g=$e.length-1}try{_=g,$e.set(_,c),Mt[_]=$e.get(_)}catch(le){if(!(le instanceof TypeError))throw le;if(typeof WebAssembly.Function=="function"){_=WebAssembly.Function,F={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var C={parameters:[],results:d[0]=="v"?[]:[F[d[0]]]},G=1;G<d.length;++G)C.parameters.push(F[d[G]]);d=new _(C,c)}else{for(_=[1],F=d.slice(0,1),d=d.slice(1),C={i:127,p:127,j:126,f:125,d:124},_.push(96),G=d.length,128>G?_.push(G):_.push(G%128|128,G>>7),G=0;G<d.length;++G)_.push(C[d[G]]);F=="v"?_.push(0):_.push(1,C[F]),d=[0,97,115,109,1,0,0,0,1],F=_.length,128>F?d.push(F):d.push(F%128|128,F>>7),d.push.apply(d,_),d.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),d=new WebAssembly.Module(new Uint8Array(d)),d=new WebAssembly.Instance(d,{e:{f:c}}).exports.f}_=g,$e.set(_,d),Mt[_]=$e.get(_)}return Pr.set(c,g),g}Z.Wa();var Od=[null,qr,Yr,Kr,T,w,K,pe,We,Ve,He,Jr,Zr,P,ce,ve,Pt,Ia,Sa,Ea,Da,La,Fa,Ca,ka],Id={b:function(c,d,g){throw c>>>=0,new vn(c).Wa(d>>>0,g>>>0),wn=c,Sr++,wn},N:function(c){Ua(c>>>0,!I,1,!x,131072,!1),Z.Za()},k:function(c){c>>>=0,S?postMessage({cmd:"cleanupThread",thread:c}):Hr(c)},I:m,h:T,T:w,D:K,F:pe,U:We,R:Ve,J:He,Q:Jr,o:Zr,E:P,B:ce,S:ve,C:Pt,q:()=>!0,z:function(c,d){c>>>=0,c==d>>>0?setTimeout(()=>On()):S?postMessage({targetThread:c,cmd:"checkMailbox"}):(c=Z.Ma[c])&&c.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:$o,p:function(c){v&&Z.Ma[c>>>0].ref()},t:function(c,d,g){c=d+2097152>>>0<4194305-!!c?(c>>>0)+4294967296*d:NaN,g>>>=0,c=new Date(1e3*c),r()[g>>2>>>0]=c.getUTCSeconds(),r()[g+4>>2>>>0]=c.getUTCMinutes(),r()[g+8>>2>>>0]=c.getUTCHours(),r()[g+12>>2>>>0]=c.getUTCDate(),r()[g+16>>2>>>0]=c.getUTCMonth(),r()[g+20>>2>>>0]=c.getUTCFullYear()-1900,r()[g+24>>2>>>0]=c.getUTCDay(),c=(c.getTime()-Date.UTC(c.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,r()[g+28>>2>>>0]=c},u:function(c,d,g){c=d+2097152>>>0<4194305-!!c?(c>>>0)+4294967296*d:NaN,g>>>=0,c=new Date(1e3*c),r()[g>>2>>>0]=c.getSeconds(),r()[g+4>>2>>>0]=c.getMinutes(),r()[g+8>>2>>>0]=c.getHours(),r()[g+12>>2>>>0]=c.getDate(),r()[g+16>>2>>>0]=c.getMonth(),r()[g+20>>2>>>0]=c.getFullYear()-1900,r()[g+24>>2>>>0]=c.getDay(),d=(Ar(c.getFullYear())?_a:Oa)[c.getMonth()]+c.getDate()-1|0,r()[g+28>>2>>>0]=d,r()[g+36>>2>>>0]=-(60*c.getTimezoneOffset()),d=new Date(c.getFullYear(),6,1).getTimezoneOffset();var _=new Date(c.getFullYear(),0,1).getTimezoneOffset();c=(d!=_&&c.getTimezoneOffset()==Math.min(_,d))|0,r()[g+32>>2>>>0]=c},v:function(c){c>>>=0;var d=new Date(r()[c+20>>2>>>0]+1900,r()[c+16>>2>>>0],r()[c+12>>2>>>0],r()[c+8>>2>>>0],r()[c+4>>2>>>0],r()[c>>2>>>0],0),g=r()[c+32>>2>>>0],_=d.getTimezoneOffset(),F=new Date(d.getFullYear(),6,1).getTimezoneOffset(),C=new Date(d.getFullYear(),0,1).getTimezoneOffset(),G=Math.min(C,F);return 0>g?r()[c+32>>2>>>0]=+(F!=C&&G==_):0<g!=(G==_)&&(F=Math.max(C,F),d.setTime(d.getTime()+6e4*((0<g?G:F)-_))),r()[c+24>>2>>>0]=d.getDay(),g=(Ar(d.getFullYear())?_a:Oa)[d.getMonth()]+d.getDate()-1|0,r()[c+28>>2>>>0]=g,r()[c>>2>>>0]=d.getSeconds(),r()[c+4>>2>>>0]=d.getMinutes(),r()[c+8>>2>>>0]=d.getHours(),r()[c+12>>2>>>0]=d.getDate(),r()[c+16>>2>>>0]=d.getMonth(),r()[c+20>>2>>>0]=d.getYear(),c=d.getTime()/1e3,Va((St=c,1<=+Math.abs(St)?0<St?+Math.floor(St/4294967296)>>>0:~~+Math.ceil((St-+(~~St>>>0))/4294967296)>>>0:0)),c>>>0},r:Ia,s:Sa,y:function(c,d,g){function _(Me){return(Me=Me.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Me[1]:"GMT"}c>>>=0,d>>>=0,g>>>=0;var F=new Date().getFullYear(),C=new Date(F,0,1),G=new Date(F,6,1);F=C.getTimezoneOffset();var le=G.getTimezoneOffset(),ut=Math.max(F,le);o()[c>>2>>>0]=60*ut,r()[d>>2>>>0]=+(F!=le),c=_(C),d=_(G),c=Aa(c),d=Aa(d),le<F?(o()[g>>2>>>0]=c,o()[g+4>>2>>>0]=d):(o()[g>>2>>>0]=d,o()[g+4>>2>>>0]=c)},c:()=>{$t("")},l:function(){},i:function(){return Date.now()},V:()=>{throw Ne+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:function(){return v?(kp(),ir(Cp)).cpus().length:navigator.hardwareConcurrency},K:function(c,d,g,_){for(Z.wb=d>>>0,Bo.length=g,d=_>>>0>>3,_=0;_<g;_++)Bo[_]=s()[d+_>>>0];return Od[c].apply(null,Bo)},x:function(c){c>>>=0;var d=e().length;if(c<=d||4294901760<c)return!1;for(var g=1;4>=g;g*=2){var _=d*(1+.2/g);_=Math.min(_,c+100663296);var F=Math;_=Math.max(c,_);e:{F=F.min.call(F,4294901760,_+(65536-_%65536)%65536)-J.buffer.byteLength+65535>>>16;try{J.grow(F),it();var C=1;break e}catch{}C=void 0}if(C)return!0}return!1},O:Ea,P:Da,H:Ir,g:La,n:Fa,w:Ca,m:ka,a:J||i.wasmMemory,G:Ra,d:function(c,d,g,_){return Ra(c>>>0,d>>>0,g>>>0,_>>>0)},j:function(c,d,g,_){let F=$e.length;c=new Uint8Array(e().slice(c+d,c+g));try{var C=new WebAssembly.Module(c),G=new WebAssembly.Instance(C,{env:{memory:J}}),le;for(le in G.exports)Ma(G.exports[le]);return F<$e.length?F:_}catch(ut){return console.log(ut),_}}};(function(){function c(g,_){return g=g.exports,X=g=Sd(g),Z.$a.push(X.za),$e=X.Aa,at.unshift(X.W),rr=_,vr(),g}var d={a:Id};if(xr(),i.instantiateWasm)try{return i.instantiateWasm(d,c)}catch(g){H("Module.instantiateWasm callback failed with error: "+g),l(g)}return Tn(d,function(g){c(g.instance,g.module)}).catch(l),{}})(),i._OrtInit=(c,d)=>(i._OrtInit=X.X)(c,d),i._OrtGetLastError=(c,d)=>(i._OrtGetLastError=X.Y)(c,d),i._OrtCreateSessionOptions=(c,d,g,_,F,C,G,le,ut,Me)=>(i._OrtCreateSessionOptions=X.Z)(c,d,g,_,F,C,G,le,ut,Me),i._OrtAppendExecutionProvider=(c,d)=>(i._OrtAppendExecutionProvider=X._)(c,d),i._OrtAddFreeDimensionOverride=(c,d,g)=>(i._OrtAddFreeDimensionOverride=X.$)(c,d,g),i._OrtAddSessionConfigEntry=(c,d,g)=>(i._OrtAddSessionConfigEntry=X.aa)(c,d,g),i._OrtReleaseSessionOptions=c=>(i._OrtReleaseSessionOptions=X.ba)(c),i._OrtCreateSession=(c,d,g)=>(i._OrtCreateSession=X.ca)(c,d,g),i._OrtReleaseSession=c=>(i._OrtReleaseSession=X.da)(c),i._OrtGetInputOutputCount=(c,d,g)=>(i._OrtGetInputOutputCount=X.ea)(c,d,g),i._OrtGetInputName=(c,d)=>(i._OrtGetInputName=X.fa)(c,d),i._OrtGetOutputName=(c,d)=>(i._OrtGetOutputName=X.ga)(c,d),i._OrtFree=c=>(i._OrtFree=X.ha)(c),i._OrtCreateTensor=(c,d,g,_,F,C)=>(i._OrtCreateTensor=X.ia)(c,d,g,_,F,C),i._OrtGetTensorData=(c,d,g,_,F)=>(i._OrtGetTensorData=X.ja)(c,d,g,_,F),i._OrtReleaseTensor=c=>(i._OrtReleaseTensor=X.ka)(c),i._OrtCreateRunOptions=(c,d,g,_)=>(i._OrtCreateRunOptions=X.la)(c,d,g,_),i._OrtAddRunConfigEntry=(c,d,g)=>(i._OrtAddRunConfigEntry=X.ma)(c,d,g),i._OrtReleaseRunOptions=c=>(i._OrtReleaseRunOptions=X.na)(c),i._OrtCreateBinding=c=>(i._OrtCreateBinding=X.oa)(c),i._OrtBindInput=(c,d,g)=>(i._OrtBindInput=X.pa)(c,d,g),i._OrtBindOutput=(c,d,g,_)=>(i._OrtBindOutput=X.qa)(c,d,g,_),i._OrtClearBoundOutputs=c=>(i._OrtClearBoundOutputs=X.ra)(c),i._OrtReleaseBinding=c=>(i._OrtReleaseBinding=X.sa)(c),i._OrtRunWithBinding=(c,d,g,_,F)=>(i._OrtRunWithBinding=X.ta)(c,d,g,_,F),i._OrtRun=(c,d,g,_,F,C,G,le)=>(i._OrtRun=X.ua)(c,d,g,_,F,C,G,le),i._OrtEndProfiling=c=>(i._OrtEndProfiling=X.va)(c);var In=i._pthread_self=()=>(In=i._pthread_self=X.wa)(),Ga=i._malloc=c=>(Ga=i._malloc=X.xa)(c);i._free=c=>(i._free=X.ya)(c),i.__emscripten_tls_init=()=>(i.__emscripten_tls_init=X.za)();var Ua=i.__emscripten_thread_init=(c,d,g,_,F,C)=>(Ua=i.__emscripten_thread_init=X.Ba)(c,d,g,_,F,C);i.__emscripten_thread_crashed=()=>(i.__emscripten_thread_crashed=X.Ca)();var za=(c,d,g,_)=>(za=X.Da)(c,d,g,_),Mo=c=>(Mo=X.Ea)(c),Go=i.__emscripten_thread_exit=c=>(Go=i.__emscripten_thread_exit=X.Fa)(c),Wa=i.__emscripten_check_mailbox=()=>(Wa=i.__emscripten_check_mailbox=X.Ga)(),Va=c=>(Va=X.Ha)(c),Ha=(c,d)=>(Ha=X.Ia)(c,d),Uo=()=>(Uo=X.Ja)(),Sn=c=>(Sn=X.Ka)(c),zo=c=>(zo=X.La)(c);i.___start_em_js=906844,i.___stop_em_js=907456;function Sd(c){c=Object.assign({},c);var d=_=>()=>_()>>>0,g=_=>F=>_(F)>>>0;return c.__errno_location=d(c.__errno_location),c.pthread_self=d(c.pthread_self),c.malloc=g(c.malloc),c.stackSave=d(c.stackSave),c.stackAlloc=g(c.stackAlloc),c}i.keepRuntimeAlive=Tt,i.wasmMemory=J,i.stackAlloc=zo,i.stackSave=Uo,i.stackRestore=Sn,i.addFunction=Ma,i.UTF8ToString=At,i.stringToUTF8=W,i.lengthBytesUTF8=A,i.ExitStatus=_r,i.PThread=Z;var An;qt=function c(){An||ja(),An||(qt=c)};function ja(){function c(){if(!An&&(An=!0,i.calledRun=!0,!ke)&&(S||nr(at),u(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),!S)){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;){var d=i.postRun.shift();Be.unshift(d)}nr(Be)}}if(!(0<st))if(S)u(i),S||nr(at),startWorker(i);else{if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)yt.unshift(i.preRun.shift());nr(yt),0<st||(i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),c()},1)):c())}}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return ja(),t.ready}})();typeof Bp=="object"&&typeof ra=="object"?ra.exports=$p:typeof define=="function"&&define.amd&&define([],()=>$p)});var Np=be((rO,lg)=>{lg.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>(0,eval)(fs.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason??e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err("worker.js received unknown command "+e.data.cmd),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed&&Module.__emscripten_thread_crashed(),a}}self.onmessage=handleMessage;\n'});var Gp,fg,na,oa,Ao,Mp,cg,pg,dg,Up,Le,Wr=D(()=>{"use strict";Gp=Dp();fg=Rp(),oa=!1,Ao=!1,Mp=!1,cg=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},pg=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},dg=(a,t)=>a?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Up=async a=>{if(oa)return Promise.resolve();if(Ao)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Mp)throw new Error("previous call to 'initializeWebAssembly()' failed.");Ao=!0;let t=a.initTimeout,n=a.numThreads,e=a.simd,r=n>1&&cg(),o=e&&pg(),s=a.wasmPaths,i=typeof s=="string"?s:void 0,u=dg(o,r),l=typeof s=="object"?s[u]:void 0,f=!1,p=[];if(t>0&&p.push(new Promise(b=>{setTimeout(()=>{f=!0,b()},t)})),p.push(new Promise((b,x)=>{let I=r?fg:Gp,v={locateFile:(S,L)=>r&&S.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Np()],{type:"text/javascript"})):S.endsWith(".wasm")?l||(i??L)+u:L+S};if(r)if(typeof Blob>"u")v.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let S=`var ortWasmThreaded=${I.toString()};`;v.mainScriptUrlOrBlob=new Blob([S],{type:"text/javascript"})}I(v).then(S=>{Ao=!1,oa=!0,na=S,b()},S=>{Ao=!1,Mp=!0,x(S)})})),await Promise.race(p),f)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},Le=()=>{if(oa&&na)return na;throw new Error("WebAssembly is not initialized yet.")}});var Fe,bn,Ae,Po=D(()=>{"use strict";Wr();Fe=(a,t)=>{let n=Le(),e=n.lengthBytesUTF8(a)+1,r=n._malloc(e);return n.stringToUTF8(a,r,e),t.push(r),r},bn=(a,t,n,e)=>{if(typeof a=="object"&&a!==null){if(n.has(a))throw new Error("Circular reference in options");n.add(a)}Object.entries(a).forEach(([r,o])=>{let s=t?t+r:r;if(typeof o=="object")bn(o,s+".",n,e);else if(typeof o=="string"||typeof o=="number")e(s,o.toString());else if(typeof o=="boolean")e(s,o?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof o}`)})},Ae=a=>{let t=Le(),n=t.stackSave();try{let e=t.stackAlloc(8);t._OrtGetLastError(e,e+4);let r=t.HEAP32[e/4],o=t.HEAPU32[e/4+1],s=o?t.UTF8ToString(o):"";throw new Error(`${a} ERROR_CODE: ${r}, ERROR_MESSAGE: ${s}`)}finally{t.stackRestore(n)}}});var zp,Wp=D(()=>{"use strict";Wr();Po();zp=a=>{let t=Le(),n=0,e=[],r=a||{};try{if(a?.logSeverityLevel===void 0)r.logSeverityLevel=2;else if(typeof a.logSeverityLevel!="number"||!Number.isInteger(a.logSeverityLevel)||a.logSeverityLevel<0||a.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${a.logSeverityLevel}`);if(a?.logVerbosityLevel===void 0)r.logVerbosityLevel=0;else if(typeof a.logVerbosityLevel!="number"||!Number.isInteger(a.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${a.logVerbosityLevel}`);a?.terminate===void 0&&(r.terminate=!1);let o=0;return a?.tag!==void 0&&(o=Fe(a.tag,e)),n=t._OrtCreateRunOptions(r.logSeverityLevel,r.logVerbosityLevel,!!r.terminate,o),n===0&&Ae("Can't create run options."),a?.extra!==void 0&&bn(a.extra,"",new WeakSet,(s,i)=>{let u=Fe(s,e),l=Fe(i,e);t._OrtAddRunConfigEntry(n,u,l)!==0&&Ae(`Can't set a run config entry: ${s} - ${i}.`)}),[n,e]}catch(o){throw n!==0&&t._OrtReleaseRunOptions(n),e.forEach(s=>t._free(s)),o}}});var hg,mg,bg,gg,Vp,Hp=D(()=>{"use strict";Wr();Po();hg=a=>{switch(a){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${a}`)}},mg=a=>{switch(a){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${a}`)}},bg=a=>{a.extra||(a.extra={}),a.extra.session||(a.extra.session={});let t=a.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),a.executionProviders&&a.executionProviders.some(n=>(typeof n=="string"?n:n.name)==="webgpu")&&(a.enableMemPattern=!1)},gg=(a,t,n)=>{for(let e of t){let r=typeof e=="string"?e:e.name;switch(r){case"xnnpack":r="XNNPACK";break;case"webnn":if(r="WEBNN",typeof e!="string"){let s=e;if(s?.deviceType){let i=Fe("deviceType",n),u=Fe(s.deviceType,n);Le()._OrtAddSessionConfigEntry(a,i,u)!==0&&Ae(`Can't set a session config entry: 'deviceType' - ${s.deviceType}.`)}if(s?.numThreads){let i=s.numThreads;(typeof i!="number"||!Number.isInteger(i)||i<0)&&(i=0);let u=Fe("numThreads",n),l=Fe(i.toString(),n);Le()._OrtAddSessionConfigEntry(a,u,l)!==0&&Ae(`Can't set a session config entry: 'numThreads' - ${s.numThreads}.`)}if(s?.powerPreference){let i=Fe("powerPreference",n),u=Fe(s.powerPreference,n);Le()._OrtAddSessionConfigEntry(a,i,u)!==0&&Ae(`Can't set a session config entry: 'powerPreference' - ${s.powerPreference}.`)}}break;case"webgpu":if(r="JS",typeof e!="string"){let s=e;if(s?.preferredLayout){if(s.preferredLayout!=="NCHW"&&s.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${s.preferredLayout}`);let i=Fe("preferredLayout",n),u=Fe(s.preferredLayout,n);Le()._OrtAddSessionConfigEntry(a,i,u)!==0&&Ae(`Can't set a session config entry: 'preferredLayout' - ${s.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${r}`)}let o=Fe(r,n);Le()._OrtAppendExecutionProvider(a,o)!==0&&Ae(`Can't append execution provider: ${r}.`)}},Vp=a=>{let t=Le(),n=0,e=[],r=a||{};bg(r);try{let o=hg(r.graphOptimizationLevel??"all"),s=mg(r.executionMode??"sequential"),i=typeof r.logId=="string"?Fe(r.logId,e):0,u=r.logSeverityLevel??2;if(!Number.isInteger(u)||u<0||u>4)throw new Error(`log serverity level is not valid: ${u}`);let l=r.logVerbosityLevel??0;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log verbosity level is not valid: ${l}`);let f=typeof r.optimizedModelFilePath=="string"?Fe(r.optimizedModelFilePath,e):0;if(n=t._OrtCreateSessionOptions(o,!!r.enableCpuMemArena,!!r.enableMemPattern,s,!!r.enableProfiling,0,i,u,l,f),n===0&&Ae("Can't create session options."),r.executionProviders&&gg(n,r.executionProviders,e),r.freeDimensionOverrides)for(let[p,b]of Object.entries(r.freeDimensionOverrides)){if(typeof p!="string")throw new Error(`free dimension override name must be a string: ${p}`);if(typeof b!="number"||!Number.isInteger(b)||b<0)throw new Error(`free dimension override value must be a non-negative integer: ${b}`);let x=Fe(p,e);t._OrtAddFreeDimensionOverride(n,x,b)!==0&&Ae(`Can't set a free dimension override: ${p} - ${b}.`)}return r.extra!==void 0&&bn(r.extra,"",new WeakSet,(p,b)=>{let x=Fe(p,e),I=Fe(b,e);t._OrtAddSessionConfigEntry(n,x,I)!==0&&Ae(`Can't set a session config entry: ${p} - ${b}.`)}),[n,e]}catch(o){throw n!==0&&t._OrtReleaseSessionOptions(n),e.forEach(s=>t._free(s)),o}}});var ia,jp,aa,qp,Yp,Eo,Xp,sa=D(()=>{"use strict";ia=a=>{switch(a){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${a}`)}},jp=a=>{switch(a){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${a}`)}},aa=a=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][a],qp=a=>{switch(a){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${a}`)}},Yp=a=>{switch(a){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${a}`)}},Eo=a=>a==="float32"||a==="int32"||a==="int64"||a==="bool"||a==="float16"||a==="uint32",Xp=a=>{switch(a){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${a}`)}}});var Jp,yg,Tg,Zp,gn,Qp,ua,la,ed,td,Kp,rd,nd,od,id=D(()=>{"use strict";Wp();Hp();sa();Wr();Po();Jp=!1,yg=a=>{let t=Le(),n=t.stackSave();try{let e=t.stackAlloc(8);return t._OrtGetInputOutputCount(a,e,e+4)!==0&&Ae("Can't get session input/output count."),[t.HEAP32[e/4],t.HEAP32[e/4+1]]}finally{t.stackRestore(n)}},Tg=(a,t)=>{Le()._OrtInit(a,t)!==0&&Ae("Can't initialize onnxruntime.")},Zp=async a=>{Tg(a.wasm.numThreads,Yp(a.logLevel)),Jp=!0},gn=new Map,Qp=()=>Jp,ua=a=>{let t=Le(),n=t._malloc(a.byteLength);if(n===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${a.byteLength}.`);return t.HEAPU8.set(a,n),[n,a.byteLength]},la=(a,t)=>{let n=Le(),e=0,r=0,o=0,s=[],i=[],u=[];try{[r,s]=Vp(t),e=n._OrtCreateSession(a[0],a[1],r),e===0&&Ae("Can't create a session.");let[l,f]=yg(e),p=[],b=[],x=[];for(let v=0;v<l;v++){let S=n._OrtGetInputName(e,v);S===0&&Ae("Can't get an input name."),i.push(S),p.push(n.UTF8ToString(S))}for(let v=0;v<f;v++){let S=n._OrtGetOutputName(e,v);S===0&&Ae("Can't get an output name."),u.push(S);let L=n.UTF8ToString(S);b.push(L)}let I=null;return gn.set(e,[e,i,u,I]),[e,p,b]}catch(l){throw i.forEach(f=>n._OrtFree(f)),u.forEach(f=>n._OrtFree(f)),o!==0&&n._OrtReleaseBinding(o),e!==0&&n._OrtReleaseSession(e),l}finally{n._free(a[0]),r!==0&&n._OrtReleaseSessionOptions(r),s.forEach(l=>n._free(l))}},ed=(a,t)=>{let n=ua(a);return la(n,t)},td=a=>{let t=Le(),n=gn.get(a);if(!n)throw new Error(`cannot release session. invalid session id: ${a}`);let[e,r,o,s]=n;s&&t._OrtReleaseBinding(s.handle),t.jsepUnregisterBuffers?.(a),r.forEach(i=>t._OrtFree(i)),o.forEach(i=>t._OrtFree(i)),t._OrtReleaseSession(e),gn.delete(a)},Kp=(a,t,n,e,r)=>{if(!a){t.push(0);return}let o=Le(),s=a[0],i=a[1],u=a[3],l,f;if(s==="string"&&u==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(u==="gpu-buffer"){let x=a[2].gpuBuffer,I=aa(ia(s));f=i.reduce((v,S)=>v*S,1)*I,l=o.jsepRegisterBuffer(e,r,x,f)}else{let x=a[2];if(Array.isArray(x)){f=4*x.length,l=o._malloc(f),n.push(l);let I=l/4;for(let v=0;v<x.length;v++){if(typeof x[v]!="string")throw new TypeError(`tensor data at index ${v} is not a string`);o.HEAPU32[I++]=Fe(x[v],n)}}else f=x.byteLength,l=o._malloc(f),n.push(l),o.HEAPU8.set(new Uint8Array(x.buffer,x.byteOffset,f),l)}let p=o.stackSave(),b=o.stackAlloc(4*i.length);try{let x=b/4;i.forEach(v=>o.HEAP32[x++]=v);let I=o._OrtCreateTensor(ia(s),l,f,b,i.length,Xp(u));I===0&&Ae(`Can't create tensor for input/output. session=${e}, index=${r}.`),t.push(I)}finally{o.stackRestore(p)}},rd=async(a,t,n,e,r,o)=>{let s=Le(),i=gn.get(a);if(!i)throw new Error(`cannot run inference. invalid session id: ${a}`);let[u,l,f,p]=i,b=t.length,x=e.length,I=0,v=[],S=[],L=[],B=[],M=s.stackSave(),Q=s.stackAlloc(b*4),N=s.stackAlloc(b*4),he=s.stackAlloc(x*4),Ie=s.stackAlloc(x*4);try{[I,v]=zp(o);for(let J=0;J<b;J++)Kp(n[J],S,B,a,t[J]);for(let J=0;J<x;J++)Kp(r[J],L,B,a,b+e[J]);let xe=Q/4,V=N/4,we=he/4,H=Ie/4;for(let J=0;J<b;J++)s.HEAPU32[xe++]=S[J],s.HEAPU32[V++]=l[t[J]];for(let J=0;J<x;J++)s.HEAPU32[we++]=L[J],s.HEAPU32[H++]=f[e[J]];let Ce;Ce=await s._OrtRun(u,N,Q,b,Ie,x,he,I),Ce!==0&&Ae("failed to call OrtRun().");let gt=[];for(let J=0;J<x;J++){let X=s.HEAPU32[he/4+J];if(X===L[J]){gt.push(r[J]);continue}let rr=s.stackSave(),ke=s.stackAlloc(4*4),Xe=!1,me,qe=0;try{s._OrtGetTensorData(X,ke,ke+4,ke+8,ke+12)!==0&&Ae(`Can't access output tensor data on index ${J}.`);let Qe=ke/4,Vt=s.HEAPU32[Qe++];qe=s.HEAPU32[Qe++];let it=s.HEAPU32[Qe++],Ht=s.HEAPU32[Qe++],$e=[];for(let Be=0;Be<Ht;Be++)$e.push(s.HEAPU32[it/4+Be]);s._OrtFree(it);let yt=$e.reduce((Be,Ne)=>Be*Ne,1);me=jp(Vt);let at=p?.outputPreferredLocations[e[J]];if(me==="string"){if(at==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Be=[],Ne=qe/4;for(let Tt=0;Tt<yt;Tt++){let st=s.HEAPU32[Ne++],jt=Tt===yt-1?void 0:s.HEAPU32[Ne]-st;Be.push(s.UTF8ToString(st,jt))}gt.push([me,$e,Be,"cpu"])}else if(at==="gpu-buffer"&&yt>0){let Be=s.jsepGetBuffer(qe),Ne=aa(Vt);if(Ne===void 0||!Eo(me))throw new Error(`Unsupported data type: ${me}`);Xe=!0,gt.push([me,$e,{gpuBuffer:Be,download:s.jsepCreateDownloader(Be,yt*Ne,me),dispose:()=>{s._OrtReleaseTensor(X)}},"gpu-buffer"])}else{let Be=qp(me),Ne=new Be(yt);new Uint8Array(Ne.buffer,Ne.byteOffset,Ne.byteLength).set(s.HEAPU8.subarray(qe,qe+Ne.byteLength)),gt.push([me,$e,Ne,"cpu"])}}finally{s.stackRestore(rr),me==="string"&&qe&&s._free(qe),Xe||s._OrtReleaseTensor(X)}}return p&&s._OrtClearBoundOutputs(p.handle),gt}finally{s.stackRestore(M),S.forEach(xe=>s._OrtReleaseTensor(xe)),L.forEach(xe=>s._OrtReleaseTensor(xe)),B.forEach(xe=>s._free(xe)),I!==0&&s._OrtReleaseRunOptions(I),v.forEach(xe=>s._free(xe))}},nd=a=>{let t=Le(),n=gn.get(a);if(!n)throw new Error("invalid session id");let e=n[0],r=t._OrtEndProfiling(e);r===0&&Ae("Can't get an profile file name."),t._OrtFree(r)},od=a=>{let t=[];for(let n of a){let e=n[2];!Array.isArray(e)&&"buffer"in e&&t.push(e.buffer)}return t}});var ad=be((TO,vg)=>{vg.exports='/*!\n * ONNX Runtime Web v1.17.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var Tt=Object.defineProperty;var Zr=Object.getOwnPropertyDescriptor;var Kr=Object.getOwnPropertyNames;var en=Object.prototype.hasOwnProperty;var Rt=(l,c)=>()=>(l&&(c=l(l=0)),c);var at=(l,c)=>()=>(c||l((c={exports:{}}).exports,c),c.exports),Dt=(l,c)=>{for(var a in c)Tt(l,a,{get:c[a],enumerable:!0})},tn=(l,c,a,w)=>{if(c&&typeof c=="object"||typeof c=="function")for(let d of Kr(c))!en.call(l,d)&&d!==a&&Tt(l,d,{get:()=>c[d],enumerable:!(w=Zr(c,d))||w.enumerable});return l};var ot=l=>tn(Tt({},"__esModule",{value:!0}),l);var Ct={};Dt(Ct,{readFile:()=>rn});var rn,xt=Rt(()=>{rn=void 0});var It={};Dt(It,{join:()=>nn});var nn,Ft=Rt(()=>{nn=void 0});var yr=at((hr,Ut)=>{"use strict";var gr=(()=>{var l=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(l=l||__filename),function(c={}){var a=c,w,d;a.ready=new Promise((r,o)=>{w=r,d=o});var v=Object.assign({},a),y="./this.program",s=typeof window=="object",x=typeof importScripts=="function",I=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",F="",N,U,W;if(I){var H=(xt(),ot(Ct)),C=(Ft(),ot(It));F=x?C.dirname(F)+"/":__dirname+"/",N=(r,o)=>(r=r.startsWith("file://")?new URL(r):C.normalize(r),H.readFileSync(r,o?void 0:"utf8")),W=r=>(r=N(r,!0),r.buffer||(r=new Uint8Array(r)),r),U=(r,o,i,f=!0)=>{r=r.startsWith("file://")?new URL(r):C.normalize(r),H.readFile(r,f?void 0:"utf8",(O,_)=>{O?i(O):o(f?_.buffer:_)})},!a.thisProgram&&1<process.argv.length&&(y=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),a.inspect=()=>"[Emscripten Module object]"}else(s||x)&&(x?F=self.location.href:typeof document<"u"&&document.currentScript&&(F=document.currentScript.src),l&&(F=l),F.indexOf("blob:")!==0?F=F.substr(0,F.replace(/[?#].*/,"").lastIndexOf("/")+1):F="",N=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.send(null),o.responseText},x&&(W=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),U=(r,o,i)=>{var f=new XMLHttpRequest;f.open("GET",r,!0),f.responseType="arraybuffer",f.onload=()=>{f.status==200||f.status==0&&f.response?o(f.response):i()},f.onerror=i,f.send(null)});var S=a.print||console.log.bind(console),B=a.printErr||console.error.bind(console);Object.assign(a,v),v=null,a.thisProgram&&(y=a.thisProgram);var fe;a.wasmBinary&&(fe=a.wasmBinary);var Be=a.noExitRuntime||!0;typeof WebAssembly!="object"&&ue("no native wasm support detected");var pe,D,Oe=!1,we,q,A,te;function ae(){var r=pe.buffer;a.HEAP8=we=new Int8Array(r),a.HEAP16=new Int16Array(r),a.HEAP32=A=new Int32Array(r),a.HEAPU8=q=new Uint8Array(r),a.HEAPU16=new Uint16Array(r),a.HEAPU32=te=new Uint32Array(r),a.HEAPF32=new Float32Array(r),a.HEAPF64=new Float64Array(r)}var Q,be=[],T=[],E=[];function We(){var r=a.preRun.shift();be.unshift(r)}var Z=0,le=null,j=null;function ue(r){throw a.onAbort&&a.onAbort(r),r="Aborted("+r+")",B(r),Oe=!0,r=new WebAssembly.RuntimeError(r+". Build with -sASSERTIONS for more info."),d(r),r}function Ne(r){return r.startsWith("data:application/octet-stream;base64,")}var ce;if(ce="ort-wasm.wasm",!Ne(ce)){var xe=ce;ce=a.locateFile?a.locateFile(xe,F):F+xe}function me(r){if(r==ce&&fe)return new Uint8Array(fe);if(W)return W(r);throw"both async and sync fetching of the wasm failed"}function Ie(r){if(!fe&&(s||x)){if(typeof fetch=="function"&&!r.startsWith("file://"))return fetch(r,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at \'"+r+"\'";return o.arrayBuffer()}).catch(()=>me(r));if(U)return new Promise((o,i)=>{U(r,f=>o(new Uint8Array(f)),i)})}return Promise.resolve().then(()=>me(r))}function K(r,o,i){return Ie(r).then(f=>WebAssembly.instantiate(f,o)).then(f=>f).then(i,f=>{B("failed to asynchronously prepare wasm: "+f),ue(f)})}function _e(r,o){var i=ce;return fe||typeof WebAssembly.instantiateStreaming!="function"||Ne(i)||i.startsWith("file://")||I||typeof fetch!="function"?K(i,r,o):fetch(i,{credentials:"same-origin"}).then(f=>WebAssembly.instantiateStreaming(f,r).then(o,function(O){return B("wasm streaming compile failed: "+O),B("falling back to ArrayBuffer instantiation"),K(i,r,o)}))}var ge,ee=r=>{for(;0<r.length;)r.shift()(a)};function re(r){this.xa=r-24,this.Ga=function(o){te[this.xa+4>>2>>>0]=o},this.Fa=function(o){te[this.xa+8>>2>>>0]=o},this.za=function(o,i){this.Ea(),this.Ga(o),this.Fa(i)},this.Ea=function(){te[this.xa+16>>2>>>0]=0}}var ve=0,he=0,Fe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ue=(r,o,i)=>{o>>>=0;var f=o+i;for(i=o;r[i]&&!(i>=f);)++i;if(16<i-o&&r.buffer&&Fe)return Fe.decode(r.subarray(o,i));for(f="";o<i;){var O=r[o++];if(O&128){var _=r[o++]&63;if((O&224)==192)f+=String.fromCharCode((O&31)<<6|_);else{var M=r[o++]&63;O=(O&240)==224?(O&15)<<12|_<<6|M:(O&7)<<18|_<<12|M<<6|r[o++]&63,65536>O?f+=String.fromCharCode(O):(O-=65536,f+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else f+=String.fromCharCode(O)}return f},He=(r,o)=>(r>>>=0)?Ue(q,r,o):"",ke=r=>{for(var o=0,i=0;i<r.length;++i){var f=r.charCodeAt(i);127>=f?o++:2047>=f?o+=2:55296<=f&&57343>=f?(o+=4,++i):o+=3}return o},Ae=(r,o,i,f)=>{if(i>>>=0,!(0<f))return 0;var O=i;f=i+f-1;for(var _=0;_<r.length;++_){var M=r.charCodeAt(_);if(55296<=M&&57343>=M){var k=r.charCodeAt(++_);M=65536+((M&1023)<<10)|k&1023}if(127>=M){if(i>=f)break;o[i++>>>0]=M}else{if(2047>=M){if(i+1>=f)break;o[i++>>>0]=192|M>>6}else{if(65535>=M){if(i+2>=f)break;o[i++>>>0]=224|M>>12}else{if(i+3>=f)break;o[i++>>>0]=240|M>>18,o[i++>>>0]=128|M>>12&63}o[i++>>>0]=128|M>>6&63}o[i++>>>0]=128|M&63}}return o[i>>>0]=0,i-O},Te=r=>r%4===0&&(r%100!==0||r%400===0),Re=[0,31,60,91,121,152,182,213,244,274,305,335],Je=[0,31,59,90,120,151,181,212,243,273,304,334],ut=r=>{var o=ke(r)+1,i=Pe(o);return i&&Ae(r,q,i,o),i},ze={},lt=()=>{if(!Se){var r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"},o;for(o in ze)ze[o]===void 0?delete r[o]:r[o]=ze[o];var i=[];for(o in r)i.push(`${o}=${r[o]}`);Se=i}return Se},Se,je=[null,[],[]],Ye=[31,29,31,30,31,30,31,31,30,31,30,31],Xe=[31,28,31,30,31,30,31,31,30,31,30,31];function ft(r){var o=Array(ke(r)+1);return Ae(r,o,0,o.length),o}function Qe(r,o,i,f){function O(p,L,Y){for(p=typeof p=="number"?p.toString():p||"";p.length<L;)p=Y[0]+p;return p}function _(p,L){return O(p,L,"0")}function M(p,L){function Y(pt){return 0>pt?-1:0<pt?1:0}var Me;return(Me=Y(p.getFullYear()-L.getFullYear()))===0&&(Me=Y(p.getMonth()-L.getMonth()))===0&&(Me=Y(p.getDate()-L.getDate())),Me}function k(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function oe(p){var L=p.ta;for(p=new Date(new Date(p.ua+1900,0,1).getTime());0<L;){var Y=p.getMonth(),Me=(Te(p.getFullYear())?Ye:Xe)[Y];if(L>Me-p.getDate())L-=Me-p.getDate()+1,p.setDate(1),11>Y?p.setMonth(Y+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+L);break}}return Y=new Date(p.getFullYear()+1,0,4),L=k(new Date(p.getFullYear(),0,4)),Y=k(Y),0>=M(L,p)?0>=M(Y,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}r>>>=0,o>>>=0,i>>>=0,f>>>=0;var se=A[f+40>>2>>>0];f={Ca:A[f>>2>>>0],Ba:A[f+4>>2>>>0],va:A[f+8>>2>>>0],ya:A[f+12>>2>>>0],wa:A[f+16>>2>>>0],ua:A[f+20>>2>>>0],sa:A[f+24>>2>>>0],ta:A[f+28>>2>>>0],Ha:A[f+32>>2>>>0],Aa:A[f+36>>2>>>0],Da:se?He(se):""},i=He(i),se={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ie in se)i=i.replace(new RegExp(ie,"g"),se[ie]);var rt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),nt="January February March April May June July August September October November December".split(" ");se={"%a":p=>rt[p.sa].substring(0,3),"%A":p=>rt[p.sa],"%b":p=>nt[p.wa].substring(0,3),"%B":p=>nt[p.wa],"%C":p=>_((p.ua+1900)/100|0,2),"%d":p=>_(p.ya,2),"%e":p=>O(p.ya,2," "),"%g":p=>oe(p).toString().substring(2),"%G":p=>oe(p),"%H":p=>_(p.va,2),"%I":p=>(p=p.va,p==0?p=12:12<p&&(p-=12),_(p,2)),"%j":p=>{for(var L=0,Y=0;Y<=p.wa-1;L+=(Te(p.ua+1900)?Ye:Xe)[Y++]);return _(p.ya+L,3)},"%m":p=>_(p.wa+1,2),"%M":p=>_(p.Ba,2),"%n":()=>`\n`,"%p":p=>0<=p.va&&12>p.va?"AM":"PM","%S":p=>_(p.Ca,2),"%t":()=>"	","%u":p=>p.sa||7,"%U":p=>_(Math.floor((p.ta+7-p.sa)/7),2),"%V":p=>{var L=Math.floor((p.ta+7-(p.sa+6)%7)/7);if(2>=(p.sa+371-p.ta-2)%7&&L++,L)L==53&&(Y=(p.sa+371-p.ta)%7,Y==4||Y==3&&Te(p.ua)||(L=1));else{L=52;var Y=(p.sa+7-p.ta-1)%7;(Y==4||Y==5&&Te(p.ua%400-1))&&L++}return _(L,2)},"%w":p=>p.sa,"%W":p=>_(Math.floor((p.ta+7-(p.sa+6)%7)/7),2),"%y":p=>(p.ua+1900).toString().substring(2),"%Y":p=>p.ua+1900,"%z":p=>{p=p.Aa;var L=0<=p;return p=Math.abs(p)/60,(L?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.Da,"%%":()=>"%"},i=i.replace(/%%/g,"\\0\\0");for(ie in se)i.includes(ie)&&(i=i.replace(new RegExp(ie,"g"),se[ie](f)));return i=i.replace(/\\0\\0/g,"%"),ie=ft(i),ie.length>o?0:(we.set(ie,r>>>0),ie.length-1)}var De=[],Ee=void 0,Ze=[];function Ge(r,o){if(!Ee){Ee=new WeakMap;var i=Q.length;if(Ee)for(var f=0;f<0+i;f++){var O=f,_=De[O];_||(O>=De.length&&(De.length=O+1),De[O]=_=Q.get(O)),(O=_)&&Ee.set(O,f)}}if(i=Ee.get(r)||0)return i;if(Ze.length)i=Ze.pop();else{try{Q.grow(1)}catch(k){throw k instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":k}i=Q.length-1}try{f=i,Q.set(f,r),De[f]=Q.get(f)}catch(k){if(!(k instanceof TypeError))throw k;if(typeof WebAssembly.Function=="function"){f=WebAssembly.Function,O={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"},_={parameters:[],results:o[0]=="v"?[]:[O[o[0]]]};for(var M=1;M<o.length;++M)_.parameters.push(O[o[M]]);o=new f(_,r)}else{for(f=[1],O=o.slice(0,1),o=o.slice(1),_={i:127,p:127,j:126,f:125,d:124},f.push(96),M=o.length,128>M?f.push(M):f.push(M%128|128,M>>7),M=0;M<o.length;++M)f.push(_[o[M]]);O=="v"?f.push(0):f.push(1,_[O]),o=[0,97,115,109,1,0,0,0,1],O=f.length,128>O?o.push(O):o.push(O%128|128,O>>7),o.push.apply(o,f),o.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),o=new WebAssembly.Module(new Uint8Array(o)),o=new WebAssembly.Instance(o,{e:{f:r}}).exports.f}f=i,Q.set(f,o),De[f]=Q.get(f)}return Ee.set(r,i),i}var R={a:function(r,o,i){throw r>>>=0,new re(r).za(o>>>0,i>>>0),ve=r,he++,ve},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},l:()=>!0,o:function(r,o,i){r=o+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*o:NaN,i>>>=0,r=new Date(1e3*r),A[i>>2>>>0]=r.getUTCSeconds(),A[i+4>>2>>>0]=r.getUTCMinutes(),A[i+8>>2>>>0]=r.getUTCHours(),A[i+12>>2>>>0]=r.getUTCDate(),A[i+16>>2>>>0]=r.getUTCMonth(),A[i+20>>2>>>0]=r.getUTCFullYear()-1900,A[i+24>>2>>>0]=r.getUTCDay(),A[i+28>>2>>>0]=(r.getTime()-Date.UTC(r.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},p:function(r,o,i){r=o+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*o:NaN,i>>>=0,r=new Date(1e3*r),A[i>>2>>>0]=r.getSeconds(),A[i+4>>2>>>0]=r.getMinutes(),A[i+8>>2>>>0]=r.getHours(),A[i+12>>2>>>0]=r.getDate(),A[i+16>>2>>>0]=r.getMonth(),A[i+20>>2>>>0]=r.getFullYear()-1900,A[i+24>>2>>>0]=r.getDay(),A[i+28>>2>>>0]=(Te(r.getFullYear())?Re:Je)[r.getMonth()]+r.getDate()-1|0,A[i+36>>2>>>0]=-(60*r.getTimezoneOffset()),o=new Date(r.getFullYear(),6,1).getTimezoneOffset();var f=new Date(r.getFullYear(),0,1).getTimezoneOffset();A[i+32>>2>>>0]=(o!=f&&r.getTimezoneOffset()==Math.min(f,o))|0},q:function(r){r>>>=0;var o=new Date(A[r+20>>2>>>0]+1900,A[r+16>>2>>>0],A[r+12>>2>>>0],A[r+8>>2>>>0],A[r+4>>2>>>0],A[r>>2>>>0],0),i=A[r+32>>2>>>0],f=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),_=new Date(o.getFullYear(),0,1).getTimezoneOffset(),M=Math.min(_,O);return 0>i?A[r+32>>2>>>0]=+(O!=_&&M==f):0<i!=(M==f)&&(O=Math.max(_,O),o.setTime(o.getTime()+6e4*((0<i?M:O)-f))),A[r+24>>2>>>0]=o.getDay(),A[r+28>>2>>>0]=(Te(o.getFullYear())?Re:Je)[o.getMonth()]+o.getDate()-1|0,A[r>>2>>>0]=o.getSeconds(),A[r+4>>2>>>0]=o.getMinutes(),A[r+8>>2>>>0]=o.getHours(),A[r+12>>2>>>0]=o.getDate(),A[r+16>>2>>>0]=o.getMonth(),A[r+20>>2>>>0]=o.getYear(),r=o.getTime()/1e3,Ke((ge=r,1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)),r>>>0},m:function(){return-52},n:function(){},t:function(r,o,i){function f(oe){return(oe=oe.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?oe[1]:"GMT"}i>>>=0;var O=new Date().getFullYear(),_=new Date(O,0,1),M=new Date(O,6,1);O=_.getTimezoneOffset();var k=M.getTimezoneOffset();te[r>>>0>>2>>>0]=60*Math.max(O,k),A[o>>>0>>2>>>0]=+(O!=k),r=f(_),o=f(M),r=ut(r),o=ut(o),k<O?(te[i>>2>>>0]=r,te[i+4>>2>>>0]=o):(te[i>>2>>>0]=o,te[i+4>>2>>>0]=r)},d:()=>{ue("")},h:function(){return Date.now()},u:function(){return 4294901760},b:()=>performance.now(),I:function(r,o,i){return o>>>=0,q.copyWithin(r>>>0>>>0,o>>>0,o+(i>>>0)>>>0)},s:function(r){r>>>=0;var o=q.length;if(4294901760<r)return!1;for(var i=1;4>=i;i*=2){var f=o*(1+.2/i);f=Math.min(f,r+100663296);var O=Math;f=Math.max(r,f);e:{O=O.min.call(O,4294901760,f+(65536-f%65536)%65536)-pe.buffer.byteLength+65535>>>16;try{pe.grow(O),ae();var _=1;break e}catch{}_=void 0}if(_)return!0}return!1},C:function(r,o){r>>>=0,o>>>=0;var i=0;return lt().forEach(function(f,O){var _=o+i;for(O=te[r+4*O>>2>>>0]=_,_=0;_<f.length;++_)we[O++>>0>>>0]=f.charCodeAt(_);we[O>>0>>>0]=0,i+=f.length+1}),0},D:function(r,o){r>>>=0,o>>>=0;var i=lt();te[r>>2>>>0]=i.length;var f=0;return i.forEach(function(O){f+=O.length+1}),te[o>>2>>>0]=f,0},f:()=>52,k:function(){return 52},r:function(){return 70},j:function(r,o,i,f){o>>>=0,i>>>=0,f>>>=0;for(var O=0,_=0;_<i;_++){var M=te[o>>2>>>0],k=te[o+4>>2>>>0];o+=8;for(var oe=0;oe<k;oe++){var se=q[M+oe>>>0],ie=je[r];se===0||se===10?((r===1?S:B)(Ue(ie,0)),ie.length=0):ie.push(se)}O+=k}return te[f>>2>>>0]=O,0},B:Qe,c:function(r,o,i,f){return Qe(r>>>0,o>>>0,i>>>0,f>>>0)},i:function(r,o,i,f){let O=Q.length;r=new Uint8Array(q.slice(r+o,r+i));try{var _=new WebAssembly.Module(r),M=new WebAssembly.Instance(_,{env:{memory:pe}}),k;for(k in M.exports)Ge(M.exports[k]);return O<Q.length?O:f}catch(oe){return console.log(oe),f}}};(function(){function r(i){if(i=i.exports,D=i=dt(i),pe=D.K,ae(),Q=D.na,T.unshift(D.L),Z--,a.monitorRunDependencies&&a.monitorRunDependencies(Z),Z==0&&(le!==null&&(clearInterval(le),le=null),j)){var f=j;j=null,f()}return i}var o={a:R};if(Z++,a.monitorRunDependencies&&a.monitorRunDependencies(Z),a.instantiateWasm)try{return a.instantiateWasm(o,r)}catch(i){B("Module.instantiateWasm callback failed with error: "+i),d(i)}return _e(o,function(i){r(i.instance)}).catch(d),{}})(),a._OrtInit=(r,o)=>(a._OrtInit=D.M)(r,o),a._OrtGetLastError=(r,o)=>(a._OrtGetLastError=D.N)(r,o),a._OrtCreateSessionOptions=(r,o,i,f,O,_,M,k,oe,se)=>(a._OrtCreateSessionOptions=D.O)(r,o,i,f,O,_,M,k,oe,se),a._OrtAppendExecutionProvider=(r,o)=>(a._OrtAppendExecutionProvider=D.P)(r,o),a._OrtAddFreeDimensionOverride=(r,o,i)=>(a._OrtAddFreeDimensionOverride=D.Q)(r,o,i),a._OrtAddSessionConfigEntry=(r,o,i)=>(a._OrtAddSessionConfigEntry=D.R)(r,o,i),a._OrtReleaseSessionOptions=r=>(a._OrtReleaseSessionOptions=D.S)(r),a._OrtCreateSession=(r,o,i)=>(a._OrtCreateSession=D.T)(r,o,i),a._OrtReleaseSession=r=>(a._OrtReleaseSession=D.U)(r),a._OrtGetInputOutputCount=(r,o,i)=>(a._OrtGetInputOutputCount=D.V)(r,o,i),a._OrtGetInputName=(r,o)=>(a._OrtGetInputName=D.W)(r,o),a._OrtGetOutputName=(r,o)=>(a._OrtGetOutputName=D.X)(r,o),a._OrtFree=r=>(a._OrtFree=D.Y)(r),a._OrtCreateTensor=(r,o,i,f,O,_)=>(a._OrtCreateTensor=D.Z)(r,o,i,f,O,_),a._OrtGetTensorData=(r,o,i,f,O)=>(a._OrtGetTensorData=D._)(r,o,i,f,O),a._OrtReleaseTensor=r=>(a._OrtReleaseTensor=D.$)(r),a._OrtCreateRunOptions=(r,o,i,f)=>(a._OrtCreateRunOptions=D.aa)(r,o,i,f),a._OrtAddRunConfigEntry=(r,o,i)=>(a._OrtAddRunConfigEntry=D.ba)(r,o,i),a._OrtReleaseRunOptions=r=>(a._OrtReleaseRunOptions=D.ca)(r),a._OrtCreateBinding=r=>(a._OrtCreateBinding=D.da)(r),a._OrtBindInput=(r,o,i)=>(a._OrtBindInput=D.ea)(r,o,i),a._OrtBindOutput=(r,o,i,f)=>(a._OrtBindOutput=D.fa)(r,o,i,f),a._OrtClearBoundOutputs=r=>(a._OrtClearBoundOutputs=D.ga)(r),a._OrtReleaseBinding=r=>(a._OrtReleaseBinding=D.ha)(r),a._OrtRunWithBinding=(r,o,i,f,O)=>(a._OrtRunWithBinding=D.ia)(r,o,i,f,O),a._OrtRun=(r,o,i,f,O,_,M,k)=>(a._OrtRun=D.ja)(r,o,i,f,O,_,M,k),a._OrtEndProfiling=r=>(a._OrtEndProfiling=D.ka)(r);var Pe=a._malloc=r=>(Pe=a._malloc=D.la)(r);a._free=r=>(a._free=D.ma)(r);var Ke=r=>(Ke=D.oa)(r),Ce=()=>(Ce=D.pa)(),et=r=>(et=D.qa)(r),ct=r=>(ct=D.ra)(r);a.___start_em_js=905600,a.___stop_em_js=906212;function dt(r){r=Object.assign({},r);var o=f=>()=>f()>>>0,i=f=>O=>f(O)>>>0;return r.__errno_location=o(r.__errno_location),r.malloc=i(r.malloc),r.stackSave=o(r.stackSave),r.stackAlloc=i(r.stackAlloc),r}a.stackAlloc=ct,a.stackSave=Ce,a.stackRestore=et,a.addFunction=Ge,a.UTF8ToString=He,a.stringToUTF8=(r,o,i)=>Ae(r,q,o,i),a.lengthBytesUTF8=ke;var $e;j=function r(){$e||tt(),$e||(j=r)};function tt(){function r(){if(!$e&&($e=!0,a.calledRun=!0,!Oe)){if(ee(T),w(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;){var o=a.postRun.shift();E.unshift(o)}ee(E)}}if(!(0<Z)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)We();ee(be),0<Z||(a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),r()},1)):r())}}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);0<a.preInit.length;)a.preInit.pop()();return tt(),c.ready}})();typeof hr=="object"&&typeof Ut=="object"?Ut.exports=gr:typeof define=="function"&&define.amd&&define([],()=>gr)});var Or=at(()=>{});var wr=at(()=>{});var br={};Dt(br,{cpus:()=>an});var an,_r=Rt(()=>{an=void 0});var Er=at((Sr,Wt)=>{"use strict";var vr=(()=>{var l=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(l=l||__filename),function(c={}){function a(){return T.buffer!=j.buffer&&me(),j}function w(){return T.buffer!=j.buffer&&me(),ue}function d(){return T.buffer!=j.buffer&&me(),Ne}function v(){return T.buffer!=j.buffer&&me(),ce}function y(){return T.buffer!=j.buffer&&me(),xe}var s=c,x,I;s.ready=new Promise((e,t)=>{x=e,I=t});var F=Object.assign({},s),N="./this.program",U=(e,t)=>{throw t},W=typeof window=="object",H=typeof importScripts=="function",C=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",S=s.ENVIRONMENT_IS_PTHREAD||!1,B="";function fe(e){return s.locateFile?s.locateFile(e,B):B+e}var Be,pe,D;if(C){var Oe=(xt(),ot(Ct)),we=(Ft(),ot(It));B=H?we.dirname(B)+"/":__dirname+"/",Be=(t,n)=>(t=t.startsWith("file://")?new URL(t):we.normalize(t),Oe.readFileSync(t,n?void 0:"utf8")),D=t=>(t=Be(t,!0),t.buffer||(t=new Uint8Array(t)),t),pe=(t,n,u,g=!0)=>{t=t.startsWith("file://")?new URL(t):we.normalize(t),Oe.readFile(t,g?void 0:"utf8",(h,b)=>{h?u(h):n(g?b.buffer:b)})},!s.thisProgram&&1<process.argv.length&&(N=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),U=(t,n)=>{throw process.exitCode=t,n},s.inspect=()=>"[Emscripten Module object]";let e;try{e=Or()}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}global.Worker=e.Worker}else(W||H)&&(H?B=self.location.href:typeof document<"u"&&document.currentScript&&(B=document.currentScript.src),typeof l<"u"&&l&&(B=l),B.indexOf("blob:")!==0?B=B.substr(0,B.replace(/[?#].*/,"").lastIndexOf("/")+1):B="",C||(Be=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},H&&(D=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),pe=(e,t,n)=>{var u=new XMLHttpRequest;u.open("GET",e,!0),u.responseType="arraybuffer",u.onload=()=>{u.status==200||u.status==0&&u.response?t(u.response):n()},u.onerror=n,u.send(null)}));C&&typeof performance>"u"&&(global.performance=wr().performance);var q=console.log.bind(console),A=console.error.bind(console);C&&(q=(...e)=>Oe.writeSync(1,e.join(" ")+`\n`),A=(...e)=>Oe.writeSync(2,e.join(" ")+`\n`));var te=s.print||q,ae=s.printErr||A;Object.assign(s,F),F=null,s.thisProgram&&(N=s.thisProgram),s.quit&&(U=s.quit);var Q;s.wasmBinary&&(Q=s.wasmBinary);var be=s.noExitRuntime||!0;typeof WebAssembly!="object"&&Ae("no native wasm support detected");var T,E,We,Z=!1,le,j,ue,Ne,ce,xe;function me(){var e=T.buffer;s.HEAP8=j=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAP32=Ne=new Int32Array(e),s.HEAPU8=ue=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAPU32=ce=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=xe=new Float64Array(e)}var Ie=s.INITIAL_MEMORY||16777216;if(5242880<=Ie||Ae("INITIAL_MEMORY should be larger than STACK_SIZE, was "+Ie+"! (STACK_SIZE=5242880)"),S)T=s.wasmMemory;else if(s.wasmMemory)T=s.wasmMemory;else if(T=new WebAssembly.Memory({initial:Ie/65536,maximum:65536,shared:!0}),!(T.buffer instanceof SharedArrayBuffer))throw ae("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),C&&ae("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");me(),Ie=T.buffer.byteLength;var K,_e=[],ge=[],ee=[],re=0;function ve(){return be||0<re}var he=0,Fe=null,Ue=null;function He(){he++,s.monitorRunDependencies&&s.monitorRunDependencies(he)}function ke(){if(he--,s.monitorRunDependencies&&s.monitorRunDependencies(he),he==0&&(Fe!==null&&(clearInterval(Fe),Fe=null),Ue)){var e=Ue;Ue=null,e()}}function Ae(e){throw s.onAbort&&s.onAbort(e),e="Aborted("+e+")",ae(e),Z=!0,le=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),I(e),e}function Te(e){return e.startsWith("data:application/octet-stream;base64,")}var Re;Re="ort-wasm-threaded.wasm",Te(Re)||(Re=fe(Re));function Je(e){if(e==Re&&Q)return new Uint8Array(Q);if(D)return D(e);throw"both async and sync fetching of the wasm failed"}function ut(e){if(!Q&&(W||H)){if(typeof fetch=="function"&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()}).catch(()=>Je(e));if(pe)return new Promise((t,n)=>{pe(e,u=>t(new Uint8Array(u)),n)})}return Promise.resolve().then(()=>Je(e))}function ze(e,t,n){return ut(e).then(u=>WebAssembly.instantiate(u,t)).then(u=>u).then(n,u=>{ae("failed to asynchronously prepare wasm: "+u),Ae(u)})}function lt(e,t){var n=Re;return Q||typeof WebAssembly.instantiateStreaming!="function"||Te(n)||n.startsWith("file://")||C||typeof fetch!="function"?ze(n,e,t):fetch(n,{credentials:"same-origin"}).then(u=>WebAssembly.instantiateStreaming(u,e).then(t,function(g){return ae("wasm streaming compile failed: "+g),ae("falling back to ArrayBuffer instantiation"),ze(n,e,t)}))}var Se;function je(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}function Ye(e){e.terminate(),e.onmessage=()=>{}}function Xe(e){(e=R.Ma[e])||Ae(),R.mb(e)}function ft(e){var t=R.gb();if(!t)return 6;R.Pa.push(t),R.Ma[e.Oa]=t,t.Oa=e.Oa;var n={cmd:"run",start_routine:e.nb,arg:e.fb,pthread_ptr:e.Oa};return C&&t.unref(),t.postMessage(n,e.tb),0}var Qe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,De=(e,t,n)=>{t>>>=0;var u=t+n;for(n=t;e[n]&&!(n>=u);)++n;if(16<n-t&&e.buffer&&Qe)return Qe.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,n):e.subarray(t,n));for(u="";t<n;){var g=e[t++];if(g&128){var h=e[t++]&63;if((g&224)==192)u+=String.fromCharCode((g&31)<<6|h);else{var b=e[t++]&63;g=(g&240)==224?(g&15)<<12|h<<6|b:(g&7)<<18|h<<12|b<<6|e[t++]&63,65536>g?u+=String.fromCharCode(g):(g-=65536,u+=String.fromCharCode(55296|g>>10,56320|g&1023))}}else u+=String.fromCharCode(g)}return u},Ee=(e,t)=>(e>>>=0)?De(w(),e,t):"";function Ze(e){if(S)return G(1,1,e);le=e,ve()||(R.ob(),s.onExit&&s.onExit(e),Z=!0),U(e,new je(e))}var Ge=e=>{if(le=e,S)throw Ke(e),"unwind";Ze(e)},R={Sa:[],Pa:[],$a:[],Ma:{},Wa:function(){S?R.ib():R.hb()},hb:function(){_e.unshift(()=>{He(),R.jb(()=>ke())})},ib:function(){R.receiveObjectTransfer=R.lb,R.threadInitTLS=R.Za,R.setExitStatus=R.Ya,be=!1},Ya:function(e){le=e},yb:["$terminateWorker"],ob:function(){for(var e of R.Pa)Ye(e);for(e of R.Sa)Ye(e);R.Sa=[],R.Pa=[],R.Ma=[]},mb:function(e){var t=e.Oa;delete R.Ma[t],R.Sa.push(e),R.Pa.splice(R.Pa.indexOf(e),1),e.Oa=0,St(t)},lb:function(){},Za:function(){R.$a.forEach(e=>e())},kb:e=>new Promise(t=>{e.onmessage=h=>{h=h.data;var b=h.cmd;if(h.targetThread&&h.targetThread!=gt()){var P=R.Ma[h.xb];P?P.postMessage(h,h.transferList):ae(\'Internal error! Worker sent a message "\'+b+\'" to target pthread \'+h.targetThread+", but that thread no longer exists!")}else b==="checkMailbox"?mt():b==="spawnThread"?ft(h):b==="cleanupThread"?Xe(h.thread):b==="killThread"?(h=h.thread,b=R.Ma[h],delete R.Ma[h],Ye(b),St(h),R.Pa.splice(R.Pa.indexOf(b),1),b.Oa=0):b==="cancelThread"?R.Ma[h.thread].postMessage({cmd:"cancel"}):b==="loaded"?(e.loaded=!0,t(e)):b==="alert"?alert("Thread "+h.threadId+": "+h.text):h.target==="setimmediate"?e.postMessage(h):b==="callHandler"?s[h.handler](...h.args):b&&ae("worker sent an unknown command "+b)},e.onerror=h=>{throw ae("worker sent an error! "+h.filename+":"+h.lineno+": "+h.message),h},C&&(e.on("message",function(h){e.onmessage({data:h})}),e.on("error",function(h){e.onerror(h)}));var n=[],u=["onExit","onAbort","print","printErr"],g;for(g of u)s.hasOwnProperty(g)&&n.push(g);e.postMessage({cmd:"load",handlers:n,urlOrBlob:s.mainScriptUrlOrBlob||l,wasmMemory:T,wasmModule:We})}),jb:function(e){e()},eb:function(){var e=fe("ort-wasm-threaded.worker.js");e=new Worker(e),R.Sa.push(e)},gb:function(){return R.Sa.length==0&&(R.eb(),R.kb(R.Sa[0])),R.Sa.pop()}};s.PThread=R;var Pe=e=>{for(;0<e.length;)e.shift()(s)};s.establishStackSpace=function(){var e=gt(),t=d()[e+52>>2>>>0];e=d()[e+56>>2>>>0],fr(t,t-e),ht(t)};function Ke(e){if(S)return G(2,0,e);Ge(e)}var Ce=[],et=e=>{var t=Ce[e];return t||(e>=Ce.length&&(Ce.length=e+1),Ce[e]=t=K.get(e)),t};s.invokeEntryPoint=function(e,t){e=et(e)(t),ve()?R.Ya(e):Et(e)};function ct(e){this.Va=e-24,this.cb=function(t){v()[this.Va+4>>2>>>0]=t},this.bb=function(t){v()[this.Va+8>>2>>>0]=t},this.Wa=function(t,n){this.ab(),this.cb(t),this.bb(n)},this.ab=function(){v()[this.Va+16>>2>>>0]=0}}var dt=0,$e=0;function tt(e,t,n,u){return S?G(3,1,e,t,n,u):r(e,t,n,u)}function r(e,t,n,u){if(e>>>=0,t>>>=0,n>>>=0,u>>>=0,typeof SharedArrayBuffer>"u")return ae("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var g=[];return S&&g.length===0?tt(e,t,n,u):(e={nb:n,Oa:e,fb:u,tb:g},S?(e.vb="spawnThread",postMessage(e,g),0):ft(e))}function o(e,t,n){return S?G(4,1,e,t,n):0}function i(e,t){if(S)return G(5,1,e,t)}var f=e=>{for(var t=0,n=0;n<e.length;++n){var u=e.charCodeAt(n);127>=u?t++:2047>=u?t+=2:55296<=u&&57343>=u?(t+=4,++n):t+=3}return t},O=(e,t,n,u)=>{if(n>>>=0,!(0<u))return 0;var g=n;u=n+u-1;for(var h=0;h<e.length;++h){var b=e.charCodeAt(h);if(55296<=b&&57343>=b){var P=e.charCodeAt(++h);b=65536+((b&1023)<<10)|P&1023}if(127>=b){if(n>=u)break;t[n++>>>0]=b}else{if(2047>=b){if(n+1>=u)break;t[n++>>>0]=192|b>>6}else{if(65535>=b){if(n+2>=u)break;t[n++>>>0]=224|b>>12}else{if(n+3>=u)break;t[n++>>>0]=240|b>>18,t[n++>>>0]=128|b>>12&63}t[n++>>>0]=128|b>>6&63}t[n++>>>0]=128|b&63}}return t[n>>>0]=0,n-g},_=(e,t,n)=>O(e,w(),t,n);function M(e,t){if(S)return G(6,1,e,t)}function k(e,t,n){if(S)return G(7,1,e,t,n)}function oe(e,t,n){return S?G(8,1,e,t,n):0}function se(e,t){if(S)return G(9,1,e,t)}function ie(e,t,n){if(S)return G(10,1,e,t,n)}function rt(e,t,n,u){if(S)return G(11,1,e,t,n,u)}function nt(e,t,n,u){if(S)return G(12,1,e,t,n,u)}function p(e,t,n,u){if(S)return G(13,1,e,t,n,u)}function L(e){if(S)return G(14,1,e)}function Y(e,t){if(S)return G(15,1,e,t)}function Me(e,t,n){if(S)return G(16,1,e,t,n)}var pt=e=>{if(!Z)try{if(e(),!ve())try{S?Et(le):Ge(le)}catch(t){t instanceof je||t=="unwind"||U(1,t)}}catch(t){t instanceof je||t=="unwind"||U(1,t)}};function wt(e){e>>>=0,typeof Atomics.ub=="function"&&(Atomics.ub(d(),e>>2,e).value.then(mt),e+=128,Atomics.store(d(),e>>2,1))}s.__emscripten_thread_mailbox_await=wt;function mt(){var e=gt();e&&(wt(e),pt(()=>ur()))}s.checkMailbox=mt;var Ve=e=>e%4===0&&(e%100!==0||e%400===0),zt=[0,31,60,91,121,152,182,213,244,274,305,335],jt=[0,31,59,90,120,151,181,212,243,273,304,334];function Yt(e,t,n,u,g,h,b,P){return S?G(17,1,e,t,n,u,g,h,b,P):-52}function Gt(e,t,n,u,g,h,b){if(S)return G(18,1,e,t,n,u,g,h,b)}var $t=e=>{var t=f(e)+1,n=or(t);return n&&_(e,n,t),n},Gr=e=>{var t=Mt();return e=e(),ht(t),e};function G(e,t){var n=arguments.length-2,u=arguments;return Gr(()=>{for(var g=At(8*n),h=g>>3,b=0;b<n;b++){var P=u[2+b];y()[h+b>>>0]=P}return ir(e,n,g,t)})}var bt=[],_t={},Vt=()=>{if(!vt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:N||"./this.program"},t;for(t in _t)_t[t]===void 0?delete e[t]:e[t]=_t[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);vt=n}return vt},vt;function qt(e,t){if(S)return G(19,1,e,t);e>>>=0,t>>>=0;var n=0;return Vt().forEach(function(u,g){var h=t+n;for(g=v()[e+4*g>>2>>>0]=h,h=0;h<u.length;++h)a()[g++>>0>>>0]=u.charCodeAt(h);a()[g>>0>>>0]=0,n+=u.length+1}),0}function Jt(e,t){if(S)return G(20,1,e,t);e>>>=0,t>>>=0;var n=Vt();v()[e>>2>>>0]=n.length;var u=0;return n.forEach(function(g){u+=g.length+1}),v()[t>>2>>>0]=u,0}function Xt(e){return S?G(21,1,e):52}function Qt(e,t,n,u){return S?G(22,1,e,t,n,u):52}function Zt(e,t,n,u,g){return S?G(23,1,e,t,n,u,g):70}var $r=[null,[],[]];function Kt(e,t,n,u){if(S)return G(24,1,e,t,n,u);t>>>=0,n>>>=0,u>>>=0;for(var g=0,h=0;h<n;h++){var b=v()[t>>2>>>0],P=v()[t+4>>2>>>0];t+=8;for(var ye=0;ye<P;ye++){var ne=w()[b+ye>>>0],de=$r[e];ne===0||ne===10?((e===1?te:ae)(De(de,0)),de.length=0):de.push(ne)}g+=P}return v()[u>>2>>>0]=g,0}var er=[31,29,31,30,31,30,31,31,30,31,30,31],tr=[31,28,31,30,31,30,31,31,30,31,30,31];function Vr(e){var t=Array(f(e)+1);return O(e,t,0,t.length),t}var qr=(e,t)=>{a().set(e,t>>>0)};function rr(e,t,n,u){function g(m,z,$){for(m=typeof m=="number"?m.toString():m||"";m.length<z;)m=$[0]+m;return m}function h(m,z){return g(m,z,"0")}function b(m,z){function $(mr){return 0>mr?-1:0<mr?1:0}var Le;return(Le=$(m.getFullYear()-z.getFullYear()))===0&&(Le=$(m.getMonth()-z.getMonth()))===0&&(Le=$(m.getDate()-z.getDate())),Le}function P(m){switch(m.getDay()){case 0:return new Date(m.getFullYear()-1,11,29);case 1:return m;case 2:return new Date(m.getFullYear(),0,3);case 3:return new Date(m.getFullYear(),0,2);case 4:return new Date(m.getFullYear(),0,1);case 5:return new Date(m.getFullYear()-1,11,31);case 6:return new Date(m.getFullYear()-1,11,30)}}function ye(m){var z=m.Qa;for(m=new Date(new Date(m.Ra+1900,0,1).getTime());0<z;){var $=m.getMonth(),Le=(Ve(m.getFullYear())?er:tr)[$];if(z>Le-m.getDate())z-=Le-m.getDate()+1,m.setDate(1),11>$?m.setMonth($+1):(m.setMonth(0),m.setFullYear(m.getFullYear()+1));else{m.setDate(m.getDate()+z);break}}return $=new Date(m.getFullYear()+1,0,4),z=P(new Date(m.getFullYear(),0,4)),$=P($),0>=b(z,m)?0>=b($,m)?m.getFullYear()+1:m.getFullYear():m.getFullYear()-1}e>>>=0,t>>>=0,n>>>=0,u>>>=0;var ne=d()[u+40>>2>>>0];u={rb:d()[u>>2>>>0],qb:d()[u+4>>2>>>0],Ta:d()[u+8>>2>>>0],Xa:d()[u+12>>2>>>0],Ua:d()[u+16>>2>>>0],Ra:d()[u+20>>2>>>0],Na:d()[u+24>>2>>>0],Qa:d()[u+28>>2>>>0],zb:d()[u+32>>2>>>0],pb:d()[u+36>>2>>>0],sb:ne?Ee(ne):""},n=Ee(n),ne={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var de in ne)n=n.replace(new RegExp(de,"g"),ne[de]);var dr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),pr="January February March April May June July August September October November December".split(" ");ne={"%a":m=>dr[m.Na].substring(0,3),"%A":m=>dr[m.Na],"%b":m=>pr[m.Ua].substring(0,3),"%B":m=>pr[m.Ua],"%C":m=>h((m.Ra+1900)/100|0,2),"%d":m=>h(m.Xa,2),"%e":m=>g(m.Xa,2," "),"%g":m=>ye(m).toString().substring(2),"%G":m=>ye(m),"%H":m=>h(m.Ta,2),"%I":m=>(m=m.Ta,m==0?m=12:12<m&&(m-=12),h(m,2)),"%j":m=>{for(var z=0,$=0;$<=m.Ua-1;z+=(Ve(m.Ra+1900)?er:tr)[$++]);return h(m.Xa+z,3)},"%m":m=>h(m.Ua+1,2),"%M":m=>h(m.qb,2),"%n":()=>`\n`,"%p":m=>0<=m.Ta&&12>m.Ta?"AM":"PM","%S":m=>h(m.rb,2),"%t":()=>"	","%u":m=>m.Na||7,"%U":m=>h(Math.floor((m.Qa+7-m.Na)/7),2),"%V":m=>{var z=Math.floor((m.Qa+7-(m.Na+6)%7)/7);if(2>=(m.Na+371-m.Qa-2)%7&&z++,z)z==53&&($=(m.Na+371-m.Qa)%7,$==4||$==3&&Ve(m.Ra)||(z=1));else{z=52;var $=(m.Na+7-m.Qa-1)%7;($==4||$==5&&Ve(m.Ra%400-1))&&z++}return h(z,2)},"%w":m=>m.Na,"%W":m=>h(Math.floor((m.Qa+7-(m.Na+6)%7)/7),2),"%y":m=>(m.Ra+1900).toString().substring(2),"%Y":m=>m.Ra+1900,"%z":m=>{m=m.pb;var z=0<=m;return m=Math.abs(m)/60,(z?"+":"-")+("0000"+(m/60*100+m%60)).slice(-4)},"%Z":m=>m.sb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(de in ne)n.includes(de)&&(n=n.replace(new RegExp(de,"g"),ne[de](u)));return n=n.replace(/\\0\\0/g,"%"),de=Vr(n),de.length>t?0:(qr(de,e),de.length-1)}var qe=void 0,nr=[];function ar(e,t){if(!qe){qe=new WeakMap;var n=K.length;if(qe)for(var u=0;u<0+n;u++){var g=et(u);g&&qe.set(g,u)}}if(n=qe.get(e)||0)return n;if(nr.length)n=nr.pop();else{try{K.grow(1)}catch(P){throw P instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":P}n=K.length-1}try{u=n,K.set(u,e),Ce[u]=K.get(u)}catch(P){if(!(P instanceof TypeError))throw P;if(typeof WebAssembly.Function=="function"){u=WebAssembly.Function,g={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var h={parameters:[],results:t[0]=="v"?[]:[g[t[0]]]},b=1;b<t.length;++b)h.parameters.push(g[t[b]]);t=new u(h,e)}else{for(u=[1],g=t.slice(0,1),t=t.slice(1),h={i:127,p:127,j:126,f:125,d:124},u.push(96),b=t.length,128>b?u.push(b):u.push(b%128|128,b>>7),b=0;b<t.length;++b)u.push(h[t[b]]);g=="v"?u.push(0):u.push(1,h[g]),t=[0,97,115,109,1,0,0,0,1],g=u.length,128>g?t.push(g):t.push(g%128|128,g>>7),t.push.apply(t,u),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}u=n,K.set(u,t),Ce[u]=K.get(u)}return qe.set(e,n),n}R.Wa();var Jr=[null,Ze,Ke,tt,o,i,M,k,oe,se,ie,rt,nt,p,L,Y,Me,Yt,Gt,qt,Jt,Xt,Qt,Zt,Kt],Xr={b:function(e,t,n){throw e>>>=0,new ct(e).Wa(t>>>0,n>>>0),dt=e,$e++,dt},N:function(e){sr(e>>>0,!H,1,!W,131072,!1),R.Za()},k:function(e){e>>>=0,S?postMessage({cmd:"cleanupThread",thread:e}):Xe(e)},I:r,h:o,T:i,D:M,F:k,U:oe,R:se,J:ie,Q:rt,o:nt,E:p,B:L,S:Y,C:Me,q:()=>!0,z:function(e,t){e>>>=0,e==t>>>0?setTimeout(()=>mt()):S?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=R.Ma[e])&&e.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:wt,p:function(e){C&&R.Ma[e>>>0].ref()},t:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),d()[n>>2>>>0]=e.getUTCSeconds(),d()[n+4>>2>>>0]=e.getUTCMinutes(),d()[n+8>>2>>>0]=e.getUTCHours(),d()[n+12>>2>>>0]=e.getUTCDate(),d()[n+16>>2>>>0]=e.getUTCMonth(),d()[n+20>>2>>>0]=e.getUTCFullYear()-1900,d()[n+24>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,d()[n+28>>2>>>0]=e},u:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),d()[n>>2>>>0]=e.getSeconds(),d()[n+4>>2>>>0]=e.getMinutes(),d()[n+8>>2>>>0]=e.getHours(),d()[n+12>>2>>>0]=e.getDate(),d()[n+16>>2>>>0]=e.getMonth(),d()[n+20>>2>>>0]=e.getFullYear()-1900,d()[n+24>>2>>>0]=e.getDay(),t=(Ve(e.getFullYear())?zt:jt)[e.getMonth()]+e.getDate()-1|0,d()[n+28>>2>>>0]=t,d()[n+36>>2>>>0]=-(60*e.getTimezoneOffset()),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var u=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(t!=u&&e.getTimezoneOffset()==Math.min(u,t))|0,d()[n+32>>2>>>0]=e},v:function(e){e>>>=0;var t=new Date(d()[e+20>>2>>>0]+1900,d()[e+16>>2>>>0],d()[e+12>>2>>>0],d()[e+8>>2>>>0],d()[e+4>>2>>>0],d()[e>>2>>>0],0),n=d()[e+32>>2>>>0],u=t.getTimezoneOffset(),g=new Date(t.getFullYear(),6,1).getTimezoneOffset(),h=new Date(t.getFullYear(),0,1).getTimezoneOffset(),b=Math.min(h,g);return 0>n?d()[e+32>>2>>>0]=+(g!=h&&b==u):0<n!=(b==u)&&(g=Math.max(h,g),t.setTime(t.getTime()+6e4*((0<n?b:g)-u))),d()[e+24>>2>>>0]=t.getDay(),n=(Ve(t.getFullYear())?zt:jt)[t.getMonth()]+t.getDate()-1|0,d()[e+28>>2>>>0]=n,d()[e>>2>>>0]=t.getSeconds(),d()[e+4>>2>>>0]=t.getMinutes(),d()[e+8>>2>>>0]=t.getHours(),d()[e+12>>2>>>0]=t.getDate(),d()[e+16>>2>>>0]=t.getMonth(),d()[e+20>>2>>>0]=t.getYear(),e=t.getTime()/1e3,lr((Se=e,1<=+Math.abs(Se)?0<Se?+Math.floor(Se/4294967296)>>>0:~~+Math.ceil((Se-+(~~Se>>>0))/4294967296)>>>0:0)),e>>>0},r:Yt,s:Gt,y:function(e,t,n){function u(ne){return(ne=ne.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?ne[1]:"GMT"}e>>>=0,t>>>=0,n>>>=0;var g=new Date().getFullYear(),h=new Date(g,0,1),b=new Date(g,6,1);g=h.getTimezoneOffset();var P=b.getTimezoneOffset(),ye=Math.max(g,P);v()[e>>2>>>0]=60*ye,d()[t>>2>>>0]=+(g!=P),e=u(h),t=u(b),e=$t(e),t=$t(t),P<g?(v()[n>>2>>>0]=e,v()[n+4>>2>>>0]=t):(v()[n>>2>>>0]=t,v()[n+4>>2>>>0]=e)},c:()=>{Ae("")},l:function(){},i:function(){return Date.now()},V:()=>{throw re+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:function(){return C?(_r(),ot(br)).cpus().length:navigator.hardwareConcurrency},K:function(e,t,n,u){for(R.wb=t>>>0,bt.length=n,t=u>>>0>>3,u=0;u<n;u++)bt[u]=y()[t+u>>>0];return Jr[e].apply(null,bt)},x:function(e){e>>>=0;var t=w().length;if(e<=t||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var u=t*(1+.2/n);u=Math.min(u,e+100663296);var g=Math;u=Math.max(e,u);e:{g=g.min.call(g,4294901760,u+(65536-u%65536)%65536)-T.buffer.byteLength+65535>>>16;try{T.grow(g),me();var h=1;break e}catch{}h=void 0}if(h)return!0}return!1},O:qt,P:Jt,H:Ge,g:Xt,n:Qt,w:Zt,m:Kt,a:T||s.wasmMemory,G:rr,d:function(e,t,n,u){return rr(e>>>0,t>>>0,n>>>0,u>>>0)},j:function(e,t,n,u){let g=K.length;e=new Uint8Array(w().slice(e+t,e+n));try{var h=new WebAssembly.Module(e),b=new WebAssembly.Instance(h,{env:{memory:T}}),P;for(P in b.exports)ar(b.exports[P]);return g<K.length?g:u}catch(ye){return console.log(ye),u}}};(function(){function e(n,u){return n=n.exports,E=n=Qr(n),R.$a.push(E.za),K=E.Aa,ge.unshift(E.W),We=u,ke(),n}var t={a:Xr};if(He(),s.instantiateWasm)try{return s.instantiateWasm(t,e)}catch(n){ae("Module.instantiateWasm callback failed with error: "+n),I(n)}return lt(t,function(n){e(n.instance,n.module)}).catch(I),{}})(),s._OrtInit=(e,t)=>(s._OrtInit=E.X)(e,t),s._OrtGetLastError=(e,t)=>(s._OrtGetLastError=E.Y)(e,t),s._OrtCreateSessionOptions=(e,t,n,u,g,h,b,P,ye,ne)=>(s._OrtCreateSessionOptions=E.Z)(e,t,n,u,g,h,b,P,ye,ne),s._OrtAppendExecutionProvider=(e,t)=>(s._OrtAppendExecutionProvider=E._)(e,t),s._OrtAddFreeDimensionOverride=(e,t,n)=>(s._OrtAddFreeDimensionOverride=E.$)(e,t,n),s._OrtAddSessionConfigEntry=(e,t,n)=>(s._OrtAddSessionConfigEntry=E.aa)(e,t,n),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=E.ba)(e),s._OrtCreateSession=(e,t,n)=>(s._OrtCreateSession=E.ca)(e,t,n),s._OrtReleaseSession=e=>(s._OrtReleaseSession=E.da)(e),s._OrtGetInputOutputCount=(e,t,n)=>(s._OrtGetInputOutputCount=E.ea)(e,t,n),s._OrtGetInputName=(e,t)=>(s._OrtGetInputName=E.fa)(e,t),s._OrtGetOutputName=(e,t)=>(s._OrtGetOutputName=E.ga)(e,t),s._OrtFree=e=>(s._OrtFree=E.ha)(e),s._OrtCreateTensor=(e,t,n,u,g,h)=>(s._OrtCreateTensor=E.ia)(e,t,n,u,g,h),s._OrtGetTensorData=(e,t,n,u,g)=>(s._OrtGetTensorData=E.ja)(e,t,n,u,g),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=E.ka)(e),s._OrtCreateRunOptions=(e,t,n,u)=>(s._OrtCreateRunOptions=E.la)(e,t,n,u),s._OrtAddRunConfigEntry=(e,t,n)=>(s._OrtAddRunConfigEntry=E.ma)(e,t,n),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=E.na)(e),s._OrtCreateBinding=e=>(s._OrtCreateBinding=E.oa)(e),s._OrtBindInput=(e,t,n)=>(s._OrtBindInput=E.pa)(e,t,n),s._OrtBindOutput=(e,t,n,u)=>(s._OrtBindOutput=E.qa)(e,t,n,u),s._OrtClearBoundOutputs=e=>(s._OrtClearBoundOutputs=E.ra)(e),s._OrtReleaseBinding=e=>(s._OrtReleaseBinding=E.sa)(e),s._OrtRunWithBinding=(e,t,n,u,g)=>(s._OrtRunWithBinding=E.ta)(e,t,n,u,g),s._OrtRun=(e,t,n,u,g,h,b,P)=>(s._OrtRun=E.ua)(e,t,n,u,g,h,b,P),s._OrtEndProfiling=e=>(s._OrtEndProfiling=E.va)(e);var gt=s._pthread_self=()=>(gt=s._pthread_self=E.wa)(),or=s._malloc=e=>(or=s._malloc=E.xa)(e);s._free=e=>(s._free=E.ya)(e),s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=E.za)();var sr=s.__emscripten_thread_init=(e,t,n,u,g,h)=>(sr=s.__emscripten_thread_init=E.Ba)(e,t,n,u,g,h);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=E.Ca)();var ir=(e,t,n,u)=>(ir=E.Da)(e,t,n,u),St=e=>(St=E.Ea)(e),Et=s.__emscripten_thread_exit=e=>(Et=s.__emscripten_thread_exit=E.Fa)(e),ur=s.__emscripten_check_mailbox=()=>(ur=s.__emscripten_check_mailbox=E.Ga)(),lr=e=>(lr=E.Ha)(e),fr=(e,t)=>(fr=E.Ia)(e,t),Mt=()=>(Mt=E.Ja)(),ht=e=>(ht=E.Ka)(e),At=e=>(At=E.La)(e);s.___start_em_js=906844,s.___stop_em_js=907456;function Qr(e){e=Object.assign({},e);var t=u=>()=>u()>>>0,n=u=>g=>u(g)>>>0;return e.__errno_location=t(e.__errno_location),e.pthread_self=t(e.pthread_self),e.malloc=n(e.malloc),e.stackSave=t(e.stackSave),e.stackAlloc=n(e.stackAlloc),e}s.keepRuntimeAlive=ve,s.wasmMemory=T,s.stackAlloc=At,s.stackSave=Mt,s.stackRestore=ht,s.addFunction=ar,s.UTF8ToString=Ee,s.stringToUTF8=_,s.lengthBytesUTF8=f,s.ExitStatus=je,s.PThread=R;var yt;Ue=function e(){yt||cr(),yt||(Ue=e)};function cr(){function e(){if(!yt&&(yt=!0,s.calledRun=!0,!Z)&&(S||Pe(ge),x(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),!S)){if(s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;){var t=s.postRun.shift();ee.unshift(t)}Pe(ee)}}if(!(0<he))if(S)x(s),S||Pe(ge),startWorker(s);else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)_e.unshift(s.preRun.shift());Pe(_e),0<he||(s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),e()},1)):e())}}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return cr(),c.ready}})();typeof Sr=="object"&&typeof Wt=="object"?Wt.exports=vr:typeof define=="function"&&define.amd&&define([],()=>vr)});var Mr=at((vn,on)=>{on.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>(0,eval)(fs.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason??e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err("worker.js received unknown command "+e.data.cmd),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed&&Module.__emscripten_thread_crashed(),a}}self.onmessage=handleMessage;\\n\'});var Tr;Tr=yr();var sn=Er(),Pt,Lt=!1,Ot=!1,Ar=!1,un=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},ln=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},fn=(l,c)=>l?c?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":c?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Rr=async l=>{if(Lt)return Promise.resolve();if(Ot)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(Ar)throw new Error("previous call to \'initializeWebAssembly()\' failed.");Ot=!0;let c=l.initTimeout,a=l.numThreads,w=l.simd,d=a>1&&un(),v=w&&ln(),y=l.wasmPaths,s=typeof y=="string"?y:void 0,x=fn(v,d),I=typeof y=="object"?y[x]:void 0,F=!1,N=[];if(c>0&&N.push(new Promise(U=>{setTimeout(()=>{F=!0,U()},c)})),N.push(new Promise((U,W)=>{let H=d?sn:Tr,C={locateFile:(S,B)=>d&&S.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Mr()],{type:"text/javascript"})):S.endsWith(".wasm")?I||(s??B)+x:B+S};if(d)if(typeof Blob>"u")C.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let S=`var ortWasmThreaded=${H.toString()};`;C.mainScriptUrlOrBlob=new Blob([S],{type:"text/javascript"})}H(C).then(S=>{Ot=!1,Lt=!0,Pt=S,U()},S=>{Ot=!1,Ar=!0,W(S)})})),await Promise.race(N),F)throw new Error(`WebAssembly backend initializing failed due to timeout: ${c}ms`)},J=()=>{if(Lt&&Pt)return Pt;throw new Error("WebAssembly is not initialized yet.")};var X=(l,c)=>{let a=J(),w=a.lengthBytesUTF8(l)+1,d=a._malloc(w);return a.stringToUTF8(l,d,w),c.push(d),d},st=(l,c,a,w)=>{if(typeof l=="object"&&l!==null){if(a.has(l))throw new Error("Circular reference in options");a.add(l)}Object.entries(l).forEach(([d,v])=>{let y=c?c+d:d;if(typeof v=="object")st(v,y+".",a,w);else if(typeof v=="string"||typeof v=="number")w(y,v.toString());else if(typeof v=="boolean")w(y,v?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof v}`)})},V=l=>{let c=J(),a=c.stackSave();try{let w=c.stackAlloc(8);c._OrtGetLastError(w,w+4);let d=c.HEAP32[w/4],v=c.HEAPU32[w/4+1],y=v?c.UTF8ToString(v):"";throw new Error(`${l} ERROR_CODE: ${d}, ERROR_MESSAGE: ${y}`)}finally{c.stackRestore(a)}};var Dr=l=>{let c=J(),a=0,w=[],d=l||{};try{if(l?.logSeverityLevel===void 0)d.logSeverityLevel=2;else if(typeof l.logSeverityLevel!="number"||!Number.isInteger(l.logSeverityLevel)||l.logSeverityLevel<0||l.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${l.logSeverityLevel}`);if(l?.logVerbosityLevel===void 0)d.logVerbosityLevel=0;else if(typeof l.logVerbosityLevel!="number"||!Number.isInteger(l.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${l.logVerbosityLevel}`);l?.terminate===void 0&&(d.terminate=!1);let v=0;return l?.tag!==void 0&&(v=X(l.tag,w)),a=c._OrtCreateRunOptions(d.logSeverityLevel,d.logVerbosityLevel,!!d.terminate,v),a===0&&V("Can\'t create run options."),l?.extra!==void 0&&st(l.extra,"",new WeakSet,(y,s)=>{let x=X(y,w),I=X(s,w);c._OrtAddRunConfigEntry(a,x,I)!==0&&V(`Can\'t set a run config entry: ${y} - ${s}.`)}),[a,w]}catch(v){throw a!==0&&c._OrtReleaseRunOptions(a),w.forEach(y=>c._free(y)),v}};var cn=l=>{switch(l){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${l}`)}},dn=l=>{switch(l){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${l}`)}},pn=l=>{l.extra||(l.extra={}),l.extra.session||(l.extra.session={});let c=l.extra.session;c.use_ort_model_bytes_directly||(c.use_ort_model_bytes_directly="1"),l.executionProviders&&l.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(l.enableMemPattern=!1)},mn=(l,c,a)=>{for(let w of c){let d=typeof w=="string"?w:w.name;switch(d){case"xnnpack":d="XNNPACK";break;case"webnn":if(d="WEBNN",typeof w!="string"){let y=w;if(y?.deviceType){let s=X("deviceType",a),x=X(y.deviceType,a);J()._OrtAddSessionConfigEntry(l,s,x)!==0&&V(`Can\'t set a session config entry: \'deviceType\' - ${y.deviceType}.`)}if(y?.numThreads){let s=y.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let x=X("numThreads",a),I=X(s.toString(),a);J()._OrtAddSessionConfigEntry(l,x,I)!==0&&V(`Can\'t set a session config entry: \'numThreads\' - ${y.numThreads}.`)}if(y?.powerPreference){let s=X("powerPreference",a),x=X(y.powerPreference,a);J()._OrtAddSessionConfigEntry(l,s,x)!==0&&V(`Can\'t set a session config entry: \'powerPreference\' - ${y.powerPreference}.`)}}break;case"webgpu":if(d="JS",typeof w!="string"){let y=w;if(y?.preferredLayout){if(y.preferredLayout!=="NCHW"&&y.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${y.preferredLayout}`);let s=X("preferredLayout",a),x=X(y.preferredLayout,a);J()._OrtAddSessionConfigEntry(l,s,x)!==0&&V(`Can\'t set a session config entry: \'preferredLayout\' - ${y.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${d}`)}let v=X(d,a);J()._OrtAppendExecutionProvider(l,v)!==0&&V(`Can\'t append execution provider: ${d}.`)}},Cr=l=>{let c=J(),a=0,w=[],d=l||{};pn(d);try{let v=cn(d.graphOptimizationLevel??"all"),y=dn(d.executionMode??"sequential"),s=typeof d.logId=="string"?X(d.logId,w):0,x=d.logSeverityLevel??2;if(!Number.isInteger(x)||x<0||x>4)throw new Error(`log serverity level is not valid: ${x}`);let I=d.logVerbosityLevel??0;if(!Number.isInteger(I)||I<0||I>4)throw new Error(`log verbosity level is not valid: ${I}`);let F=typeof d.optimizedModelFilePath=="string"?X(d.optimizedModelFilePath,w):0;if(a=c._OrtCreateSessionOptions(v,!!d.enableCpuMemArena,!!d.enableMemPattern,y,!!d.enableProfiling,0,s,x,I,F),a===0&&V("Can\'t create session options."),d.executionProviders&&mn(a,d.executionProviders,w),d.freeDimensionOverrides)for(let[N,U]of Object.entries(d.freeDimensionOverrides)){if(typeof N!="string")throw new Error(`free dimension override name must be a string: ${N}`);if(typeof U!="number"||!Number.isInteger(U)||U<0)throw new Error(`free dimension override value must be a non-negative integer: ${U}`);let W=X(N,w);c._OrtAddFreeDimensionOverride(a,W,U)!==0&&V(`Can\'t set a free dimension override: ${N} - ${U}.`)}return d.extra!==void 0&&st(d.extra,"",new WeakSet,(N,U)=>{let W=X(N,w),H=X(U,w);c._OrtAddSessionConfigEntry(a,W,H)!==0&&V(`Can\'t set a session config entry: ${N} - ${U}.`)}),[a,w]}catch(v){throw a!==0&&c._OrtReleaseSessionOptions(a),w.forEach(y=>c._free(y)),v}};var Bt=l=>{switch(l){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${l}`)}},xr=l=>{switch(l){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${l}`)}},Nt=l=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][l],Ir=l=>{switch(l){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${l}`)}},Fr=l=>{switch(l){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${l}`)}},Ur=l=>l==="float32"||l==="int32"||l==="int64"||l==="bool"||l==="float16"||l==="uint32",Wr=l=>{switch(l){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${l}`)}};var Lr=!1,gn=l=>{let c=J(),a=c.stackSave();try{let w=c.stackAlloc(8);return c._OrtGetInputOutputCount(l,w,w+4)!==0&&V("Can\'t get session input/output count."),[c.HEAP32[w/4],c.HEAP32[w/4+1]]}finally{c.stackRestore(a)}},hn=(l,c)=>{J()._OrtInit(l,c)!==0&&V("Can\'t initialize onnxruntime.")},Br=async l=>{hn(l.wasm.numThreads,Fr(l.logLevel)),Lr=!0},it=new Map,Nr=()=>Lr,Ht=l=>{let c=J(),a=c._malloc(l.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${l.byteLength}.`);return c.HEAPU8.set(l,a),[a,l.byteLength]},kt=(l,c)=>{let a=J(),w=0,d=0,v=0,y=[],s=[],x=[];try{[d,y]=Cr(c),w=a._OrtCreateSession(l[0],l[1],d),w===0&&V("Can\'t create a session.");let[I,F]=gn(w),N=[],U=[],W=[];for(let C=0;C<I;C++){let S=a._OrtGetInputName(w,C);S===0&&V("Can\'t get an input name."),s.push(S),N.push(a.UTF8ToString(S))}for(let C=0;C<F;C++){let S=a._OrtGetOutputName(w,C);S===0&&V("Can\'t get an output name."),x.push(S);let B=a.UTF8ToString(S);U.push(B)}let H=null;return it.set(w,[w,s,x,H]),[w,N,U]}catch(I){throw s.forEach(F=>a._OrtFree(F)),x.forEach(F=>a._OrtFree(F)),v!==0&&a._OrtReleaseBinding(v),w!==0&&a._OrtReleaseSession(w),I}finally{a._free(l[0]),d!==0&&a._OrtReleaseSessionOptions(d),y.forEach(I=>a._free(I))}},Hr=(l,c)=>{let a=Ht(l);return kt(a,c)},kr=l=>{let c=J(),a=it.get(l);if(!a)throw new Error(`cannot release session. invalid session id: ${l}`);let[w,d,v,y]=a;y&&c._OrtReleaseBinding(y.handle),c.jsepUnregisterBuffers?.(l),d.forEach(s=>c._OrtFree(s)),v.forEach(s=>c._OrtFree(s)),c._OrtReleaseSession(w),it.delete(l)},Pr=(l,c,a,w,d)=>{if(!l){c.push(0);return}let v=J(),y=l[0],s=l[1],x=l[3],I,F;if(y==="string"&&x==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(x==="gpu-buffer"){let W=l[2].gpuBuffer,H=Nt(Bt(y));F=s.reduce((C,S)=>C*S,1)*H,I=v.jsepRegisterBuffer(w,d,W,F)}else{let W=l[2];if(Array.isArray(W)){F=4*W.length,I=v._malloc(F),a.push(I);let H=I/4;for(let C=0;C<W.length;C++){if(typeof W[C]!="string")throw new TypeError(`tensor data at index ${C} is not a string`);v.HEAPU32[H++]=X(W[C],a)}}else F=W.byteLength,I=v._malloc(F),a.push(I),v.HEAPU8.set(new Uint8Array(W.buffer,W.byteOffset,F),I)}let N=v.stackSave(),U=v.stackAlloc(4*s.length);try{let W=U/4;s.forEach(C=>v.HEAP32[W++]=C);let H=v._OrtCreateTensor(Bt(y),I,F,U,s.length,Wr(x));H===0&&V(`Can\'t create tensor for input/output. session=${w}, index=${d}.`),c.push(H)}finally{v.stackRestore(N)}},zr=async(l,c,a,w,d,v)=>{let y=J(),s=it.get(l);if(!s)throw new Error(`cannot run inference. invalid session id: ${l}`);let[x,I,F,N]=s,U=c.length,W=w.length,H=0,C=[],S=[],B=[],fe=[],Be=y.stackSave(),pe=y.stackAlloc(U*4),D=y.stackAlloc(U*4),Oe=y.stackAlloc(W*4),we=y.stackAlloc(W*4);try{[H,C]=Dr(v);for(let T=0;T<U;T++)Pr(a[T],S,fe,l,c[T]);for(let T=0;T<W;T++)Pr(d[T],B,fe,l,U+w[T]);let q=pe/4,A=D/4,te=Oe/4,ae=we/4;for(let T=0;T<U;T++)y.HEAPU32[q++]=S[T],y.HEAPU32[A++]=I[c[T]];for(let T=0;T<W;T++)y.HEAPU32[te++]=B[T],y.HEAPU32[ae++]=F[w[T]];let Q;Q=await y._OrtRun(x,D,pe,U,we,W,Oe,H),Q!==0&&V("failed to call OrtRun().");let be=[];for(let T=0;T<W;T++){let E=y.HEAPU32[Oe/4+T];if(E===B[T]){be.push(d[T]);continue}let We=y.stackSave(),Z=y.stackAlloc(4*4),le=!1,j,ue=0;try{y._OrtGetTensorData(E,Z,Z+4,Z+8,Z+12)!==0&&V(`Can\'t access output tensor data on index ${T}.`);let ce=Z/4,xe=y.HEAPU32[ce++];ue=y.HEAPU32[ce++];let me=y.HEAPU32[ce++],Ie=y.HEAPU32[ce++],K=[];for(let ee=0;ee<Ie;ee++)K.push(y.HEAPU32[me/4+ee]);y._OrtFree(me);let _e=K.reduce((ee,re)=>ee*re,1);j=xr(xe);let ge=N?.outputPreferredLocations[w[T]];if(j==="string"){if(ge==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let ee=[],re=ue/4;for(let ve=0;ve<_e;ve++){let he=y.HEAPU32[re++],Fe=ve===_e-1?void 0:y.HEAPU32[re]-he;ee.push(y.UTF8ToString(he,Fe))}be.push([j,K,ee,"cpu"])}else if(ge==="gpu-buffer"&&_e>0){let ee=y.jsepGetBuffer(ue),re=Nt(xe);if(re===void 0||!Ur(j))throw new Error(`Unsupported data type: ${j}`);le=!0,be.push([j,K,{gpuBuffer:ee,download:y.jsepCreateDownloader(ee,_e*re,j),dispose:()=>{y._OrtReleaseTensor(E)}},"gpu-buffer"])}else{let ee=Ir(j),re=new ee(_e);new Uint8Array(re.buffer,re.byteOffset,re.byteLength).set(y.HEAPU8.subarray(ue,ue+re.byteLength)),be.push([j,K,re,"cpu"])}}finally{y.stackRestore(We),j==="string"&&ue&&y._free(ue),le||y._OrtReleaseTensor(E)}}return N&&y._OrtClearBoundOutputs(N.handle),be}finally{y.stackRestore(Be),S.forEach(q=>y._OrtReleaseTensor(q)),B.forEach(q=>y._OrtReleaseTensor(q)),fe.forEach(q=>y._free(q)),H!==0&&y._OrtReleaseRunOptions(H),C.forEach(q=>y._free(q))}},jr=l=>{let c=J(),a=it.get(l);if(!a)throw new Error("invalid session id");let w=a[0],d=c._OrtEndProfiling(w);d===0&&V("Can\'t get an profile file name."),c._OrtFree(d)},Yr=l=>{let c=[];for(let a of l){let w=a[2];!Array.isArray(w)&&"buffer"in w&&c.push(w.buffer)}return c};self.onmessage=l=>{switch(l.data.type){case"init-wasm":try{Rr(l.data.in).then(()=>postMessage({type:"init-wasm"}),c=>postMessage({type:"init-wasm",err:c}))}catch(c){postMessage({type:"init-wasm",err:c})}break;case"init-ort":try{Br(l.data.in).then(()=>postMessage({type:"init-ort"}),c=>postMessage({type:"init-ort",err:c}))}catch(c){postMessage({type:"init-ort",err:c})}break;case"create_allocate":try{let{model:c}=l.data.in,a=Ht(c);postMessage({type:"create_allocate",out:a})}catch(c){postMessage({type:"create_allocate",err:c})}break;case"create_finalize":try{let{modeldata:c,options:a}=l.data.in,w=kt(c,a);postMessage({type:"create_finalize",out:w})}catch(c){postMessage({type:"create_finalize",err:c})}break;case"create":try{let{model:c,options:a}=l.data.in,w=Hr(c,a);postMessage({type:"create",out:w})}catch(c){postMessage({type:"create",err:c})}break;case"release":try{let c=l.data.in;kr(c),postMessage({type:"release"})}catch(c){postMessage({type:"release",err:c})}break;case"run":try{let{sessionId:c,inputIndices:a,inputs:w,outputIndices:d,options:v}=l.data.in;zr(c,a,w,d,v).then(y=>{postMessage({type:"run",out:y},Yr(y))},y=>{postMessage({type:"run",err:y})})}catch(c){postMessage({type:"run",err:c})}break;case"end-profiling":try{let c=l.data.in;jr(c),postMessage({type:"end-profiling"})}catch(c){postMessage({type:"end-profiling",err:c})}break;case"is-ort-env-initialized":try{let c=Nr();postMessage({type:"is-ort-env-initialized",out:c})}catch(c){postMessage({type:"is-ort-env-initialized",err:c})}break;default:}};})();\n'});var Wt,ot,Lo,Ta,xa,fa,ca,pa,da,ha,ma,ba,ga,ya,tr,wg,Do,sd,ud,ld,fd,va,cd,pd,dd,hd,wa=D(()=>{"use strict";xt();id();Wr();Wt=()=>!!te.wasm.proxy&&typeof document<"u",Lo=!1,Ta=!1,xa=!1,pa=[],da=[],ha=[],ma=[],ba=[],ga=[],ya=[],tr=()=>{if(Lo||!Ta||xa||!ot)throw new Error("worker not ready")},wg=a=>{switch(a.data.type){case"init-wasm":Lo=!1,a.data.err?(xa=!0,fa[1](a.data.err)):(Ta=!0,fa[0]());break;case"init-ort":a.data.err?ca[1](a.data.err):ca[0]();break;case"create_allocate":a.data.err?pa.shift()[1](a.data.err):pa.shift()[0](a.data.out);break;case"create_finalize":a.data.err?da.shift()[1](a.data.err):da.shift()[0](a.data.out);break;case"create":a.data.err?ha.shift()[1](a.data.err):ha.shift()[0](a.data.out);break;case"release":a.data.err?ma.shift()[1](a.data.err):ma.shift()[0]();break;case"run":a.data.err?ba.shift()[1](a.data.err):ba.shift()[0](a.data.out);break;case"end-profiling":a.data.err?ga.shift()[1](a.data.err):ga.shift()[0]();break;case"is-ort-env-initialized":a.data.err?ya.shift()[1](a.data.err):ya.shift()[0](a.data.out);break;default:}},Do=typeof document<"u"?document?.currentScript?.src:void 0,sd=async()=>{if(Wt()){if(Ta)return;if(Lo)throw new Error("multiple calls to 'initWasm()' detected.");if(xa)throw new Error("previous call to 'initWasm()' failed.");return Lo=!0,te.wasm.wasmPaths===void 0&&Do&&Do.indexOf("blob:")!==0&&(te.wasm.wasmPaths=Do.substr(0,+Do.lastIndexOf("/")+1)),new Promise((a,t)=>{ot?.terminate();let n=URL.createObjectURL(new Blob([ad()],{type:"text/javascript"}));ot=new Worker(n,{name:"ort-wasm-proxy-worker"}),ot.onerror=r=>t(r),ot.onmessage=wg,URL.revokeObjectURL(n),fa=[a,t];let e={type:"init-wasm",in:te.wasm};ot.postMessage(e)})}else return Up(te.wasm)},ud=async a=>{if(Wt())return tr(),new Promise((t,n)=>{ca=[t,n];let e={type:"init-ort",in:a};ot.postMessage(e)});await Zp(a)},ld=async a=>Wt()?(tr(),new Promise((t,n)=>{pa.push([t,n]);let e={type:"create_allocate",in:{model:a}};ot.postMessage(e,[a.buffer])})):ua(a),fd=async(a,t)=>Wt()?(tr(),new Promise((n,e)=>{da.push([n,e]);let r={type:"create_finalize",in:{modeldata:a,options:t}};ot.postMessage(r)})):la(a,t),va=async(a,t)=>{if(Wt()){if(t?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return tr(),new Promise((n,e)=>{ha.push([n,e]);let r={type:"create",in:{model:a,options:t}};ot.postMessage(r,[a.buffer])})}else return ed(a,t)},cd=async a=>{if(Wt())return tr(),new Promise((t,n)=>{ma.push([t,n]);let e={type:"release",in:a};ot.postMessage(e)});td(a)},pd=async(a,t,n,e,r,o)=>{if(Wt()){if(n.some(s=>s[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(r.some(s=>s))throw new Error("pre-allocated output tensor is not supported for proxy.");return tr(),new Promise((s,i)=>{ba.push([s,i]);let u=n,l={type:"run",in:{sessionId:a,inputIndices:t,inputs:u,outputIndices:e,options:o}};ot.postMessage(l,od(u))})}else return rd(a,t,n,e,r,o)},dd=async a=>{if(Wt())return tr(),new Promise((t,n)=>{ga.push([t,n]);let e={type:"end-profiling",in:a};ot.postMessage(e)});nd(a)},hd=async()=>Wt()?(tr(),new Promise((a,t)=>{ya.push([a,t]);let n={type:"is-ort-env-initialized"};ot.postMessage(n)})):Qp()});var Fo,md,_g,Co,bd=D(()=>{"use strict";xt();wa();sa();md=(a,t)=>{switch(a.location){case"cpu":return[a.type,a.dims,a.data,"cpu"];case"gpu-buffer":return[a.type,a.dims,{gpuBuffer:a.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${a.location} for ${t()}`)}},_g=a=>{switch(a[3]){case"cpu":return new Ge(a[0],a[2],a[1]);case"gpu-buffer":{let t=a[0];if(!Eo(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:n,download:e,dispose:r}=a[2];return Ge.fromGpuBuffer(n,{dataType:t,dims:a[1],download:e,dispose:r})}default:throw new Error(`invalid data location: ${a[3]}`)}},Co=class{async createSessionAllocate(t){let n=await fetch(t);if(n.status!==200)throw new Error(`failed to load model: ${t}`);let e=await n.arrayBuffer();return ld(new Uint8Array(e))}async loadModel(t,n){if(await hd()||(Fo||(Fo=ud(te)),await Fo,Fo=void 0),typeof t=="string")if(typeof process<"u"&&process.versions&&process.versions.node){let e=await(void 0)(t);[this.sessionId,this.inputNames,this.outputNames]=await va(e,n)}else{let e=await this.createSessionAllocate(t);[this.sessionId,this.inputNames,this.outputNames]=await fd(e,n)}else[this.sessionId,this.inputNames,this.outputNames]=await va(t,n)}async dispose(){return cd(this.sessionId)}async run(t,n,e){let r=[],o=[];Object.entries(t).forEach(b=>{let x=b[0],I=b[1],v=this.inputNames.indexOf(x);if(v===-1)throw new Error(`invalid input '${x}'`);r.push(I),o.push(v)});let s=[],i=[];Object.entries(n).forEach(b=>{let x=b[0],I=b[1],v=this.outputNames.indexOf(x);if(v===-1)throw new Error(`invalid output '${x}'`);s.push(I),i.push(v)});let u=r.map((b,x)=>md(b,()=>`input "${this.inputNames[o[x]]}"`)),l=s.map((b,x)=>b?md(b,()=>`output "${this.outputNames[i[x]]}"`):null),f=await pd(this.sessionId,o,u,i,l,e),p={};for(let b=0;b<f.length;b++)p[this.outputNames[i[b]]]=s[b]??_g(f[b]);return p}startProfiling(){}endProfiling(){dd(this.sessionId)}}});var Og,ko,gd=D(()=>{"use strict";xt();wa();bd();Og=()=>{if((typeof te.wasm.initTimeout!="number"||te.wasm.initTimeout<0)&&(te.wasm.initTimeout=0),typeof te.wasm.simd!="boolean"&&(te.wasm.simd=!0),typeof te.wasm.proxy!="boolean"&&(te.wasm.proxy=!1),typeof te.wasm.numThreads!="number"||!Number.isInteger(te.wasm.numThreads)||te.wasm.numThreads<=0){let a=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;te.wasm.numThreads=Math.min(4,Math.ceil((a||1)/2))}},ko=class{async init(){Og(),await sd()}async createInferenceSessionHandler(t,n){let e=new Co;return await e.loadModel(t,n),Promise.resolve(e)}}});var yd={};Er(yd,{wasmBackend:()=>Ig});var Ig,Td=D(()=>{"use strict";gd();Ig=new ko});xt();xt();xt();var ws="1.17.0";var UO=Ho;{let a=(Ap(),ir(Sp)).onnxjsBackend;Yt("webgl",a,-10)}{let a=(Td(),ir(yd)).wasmBackend;Yt("cpu",a,10),Yt("wasm",a,10),Yt("xnnpack",a,9),Yt("webnn",a,9)}Object.defineProperty(te.versions,"web",{value:ws,enumerable:!0});export{Fd as InferenceSession,Ge as Tensor,kd as TrainingSession,UO as default,te as env,Yt as registerBackend};
/*! Bundled license information:

long/index.js:
  (**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   *)
*/
//# sourceMappingURL=ort.min.js.map
