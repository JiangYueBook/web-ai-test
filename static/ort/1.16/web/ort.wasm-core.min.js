/*!
 * ONNX Runtime Web v1.17.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
"use strict";var ort=(()=>{var ft=Object.defineProperty;var Pn=Object.getOwnPropertyDescriptor;var In=Object.getOwnPropertyNames;var _n=Object.prototype.hasOwnProperty;var U=(n,i)=>()=>(n&&(i=n(n=0)),i);var xn=(n,i)=>()=>(i||n((i={exports:{}}).exports,i),i.exports),Ge=(n,i)=>{for(var r in i)ft(n,r,{get:i[r],enumerable:!0})},Bn=(n,i,r,u)=>{if(i&&typeof i=="object"||typeof i=="function")for(let s of In(i))!_n.call(n,s)&&s!==r&&ft(n,s,{get:()=>i[s],enumerable:!(u=Pn(i,s))||u.enumerable});return n};var Ye=n=>Bn(ft({},"__esModule",{value:!0}),n);var Ve,ye,we,qt,ct=U(()=>{"use strict";Ve=new Map,ye=[],we=(n,i,r)=>{if(i&&typeof i.init=="function"&&typeof i.createInferenceSessionHandler=="function"){let u=Ve.get(n);if(u===void 0)Ve.set(n,{backend:i,priority:r});else{if(u.priority>r)return;if(u.priority===r&&u.backend!==i)throw new Error(`cannot register backend "${n}" using priority ${r}`)}if(r>=0){let s=ye.indexOf(n);s!==-1&&ye.splice(s,1);for(let h=0;h<ye.length;h++)if(Ve.get(ye[h]).priority<=r){ye.splice(h,0,n);return}ye.push(n)}return}throw new TypeError("not a valid backend")},qt=async n=>{let i=n.length===0?ye:n,r=[];for(let u of i){let s=Ve.get(u);if(s){if(s.initialized)return s.backend;if(s.aborted)continue;let h=!!s.initPromise;try{return h||(s.initPromise=s.backend.init()),await s.initPromise,s.initialized=!0,s.backend}catch(c){h||r.push({name:u,err:c}),s.aborted=!0}finally{delete s.initPromise}}}throw new Error(`no available backend found. ERR: ${r.map(u=>`[${u.name}] ${u.err}`).join(", ")}`)}});var Jt=U(()=>{"use strict";ct()});var Zt,Kt=U(()=>{"use strict";Zt="1.17.0"});var Qt,lt,er=U(()=>{"use strict";Kt();Qt="warning",lt={wasm:{},webgl:{},webgpu:{},versions:{common:Zt},set logLevel(n){if(n!==void 0){if(typeof n!="string"||["verbose","info","warning","error","fatal"].indexOf(n)===-1)throw new Error(`Unsupported logging level: ${n}`);Qt=n}},get logLevel(){return Qt}};Object.defineProperty(lt,"logLevel",{enumerable:!0})});var z,tr=U(()=>{"use strict";er();z=lt});var rr,nr,or=U(()=>{"use strict";rr=(n,i)=>{let r=document.createElement("canvas");r.width=n.dims[3],r.height=n.dims[2];let u=r.getContext("2d");if(u!=null){let s,h;i?.tensorLayout!==void 0&&i.tensorLayout==="NHWC"?(s=n.dims[2],h=n.dims[3]):(s=n.dims[3],h=n.dims[2]);let c=i?.format!==void 0?i.format:"RGB",d=i?.norm,m,p;d===void 0||d.mean===void 0?m=[255,255,255,255]:typeof d.mean=="number"?m=[d.mean,d.mean,d.mean,d.mean]:(m=[d.mean[0],d.mean[1],d.mean[2],0],d.mean[3]!==void 0&&(m[3]=d.mean[3])),d===void 0||d.bias===void 0?p=[0,0,0,0]:typeof d.bias=="number"?p=[d.bias,d.bias,d.bias,d.bias]:(p=[d.bias[0],d.bias[1],d.bias[2],0],d.bias[3]!==void 0&&(p[3]=d.bias[3]));let g=h*s,b=0,w=g,E=g*2,_=-1;c==="RGBA"?(b=0,w=g,E=g*2,_=g*3):c==="RGB"?(b=0,w=g,E=g*2):c==="RBG"&&(b=0,E=g,w=g*2);for(let A=0;A<h;A++)for(let x=0;x<s;x++){let L=(n.data[b++]-p[0])*m[0],W=(n.data[w++]-p[1])*m[1],Y=(n.data[E++]-p[2])*m[2],H=_===-1?255:(n.data[_++]-p[3])*m[3];u.fillStyle="rgba("+L+","+W+","+Y+","+H+")",u.fillRect(x,A,1,1)}return r.toDataURL()}else throw new Error("Can not access image data")},nr=(n,i)=>{let r=document.createElement("canvas").getContext("2d"),u;if(r!=null){let s,h,c;i?.tensorLayout!==void 0&&i.tensorLayout==="NHWC"?(s=n.dims[2],h=n.dims[1],c=n.dims[3]):(s=n.dims[3],h=n.dims[2],c=n.dims[1]);let d=i!==void 0&&i.format!==void 0?i.format:"RGB",m=i?.norm,p,g;m===void 0||m.mean===void 0?p=[255,255,255,255]:typeof m.mean=="number"?p=[m.mean,m.mean,m.mean,m.mean]:(p=[m.mean[0],m.mean[1],m.mean[2],255],m.mean[3]!==void 0&&(p[3]=m.mean[3])),m===void 0||m.bias===void 0?g=[0,0,0,0]:typeof m.bias=="number"?g=[m.bias,m.bias,m.bias,m.bias]:(g=[m.bias[0],m.bias[1],m.bias[2],0],m.bias[3]!==void 0&&(g[3]=m.bias[3]));let b=h*s;if(i!==void 0&&(i.format!==void 0&&c===4&&i.format!=="RGBA"||c===3&&i.format!=="RGB"&&i.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let w=4,E=0,_=1,A=2,x=3,L=0,W=b,Y=b*2,H=-1;d==="RGBA"?(L=0,W=b,Y=b*2,H=b*3):d==="RGB"?(L=0,W=b,Y=b*2):d==="RBG"&&(L=0,Y=b,W=b*2),u=r.createImageData(s,h);for(let M=0;M<h*s;E+=w,_+=w,A+=w,x+=w,M++)u.data[E]=(n.data[L++]-g[0])*p[0],u.data[_]=(n.data[W++]-g[1])*p[1],u.data[A]=(n.data[Y++]-g[2])*p[2],u.data[x]=H===-1?255:(n.data[H++]-g[3])*p[3]}else throw new Error("Can not access image data");return u}});var dt,ir,ar,sr,ur,fr=U(()=>{"use strict";Xe();dt=(n,i)=>{if(n===void 0)throw new Error("Image buffer must be defined");if(i.height===void 0||i.width===void 0)throw new Error("Image height and width must be defined");if(i.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:r,width:u}=i,s=i.norm??{mean:255,bias:0},h,c;typeof s.mean=="number"?h=[s.mean,s.mean,s.mean,s.mean]:h=[s.mean[0],s.mean[1],s.mean[2],s.mean[3]??255],typeof s.bias=="number"?c=[s.bias,s.bias,s.bias,s.bias]:c=[s.bias[0],s.bias[1],s.bias[2],s.bias[3]??0];let d=i.format!==void 0?i.format:"RGBA",m=i.tensorFormat!==void 0&&i.tensorFormat!==void 0?i.tensorFormat:"RGB",p=r*u,g=m==="RGBA"?new Float32Array(p*4):new Float32Array(p*3),b=4,w=0,E=1,_=2,A=3,x=0,L=p,W=p*2,Y=-1;d==="RGB"&&(b=3,w=0,E=1,_=2,A=-1),m==="RGBA"?Y=p*3:m==="RBG"?(x=0,W=p,L=p*2):m==="BGR"&&(W=0,L=p,x=p*2);for(let M=0;M<p;M++,w+=b,_+=b,E+=b,A+=b)g[x++]=(n[w]+c[0])/h[0],g[L++]=(n[E]+c[1])/h[1],g[W++]=(n[_]+c[2])/h[2],Y!==-1&&A!==-1&&(g[Y++]=(n[A]+c[3])/h[3]);return m==="RGBA"?new q("float32",g,[1,4,r,u]):new q("float32",g,[1,3,r,u])},ir=async(n,i)=>{let r=typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement,u=typeof ImageData<"u"&&n instanceof ImageData,s=typeof ImageBitmap<"u"&&n instanceof ImageBitmap,h=typeof n=="string",c,d=i??{};if(r){let m=document.createElement("canvas");m.width=n.width,m.height=n.height;let p=m.getContext("2d");if(p!=null){let g=n.height,b=n.width;if(i!==void 0&&i.resizedHeight!==void 0&&i.resizedWidth!==void 0&&(g=i.resizedHeight,b=i.resizedWidth),i!==void 0){if(d=i,i.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");d.tensorFormat="RGBA",d.height=g,d.width=b}else d.tensorFormat="RGBA",d.height=g,d.width=b;p.drawImage(n,0,0),c=p.getImageData(0,0,b,g).data}else throw new Error("Can not access image data")}else if(u){let m,p;if(i!==void 0&&i.resizedWidth!==void 0&&i.resizedHeight!==void 0?(m=i.resizedHeight,p=i.resizedWidth):(m=n.height,p=n.width),i!==void 0&&(d=i),d.format="RGBA",d.height=m,d.width=p,i!==void 0){let g=document.createElement("canvas");g.width=p,g.height=m;let b=g.getContext("2d");if(b!=null)b.putImageData(n,0,0),c=b.getImageData(0,0,p,m).data;else throw new Error("Can not access image data")}else c=n.data}else if(s){if(i===void 0)throw new Error("Please provide image config with format for Imagebitmap");let m=document.createElement("canvas");m.width=n.width,m.height=n.height;let p=m.getContext("2d");if(p!=null){let g=n.height,b=n.width;return p.drawImage(n,0,0,b,g),c=p.getImageData(0,0,b,g).data,d.height=g,d.width=b,dt(c,d)}else throw new Error("Can not access image data")}else{if(h)return new Promise((m,p)=>{let g=document.createElement("canvas"),b=g.getContext("2d");if(!n||!b)return p();let w=new Image;w.crossOrigin="Anonymous",w.src=n,w.onload=()=>{g.width=w.width,g.height=w.height,b.drawImage(w,0,0,g.width,g.height);let E=b.getImageData(0,0,g.width,g.height);d.height=g.height,d.width=g.width,m(dt(E.data,d))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(c!==void 0)return dt(c,d);throw new Error("Input data provided is not supported - aborted tensor creation")},ar=(n,i)=>{let{width:r,height:u,download:s,dispose:h}=i,c=[1,u,r,4];return new q({location:"texture",type:"float32",texture:n,dims:c,download:s,dispose:h})},sr=(n,i)=>{let{dataType:r,dims:u,download:s,dispose:h}=i;return new q({location:"gpu-buffer",type:r??"float32",gpuBuffer:n,dims:u,download:s,dispose:h})},ur=(n,i,r)=>new q({location:"cpu-pinned",type:n,data:i,dims:r??[i.length]})});var Ie,qe,cr,lr,dr=U(()=>{"use strict";Ie=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),qe=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),cr=!1,lr=()=>{if(!cr){cr=!0;let n=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",i=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";n&&(Ie.set("int64",BigInt64Array),qe.set(BigInt64Array,"int64")),i&&(Ie.set("uint64",BigUint64Array),qe.set(BigUint64Array,"uint64"))}}});var pr,mr,hr=U(()=>{"use strict";Xe();pr=n=>{let i=1;for(let r=0;r<n.length;r++){let u=n[r];if(typeof u!="number"||!Number.isSafeInteger(u))throw new TypeError(`dims[${r}] must be an integer, got: ${u}`);if(u<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${u}`);i*=u}return i},mr=(n,i)=>{switch(n.location){case"cpu":return new q(n.type,n.data,i);case"cpu-pinned":return new q({location:"cpu-pinned",data:n.data,type:n.type,dims:i});case"texture":return new q({location:"texture",texture:n.texture,type:n.type,dims:i});case"gpu-buffer":return new q({location:"gpu-buffer",gpuBuffer:n.gpuBuffer,type:n.type,dims:i});default:throw new Error(`tensorReshape: tensor location ${n.location} is not supported`)}}});var q,Xe=U(()=>{"use strict";or();fr();dr();hr();q=class{constructor(i,r,u){lr();let s,h;if(typeof i=="object"&&"location"in i)switch(this.dataLocation=i.location,s=i.type,h=i.dims,i.location){case"cpu-pinned":{let d=Ie.get(s);if(!d)throw new TypeError(`unsupported type "${s}" to create tensor from pinned buffer`);if(!(i.data instanceof d))throw new TypeError(`buffer should be of type ${d.name}`);this.cpuData=i.data;break}case"texture":{if(s!=="float32")throw new TypeError(`unsupported type "${s}" to create tensor from texture`);this.gpuTextureData=i.texture,this.downloader=i.download,this.disposer=i.dispose;break}case"gpu-buffer":{if(s!=="float32"&&s!=="float16"&&s!=="int32"&&s!=="int64"&&s!=="uint32"&&s!=="bool")throw new TypeError(`unsupported type "${s}" to create tensor from gpu buffer`);this.gpuBufferData=i.gpuBuffer,this.downloader=i.download,this.disposer=i.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let d,m;if(typeof i=="string")if(s=i,m=u,i==="string"){if(!Array.isArray(r))throw new TypeError("A string tensor's data must be a string array.");d=r}else{let p=Ie.get(i);if(p===void 0)throw new TypeError(`Unsupported tensor type: ${i}.`);if(Array.isArray(r)){if(i==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");i==="uint64"||i==="int64"?d=p.from(r,BigInt):d=p.from(r)}else if(r instanceof p)d=r;else throw new TypeError(`A ${s} tensor's data must be type of ${p}`)}else if(m=r,Array.isArray(i)){if(i.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let p=typeof i[0];if(p==="string")s="string",d=i;else if(p==="boolean")s="bool",d=Uint8Array.from(i);else throw new TypeError(`Invalid element type of data array: ${p}.`)}else{let p=qe.get(i.constructor);if(p===void 0)throw new TypeError(`Unsupported type for tensor data: ${i.constructor}.`);s=p,d=i}if(m===void 0)m=[d.length];else if(!Array.isArray(m))throw new TypeError("A tensor's dims must be a number array");h=m,this.cpuData=d,this.dataLocation="cpu"}let c=pr(h);if(this.cpuData&&c!==this.cpuData.length)throw new Error(`Tensor's size(${c}) does not match data length(${this.cpuData.length}).`);this.type=s,this.dims=h,this.size=c}static async fromImage(i,r){return ir(i,r)}static fromTexture(i,r){return ar(i,r)}static fromGpuBuffer(i,r){return sr(i,r)}static fromPinnedBuffer(i,r,u){return ur(i,r,u)}toDataURL(i){return rr(this,i)}toImageData(i){return nr(this,i)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(i){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let r=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=r,i&&this.disposer&&(this.disposer(),this.disposer=void 0),r}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(i){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return mr(this,i)}}});var ne,pt=U(()=>{"use strict";Xe();ne=q});var Je,gr=U(()=>{"use strict";ct();pt();Je=class n{constructor(i){this.handler=i}async run(i,r,u){let s={},h={};if(typeof i!="object"||i===null||i instanceof ne||Array.isArray(i))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let c=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof ne)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");c=!1;for(let p of r){if(typeof p!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(p)===-1)throw new RangeError(`'fetches' contains invalid output name: ${p}.`);s[p]=null}if(typeof u=="object"&&u!==null)h=u;else if(typeof u<"u")throw new TypeError("'options' must be an object.")}else{let p=!1,g=Object.getOwnPropertyNames(r);for(let b of this.outputNames)if(g.indexOf(b)!==-1){let w=r[b];(w===null||w instanceof ne)&&(p=!0,c=!1,s[b]=w)}if(p){if(typeof u=="object"&&u!==null)h=u;else if(typeof u<"u")throw new TypeError("'options' must be an object.")}else h=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let p of this.inputNames)if(typeof i[p]>"u")throw new Error(`input '${p}' is missing in 'feeds'.`);if(c)for(let p of this.outputNames)s[p]=null;let d=await this.handler.run(i,s,h),m={};for(let p in d)if(Object.hasOwnProperty.call(d,p)){let g=d[p];g instanceof ne?m[p]=g:m[p]=new ne(g.type,g.data,g.dims)}return m}async release(){return this.handler.dispose()}static async create(i,r,u,s){let h,c={};if(typeof i=="string"){if(h=i,typeof r=="object"&&r!==null)c=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(i instanceof Uint8Array){if(h=i,typeof r=="object"&&r!==null)c=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(i instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&i instanceof SharedArrayBuffer){let b=i,w=0,E=i.byteLength;if(typeof r=="object"&&r!==null)c=r;else if(typeof r=="number"){if(w=r,!Number.isSafeInteger(w))throw new RangeError("'byteOffset' must be an integer.");if(w<0||w>=b.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${b.byteLength}).`);if(E=i.byteLength-w,typeof u=="number"){if(E=u,!Number.isSafeInteger(E))throw new RangeError("'byteLength' must be an integer.");if(E<=0||w+E>b.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${b.byteLength-w}].`);if(typeof s=="object"&&s!==null)c=s;else if(typeof s<"u")throw new TypeError("'options' must be an object.")}else if(typeof u<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");h=new Uint8Array(b,w,E)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let m=(c.executionProviders||[]).map(b=>typeof b=="string"?b:b.name),g=await(await qt(m)).createInferenceSessionHandler(h,c);return new n(g)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}});var Cn,yr=U(()=>{"use strict";gr();Cn=Je});var wr=U(()=>{"use strict"});var Ze,br=U(()=>{"use strict";Ze=class{constructor(i){this.handler=i}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}static async create(i,r){throw new Error("Method not implemented")}async loadParametersBuffer(i,r){throw new Error("Method not implemented.")}async getContiguousParameters(i){throw new Error("Method not implemented.")}async runTrainStep(i,r,u){throw new Error("Method not implemented.")}async release(){return this.handler.dispose()}}});var Dn,vr=U(()=>{"use strict";br();Dn=Ze});var Ee=U(()=>{"use strict";Jt();tr();yr();pt();wr();vr()});var Sr={};Ge(Sr,{readFile:()=>Un});var Un,Tr=U(()=>{Un=void 0});var Ar={};Ge(Ar,{join:()=>Ln});var Ln,Or=U(()=>{Ln=void 0});var _r=xn((Ir,mt)=>{"use strict";var Pr=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(i={}){var r=i,u,s;r.ready=new Promise((e,t)=>{u=e,s=t});var h=Object.assign({},r),c="./this.program",d=typeof window=="object",m=typeof importScripts=="function",p=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",g="",b,w,E;if(p){var _=(Tr(),Ye(Sr)),A=(Or(),Ye(Ar));g=m?A.dirname(g)+"/":__dirname+"/",b=(e,t)=>(e=e.startsWith("file://")?new URL(e):A.normalize(e),_.readFileSync(e,t?void 0:"utf8")),E=e=>(e=b(e,!0),e.buffer||(e=new Uint8Array(e)),e),w=(e,t,o,a=!0)=>{e=e.startsWith("file://")?new URL(e):A.normalize(e),_.readFile(e,a?void 0:"utf8",(f,y)=>{f?o(f):t(a?y.buffer:y)})},!r.thisProgram&&1<process.argv.length&&(c=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),r.inspect=()=>"[Emscripten Module object]"}else(d||m)&&(m?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),n&&(g=n),g.indexOf("blob:")!==0?g=g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):g="",b=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},m&&(E=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),w=(e,t,o)=>{var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=()=>{a.status==200||a.status==0&&a.response?t(a.response):o()},a.onerror=o,a.send(null)});var x=console.log.bind(console),L=console.error.bind(console);Object.assign(r,h),h=null,typeof WebAssembly!="object"&&De("no native wasm support detected");var W,Y=!1,H,M,oe,pe,S,B,Be,Ce,Te,ue;function C(){var e=W.buffer;r.HEAP8=H=new Int8Array(e),r.HEAP16=oe=new Int16Array(e),r.HEAPU8=M=new Uint8Array(e),r.HEAPU16=pe=new Uint16Array(e),r.HEAP32=S=new Int32Array(e),r.HEAPU32=B=new Uint32Array(e),r.HEAPF32=Be=new Float32Array(e),r.HEAPF64=ue=new Float64Array(e),r.HEAP64=Ce=new BigInt64Array(e),r.HEAPU64=Te=new BigUint64Array(e)}var fe=[],be=[],te=[],re=0,j=null,V=null;function De(e){throw e="Aborted("+e+")",L(e),Y=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),s(e),e}function me(e){return e.startsWith("data:application/octet-stream;base64,")}var ce;if(ce="ort-wasm.wasm",!me(ce)){var Ae=ce;ce=r.locateFile?r.locateFile(Ae,g):g+Ae}function Ue(e){if(E)return E(e);throw"both async and sync fetching of the wasm failed"}function he(e){if(d||m){if(typeof fetch=="function"&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>Ue(e));if(w)return new Promise((t,o)=>{w(e,a=>t(new Uint8Array(a)),o)})}return Promise.resolve().then(()=>Ue(e))}function le(e,t,o){return he(e).then(a=>WebAssembly.instantiate(a,t)).then(a=>a).then(o,a=>{L(`failed to asynchronously prepare wasm: ${a}`),De(a)})}function Le(e,t){var o=ce;return typeof WebAssembly.instantiateStreaming!="function"||me(o)||o.startsWith("file://")||p||typeof fetch!="function"?le(o,e,t):fetch(o,{credentials:"same-origin"}).then(a=>WebAssembly.instantiateStreaming(a,e).then(t,function(f){return L(`wasm streaming compile failed: ${f}`),L("falling back to ArrayBuffer instantiation"),le(o,e,t)}))}function X(e){this.Va=e-24,this.fb=function(t){B[this.Va+4>>>2>>>0]=t},this.eb=function(t){B[this.Va+8>>>2>>>0]=t},this.Za=function(t,o){this.$a(),this.fb(t),this.eb(o)},this.$a=function(){B[this.Va+16>>>2>>>0]=0}}var G=0,Oe=0,Pe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Me=(e,t,o)=>{t>>>=0;var a=t+o;for(o=t;e[o]&&!(o>=a);)++o;if(16<o-t&&e.buffer&&Pe)return Pe.decode(e.subarray(t,o));for(a="";t<o;){var f=e[t++];if(f&128){var y=e[t++]&63;if((f&224)==192)a+=String.fromCharCode((f&31)<<6|y);else{var T=e[t++]&63;f=(f&240)==224?(f&15)<<12|y<<6|T:(f&7)<<18|y<<12|T<<6|e[t++]&63,65536>f?a+=String.fromCharCode(f):(f-=65536,a+=String.fromCharCode(55296|f>>10,56320|f&1023))}}else a+=String.fromCharCode(f)}return a},Re=(e,t)=>(e>>>=0)?Me(M,e,t):"",Fe=e=>{for(var t=0,o=0;o<e.length;++o){var a=e.charCodeAt(o);127>=a?t++:2047>=a?t+=2:55296<=a&&57343>=a?(t+=4,++o):t+=3}return t},ke=(e,t,o,a)=>{if(o>>>=0,!(0<a))return 0;var f=o;a=o+a-1;for(var y=0;y<e.length;++y){var T=e.charCodeAt(y);if(55296<=T&&57343>=T){var v=e.charCodeAt(++y);T=65536+((T&1023)<<10)|v&1023}if(127>=T){if(o>=a)break;t[o++>>>0]=T}else{if(2047>=T){if(o+1>=a)break;t[o++>>>0]=192|T>>6}else{if(65535>=T){if(o+2>=a)break;t[o++>>>0]=224|T>>12}else{if(o+3>=a)break;t[o++>>>0]=240|T>>18,t[o++>>>0]=128|T>>12&63}t[o++>>>0]=128|T>>6&63}t[o++>>>0]=128|T&63}}return t[o>>>0]=0,o-f},Ot=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},Pt,ee=e=>{for(var t="";M[e>>>0];)t+=Pt[M[e++>>>0]];return t},ot={},it={},an={},de;function sn(e,t,o={}){var a=t.name;if(!e)throw new de(`type "${a}" must have a positive integer typeid pointer`);if(it.hasOwnProperty(e)){if(o.gb)return;throw new de(`Cannot register type '${a}' twice`)}it[e]=t,delete an[e],ot.hasOwnProperty(e)&&(t=ot[e],delete ot[e],t.forEach(f=>f()))}function ie(e,t,o={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");sn(e,t,o)}var It=(e,t,o)=>{switch(t){case 1:return o?a=>H[a>>>0>>>0]:a=>M[a>>>0>>>0];case 2:return o?a=>oe[a>>>1>>>0]:a=>pe[a>>>1>>>0];case 4:return o?a=>S[a>>>2>>>0]:a=>B[a>>>2>>>0];case 8:return o?a=>Ce[a>>>3]:a=>Te[a>>>3];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}};function _t(){this.Sa=[void 0],this.bb=[]}var K=new _t;function at(e){e>>>=0,e>=K.Va&&--K.get(e).cb===0&&K.$a(e)}var J=e=>{if(!e)throw new de("Cannot use deleted val. handle = "+e);return K.get(e).value},Q=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return K.Za({cb:1,value:e})}};function xt(e){return this.fromWireType(S[e>>>2>>>0])}var un=(e,t)=>{switch(t){case 4:return function(o){return this.fromWireType(Be[o>>>2>>>0])};case 8:return function(o){return this.fromWireType(ue[o>>>3>>>0])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}};function fn(e){return this.fromWireType(B[e>>>2>>>0])}var Bt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,cn=(e,t)=>{for(var o=e>>1,a=o+t/2;!(o>=a)&&pe[o>>>0];)++o;if(o<<=1,32<o-e&&Bt)return Bt.decode(M.subarray(e>>>0,o>>>0));for(o="",a=0;!(a>=t/2);++a){var f=oe[e+2*a>>>1>>>0];if(f==0)break;o+=String.fromCharCode(f)}return o},ln=(e,t,o)=>{if(o===void 0&&(o=2147483647),2>o)return 0;o-=2;var a=t;o=o<2*e.length?o/2:e.length;for(var f=0;f<o;++f)oe[t>>>1>>>0]=e.charCodeAt(f),t+=2;return oe[t>>>1>>>0]=0,t-a},dn=e=>2*e.length,pn=(e,t)=>{for(var o=0,a="";!(o>=t/4);){var f=S[e+4*o>>>2>>>0];if(f==0)break;++o,65536<=f?(f-=65536,a+=String.fromCharCode(55296|f>>10,56320|f&1023)):a+=String.fromCharCode(f)}return a},mn=(e,t,o)=>{if(t>>>=0,o===void 0&&(o=2147483647),4>o)return 0;var a=t;o=a+o-4;for(var f=0;f<e.length;++f){var y=e.charCodeAt(f);if(55296<=y&&57343>=y){var T=e.charCodeAt(++f);y=65536+((y&1023)<<10)|T&1023}if(S[t>>>2>>>0]=y,t+=4,t+4>o)break}return S[t>>>2>>>0]=0,t-a},hn=e=>{for(var t=0,o=0;o<e.length;++o){var a=e.charCodeAt(o);55296<=a&&57343>=a&&++o,t+=4}return t},We=(e,t)=>{var o=it[e];if(o===void 0)throw e=Ht(e),o=ee(e),ae(e),new de(t+" has unknown type "+o);return o},gn={},Ne=e=>{var t=gn[e];return t===void 0?ee(e):t},$e=[],Ct=()=>typeof globalThis=="object"?globalThis:Function("return this")(),yn=e=>{var t=$e.length;return $e.push(e),t},wn=(e,t)=>{for(var o=Array(e),a=0;a<e;++a)o[a]=We(B[t+4*a>>>2>>>0],"parameter "+a);return o},Dt=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return 48<=t&&57>=t?`_${e}`:e},Ut={};function bn(e,t){return e=Dt(e),{[e]:function(){return t.apply(this,arguments)}}[e]}function vn(e){var t=Function;if(!(t instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof t} which is not a function`);var o=bn(t.name||"unknownFunctionName",function(){});return o.prototype=t.prototype,o=new o,e=t.apply(o,e),e instanceof Object?e:o}var En=e=>{for(var t="",o=0;o<e;++o)t+=(o!==0?", ":"")+"arg"+o;var a="return function emval_allocator_"+e+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`;for(o=0;o<e;++o)a+="var argType"+o+" = requireRegisteredType(HEAPU32[((argTypes)>>>2)], 'parameter "+o+`');
var arg`+o+" = argType"+o+`.readValueFromPointer(args);
args += argType`+o+`['argPackAdvance'];
argTypes += 4;
`;return new Function("requireRegisteredType","Module","valueToHandle","getMemory",a+("var obj = new constructor("+t+`);
return valueToHandle(obj);
}
`))(We,r,Q,()=>B)},Lt={},ve=e=>e%4===0&&(e%100!==0||e%400===0),Mt=[0,31,60,91,121,152,182,213,244,274,305,335],Rt=[0,31,59,90,120,151,181,212,243,273,304,334],Ft=e=>{var t=Fe(e)+1,o=He(t);return o&&ke(e,M,o,t),o},st={},kt=()=>{if(!ut){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"},t;for(t in st)st[t]===void 0?delete e[t]:e[t]=st[t];var o=[];for(t in e)o.push(`${t}=${e[t]}`);ut=o}return ut},ut,Sn=[null,[],[]],Wt=[31,29,31,30,31,30,31,31,30,31,30,31],Nt=[31,28,31,30,31,30,31,31,30,31,30,31];function Tn(e){var t=Array(Fe(e)+1);return ke(e,t,0,t.length),t}function $t(e,t,o,a){function f(l,D,F){for(l=typeof l=="number"?l.toString():l||"";l.length<D;)l=F[0]+l;return l}function y(l,D){return f(l,D,"0")}function T(l,D){function F(Xt){return 0>Xt?-1:0<Xt?1:0}var ge;return(ge=F(l.getFullYear()-D.getFullYear()))===0&&(ge=F(l.getMonth()-D.getMonth()))===0&&(ge=F(l.getDate()-D.getDate())),ge}function v(l){switch(l.getDay()){case 0:return new Date(l.getFullYear()-1,11,29);case 1:return l;case 2:return new Date(l.getFullYear(),0,3);case 3:return new Date(l.getFullYear(),0,2);case 4:return new Date(l.getFullYear(),0,1);case 5:return new Date(l.getFullYear()-1,11,31);case 6:return new Date(l.getFullYear()-1,11,30)}}function O(l){var D=l.Ta;for(l=new Date(new Date(l.Ua+1900,0,1).getTime());0<D;){var F=l.getMonth(),ge=(ve(l.getFullYear())?Wt:Nt)[F];if(D>ge-l.getDate())D-=ge-l.getDate()+1,l.setDate(1),11>F?l.setMonth(F+1):(l.setMonth(0),l.setFullYear(l.getFullYear()+1));else{l.setDate(l.getDate()+D);break}}return F=new Date(l.getFullYear()+1,0,4),D=v(new Date(l.getFullYear(),0,4)),F=v(F),0>=T(D,l)?0>=T(F,l)?l.getFullYear()+1:l.getFullYear():l.getFullYear()-1}e>>>=0,t>>>=0,o>>>=0,a>>>=0;var I=B[a+40>>>2>>>0];a={kb:S[a>>>2>>>0],jb:S[a+4>>>2>>>0],Xa:S[a+8>>>2>>>0],ab:S[a+12>>>2>>>0],Ya:S[a+16>>>2>>>0],Ua:S[a+20>>>2>>>0],Oa:S[a+24>>>2>>>0],Ta:S[a+28>>>2>>>0],mb:S[a+32>>>2>>>0],ib:S[a+36>>>2>>>0],lb:I?Re(I):""},o=Re(o),I={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var R in I)o=o.replace(new RegExp(R,"g"),I[R]);var Z="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),se="January February March April May June July August September October November December".split(" ");I={"%a":l=>Z[l.Oa].substring(0,3),"%A":l=>Z[l.Oa],"%b":l=>se[l.Ya].substring(0,3),"%B":l=>se[l.Ya],"%C":l=>y((l.Ua+1900)/100|0,2),"%d":l=>y(l.ab,2),"%e":l=>f(l.ab,2," "),"%g":l=>O(l).toString().substring(2),"%G":l=>O(l),"%H":l=>y(l.Xa,2),"%I":l=>(l=l.Xa,l==0?l=12:12<l&&(l-=12),y(l,2)),"%j":l=>{for(var D=0,F=0;F<=l.Ya-1;D+=(ve(l.Ua+1900)?Wt:Nt)[F++]);return y(l.ab+D,3)},"%m":l=>y(l.Ya+1,2),"%M":l=>y(l.jb,2),"%n":()=>`
`,"%p":l=>0<=l.Xa&&12>l.Xa?"AM":"PM","%S":l=>y(l.kb,2),"%t":()=>"	","%u":l=>l.Oa||7,"%U":l=>y(Math.floor((l.Ta+7-l.Oa)/7),2),"%V":l=>{var D=Math.floor((l.Ta+7-(l.Oa+6)%7)/7);if(2>=(l.Oa+371-l.Ta-2)%7&&D++,D)D==53&&(F=(l.Oa+371-l.Ta)%7,F==4||F==3&&ve(l.Ua)||(D=1));else{D=52;var F=(l.Oa+7-l.Ta-1)%7;(F==4||F==5&&ve(l.Ua%400-1))&&D++}return y(D,2)},"%w":l=>l.Oa,"%W":l=>y(Math.floor((l.Ta+7-(l.Oa+6)%7)/7),2),"%y":l=>(l.Ua+1900).toString().substring(2),"%Y":l=>l.Ua+1900,"%z":l=>{l=l.ib;var D=0<=l;return l=Math.abs(l)/60,(D?"+":"-")+("0000"+(l/60*100+l%60)).slice(-4)},"%Z":l=>l.lb,"%%":()=>"%"},o=o.replace(/%%/g,"\0\0");for(R in I)o.includes(R)&&(o=o.replace(new RegExp(R,"g"),I[R](a)));return o=o.replace(/\0\0/g,"%"),R=Tn(o),R.length>t?0:(H.set(R,e>>>0),R.length-1)}for(var zt=Array(256),ze=0;256>ze;++ze)zt[ze]=String.fromCharCode(ze);Pt=zt,de=r.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},r.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Object.assign(_t.prototype,{get(e){return this.Sa[e]},has(e){return this.Sa[e]!==void 0},Za(e){var t=this.bb.pop()||this.Sa.length;return this.Sa[t]=e,t},$a(e){this.Sa[e]=void 0,this.bb.push(e)}}),K.Sa.push({value:void 0},{value:null},{value:!0},{value:!1}),K.Va=K.Sa.length,r.count_emval_handles=()=>{for(var e=0,t=K.Va;t<K.Sa.length;++t)K.Sa[t]!==void 0&&++e;return e};var An={a:function(e,t,o){throw e>>>=0,new X(e).Za(t>>>0,o>>>0),G=e,Oe++,G},v:function(){return 0},ba:function(){},N:function(){},P:function(){},H:function(){return 0},$:function(){},V:function(){},_:function(){},A:function(){},O:function(){},L:function(){},aa:function(){},M:function(){},D:function(e,t,o,a,f){t>>>=0,t=ee(t);var y=t.indexOf("u")!=-1;y&&(f=(1n<<64n)-1n),ie(e>>>0,{name:t,fromWireType:T=>T,toWireType:function(T,v){if(typeof v!="bigint"&&typeof v!="number")throw new TypeError(`Cannot convert "${Ot(v)}" to ${this.name}`);if(v<a||v>f)throw new TypeError(`Passing a number "${Ot(v)}" from JS side to C/C++ side to an argument of type "${t}", which is outside the valid range [${a}, ${f}]!`);return v},argPackAdvance:8,readValueFromPointer:It(t,o>>>0,!y),Wa:null})},ea:function(e,t,o,a){t=ee(t>>>0),ie(e>>>0,{name:t,fromWireType:function(f){return!!f},toWireType:function(f,y){return y?o:a},argPackAdvance:8,readValueFromPointer:function(f){return this.fromWireType(M[f>>>0])},Wa:null})},da:function(e,t){t=ee(t>>>0),ie(e>>>0,{name:t,fromWireType:o=>{var a=J(o);return at(o),a},toWireType:(o,a)=>Q(a),argPackAdvance:8,readValueFromPointer:xt,Wa:null})},C:function(e,t,o){t=ee(t>>>0),ie(e>>>0,{name:t,fromWireType:a=>a,toWireType:(a,f)=>f,argPackAdvance:8,readValueFromPointer:un(t,o>>>0),Wa:null})},p:function(e,t,o,a,f){if(e>>>=0,o>>>=0,t=ee(t>>>0),f===-1&&(f=4294967295),f=v=>v,a===0){var y=32-8*o;f=v=>v<<y>>>y}var T=t.includes("unsigned")?function(v,O){return O>>>0}:function(v,O){return O};ie(e,{name:t,fromWireType:f,toWireType:T,argPackAdvance:8,readValueFromPointer:It(t,o,a!==0),Wa:null})},l:function(e,t,o){function a(y){return new f(H.buffer,B[y+4>>>2>>>0],B[y>>>2>>>0])}var f=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][t];o=ee(o>>>0),ie(e>>>0,{name:o,fromWireType:a,argPackAdvance:8,readValueFromPointer:a},{gb:!0})},E:function(e,t){t=ee(t>>>0);var o=t==="std::string";ie(e>>>0,{name:t,fromWireType:function(a){var f=B[a>>>2>>>0],y=a+4;if(o)for(var T=y,v=0;v<=f;++v){var O=y+v;if(v==f||M[O>>>0]==0){if(T=Re(T,O-T),I===void 0)var I=T;else I+=String.fromCharCode(0),I+=T;T=O+1}}else{for(I=Array(f),v=0;v<f;++v)I[v]=String.fromCharCode(M[y+v>>>0]);I=I.join("")}return ae(a),I},toWireType:function(a,f){f instanceof ArrayBuffer&&(f=new Uint8Array(f));var y=typeof f=="string";if(!(y||f instanceof Uint8Array||f instanceof Uint8ClampedArray||f instanceof Int8Array))throw new de("Cannot pass non-string to std::string");var T=o&&y?Fe(f):f.length,v=He(4+T+1),O=v+4;if(B[v>>>2>>>0]=T,o&&y)ke(f,M,O,T+1);else if(y)for(y=0;y<T;++y){var I=f.charCodeAt(y);if(255<I)throw ae(O),new de("String has UTF-16 code units that do not fit in 8 bits");M[O+y>>>0]=I}else for(y=0;y<T;++y)M[O+y>>>0]=f[y];return a!==null&&a.push(ae,v),v},argPackAdvance:8,readValueFromPointer:fn,Wa(a){ae(a)}})},x:function(e,t,o){if(t>>>=0,o>>>=0,o=ee(o),t===2)var a=cn,f=ln,y=dn,T=()=>pe,v=1;else t===4&&(a=pn,f=mn,y=hn,T=()=>B,v=2);ie(e>>>0,{name:o,fromWireType:O=>{for(var I=B[O>>>2>>>0],R=T(),Z,se=O+4,l=0;l<=I;++l){var D=O+4+l*t;(l==I||R[D>>>v]==0)&&(se=a(se,D-se),Z===void 0?Z=se:(Z+=String.fromCharCode(0),Z+=se),se=D+t)}return ae(O),Z},toWireType:(O,I)=>{if(typeof I!="string")throw new de(`Cannot pass non-string to C++ string type ${o}`);var R=y(I),Z=He(4+R+t);return B[Z>>>2]=R>>v,f(I,Z+4,R+t),O!==null&&O.push(ae,Z),Z},argPackAdvance:8,readValueFromPointer:xt,Wa(O){ae(O)}})},fa:function(e,t){t=ee(t>>>0),ie(e>>>0,{hb:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ca:()=>!0,o:function(e,t,o){t>>>=0,o>>>=0,e=J(e>>>0),t=We(t,"emval::as");var a=[],f=Q(a);return B[o>>>2>>>0]=f,t.toWireType(a,e)},h:function(e,t,o,a,f){o>>>=0,a>>>=0,f>>>=0,e=$e[e>>>0],t=J(t>>>0),o=Ne(o);var y=[];return B[a>>>2>>>0]=Q(y),e(t,o,y,f)},r:function(e,t,o,a){o>>>=0,a>>>=0,e=$e[e>>>0],t=J(t>>>0),o=Ne(o),e(t,o,null,a)},b:at,F:function(e,t){return t>>>=0,e=J(e>>>0),t=J(t),e==t},u:function(e){return e>>>=0,e===0?Q(Ct()):(e=Ne(e),Q(Ct()[e]))},g:function(e,t){var o=wn(e,t>>>0),a=o[0];t=a.name+"_$"+o.slice(1).map(function(R){return R.name}).join("_")+"$";var f=Ut[t];if(f!==void 0)return f;f=["retType"];for(var y=[a],T="",v=0;v<e-1;++v)T+=(v!==0?", ":"")+"arg"+v,f.push("argType"+v),y.push(o[1+v]);var O="return function "+Dt("methodCaller_"+t)+`(handle, name, destructors, args) {
`,I=0;for(v=0;v<e-1;++v)O+="    var arg"+v+" = argType"+v+".readValueFromPointer(args"+(I?"+"+I:"")+`);
`,I+=o[v+1].argPackAdvance;for(O+="    var rv = handle[name]("+T+`);
`,v=0;v<e-1;++v)o[v+1].deleteObject&&(O+="    argType"+v+".deleteObject(arg"+v+`);
`);return a.hb||(O+=`    return retType.toWireType(destructors, rv);
`),f.push(O+`};
`),e=vn(f).apply(null,y),f=yn(e),Ut[t]=f},q:function(e,t){return t>>>=0,e=J(e>>>0),t=J(t),Q(e[t])},c:function(e){e>>>=0,4<e&&(K.get(e).cb+=1)},G:function(e,t,o,a){o>>>=0,a>>>=0,e=J(e>>>0);var f=Lt[t];return f||(f=En(t),Lt[t]=f),f(e,o,a)},s:function(){return Q([])},k:function(e){e=J(e>>>0);for(var t=Array(e.length),o=0;o<e.length;o++)t[o]=e[o];return Q(t)},d:function(e){return Q(Ne(e>>>0))},j:function(){return Q({})},f:function(e){e>>>=0;for(var t=J(e);t.length;){var o=t.pop();t.pop()(o)}at(e)},i:function(e,t,o){t>>>=0,o>>>=0,e=J(e>>>0),t=J(t),o=J(o),e[t]=o},e:function(e,t){return t>>>=0,e=We(e>>>0,"_emval_take_value"),e=e.readValueFromPointer(t),Q(e)},S:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),t>>>=0,e=new Date(1e3*e),S[t>>>2>>>0]=e.getUTCSeconds(),S[t+4>>>2>>>0]=e.getUTCMinutes(),S[t+8>>>2>>>0]=e.getUTCHours(),S[t+12>>>2>>>0]=e.getUTCDate(),S[t+16>>>2>>>0]=e.getUTCMonth(),S[t+20>>>2>>>0]=e.getUTCFullYear()-1900,S[t+24>>>2>>>0]=e.getUTCDay(),S[t+28>>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},T:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),t>>>=0,e=new Date(1e3*e),S[t>>>2>>>0]=e.getSeconds(),S[t+4>>>2>>>0]=e.getMinutes(),S[t+8>>>2>>>0]=e.getHours(),S[t+12>>>2>>>0]=e.getDate(),S[t+16>>>2>>>0]=e.getMonth(),S[t+20>>>2>>>0]=e.getFullYear()-1900,S[t+24>>>2>>>0]=e.getDay(),S[t+28>>>2>>>0]=(ve(e.getFullYear())?Mt:Rt)[e.getMonth()]+e.getDate()-1|0,S[t+36>>>2>>>0]=-(60*e.getTimezoneOffset());var o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),a=new Date(e.getFullYear(),0,1).getTimezoneOffset();S[t+32>>>2>>>0]=(o!=a&&e.getTimezoneOffset()==Math.min(a,o))|0},U:function(e){e>>>=0;var t=new Date(S[e+20>>>2>>>0]+1900,S[e+16>>>2>>>0],S[e+12>>>2>>>0],S[e+8>>>2>>>0],S[e+4>>>2>>>0],S[e>>>2>>>0],0),o=S[e+32>>>2>>>0],a=t.getTimezoneOffset(),f=new Date(t.getFullYear(),6,1).getTimezoneOffset(),y=new Date(t.getFullYear(),0,1).getTimezoneOffset(),T=Math.min(y,f);return 0>o?S[e+32>>>2>>>0]=+(f!=y&&T==a):0<o!=(T==a)&&(f=Math.max(y,f),t.setTime(t.getTime()+6e4*((0<o?T:f)-a))),S[e+24>>>2>>>0]=t.getDay(),S[e+28>>>2>>>0]=(ve(t.getFullYear())?Mt:Rt)[t.getMonth()]+t.getDate()-1|0,S[e>>>2>>>0]=t.getSeconds(),S[e+4>>>2>>>0]=t.getMinutes(),S[e+8>>>2>>>0]=t.getHours(),S[e+12>>>2>>>0]=t.getDate(),S[e+16>>>2>>>0]=t.getMonth(),S[e+20>>>2>>>0]=t.getYear(),BigInt(t.getTime()/1e3)},Q:function(){return-52},R:function(){},J:function(e,t,o){function a(O){return(O=O.toTimeString().match(/\(([A-Za-z ]+)\)$/))?O[1]:"GMT"}o>>>=0;var f=new Date().getFullYear(),y=new Date(f,0,1),T=new Date(f,6,1);f=y.getTimezoneOffset();var v=T.getTimezoneOffset();B[e>>>0>>>2>>>0]=60*Math.max(f,v),S[t>>>0>>>2>>>0]=+(f!=v),e=a(y),t=a(T),e=Ft(e),t=Ft(t),v<f?(B[o>>>2>>>0]=e,B[o+4>>>2>>>0]=t):(B[o>>>2>>>0]=t,B[o+4>>>2>>>0]=e)},t:()=>{De("")},B:()=>Date.now(),K:function(){return 4294901760},n:()=>performance.now(),Z:function(e,t,o){return t>>>=0,M.copyWithin(e>>>0>>>0,t>>>0,t+(o>>>0)>>>0)},I:function(e){e>>>=0;var t=M.length;if(4294901760<e)return!1;for(var o=1;4>=o;o*=2){var a=t*(1+.2/o);a=Math.min(a,e+100663296);var f=Math;a=Math.max(e,a);e:{f=(f.min.call(f,4294901760,a+(65536-a%65536)%65536)-W.buffer.byteLength+65535)/65536;try{W.grow(f),C();var y=1;break e}catch{}y=void 0}if(y)return!0}return!1},X:function(e,t){e>>>=0,t>>>=0;var o=0;return kt().forEach((a,f)=>{var y=t+o;for(f=B[e+4*f>>>2>>>0]=y,y=0;y<a.length;++y)H[f++>>>0>>>0]=a.charCodeAt(y);H[f>>>0>>>0]=0,o+=a.length+1}),0},Y:function(e,t){e>>>=0,t>>>=0;var o=kt();B[e>>>2>>>0]=o.length;var a=0;return o.forEach(f=>a+=f.length+1),B[t>>>2>>>0]=a,0},w:()=>52,z:function(){return 52},W:function(){return 70},y:function(e,t,o,a){t>>>=0,o>>>=0,a>>>=0;for(var f=0,y=0;y<o;y++){var T=B[t>>>2>>>0],v=B[t+4>>>2>>>0];t+=8;for(var O=0;O<v;O++){var I=M[T+O>>>0],R=Sn[e];I===0||I===10?((e===1?x:L)(Me(R,0)),R.length=0):R.push(I)}f+=v}return B[a>>>2>>>0]=f,0},ga:$t,m:function(e,t,o,a){return $t(e>>>0,t>>>0,o>>>0,a>>>0)}},P=function(){var e={a:An};return re++,Le(e,function(t){P=t.instance.exports,P=On(),W=P.ha,C(),be.unshift(P.ia),re--,re==0&&(j!==null&&(clearInterval(j),j=null),V&&(t=V,V=null,t()))}).catch(s),{}}();r._OrtInit=(e,t)=>(r._OrtInit=P.ja)(e,t),r._OrtGetLastError=(e,t)=>(r._OrtGetLastError=P.ka)(e,t),r._OrtCreateSessionOptions=(e,t,o,a,f,y,T,v,O,I)=>(r._OrtCreateSessionOptions=P.la)(e,t,o,a,f,y,T,v,O,I),r._OrtAppendExecutionProvider=(e,t)=>(r._OrtAppendExecutionProvider=P.ma)(e,t),r._OrtAddFreeDimensionOverride=(e,t,o)=>(r._OrtAddFreeDimensionOverride=P.na)(e,t,o),r._OrtAddSessionConfigEntry=(e,t,o)=>(r._OrtAddSessionConfigEntry=P.oa)(e,t,o),r._OrtReleaseSessionOptions=e=>(r._OrtReleaseSessionOptions=P.pa)(e),r._OrtCreateSession=(e,t,o)=>(r._OrtCreateSession=P.qa)(e,t,o),r._OrtReleaseSession=e=>(r._OrtReleaseSession=P.ra)(e),r._OrtGetInputOutputCount=(e,t,o)=>(r._OrtGetInputOutputCount=P.sa)(e,t,o),r._OrtGetInputName=(e,t)=>(r._OrtGetInputName=P.ta)(e,t),r._OrtGetOutputName=(e,t)=>(r._OrtGetOutputName=P.ua)(e,t),r._OrtFree=e=>(r._OrtFree=P.va)(e),r._OrtCreateTensor=(e,t,o,a,f,y)=>(r._OrtCreateTensor=P.wa)(e,t,o,a,f,y),r._OrtGetTensorData=(e,t,o,a,f)=>(r._OrtGetTensorData=P.xa)(e,t,o,a,f),r._OrtReleaseTensor=e=>(r._OrtReleaseTensor=P.ya)(e),r._OrtCreateRunOptions=(e,t,o,a)=>(r._OrtCreateRunOptions=P.za)(e,t,o,a),r._OrtAddRunConfigEntry=(e,t,o)=>(r._OrtAddRunConfigEntry=P.Aa)(e,t,o),r._OrtReleaseRunOptions=e=>(r._OrtReleaseRunOptions=P.Ba)(e),r._OrtCreateBinding=e=>(r._OrtCreateBinding=P.Ca)(e),r._OrtBindInput=(e,t,o)=>(r._OrtBindInput=P.Da)(e,t,o),r._OrtBindOutput=(e,t,o,a)=>(r._OrtBindOutput=P.Ea)(e,t,o,a),r._OrtClearBoundOutputs=e=>(r._OrtClearBoundOutputs=P.Fa)(e),r._OrtReleaseBinding=e=>(r._OrtReleaseBinding=P.Ga)(e),r._OrtRunWithBinding=(e,t,o,a,f)=>(r._OrtRunWithBinding=P.Ha)(e,t,o,a,f),r._OrtRun=(e,t,o,a,f,y,T,v)=>(r._OrtRun=P.Ia)(e,t,o,a,f,y,T,v),r._OrtEndProfiling=e=>(r._OrtEndProfiling=P.Ja)(e);var He=r._malloc=e=>(He=r._malloc=P.Ka)(e),ae=r._free=e=>(ae=r._free=P.La)(e),Ht=e=>(Ht=P.Ma)(e);r.__embind_initialize_bindings=()=>(r.__embind_initialize_bindings=P.Na)();var jt=()=>(jt=P.Pa)(),Gt=e=>(Gt=P.Qa)(e),Yt=e=>(Yt=P.Ra)(e);function On(){var e=P;e=Object.assign({},e);var t=a=>()=>a()>>>0,o=a=>f=>a(f)>>>0;return e.__errno_location=t(e.__errno_location),e.Ka=o(e.Ka),e.Ma=o(e.Ma),e.Pa=t(e.Pa),e.Ra=o(e.Ra),e}r.stackAlloc=Yt,r.stackSave=jt,r.stackRestore=Gt,r.UTF8ToString=Re,r.stringToUTF8=(e,t,o)=>ke(e,M,t,o),r.lengthBytesUTF8=Fe;var je;V=function e(){je||Vt(),je||(V=e)};function Vt(){if(!(0<re)){for(;0<fe.length;)fe.shift()(r);if(!(0<re||je||(je=!0,r.calledRun=!0,Y))){for(;0<be.length;)be.shift()(r);for(u(r);0<te.length;)te.shift()(r)}}}return Vt(),i.ready}})();typeof Ir=="object"&&typeof mt=="object"?mt.exports=Pr:typeof define=="function"&&define.amd&&define([],()=>Pr)});var yt,Mn,ht,gt,Ke,xr,Rn,Fn,kn,Br,N,Se=U(()=>{"use strict";yt=_r();Mn=yt,gt=!1,Ke=!1,xr=!1,Rn=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},Fn=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},kn=(n,i)=>n?i?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":i?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Br=async n=>{if(gt)return Promise.resolve();if(Ke)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(xr)throw new Error("previous call to 'initializeWebAssembly()' failed.");Ke=!0;let i=n.initTimeout,r=n.numThreads,u=n.simd,s=r>1&&Rn(),h=u&&Fn(),c=n.wasmPaths,d=typeof c=="string"?c:void 0,m=kn(h,s),p=typeof c=="object"?c[m]:void 0,g=!1,b=[];if(i>0&&b.push(new Promise(w=>{setTimeout(()=>{g=!0,w()},i)})),b.push(new Promise((w,E)=>{(s?Mn:yt)({locateFile:(x,L)=>x.endsWith(".wasm")?p||(d??L)+m:L+x}).then(x=>{Ke=!1,gt=!0,ht=x,w()},x=>{Ke=!1,xr=!0,E(x)})})),await Promise.race(b),g)throw new Error(`WebAssembly backend initializing failed due to timeout: ${i}ms`)},N=()=>{if(gt&&ht)return ht;throw new Error("WebAssembly is not initialized yet.")}});var $,_e,k,Qe=U(()=>{"use strict";Se();$=(n,i)=>{let r=N(),u=r.lengthBytesUTF8(n)+1,s=r._malloc(u);return r.stringToUTF8(n,s,u),i.push(s),s},_e=(n,i,r,u)=>{if(typeof n=="object"&&n!==null){if(r.has(n))throw new Error("Circular reference in options");r.add(n)}Object.entries(n).forEach(([s,h])=>{let c=i?i+s:s;if(typeof h=="object")_e(h,c+".",r,u);else if(typeof h=="string"||typeof h=="number")u(c,h.toString());else if(typeof h=="boolean")u(c,h?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof h}`)})},k=n=>{let i=N(),r=i.stackSave();try{let u=i.stackAlloc(8);i._OrtGetLastError(u,u+4);let s=i.HEAP32[u/4],h=i.HEAPU32[u/4+1],c=h?i.UTF8ToString(h):"";throw new Error(`${n} ERROR_CODE: ${s}, ERROR_MESSAGE: ${c}`)}finally{i.stackRestore(r)}}});var Cr,Dr=U(()=>{"use strict";Se();Qe();Cr=n=>{let i=N(),r=0,u=[],s=n||{};try{if(n?.logSeverityLevel===void 0)s.logSeverityLevel=2;else if(typeof n.logSeverityLevel!="number"||!Number.isInteger(n.logSeverityLevel)||n.logSeverityLevel<0||n.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${n.logSeverityLevel}`);if(n?.logVerbosityLevel===void 0)s.logVerbosityLevel=0;else if(typeof n.logVerbosityLevel!="number"||!Number.isInteger(n.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${n.logVerbosityLevel}`);n?.terminate===void 0&&(s.terminate=!1);let h=0;return n?.tag!==void 0&&(h=$(n.tag,u)),r=i._OrtCreateRunOptions(s.logSeverityLevel,s.logVerbosityLevel,!!s.terminate,h),r===0&&k("Can't create run options."),n?.extra!==void 0&&_e(n.extra,"",new WeakSet,(c,d)=>{let m=$(c,u),p=$(d,u);i._OrtAddRunConfigEntry(r,m,p)!==0&&k(`Can't set a run config entry: ${c} - ${d}.`)}),[r,u]}catch(h){throw r!==0&&i._OrtReleaseRunOptions(r),u.forEach(c=>i._free(c)),h}}});var Wn,Nn,$n,zn,Ur,Lr=U(()=>{"use strict";Se();Qe();Wn=n=>{switch(n){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${n}`)}},Nn=n=>{switch(n){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${n}`)}},$n=n=>{n.extra||(n.extra={}),n.extra.session||(n.extra.session={});let i=n.extra.session;i.use_ort_model_bytes_directly||(i.use_ort_model_bytes_directly="1"),n.executionProviders&&n.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(n.enableMemPattern=!1)},zn=(n,i,r)=>{for(let u of i){let s=typeof u=="string"?u:u.name;switch(s){case"xnnpack":s="XNNPACK";break;case"webnn":if(s="WEBNN",typeof u!="string"){let c=u;if(c?.deviceType){let d=$("deviceType",r),m=$(c.deviceType,r);N()._OrtAddSessionConfigEntry(n,d,m)!==0&&k(`Can't set a session config entry: 'deviceType' - ${c.deviceType}.`)}if(c?.numThreads){let d=c.numThreads;(typeof d!="number"||!Number.isInteger(d)||d<0)&&(d=0);let m=$("numThreads",r),p=$(d.toString(),r);N()._OrtAddSessionConfigEntry(n,m,p)!==0&&k(`Can't set a session config entry: 'numThreads' - ${c.numThreads}.`)}if(c?.powerPreference){let d=$("powerPreference",r),m=$(c.powerPreference,r);N()._OrtAddSessionConfigEntry(n,d,m)!==0&&k(`Can't set a session config entry: 'powerPreference' - ${c.powerPreference}.`)}}break;case"webgpu":if(s="JS",typeof u!="string"){let c=u;if(c?.preferredLayout){if(c.preferredLayout!=="NCHW"&&c.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${c.preferredLayout}`);let d=$("preferredLayout",r),m=$(c.preferredLayout,r);N()._OrtAddSessionConfigEntry(n,d,m)!==0&&k(`Can't set a session config entry: 'preferredLayout' - ${c.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${s}`)}let h=$(s,r);N()._OrtAppendExecutionProvider(n,h)!==0&&k(`Can't append execution provider: ${s}.`)}},Ur=n=>{let i=N(),r=0,u=[],s=n||{};$n(s);try{let h=Wn(s.graphOptimizationLevel??"all"),c=Nn(s.executionMode??"sequential"),d=typeof s.logId=="string"?$(s.logId,u):0,m=s.logSeverityLevel??2;if(!Number.isInteger(m)||m<0||m>4)throw new Error(`log serverity level is not valid: ${m}`);let p=s.logVerbosityLevel??0;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log verbosity level is not valid: ${p}`);let g=typeof s.optimizedModelFilePath=="string"?$(s.optimizedModelFilePath,u):0;if(r=i._OrtCreateSessionOptions(h,!!s.enableCpuMemArena,!!s.enableMemPattern,c,!!s.enableProfiling,0,d,m,p,g),r===0&&k("Can't create session options."),s.executionProviders&&zn(r,s.executionProviders,u),s.freeDimensionOverrides)for(let[b,w]of Object.entries(s.freeDimensionOverrides)){if(typeof b!="string")throw new Error(`free dimension override name must be a string: ${b}`);if(typeof w!="number"||!Number.isInteger(w)||w<0)throw new Error(`free dimension override value must be a non-negative integer: ${w}`);let E=$(b,u);i._OrtAddFreeDimensionOverride(r,E,w)!==0&&k(`Can't set a free dimension override: ${b} - ${w}.`)}return s.extra!==void 0&&_e(s.extra,"",new WeakSet,(b,w)=>{let E=$(b,u),_=$(w,u);i._OrtAddSessionConfigEntry(r,E,_)!==0&&k(`Can't set a session config entry: ${b} - ${w}.`)}),[r,u]}catch(h){throw r!==0&&i._OrtReleaseSessionOptions(r),u.forEach(c=>i._free(c)),h}}});var wt,Mr,bt,Rr,Fr,et,kr,vt=U(()=>{"use strict";wt=n=>{switch(n){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${n}`)}},Mr=n=>{switch(n){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${n}`)}},bt=n=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][n],Rr=n=>{switch(n){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${n}`)}},Fr=n=>{switch(n){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${n}`)}},et=n=>n==="float32"||n==="int32"||n==="int64"||n==="bool"||n==="float16"||n==="uint32",kr=n=>{switch(n){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${n}`)}}});var Hn,jn,Nr,xe,Et,St,$r,zr,Wr,Hr,jr,Gr=U(()=>{"use strict";Dr();Lr();vt();Se();Qe();Hn=n=>{let i=N(),r=i.stackSave();try{let u=i.stackAlloc(8);return i._OrtGetInputOutputCount(n,u,u+4)!==0&&k("Can't get session input/output count."),[i.HEAP32[u/4],i.HEAP32[u/4+1]]}finally{i.stackRestore(r)}},jn=(n,i)=>{N()._OrtInit(n,i)!==0&&k("Can't initialize onnxruntime.")},Nr=async n=>{jn(n.wasm.numThreads,Fr(n.logLevel))},xe=new Map,Et=n=>{let i=N(),r=i._malloc(n.byteLength);if(r===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${n.byteLength}.`);return i.HEAPU8.set(n,r),[r,n.byteLength]},St=(n,i)=>{let r=N(),u=0,s=0,h=0,c=[],d=[],m=[];try{[s,c]=Ur(i),u=r._OrtCreateSession(n[0],n[1],s),u===0&&k("Can't create a session.");let[p,g]=Hn(u),b=[],w=[],E=[];for(let A=0;A<p;A++){let x=r._OrtGetInputName(u,A);x===0&&k("Can't get an input name."),d.push(x),b.push(r.UTF8ToString(x))}for(let A=0;A<g;A++){let x=r._OrtGetOutputName(u,A);x===0&&k("Can't get an output name."),m.push(x);let L=r.UTF8ToString(x);w.push(L)}let _=null;return xe.set(u,[u,d,m,_]),[u,b,w]}catch(p){throw d.forEach(g=>r._OrtFree(g)),m.forEach(g=>r._OrtFree(g)),h!==0&&r._OrtReleaseBinding(h),u!==0&&r._OrtReleaseSession(u),p}finally{r._free(n[0]),s!==0&&r._OrtReleaseSessionOptions(s),c.forEach(p=>r._free(p))}},$r=(n,i)=>{let r=Et(n);return St(r,i)},zr=n=>{let i=N(),r=xe.get(n);if(!r)throw new Error(`cannot release session. invalid session id: ${n}`);let[u,s,h,c]=r;c&&i._OrtReleaseBinding(c.handle),i.jsepUnregisterBuffers?.(n),s.forEach(d=>i._OrtFree(d)),h.forEach(d=>i._OrtFree(d)),i._OrtReleaseSession(u),xe.delete(n)},Wr=(n,i,r,u,s)=>{if(!n){i.push(0);return}let h=N(),c=n[0],d=n[1],m=n[3],p,g;if(c==="string"&&m==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(m==="gpu-buffer"){let E=n[2].gpuBuffer,_=bt(wt(c));g=d.reduce((A,x)=>A*x,1)*_,p=h.jsepRegisterBuffer(u,s,E,g)}else{let E=n[2];if(Array.isArray(E)){g=4*E.length,p=h._malloc(g),r.push(p);let _=p/4;for(let A=0;A<E.length;A++){if(typeof E[A]!="string")throw new TypeError(`tensor data at index ${A} is not a string`);h.HEAPU32[_++]=$(E[A],r)}}else g=E.byteLength,p=h._malloc(g),r.push(p),h.HEAPU8.set(new Uint8Array(E.buffer,E.byteOffset,g),p)}let b=h.stackSave(),w=h.stackAlloc(4*d.length);try{let E=w/4;d.forEach(A=>h.HEAP32[E++]=A);let _=h._OrtCreateTensor(wt(c),p,g,w,d.length,kr(m));_===0&&k(`Can't create tensor for input/output. session=${u}, index=${s}.`),i.push(_)}finally{h.stackRestore(b)}},Hr=async(n,i,r,u,s,h)=>{let c=N(),d=xe.get(n);if(!d)throw new Error(`cannot run inference. invalid session id: ${n}`);let[m,p,g,b]=d,w=i.length,E=u.length,_=0,A=[],x=[],L=[],W=[],Y=c.stackSave(),H=c.stackAlloc(w*4),M=c.stackAlloc(w*4),oe=c.stackAlloc(E*4),pe=c.stackAlloc(E*4);try{[_,A]=Cr(h);for(let C=0;C<w;C++)Wr(r[C],x,W,n,i[C]);for(let C=0;C<E;C++)Wr(s[C],L,W,n,w+u[C]);let S=H/4,B=M/4,Be=oe/4,Ce=pe/4;for(let C=0;C<w;C++)c.HEAPU32[S++]=x[C],c.HEAPU32[B++]=p[i[C]];for(let C=0;C<E;C++)c.HEAPU32[Be++]=L[C],c.HEAPU32[Ce++]=g[u[C]];let Te;Te=await c._OrtRun(m,M,H,w,pe,E,oe,_),Te!==0&&k("failed to call OrtRun().");let ue=[];for(let C=0;C<E;C++){let fe=c.HEAPU32[oe/4+C];if(fe===L[C]){ue.push(s[C]);continue}let be=c.stackSave(),te=c.stackAlloc(4*4),re=!1,j,V=0;try{c._OrtGetTensorData(fe,te,te+4,te+8,te+12)!==0&&k(`Can't access output tensor data on index ${C}.`);let me=te/4,ce=c.HEAPU32[me++];V=c.HEAPU32[me++];let Ae=c.HEAPU32[me++],Ue=c.HEAPU32[me++],he=[];for(let X=0;X<Ue;X++)he.push(c.HEAPU32[Ae/4+X]);c._OrtFree(Ae);let le=he.reduce((X,G)=>X*G,1);j=Mr(ce);let Le=b?.outputPreferredLocations[u[C]];if(j==="string"){if(Le==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let X=[],G=V/4;for(let Oe=0;Oe<le;Oe++){let Pe=c.HEAPU32[G++],Me=Oe===le-1?void 0:c.HEAPU32[G]-Pe;X.push(c.UTF8ToString(Pe,Me))}ue.push([j,he,X,"cpu"])}else if(Le==="gpu-buffer"&&le>0){let X=c.jsepGetBuffer(V),G=bt(ce);if(G===void 0||!et(j))throw new Error(`Unsupported data type: ${j}`);re=!0,ue.push([j,he,{gpuBuffer:X,download:c.jsepCreateDownloader(X,le*G,j),dispose:()=>{c._OrtReleaseTensor(fe)}},"gpu-buffer"])}else{let X=Rr(j),G=new X(le);new Uint8Array(G.buffer,G.byteOffset,G.byteLength).set(c.HEAPU8.subarray(V,V+G.byteLength)),ue.push([j,he,G,"cpu"])}}finally{c.stackRestore(be),j==="string"&&V&&c._free(V),re||c._OrtReleaseTensor(fe)}}return b&&c._OrtClearBoundOutputs(b.handle),ue}finally{c.stackRestore(Y),x.forEach(S=>c._OrtReleaseTensor(S)),L.forEach(S=>c._OrtReleaseTensor(S)),W.forEach(S=>c._free(S)),_!==0&&c._OrtReleaseRunOptions(_),A.forEach(S=>c._free(S))}},jr=n=>{let i=N(),r=xe.get(n);if(!r)throw new Error("invalid session id");let u=r[0],s=i._OrtEndProfiling(u);s===0&&k("Can't get an profile file name."),i._OrtFree(s)}});var ni,Yr,Vr,Xr,qr,Tt,Jr,Zr,Kr,At=U(()=>{"use strict";Ee();Gr();Se();ni=typeof document<"u"?document?.currentScript?.src:void 0,Yr=async()=>Br(z.wasm),Vr=async n=>{await Nr(n)},Xr=async n=>Et(n),qr=async(n,i)=>St(n,i),Tt=async(n,i)=>$r(n,i),Jr=async n=>{zr(n)},Zr=async(n,i,r,u,s,h)=>Hr(n,i,r,u,s,h),Kr=async n=>{jr(n)}});var Qr,tt,en,Yn,rt,tn=U(()=>{"use strict";Ee();At();vt();en=(n,i)=>{switch(n.location){case"cpu":return[n.type,n.dims,n.data,"cpu"];case"gpu-buffer":return[n.type,n.dims,{gpuBuffer:n.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${n.location} for ${i()}`)}},Yn=n=>{switch(n[3]){case"cpu":return new ne(n[0],n[2],n[1]);case"gpu-buffer":{let i=n[0];if(!et(i))throw new Error(`not supported data type: ${i} for deserializing GPU tensor`);let{gpuBuffer:r,download:u,dispose:s}=n[2];return ne.fromGpuBuffer(r,{dataType:i,dims:n[1],download:u,dispose:s})}default:throw new Error(`invalid data location: ${n[3]}`)}},rt=class{async createSessionAllocate(i){let r=await fetch(i);if(r.status!==200)throw new Error(`failed to load model: ${i}`);let u=await r.arrayBuffer();return Xr(new Uint8Array(u))}async loadModel(i,r){if(Qr||(tt||(tt=Vr(z)),await tt,tt=void 0,Qr=!0),typeof i=="string")if(typeof process<"u"&&process.versions&&process.versions.node){let u=await(void 0)(i);[this.sessionId,this.inputNames,this.outputNames]=await Tt(u,r)}else{let u=await this.createSessionAllocate(i);[this.sessionId,this.inputNames,this.outputNames]=await qr(u,r)}else[this.sessionId,this.inputNames,this.outputNames]=await Tt(i,r)}async dispose(){return Jr(this.sessionId)}async run(i,r,u){let s=[],h=[];Object.entries(i).forEach(w=>{let E=w[0],_=w[1],A=this.inputNames.indexOf(E);if(A===-1)throw new Error(`invalid input '${E}'`);s.push(_),h.push(A)});let c=[],d=[];Object.entries(r).forEach(w=>{let E=w[0],_=w[1],A=this.outputNames.indexOf(E);if(A===-1)throw new Error(`invalid output '${E}'`);c.push(_),d.push(A)});let m=s.map((w,E)=>en(w,()=>`input "${this.inputNames[h[E]]}"`)),p=c.map((w,E)=>w?en(w,()=>`output "${this.outputNames[d[E]]}"`):null),g=await Zr(this.sessionId,h,m,d,p,u),b={};for(let w=0;w<g.length;w++)b[this.outputNames[d[w]]]=c[w]??Yn(g[w]);return b}startProfiling(){}endProfiling(){Kr(this.sessionId)}}});var Vn,nt,rn=U(()=>{"use strict";Ee();At();tn();Vn=()=>{if((typeof z.wasm.initTimeout!="number"||z.wasm.initTimeout<0)&&(z.wasm.initTimeout=0),typeof z.wasm.simd!="boolean"&&(z.wasm.simd=!0),typeof z.wasm.proxy!="boolean"&&(z.wasm.proxy=!1),typeof z.wasm.numThreads!="number"||!Number.isInteger(z.wasm.numThreads)||z.wasm.numThreads<=0){let n=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;z.wasm.numThreads=Math.min(4,Math.ceil((n||1)/2))}},nt=class{async init(){Vn(),await Yr()}async createInferenceSessionHandler(i,r){let u=new rt;return await u.loadModel(i,r),Promise.resolve(u)}}});var nn={};Ge(nn,{wasmBackend:()=>Xn});var Xn,on=U(()=>{"use strict";rn();Xn=new nt});var qn={};Ge(qn,{InferenceSession:()=>Cn,Tensor:()=>ne,TrainingSession:()=>Dn,env:()=>z,registerBackend:()=>we});Ee();Ee();var Er="1.17.0";{let n=(on(),Ye(nn)).wasmBackend;we("cpu",n,10),we("wasm",n,10),we("xnnpack",n,9),we("webnn",n,9)}Object.defineProperty(z.versions,"web",{value:Er,enumerable:!0});return Ye(qn);})();
//# sourceMappingURL=ort.wasm-core.min.js.map
