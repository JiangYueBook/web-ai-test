/*!
 * ONNX Runtime Web v1.17.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
"use strict";var ort=(()=>{var Ve=Object.defineProperty;var Hr=Object.getOwnPropertyDescriptor;var jr=Object.getOwnPropertyNames;var $r=Object.prototype.hasOwnProperty;var P=(r,n)=>()=>(r&&(n=r(r=0)),n);var Gr=(r,n)=>()=>(n||r((n={exports:{}}).exports,n),n.exports),be=(r,n)=>{for(var e in n)Ve(r,e,{get:n[e],enumerable:!0})},Yr=(r,n,e,a)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of jr(n))!$r.call(r,s)&&s!==e&&Ve(r,s,{get:()=>n[s],enumerable:!(a=Hr(n,s))||a.enumerable});return r};var Pe=r=>Yr(Ve({},"__esModule",{value:!0}),r);var _e,fe,re,Be,De=P(()=>{_e=new Map,fe=[],re=(r,n,e)=>{if(n&&typeof n.init=="function"&&typeof n.createInferenceSessionHandler=="function"){let a=_e.get(r);if(a===void 0)_e.set(r,{backend:n,priority:e});else{if(a.priority>e)return;if(a.priority===e&&a.backend!==n)throw new Error(`cannot register backend "${r}" using priority ${e}`)}if(e>=0){let s=fe.indexOf(r);s!==-1&&fe.splice(s,1);for(let m=0;m<fe.length;m++)if(_e.get(fe[m]).priority<=e){fe.splice(m,0,r);return}fe.push(r)}return}throw new TypeError("not a valid backend")},Be=async r=>{let n=r.length===0?fe:r,e=[];for(let a of n){let s=_e.get(a);if(s){if(s.initialized)return s.backend;if(s.aborted)continue;let m=!!s.initPromise;try{return m||(s.initPromise=s.backend.init()),await s.initPromise,s.initialized=!0,s.backend}catch(u){m||e.push({name:a,err:u}),s.aborted=!0}finally{delete s.initPromise}}}throw new Error(`no available backend found. ERR: ${e.map(a=>`[${a.name}] ${a.err}`).join(", ")}`)}});var vt=P(()=>{De()});var It,xt=P(()=>{It="1.17.0"});var Pt,qe,_t=P(()=>{xt();Pt="warning",qe={wasm:{},webgl:{},webgpu:{},versions:{common:It},set logLevel(r){if(r!==void 0){if(typeof r!="string"||["verbose","info","warning","error","fatal"].indexOf(r)===-1)throw new Error(`Unsupported logging level: ${r}`);Pt=r}},get logLevel(){return Pt}};Object.defineProperty(qe,"logLevel",{enumerable:!0})});var M,Bt=P(()=>{_t();M=qe});var Dt,Ct,Lt=P(()=>{Dt=(r,n)=>{let e=document.createElement("canvas");e.width=r.dims[3],e.height=r.dims[2];let a=e.getContext("2d");if(a!=null){let s,m;n?.tensorLayout!==void 0&&n.tensorLayout==="NHWC"?(s=r.dims[2],m=r.dims[3]):(s=r.dims[3],m=r.dims[2]);let u=n?.format!==void 0?n.format:"RGB",c=n?.norm,p,l;c===void 0||c.mean===void 0?p=[255,255,255,255]:typeof c.mean=="number"?p=[c.mean,c.mean,c.mean,c.mean]:(p=[c.mean[0],c.mean[1],c.mean[2],0],c.mean[3]!==void 0&&(p[3]=c.mean[3])),c===void 0||c.bias===void 0?l=[0,0,0,0]:typeof c.bias=="number"?l=[c.bias,c.bias,c.bias,c.bias]:(l=[c.bias[0],c.bias[1],c.bias[2],0],c.bias[3]!==void 0&&(l[3]=c.bias[3]));let h=m*s,g=0,y=h,b=h*2,T=-1;u==="RGBA"?(g=0,y=h,b=h*2,T=h*3):u==="RGB"?(g=0,y=h,b=h*2):u==="RBG"&&(g=0,b=h,y=h*2);for(let O=0;O<m;O++)for(let v=0;v<s;v++){let _=(r.data[g++]-l[0])*p[0],D=(r.data[y++]-l[1])*p[1],V=(r.data[b++]-l[2])*p[2],$=T===-1?255:(r.data[T++]-l[3])*p[3];a.fillStyle="rgba("+_+","+D+","+V+","+$+")",a.fillRect(v,O,1,1)}return e.toDataURL()}else throw new Error("Can not access image data")},Ct=(r,n)=>{let e=document.createElement("canvas").getContext("2d"),a;if(e!=null){let s,m,u;n?.tensorLayout!==void 0&&n.tensorLayout==="NHWC"?(s=r.dims[2],m=r.dims[1],u=r.dims[3]):(s=r.dims[3],m=r.dims[2],u=r.dims[1]);let c=n!==void 0&&n.format!==void 0?n.format:"RGB",p=n?.norm,l,h;p===void 0||p.mean===void 0?l=[255,255,255,255]:typeof p.mean=="number"?l=[p.mean,p.mean,p.mean,p.mean]:(l=[p.mean[0],p.mean[1],p.mean[2],255],p.mean[3]!==void 0&&(l[3]=p.mean[3])),p===void 0||p.bias===void 0?h=[0,0,0,0]:typeof p.bias=="number"?h=[p.bias,p.bias,p.bias,p.bias]:(h=[p.bias[0],p.bias[1],p.bias[2],0],p.bias[3]!==void 0&&(h[3]=p.bias[3]));let g=m*s;if(n!==void 0&&(n.format!==void 0&&u===4&&n.format!=="RGBA"||u===3&&n.format!=="RGB"&&n.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let y=4,b=0,T=1,O=2,v=3,_=0,D=g,V=g*2,$=-1;c==="RGBA"?(_=0,D=g,V=g*2,$=g*3):c==="RGB"?(_=0,D=g,V=g*2):c==="RBG"&&(_=0,V=g,D=g*2),a=e.createImageData(s,m);for(let A=0;A<m*s;b+=y,T+=y,O+=y,v+=y,A++)a.data[b]=(r.data[_++]-h[0])*l[0],a.data[T]=(r.data[D++]-h[1])*l[1],a.data[O]=(r.data[V++]-h[2])*l[2],a.data[v]=$===-1?255:(r.data[$++]-h[3])*l[3]}else throw new Error("Can not access image data");return a}});var Xe,Mt,kt,Rt,Ut,Ft=P(()=>{Ce();Xe=(r,n)=>{if(r===void 0)throw new Error("Image buffer must be defined");if(n.height===void 0||n.width===void 0)throw new Error("Image height and width must be defined");if(n.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:e,width:a}=n,s=n.norm??{mean:255,bias:0},m,u;typeof s.mean=="number"?m=[s.mean,s.mean,s.mean,s.mean]:m=[s.mean[0],s.mean[1],s.mean[2],s.mean[3]??255],typeof s.bias=="number"?u=[s.bias,s.bias,s.bias,s.bias]:u=[s.bias[0],s.bias[1],s.bias[2],s.bias[3]??0];let c=n.format!==void 0?n.format:"RGBA",p=n.tensorFormat!==void 0&&n.tensorFormat!==void 0?n.tensorFormat:"RGB",l=e*a,h=p==="RGBA"?new Float32Array(l*4):new Float32Array(l*3),g=4,y=0,b=1,T=2,O=3,v=0,_=l,D=l*2,V=-1;c==="RGB"&&(g=3,y=0,b=1,T=2,O=-1),p==="RGBA"?V=l*3:p==="RBG"?(v=0,D=l,_=l*2):p==="BGR"&&(D=0,_=l,v=l*2);for(let A=0;A<l;A++,y+=g,T+=g,b+=g,O+=g)h[v++]=(r[y]+u[0])/m[0],h[_++]=(r[b]+u[1])/m[1],h[D++]=(r[T]+u[2])/m[2],V!==-1&&O!==-1&&(h[V++]=(r[O]+u[3])/m[3]);return p==="RGBA"?new j("float32",h,[1,4,e,a]):new j("float32",h,[1,3,e,a])},Mt=async(r,n)=>{let e=typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement,a=typeof ImageData<"u"&&r instanceof ImageData,s=typeof ImageBitmap<"u"&&r instanceof ImageBitmap,m=typeof r=="string",u,c=n??{};if(e){let p=document.createElement("canvas");p.width=r.width,p.height=r.height;let l=p.getContext("2d");if(l!=null){let h=r.height,g=r.width;if(n!==void 0&&n.resizedHeight!==void 0&&n.resizedWidth!==void 0&&(h=n.resizedHeight,g=n.resizedWidth),n!==void 0){if(c=n,n.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");c.tensorFormat="RGBA",c.height=h,c.width=g}else c.tensorFormat="RGBA",c.height=h,c.width=g;l.drawImage(r,0,0),u=l.getImageData(0,0,g,h).data}else throw new Error("Can not access image data")}else if(a){let p,l;if(n!==void 0&&n.resizedWidth!==void 0&&n.resizedHeight!==void 0?(p=n.resizedHeight,l=n.resizedWidth):(p=r.height,l=r.width),n!==void 0&&(c=n),c.format="RGBA",c.height=p,c.width=l,n!==void 0){let h=document.createElement("canvas");h.width=l,h.height=p;let g=h.getContext("2d");if(g!=null)g.putImageData(r,0,0),u=g.getImageData(0,0,l,p).data;else throw new Error("Can not access image data")}else u=r.data}else if(s){if(n===void 0)throw new Error("Please provide image config with format for Imagebitmap");let p=document.createElement("canvas");p.width=r.width,p.height=r.height;let l=p.getContext("2d");if(l!=null){let h=r.height,g=r.width;return l.drawImage(r,0,0,g,h),u=l.getImageData(0,0,g,h).data,c.height=h,c.width=g,Xe(u,c)}else throw new Error("Can not access image data")}else{if(m)return new Promise((p,l)=>{let h=document.createElement("canvas"),g=h.getContext("2d");if(!r||!g)return l();let y=new Image;y.crossOrigin="Anonymous",y.src=r,y.onload=()=>{h.width=y.width,h.height=y.height,g.drawImage(y,0,0,h.width,h.height);let b=g.getImageData(0,0,h.width,h.height);c.height=h.height,c.width=h.width,p(Xe(b.data,c))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(u!==void 0)return Xe(u,c);throw new Error("Input data provided is not supported - aborted tensor creation")},kt=(r,n)=>{let{width:e,height:a,download:s,dispose:m}=n,u=[1,a,e,4];return new j({location:"texture",type:"float32",texture:r,dims:u,download:s,dispose:m})},Rt=(r,n)=>{let{dataType:e,dims:a,download:s,dispose:m}=n;return new j({location:"gpu-buffer",type:e??"float32",gpuBuffer:r,dims:a,download:s,dispose:m})},Ut=(r,n,e)=>new j({location:"cpu-pinned",type:r,data:n,dims:e??[n.length]})});var Ee,Le,Wt,zt,Nt=P(()=>{Ee=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Le=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),Wt=!1,zt=()=>{if(!Wt){Wt=!0;let r=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",n=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";r&&(Ee.set("int64",BigInt64Array),Le.set(BigInt64Array,"int64")),n&&(Ee.set("uint64",BigUint64Array),Le.set(BigUint64Array,"uint64"))}}});var Ht,jt,$t=P(()=>{Ce();Ht=r=>{let n=1;for(let e=0;e<r.length;e++){let a=r[e];if(typeof a!="number"||!Number.isSafeInteger(a))throw new TypeError(`dims[${e}] must be an integer, got: ${a}`);if(a<0)throw new RangeError(`dims[${e}] must be a non-negative integer, got: ${a}`);n*=a}return n},jt=(r,n)=>{switch(r.location){case"cpu":return new j(r.type,r.data,n);case"cpu-pinned":return new j({location:"cpu-pinned",data:r.data,type:r.type,dims:n});case"texture":return new j({location:"texture",texture:r.texture,type:r.type,dims:n});case"gpu-buffer":return new j({location:"gpu-buffer",gpuBuffer:r.gpuBuffer,type:r.type,dims:n});default:throw new Error(`tensorReshape: tensor location ${r.location} is not supported`)}}});var j,Ce=P(()=>{Lt();Ft();Nt();$t();j=class{constructor(n,e,a){zt();let s,m;if(typeof n=="object"&&"location"in n)switch(this.dataLocation=n.location,s=n.type,m=n.dims,n.location){case"cpu-pinned":{let c=Ee.get(s);if(!c)throw new TypeError(`unsupported type "${s}" to create tensor from pinned buffer`);if(!(n.data instanceof c))throw new TypeError(`buffer should be of type ${c.name}`);this.cpuData=n.data;break}case"texture":{if(s!=="float32")throw new TypeError(`unsupported type "${s}" to create tensor from texture`);this.gpuTextureData=n.texture,this.downloader=n.download,this.disposer=n.dispose;break}case"gpu-buffer":{if(s!=="float32"&&s!=="float16"&&s!=="int32"&&s!=="int64"&&s!=="uint32"&&s!=="bool")throw new TypeError(`unsupported type "${s}" to create tensor from gpu buffer`);this.gpuBufferData=n.gpuBuffer,this.downloader=n.download,this.disposer=n.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let c,p;if(typeof n=="string")if(s=n,p=a,n==="string"){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");c=e}else{let l=Ee.get(n);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${n}.`);if(Array.isArray(e)){if(n==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");n==="uint64"||n==="int64"?c=l.from(e,BigInt):c=l.from(e)}else if(e instanceof l)c=e;else throw new TypeError(`A ${s} tensor's data must be type of ${l}`)}else if(p=e,Array.isArray(n)){if(n.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof n[0];if(l==="string")s="string",c=n;else if(l==="boolean")s="bool",c=Uint8Array.from(n);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else{let l=Le.get(n.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${n.constructor}.`);s=l,c=n}if(p===void 0)p=[c.length];else if(!Array.isArray(p))throw new TypeError("A tensor's dims must be a number array");m=p,this.cpuData=c,this.dataLocation="cpu"}let u=Ht(m);if(this.cpuData&&u!==this.cpuData.length)throw new Error(`Tensor's size(${u}) does not match data length(${this.cpuData.length}).`);this.type=s,this.dims=m,this.size=u}static async fromImage(n,e){return Mt(n,e)}static fromTexture(n,e){return kt(n,e)}static fromGpuBuffer(n,e){return Rt(n,e)}static fromPinnedBuffer(n,e,a){return Ut(n,e,a)}toDataURL(n){return Dt(this,n)}toImageData(n){return Ct(this,n)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(n){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let e=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=e,n&&this.disposer&&(this.disposer(),this.disposer=void 0),e}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(n){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return jt(this,n)}}});var Z,Je=P(()=>{Ce();Z=j});var Me,Gt=P(()=>{De();Je();Me=class r{constructor(n){this.handler=n}async run(n,e,a){let s={},m={};if(typeof n!="object"||n===null||n instanceof Z||Array.isArray(n))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u=!0;if(typeof e=="object"){if(e===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(e instanceof Z)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(e)){if(e.length===0)throw new TypeError("'fetches' cannot be an empty array.");u=!1;for(let l of e){if(typeof l!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(l)===-1)throw new RangeError(`'fetches' contains invalid output name: ${l}.`);s[l]=null}if(typeof a=="object"&&a!==null)m=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else{let l=!1,h=Object.getOwnPropertyNames(e);for(let g of this.outputNames)if(h.indexOf(g)!==-1){let y=e[g];(y===null||y instanceof Z)&&(l=!0,u=!1,s[g]=y)}if(l){if(typeof a=="object"&&a!==null)m=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else m=e}}else if(typeof e<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let l of this.inputNames)if(typeof n[l]>"u")throw new Error(`input '${l}' is missing in 'feeds'.`);if(u)for(let l of this.outputNames)s[l]=null;let c=await this.handler.run(n,s,m),p={};for(let l in c)if(Object.hasOwnProperty.call(c,l)){let h=c[l];h instanceof Z?p[l]=h:p[l]=new Z(h.type,h.data,h.dims)}return p}async release(){return this.handler.dispose()}static async create(n,e,a,s){let m,u={};if(typeof n=="string"){if(m=n,typeof e=="object"&&e!==null)u=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else if(n instanceof Uint8Array){if(m=n,typeof e=="object"&&e!==null)u=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else if(n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer){let g=n,y=0,b=n.byteLength;if(typeof e=="object"&&e!==null)u=e;else if(typeof e=="number"){if(y=e,!Number.isSafeInteger(y))throw new RangeError("'byteOffset' must be an integer.");if(y<0||y>=g.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${g.byteLength}).`);if(b=n.byteLength-y,typeof a=="number"){if(b=a,!Number.isSafeInteger(b))throw new RangeError("'byteLength' must be an integer.");if(b<=0||y+b>g.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${g.byteLength-y}].`);if(typeof s=="object"&&s!==null)u=s;else if(typeof s<"u")throw new TypeError("'options' must be an object.")}else if(typeof a<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof e<"u")throw new TypeError("'options' must be an object.");m=new Uint8Array(g,y,b)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let p=(u.executionProviders||[]).map(g=>typeof g=="string"?g:g.name),h=await(await Be(p)).createInferenceSessionHandler(m,u);return new r(h)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}});var Yt,Vt=P(()=>{Gt();Yt=Me});var qt=P(()=>{});var Vr,ke,Xt=P(()=>{De();Vr="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",ke=class r{constructor(n){this.handler=n}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}static async create(n,e){let a=n.evalModel||"",s=n.optimizerModel||"",m=e||{},c=(m.executionProviders||[]).map(l=>typeof l=="string"?l:l.name),p=await Be(c);if(p.createTrainingSessionHandler){let l=await p.createTrainingSessionHandler(n.checkpointState,n.trainModel,a,s,m);return new r(l)}else throw new Error(Vr)}async loadParametersBuffer(n,e){throw new Error("Method not implemented.")}async getContiguousParameters(n){throw new Error("Method not implemented.")}async runTrainStep(n,e,a){throw new Error("Method not implemented.")}async release(){return this.handler.dispose()}}});var Jt,Kt=P(()=>{Xt();Jt=ke});var Ke={};be(Ke,{InferenceSession:()=>Yt,Tensor:()=>Z,TrainingSession:()=>Jt,env:()=>M,registerBackend:()=>re});var le=P(()=>{vt();Bt();Vt();Je();qt();Kt()});var Qt={};be(Qt,{readFile:()=>qr});var qr,er=P(()=>{qr=void 0});var tr={};be(tr,{join:()=>Xr});var Xr,rr=P(()=>{Xr=void 0});var sr=Gr((or,Ze)=>{"use strict";var nr=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(n={}){var e=n,a,s;e.ready=new Promise((t,o)=>{a=t,s=o});var m=Object.assign({},e),u="./this.program",c=typeof window=="object",p=typeof importScripts=="function",l=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",h="",g,y,b;if(l){var T=(er(),Pe(Qt)),O=(rr(),Pe(tr));h=p?O.dirname(h)+"/":__dirname+"/",g=(t,o)=>(t=t.startsWith("file://")?new URL(t):O.normalize(t),T.readFileSync(t,o?void 0:"utf8")),b=t=>(t=g(t,!0),t.buffer||(t=new Uint8Array(t)),t),y=(t,o,i,d=!0)=>{t=t.startsWith("file://")?new URL(t):O.normalize(t),T.readFile(t,d?void 0:"utf8",(w,S)=>{w?i(w):o(d?S.buffer:S)})},!e.thisProgram&&1<process.argv.length&&(u=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),e.inspect=()=>"[Emscripten Module object]"}else(c||p)&&(p?h=self.location.href:typeof document<"u"&&document.currentScript&&(h=document.currentScript.src),r&&(h=r),h.indexOf("blob:")!==0?h=h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):h="",g=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.send(null),o.responseText},p&&(b=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),y=(t,o,i)=>{var d=new XMLHttpRequest;d.open("GET",t,!0),d.responseType="arraybuffer",d.onload=()=>{d.status==200||d.status==0&&d.response?o(d.response):i()},d.onerror=i,d.send(null)});var v=e.print||console.log.bind(console),_=e.printErr||console.error.bind(console);Object.assign(e,m),m=null,e.thisProgram&&(u=e.thisProgram);var D;e.wasmBinary&&(D=e.wasmBinary);var V=e.noExitRuntime||!0;typeof WebAssembly!="object"&&W("no native wasm support detected");var $,A,ce=!1,ne,U,E,F;function Ae(){var t=$.buffer;e.HEAP8=ne=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=U=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=F=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var he=[],te=[],x=[];function oe(){var t=e.preRun.shift();he.unshift(t)}var Q=0,K=null,ee=null;function W(t){throw e.onAbort&&e.onAbort(t),t="Aborted("+t+")",_(t),ce=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function q(t){return t.startsWith("data:application/octet-stream;base64,")}var se;if(se="ort-wasm.wasm",!q(se)){var ie=se;se=e.locateFile?e.locateFile(ie,h):h+ie}function ye(t){if(t==se&&D)return new Uint8Array(D);if(b)return b(t);throw"both async and sync fetching of the wasm failed"}function Te(t){if(!D&&(c||p)){if(typeof fetch=="function"&&!t.startsWith("file://"))return fetch(t,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at '"+t+"'";return o.arrayBuffer()}).catch(()=>ye(t));if(y)return new Promise((o,i)=>{y(t,d=>o(new Uint8Array(d)),i)})}return Promise.resolve().then(()=>ye(t))}function ve(t,o,i){return Te(t).then(d=>WebAssembly.instantiate(d,o)).then(d=>d).then(i,d=>{_("failed to asynchronously prepare wasm: "+d),W(d)})}function ae(t,o){var i=se;return D||typeof WebAssembly.instantiateStreaming!="function"||q(i)||i.startsWith("file://")||l||typeof fetch!="function"?ve(i,t,o):fetch(i,{credentials:"same-origin"}).then(d=>WebAssembly.instantiateStreaming(d,t).then(o,function(w){return _("wasm streaming compile failed: "+w),_("falling back to ArrayBuffer instantiation"),ve(i,t,o)}))}var X,de=t=>{for(;0<t.length;)t.shift()(e)};function N(t){this.va=t-24,this.Ea=function(o){F[this.va+4>>2>>>0]=o},this.za=function(o){F[this.va+8>>2>>>0]=o},this.xa=function(o,i){this.ya(),this.Ea(o),this.za(i)},this.ya=function(){F[this.va+16>>2>>>0]=0}}var z=0,ge=0,we=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ie=(t,o,i)=>{o>>>=0;var d=o+i;for(i=o;t[i]&&!(i>=d);)++i;if(16<i-o&&t.buffer&&we)return we.decode(t.subarray(o,i));for(d="";o<i;){var w=t[o++];if(w&128){var S=t[o++]&63;if((w&224)==192)d+=String.fromCharCode((w&31)<<6|S);else{var I=t[o++]&63;w=(w&240)==224?(w&15)<<12|S<<6|I:(w&7)<<18|S<<12|I<<6|t[o++]&63,65536>w?d+=String.fromCharCode(w):(w-=65536,d+=String.fromCharCode(55296|w>>10,56320|w&1023))}}else d+=String.fromCharCode(w)}return d},He=(t,o)=>(t>>>=0)?Ie(U,t,o):"",je=t=>{for(var o=0,i=0;i<t.length;++i){var d=t.charCodeAt(i);127>=d?o++:2047>=d?o+=2:55296<=d&&57343>=d?(o+=4,++i):o+=3}return o},$e=(t,o,i,d)=>{if(i>>>=0,!(0<d))return 0;var w=i;d=i+d-1;for(var S=0;S<t.length;++S){var I=t.charCodeAt(S);if(55296<=I&&57343>=I){var H=t.charCodeAt(++S);I=65536+((I&1023)<<10)|H&1023}if(127>=I){if(i>=d)break;o[i++>>>0]=I}else{if(2047>=I){if(i+1>=d)break;o[i++>>>0]=192|I>>6}else{if(65535>=I){if(i+2>=d)break;o[i++>>>0]=224|I>>12}else{if(i+3>=d)break;o[i++>>>0]=240|I>>18,o[i++>>>0]=128|I>>12&63}o[i++>>>0]=128|I>>6&63}o[i++>>>0]=128|I&63}}return o[i>>>0]=0,i-w},pe=t=>t%4===0&&(t%100!==0||t%400===0),ft=[0,31,60,91,121,152,182,213,244,274,305,335],lt=[0,31,59,90,120,151,181,212,243,273,304,334],ct=t=>{var o=je(t)+1,i=yt(o);return i&&$e(t,U,i,o),i},Ge={},dt=()=>{if(!Ye){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"},o;for(o in Ge)Ge[o]===void 0?delete t[o]:t[o]=Ge[o];var i=[];for(o in t)i.push(`${o}=${t[o]}`);Ye=i}return Ye},Ye,Fr=[null,[],[]],pt=[31,29,31,30,31,30,31,31,30,31,30,31],mt=[31,28,31,30,31,30,31,31,30,31,30,31];function Wr(t){var o=Array(je(t)+1);return $e(t,o,0,o.length),o}function ht(t,o,i,d){function w(f,B,C){for(f=typeof f=="number"?f.toString():f||"";f.length<B;)f=C[0]+f;return f}function S(f,B){return w(f,B,"0")}function I(f,B){function C(Tt){return 0>Tt?-1:0<Tt?1:0}var ue;return(ue=C(f.getFullYear()-B.getFullYear()))===0&&(ue=C(f.getMonth()-B.getMonth()))===0&&(ue=C(f.getDate()-B.getDate())),ue}function H(f){switch(f.getDay()){case 0:return new Date(f.getFullYear()-1,11,29);case 1:return f;case 2:return new Date(f.getFullYear(),0,3);case 3:return new Date(f.getFullYear(),0,2);case 4:return new Date(f.getFullYear(),0,1);case 5:return new Date(f.getFullYear()-1,11,31);case 6:return new Date(f.getFullYear()-1,11,30)}}function J(f){var B=f.ra;for(f=new Date(new Date(f.sa+1900,0,1).getTime());0<B;){var C=f.getMonth(),ue=(pe(f.getFullYear())?pt:mt)[C];if(B>ue-f.getDate())B-=ue-f.getDate()+1,f.setDate(1),11>C?f.setMonth(C+1):(f.setMonth(0),f.setFullYear(f.getFullYear()+1));else{f.setDate(f.getDate()+B);break}}return C=new Date(f.getFullYear()+1,0,4),B=H(new Date(f.getFullYear(),0,4)),C=H(C),0>=I(B,f)?0>=I(C,f)?f.getFullYear()+1:f.getFullYear():f.getFullYear()-1}t>>>=0,o>>>=0,i>>>=0,d>>>=0;var G=E[d+40>>2>>>0];d={Ca:E[d>>2>>>0],Ba:E[d+4>>2>>>0],ta:E[d+8>>2>>>0],wa:E[d+12>>2>>>0],ua:E[d+16>>2>>>0],sa:E[d+20>>2>>>0],ma:E[d+24>>2>>>0],ra:E[d+28>>2>>>0],Fa:E[d+32>>2>>>0],Aa:E[d+36>>2>>>0],Da:G?He(G):""},i=He(i),G={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Y in G)i=i.replace(new RegExp(Y,"g"),G[Y]);var Ot="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),At="January February March April May June July August September October November December".split(" ");G={"%a":f=>Ot[f.ma].substring(0,3),"%A":f=>Ot[f.ma],"%b":f=>At[f.ua].substring(0,3),"%B":f=>At[f.ua],"%C":f=>S((f.sa+1900)/100|0,2),"%d":f=>S(f.wa,2),"%e":f=>w(f.wa,2," "),"%g":f=>J(f).toString().substring(2),"%G":f=>J(f),"%H":f=>S(f.ta,2),"%I":f=>(f=f.ta,f==0?f=12:12<f&&(f-=12),S(f,2)),"%j":f=>{for(var B=0,C=0;C<=f.ua-1;B+=(pe(f.sa+1900)?pt:mt)[C++]);return S(f.wa+B,3)},"%m":f=>S(f.ua+1,2),"%M":f=>S(f.Ba,2),"%n":()=>`
`,"%p":f=>0<=f.ta&&12>f.ta?"AM":"PM","%S":f=>S(f.Ca,2),"%t":()=>"	","%u":f=>f.ma||7,"%U":f=>S(Math.floor((f.ra+7-f.ma)/7),2),"%V":f=>{var B=Math.floor((f.ra+7-(f.ma+6)%7)/7);if(2>=(f.ma+371-f.ra-2)%7&&B++,B)B==53&&(C=(f.ma+371-f.ra)%7,C==4||C==3&&pe(f.sa)||(B=1));else{B=52;var C=(f.ma+7-f.ra-1)%7;(C==4||C==5&&pe(f.sa%400-1))&&B++}return S(B,2)},"%w":f=>f.ma,"%W":f=>S(Math.floor((f.ra+7-(f.ma+6)%7)/7),2),"%y":f=>(f.sa+1900).toString().substring(2),"%Y":f=>f.sa+1900,"%z":f=>{f=f.Aa;var B=0<=f;return f=Math.abs(f)/60,(B?"+":"-")+("0000"+(f/60*100+f%60)).slice(-4)},"%Z":f=>f.Da,"%%":()=>"%"},i=i.replace(/%%/g,"\0\0");for(Y in G)i.includes(Y)&&(i=i.replace(new RegExp(Y,"g"),G[Y](d)));return i=i.replace(/\0\0/g,"%"),Y=Wr(i),Y.length>o?0:(ne.set(Y,t>>>0),Y.length-1)}var zr={a:function(t,o,i){throw t>>>=0,new N(t).xa(o>>>0,i>>>0),z=t,ge++,z},e:function(){return 0},H:function(){},x:function(){},z:function(){},k:function(){return 0},F:function(){},B:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},l:()=>!0,o:function(t,o,i){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,i>>>=0,t=new Date(1e3*t),E[i>>2>>>0]=t.getUTCSeconds(),E[i+4>>2>>>0]=t.getUTCMinutes(),E[i+8>>2>>>0]=t.getUTCHours(),E[i+12>>2>>>0]=t.getUTCDate(),E[i+16>>2>>>0]=t.getUTCMonth(),E[i+20>>2>>>0]=t.getUTCFullYear()-1900,E[i+24>>2>>>0]=t.getUTCDay(),E[i+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},p:function(t,o,i){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,i>>>=0,t=new Date(1e3*t),E[i>>2>>>0]=t.getSeconds(),E[i+4>>2>>>0]=t.getMinutes(),E[i+8>>2>>>0]=t.getHours(),E[i+12>>2>>>0]=t.getDate(),E[i+16>>2>>>0]=t.getMonth(),E[i+20>>2>>>0]=t.getFullYear()-1900,E[i+24>>2>>>0]=t.getDay(),E[i+28>>2>>>0]=(pe(t.getFullYear())?ft:lt)[t.getMonth()]+t.getDate()-1|0,E[i+36>>2>>>0]=-(60*t.getTimezoneOffset()),o=new Date(t.getFullYear(),6,1).getTimezoneOffset();var d=new Date(t.getFullYear(),0,1).getTimezoneOffset();E[i+32>>2>>>0]=(o!=d&&t.getTimezoneOffset()==Math.min(d,o))|0},q:function(t){t>>>=0;var o=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),i=E[t+32>>2>>>0],d=o.getTimezoneOffset(),w=new Date(o.getFullYear(),6,1).getTimezoneOffset(),S=new Date(o.getFullYear(),0,1).getTimezoneOffset(),I=Math.min(S,w);return 0>i?E[t+32>>2>>>0]=+(w!=S&&I==d):0<i!=(I==d)&&(w=Math.max(S,w),o.setTime(o.getTime()+6e4*((0<i?I:w)-d))),E[t+24>>2>>>0]=o.getDay(),E[t+28>>2>>>0]=(pe(o.getFullYear())?ft:lt)[o.getMonth()]+o.getDate()-1|0,E[t>>2>>>0]=o.getSeconds(),E[t+4>>2>>>0]=o.getMinutes(),E[t+8>>2>>>0]=o.getHours(),E[t+12>>2>>>0]=o.getDate(),E[t+16>>2>>>0]=o.getMonth(),E[t+20>>2>>>0]=o.getYear(),t=o.getTime()/1e3,gt((X=t,1<=+Math.abs(X)?0<X?+Math.floor(X/4294967296)>>>0:~~+Math.ceil((X-+(~~X>>>0))/4294967296)>>>0:0)),t>>>0},m:function(){return-52},n:function(){},t:function(t,o,i){function d(J){return(J=J.toTimeString().match(/\(([A-Za-z ]+)\)$/))?J[1]:"GMT"}i>>>=0;var w=new Date().getFullYear(),S=new Date(w,0,1),I=new Date(w,6,1);w=S.getTimezoneOffset();var H=I.getTimezoneOffset();F[t>>>0>>2>>>0]=60*Math.max(w,H),E[o>>>0>>2>>>0]=+(w!=H),t=d(S),o=d(I),t=ct(t),o=ct(o),H<w?(F[i>>2>>>0]=t,F[i+4>>2>>>0]=o):(F[i>>2>>>0]=o,F[i+4>>2>>>0]=t)},d:()=>{W("")},h:function(){return Date.now()},u:function(){return 4294901760},b:()=>performance.now(),I:function(t,o,i){return o>>>=0,U.copyWithin(t>>>0>>>0,o>>>0,o+(i>>>0)>>>0)},s:function(t){t>>>=0;var o=U.length;if(4294901760<t)return!1;for(var i=1;4>=i;i*=2){var d=o*(1+.2/i);d=Math.min(d,t+100663296);var w=Math;d=Math.max(t,d);e:{w=w.min.call(w,4294901760,d+(65536-d%65536)%65536)-$.buffer.byteLength+65535>>>16;try{$.grow(w),Ae();var S=1;break e}catch{}S=void 0}if(S)return!0}return!1},C:function(t,o){t>>>=0,o>>>=0;var i=0;return dt().forEach(function(d,w){var S=o+i;for(w=F[t+4*w>>2>>>0]=S,S=0;S<d.length;++S)ne[w++>>0>>>0]=d.charCodeAt(S);ne[w>>0>>>0]=0,i+=d.length+1}),0},D:function(t,o){t>>>=0,o>>>=0;var i=dt();F[t>>2>>>0]=i.length;var d=0;return i.forEach(function(w){d+=w.length+1}),F[o>>2>>>0]=d,0},f:()=>52,j:function(){return 52},r:function(){return 70},i:function(t,o,i,d){o>>>=0,i>>>=0,d>>>=0;for(var w=0,S=0;S<i;S++){var I=F[o>>2>>>0],H=F[o+4>>2>>>0];o+=8;for(var J=0;J<H;J++){var G=U[I+J>>>0],Y=Fr[t];G===0||G===10?((t===1?v:_)(Ie(Y,0)),Y.length=0):Y.push(G)}w+=H}return F[d>>2>>>0]=w,0},A:ht,c:function(t,o,i,d){return ht(t>>>0,o>>>0,i>>>0,d>>>0)}};(function(){function t(i){if(i=i.exports,A=i=Nr(i),$=A.J,Ae(),te.unshift(A.K),Q--,e.monitorRunDependencies&&e.monitorRunDependencies(Q),Q==0&&(K!==null&&(clearInterval(K),K=null),ee)){var d=ee;ee=null,d()}return i}var o={a:zr};if(Q++,e.monitorRunDependencies&&e.monitorRunDependencies(Q),e.instantiateWasm)try{return e.instantiateWasm(o,t)}catch(i){_("Module.instantiateWasm callback failed with error: "+i),s(i)}return ae(o,function(i){t(i.instance)}).catch(s),{}})(),e._OrtInit=(t,o)=>(e._OrtInit=A.L)(t,o),e._OrtGetLastError=(t,o)=>(e._OrtGetLastError=A.M)(t,o),e._OrtCreateSessionOptions=(t,o,i,d,w,S,I,H,J,G)=>(e._OrtCreateSessionOptions=A.N)(t,o,i,d,w,S,I,H,J,G),e._OrtAppendExecutionProvider=(t,o)=>(e._OrtAppendExecutionProvider=A.O)(t,o),e._OrtAddFreeDimensionOverride=(t,o,i)=>(e._OrtAddFreeDimensionOverride=A.P)(t,o,i),e._OrtAddSessionConfigEntry=(t,o,i)=>(e._OrtAddSessionConfigEntry=A.Q)(t,o,i),e._OrtReleaseSessionOptions=t=>(e._OrtReleaseSessionOptions=A.R)(t),e._OrtCreateSession=(t,o,i)=>(e._OrtCreateSession=A.S)(t,o,i),e._OrtReleaseSession=t=>(e._OrtReleaseSession=A.T)(t),e._OrtGetInputOutputCount=(t,o,i)=>(e._OrtGetInputOutputCount=A.U)(t,o,i),e._OrtGetInputName=(t,o)=>(e._OrtGetInputName=A.V)(t,o),e._OrtGetOutputName=(t,o)=>(e._OrtGetOutputName=A.W)(t,o),e._OrtFree=t=>(e._OrtFree=A.X)(t),e._OrtCreateTensor=(t,o,i,d,w,S)=>(e._OrtCreateTensor=A.Y)(t,o,i,d,w,S),e._OrtGetTensorData=(t,o,i,d,w)=>(e._OrtGetTensorData=A.Z)(t,o,i,d,w),e._OrtReleaseTensor=t=>(e._OrtReleaseTensor=A._)(t),e._OrtCreateRunOptions=(t,o,i,d)=>(e._OrtCreateRunOptions=A.$)(t,o,i,d),e._OrtAddRunConfigEntry=(t,o,i)=>(e._OrtAddRunConfigEntry=A.aa)(t,o,i),e._OrtReleaseRunOptions=t=>(e._OrtReleaseRunOptions=A.ba)(t),e._OrtCreateBinding=t=>(e._OrtCreateBinding=A.ca)(t),e._OrtBindInput=(t,o,i)=>(e._OrtBindInput=A.da)(t,o,i),e._OrtBindOutput=(t,o,i,d)=>(e._OrtBindOutput=A.ea)(t,o,i,d),e._OrtClearBoundOutputs=t=>(e._OrtClearBoundOutputs=A.fa)(t),e._OrtReleaseBinding=t=>(e._OrtReleaseBinding=A.ga)(t),e._OrtRunWithBinding=(t,o,i,d,w)=>(e._OrtRunWithBinding=A.ha)(t,o,i,d,w),e._OrtRun=(t,o,i,d,w,S,I,H)=>(e._OrtRun=A.ia)(t,o,i,d,w,S,I,H),e._OrtEndProfiling=t=>(e._OrtEndProfiling=A.ja)(t);var yt=e._malloc=t=>(yt=e._malloc=A.ka)(t);e._free=t=>(e._free=A.la)(t);var gt=t=>(gt=A.na)(t),wt=()=>(wt=A.oa)(),bt=t=>(bt=A.pa)(t),Et=t=>(Et=A.qa)(t);function Nr(t){t=Object.assign({},t);var o=d=>()=>d()>>>0,i=d=>w=>d(w)>>>0;return t.__errno_location=o(t.__errno_location),t.malloc=i(t.malloc),t.stackSave=o(t.stackSave),t.stackAlloc=i(t.stackAlloc),t}e.stackAlloc=Et,e.stackSave=wt,e.stackRestore=bt,e.UTF8ToString=He,e.stringToUTF8=(t,o,i)=>$e(t,U,o,i),e.lengthBytesUTF8=je;var xe;ee=function t(){xe||St(),xe||(ee=t)};function St(){function t(){if(!xe&&(xe=!0,e.calledRun=!0,!ce)){if(de(te),a(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;){var o=e.postRun.shift();x.unshift(o)}de(x)}}if(!(0<Q)){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)oe();de(he),0<Q||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),t()},1)):t())}}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return St(),n.ready}})();typeof or=="object"&&typeof Ze=="object"?Ze.exports=nr:typeof define=="function"&&define.amd&&define([],()=>nr)});var tt,Jr,Qe,et,Re,ir,Kr,Zr,Qr,ar,k,me=P(()=>{"use strict";tt=sr();Jr=tt,et=!1,Re=!1,ir=!1,Kr=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},Zr=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},Qr=(r,n)=>r?n?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":n?"ort-wasm-threaded.wasm":"ort-wasm.wasm",ar=async r=>{if(et)return Promise.resolve();if(Re)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(ir)throw new Error("previous call to 'initializeWebAssembly()' failed.");Re=!0;let n=r.initTimeout,e=r.numThreads,a=r.simd,s=e>1&&Kr(),m=a&&Zr(),u=r.wasmPaths,c=typeof u=="string"?u:void 0,p=Qr(m,s),l=typeof u=="object"?u[p]:void 0,h=!1,g=[];if(n>0&&g.push(new Promise(y=>{setTimeout(()=>{h=!0,y()},n)})),g.push(new Promise((y,b)=>{(s?Jr:tt)({locateFile:(v,_)=>v.endsWith(".wasm")?l||(c??_)+p:_+v}).then(v=>{Re=!1,et=!0,Qe=v,y()},v=>{Re=!1,ir=!0,b(v)})})),await Promise.race(g),h)throw new Error(`WebAssembly backend initializing failed due to timeout: ${n}ms`)},k=()=>{if(et&&Qe)return Qe;throw new Error("WebAssembly is not initialized yet.")}});var R,Se,L,Ue=P(()=>{"use strict";me();R=(r,n)=>{let e=k(),a=e.lengthBytesUTF8(r)+1,s=e._malloc(a);return e.stringToUTF8(r,s,a),n.push(s),s},Se=(r,n,e,a)=>{if(typeof r=="object"&&r!==null){if(e.has(r))throw new Error("Circular reference in options");e.add(r)}Object.entries(r).forEach(([s,m])=>{let u=n?n+s:s;if(typeof m=="object")Se(m,u+".",e,a);else if(typeof m=="string"||typeof m=="number")a(u,m.toString());else if(typeof m=="boolean")a(u,m?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof m}`)})},L=r=>{let n=k(),e=n.stackSave();try{let a=n.stackAlloc(8);n._OrtGetLastError(a,a+4);let s=n.HEAP32[a/4],m=n.HEAPU32[a/4+1],u=m?n.UTF8ToString(m):"";throw new Error(`${r} ERROR_CODE: ${s}, ERROR_MESSAGE: ${u}`)}finally{n.stackRestore(e)}}});var ur,fr=P(()=>{"use strict";me();Ue();ur=r=>{let n=k(),e=0,a=[],s=r||{};try{if(r?.logSeverityLevel===void 0)s.logSeverityLevel=2;else if(typeof r.logSeverityLevel!="number"||!Number.isInteger(r.logSeverityLevel)||r.logSeverityLevel<0||r.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${r.logSeverityLevel}`);if(r?.logVerbosityLevel===void 0)s.logVerbosityLevel=0;else if(typeof r.logVerbosityLevel!="number"||!Number.isInteger(r.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${r.logVerbosityLevel}`);r?.terminate===void 0&&(s.terminate=!1);let m=0;return r?.tag!==void 0&&(m=R(r.tag,a)),e=n._OrtCreateRunOptions(s.logSeverityLevel,s.logVerbosityLevel,!!s.terminate,m),e===0&&L("Can't create run options."),r?.extra!==void 0&&Se(r.extra,"",new WeakSet,(u,c)=>{let p=R(u,a),l=R(c,a);n._OrtAddRunConfigEntry(e,p,l)!==0&&L(`Can't set a run config entry: ${u} - ${c}.`)}),[e,a]}catch(m){throw e!==0&&n._OrtReleaseRunOptions(e),a.forEach(u=>n._free(u)),m}}});var en,tn,rn,nn,lr,cr=P(()=>{"use strict";me();Ue();en=r=>{switch(r){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${r}`)}},tn=r=>{switch(r){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${r}`)}},rn=r=>{r.extra||(r.extra={}),r.extra.session||(r.extra.session={});let n=r.extra.session;n.use_ort_model_bytes_directly||(n.use_ort_model_bytes_directly="1"),r.executionProviders&&r.executionProviders.some(e=>(typeof e=="string"?e:e.name)==="webgpu")&&(r.enableMemPattern=!1)},nn=(r,n,e)=>{for(let a of n){let s=typeof a=="string"?a:a.name;switch(s){case"xnnpack":s="XNNPACK";break;case"webnn":if(s="WEBNN",typeof a!="string"){let u=a;if(u?.deviceType){let c=R("deviceType",e),p=R(u.deviceType,e);k()._OrtAddSessionConfigEntry(r,c,p)!==0&&L(`Can't set a session config entry: 'deviceType' - ${u.deviceType}.`)}if(u?.powerPreference){let c=R("powerPreference",e),p=R(u.powerPreference,e);k()._OrtAddSessionConfigEntry(r,c,p)!==0&&L(`Can't set a session config entry: 'powerPreference' - ${u.powerPreference}.`)}}break;case"webgpu":if(s="JS",typeof a!="string"){let u=a;if(u?.preferredLayout){if(u.preferredLayout!=="NCHW"&&u.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${u.preferredLayout}`);let c=R("preferredLayout",e),p=R(u.preferredLayout,e);k()._OrtAddSessionConfigEntry(r,c,p)!==0&&L(`Can't set a session config entry: 'preferredLayout' - ${u.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${s}`)}let m=R(s,e);k()._OrtAppendExecutionProvider(r,m)!==0&&L(`Can't append execution provider: ${s}.`)}},lr=r=>{let n=k(),e=0,a=[],s=r||{};rn(s);try{let m=en(s.graphOptimizationLevel??"all"),u=tn(s.executionMode??"sequential"),c=typeof s.logId=="string"?R(s.logId,a):0,p=s.logSeverityLevel??2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);let l=s.logVerbosityLevel??0;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log verbosity level is not valid: ${l}`);let h=typeof s.optimizedModelFilePath=="string"?R(s.optimizedModelFilePath,a):0;if(e=n._OrtCreateSessionOptions(m,!!s.enableCpuMemArena,!!s.enableMemPattern,u,!!s.enableProfiling,0,c,p,l,h),e===0&&L("Can't create session options."),s.executionProviders&&nn(e,s.executionProviders,a),s.freeDimensionOverrides)for(let[g,y]of Object.entries(s.freeDimensionOverrides)){if(typeof g!="string")throw new Error(`free dimension override name must be a string: ${g}`);if(typeof y!="number"||!Number.isInteger(y)||y<0)throw new Error(`free dimension override value must be a non-negative integer: ${y}`);let b=R(g,a);n._OrtAddFreeDimensionOverride(e,b,y)!==0&&L(`Can't set a free dimension override: ${g} - ${y}.`)}return s.extra!==void 0&&Se(s.extra,"",new WeakSet,(g,y)=>{let b=R(g,a),T=R(y,a);n._OrtAddSessionConfigEntry(e,b,T)!==0&&L(`Can't set a session config entry: ${g} - ${y}.`)}),[e,a]}catch(m){throw e!==0&&n._OrtReleaseSessionOptions(e),a.forEach(u=>n._free(u)),m}}});var rt,dr,nt,pr,mr,Fe,hr,ot=P(()=>{"use strict";rt=r=>{switch(r){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${r}`)}},dr=r=>{switch(r){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${r}`)}},nt=r=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][r],pr=r=>{switch(r){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${r}`)}},mr=r=>{switch(r){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${r}`)}},Fe=r=>r==="float32"||r==="int32"||r==="int64"||r==="bool"||r==="float16"||r==="uint32",hr=r=>{switch(r){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${r}`)}}});var gr,on,sn,wr,Oe,br,st,it,Er,Sr,yr,Or,Ar,Tr=P(()=>{"use strict";fr();cr();ot();me();Ue();gr=!1,on=r=>{let n=k(),e=n.stackSave();try{let a=n.stackAlloc(8);return n._OrtGetInputOutputCount(r,a,a+4)!==0&&L("Can't get session input/output count."),[n.HEAP32[a/4],n.HEAP32[a/4+1]]}finally{n.stackRestore(e)}},sn=(r,n)=>{k()._OrtInit(r,n)!==0&&L("Can't initialize onnxruntime.")},wr=async r=>{sn(r.wasm.numThreads,mr(r.logLevel)),gr=!0},Oe=new Map,br=()=>gr,st=r=>{let n=k(),e=n._malloc(r.byteLength);if(e===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${r.byteLength}.`);return n.HEAPU8.set(r,e),[e,r.byteLength]},it=(r,n)=>{let e=k(),a=0,s=0,m=0,u=[],c=[],p=[];try{[s,u]=lr(n),a=e._OrtCreateSession(r[0],r[1],s),a===0&&L("Can't create a session.");let[l,h]=on(a),g=[],y=[],b=[];for(let O=0;O<l;O++){let v=e._OrtGetInputName(a,O);v===0&&L("Can't get an input name."),c.push(v),g.push(e.UTF8ToString(v))}for(let O=0;O<h;O++){let v=e._OrtGetOutputName(a,O);v===0&&L("Can't get an output name."),p.push(v);let _=e.UTF8ToString(v);y.push(_)}let T=null;return Oe.set(a,[a,c,p,T]),[a,g,y]}catch(l){throw c.forEach(h=>e._OrtFree(h)),p.forEach(h=>e._OrtFree(h)),m!==0&&e._OrtReleaseBinding(m),a!==0&&e._OrtReleaseSession(a),l}finally{e._free(r[0]),s!==0&&e._OrtReleaseSessionOptions(s),u.forEach(l=>e._free(l))}},Er=(r,n)=>{let e=st(r);return it(e,n)},Sr=r=>{let n=k(),e=Oe.get(r);if(!e)throw new Error(`cannot release session. invalid session id: ${r}`);let[a,s,m,u]=e;u&&n._OrtReleaseBinding(u.handle),n.jsepUnregisterBuffers?.(r),s.forEach(c=>n._OrtFree(c)),m.forEach(c=>n._OrtFree(c)),n._OrtReleaseSession(a),Oe.delete(r)},yr=(r,n,e,a,s)=>{if(!r){n.push(0);return}let m=k(),u=r[0],c=r[1],p=r[3],l,h;if(u==="string"&&p==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(p==="gpu-buffer"){let b=r[2].gpuBuffer,T=nt(rt(u));h=c.reduce((O,v)=>O*v,1)*T,l=m.jsepRegisterBuffer(a,s,b,h)}else{let b=r[2];if(Array.isArray(b)){h=4*b.length,l=m._malloc(h),e.push(l);let T=l/4;for(let O=0;O<b.length;O++){if(typeof b[O]!="string")throw new TypeError(`tensor data at index ${O} is not a string`);m.HEAPU32[T++]=R(b[O],e)}}else h=b.byteLength,l=m._malloc(h),e.push(l),m.HEAPU8.set(new Uint8Array(b.buffer,b.byteOffset,h),l)}let g=m.stackSave(),y=m.stackAlloc(4*c.length);try{let b=y/4;c.forEach(O=>m.HEAP32[b++]=O);let T=m._OrtCreateTensor(rt(u),l,h,y,c.length,hr(p));T===0&&L(`Can't create tensor for input/output. session=${a}, index=${s}.`),n.push(T)}finally{m.stackRestore(g)}},Or=async(r,n,e,a,s,m)=>{let u=k(),c=Oe.get(r);if(!c)throw new Error(`cannot run inference. invalid session id: ${r}`);let[p,l,h,g]=c,y=n.length,b=a.length,T=0,O=[],v=[],_=[],D=[],V=u.stackSave(),$=u.stackAlloc(y*4),A=u.stackAlloc(y*4),ce=u.stackAlloc(b*4),ne=u.stackAlloc(b*4);try{[T,O]=ur(m);for(let x=0;x<y;x++)yr(e[x],v,D,r,n[x]);for(let x=0;x<b;x++)yr(s[x],_,D,r,y+a[x]);let U=$/4,E=A/4,F=ce/4,Ae=ne/4;for(let x=0;x<y;x++)u.HEAPU32[U++]=v[x],u.HEAPU32[E++]=l[n[x]];for(let x=0;x<b;x++)u.HEAPU32[F++]=_[x],u.HEAPU32[Ae++]=h[a[x]];let he;he=await u._OrtRun(p,A,$,y,ne,b,ce,T),he!==0&&L("failed to call OrtRun().");let te=[];for(let x=0;x<b;x++){let oe=u.HEAPU32[ce/4+x];if(oe===_[x]){te.push(s[x]);continue}let Q=u.stackSave(),K=u.stackAlloc(4*4),ee=!1,W,q=0;try{u._OrtGetTensorData(oe,K,K+4,K+8,K+12)!==0&&L(`Can't access output tensor data on index ${x}.`);let ie=K/4,ye=u.HEAPU32[ie++];q=u.HEAPU32[ie++];let Te=u.HEAPU32[ie++],ve=u.HEAPU32[ie++],ae=[];for(let N=0;N<ve;N++)ae.push(u.HEAPU32[Te/4+N]);u._OrtFree(Te);let X=ae.reduce((N,z)=>N*z,1);W=dr(ye);let de=g?.outputPreferredLocations[a[x]];if(W==="string"){if(de==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let N=[],z=q/4;for(let ge=0;ge<X;ge++){let we=u.HEAPU32[z++],Ie=ge===X-1?void 0:u.HEAPU32[z]-we;N.push(u.UTF8ToString(we,Ie))}te.push([W,ae,N,"cpu"])}else if(de==="gpu-buffer"&&X>0){let N=u.jsepGetBuffer(q),z=nt(ye);if(z===void 0||!Fe(W))throw new Error(`Unsupported data type: ${W}`);ee=!0,te.push([W,ae,{gpuBuffer:N,download:u.jsepCreateDownloader(N,X*z,W),dispose:()=>{u._OrtReleaseTensor(oe)}},"gpu-buffer"])}else{let N=pr(W),z=new N(X);new Uint8Array(z.buffer,z.byteOffset,z.byteLength).set(u.HEAPU8.subarray(q,q+z.byteLength)),te.push([W,ae,z,"cpu"])}}finally{u.stackRestore(Q),W==="string"&&q&&u._free(q),ee||u._OrtReleaseTensor(oe)}}return g&&u._OrtClearBoundOutputs(g.handle),te}finally{u.stackRestore(V),v.forEach(U=>u._OrtReleaseTensor(U)),_.forEach(U=>u._OrtReleaseTensor(U)),D.forEach(U=>u._free(U)),T!==0&&u._OrtReleaseRunOptions(T),O.forEach(U=>u._free(U))}},Ar=r=>{let n=k(),e=Oe.get(r);if(!e)throw new Error("invalid session id");let a=e[0],s=n._OrtEndProfiling(a);s===0&&L("Can't get an profile file name."),n._OrtFree(s)}});var wo,vr,Ir,xr,Pr,at,_r,Br,Dr,Cr,ut=P(()=>{"use strict";le();Tr();me();wo=typeof document<"u"?document?.currentScript?.src:void 0,vr=async()=>ar(M.wasm),Ir=async r=>{await wr(r)},xr=async r=>st(r),Pr=async(r,n)=>it(r,n),at=async(r,n)=>Er(r,n),_r=async r=>{Sr(r)},Br=async(r,n,e,a,s,m)=>Or(r,n,e,a,s,m),Dr=async r=>{Ar(r)},Cr=async()=>br()});var We,Lr,un,ze,Mr=P(()=>{"use strict";le();ut();ot();Lr=(r,n)=>{switch(r.location){case"cpu":return[r.type,r.dims,r.data,"cpu"];case"gpu-buffer":return[r.type,r.dims,{gpuBuffer:r.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${r.location} for ${n()}`)}},un=r=>{switch(r[3]){case"cpu":return new Z(r[0],r[2],r[1]);case"gpu-buffer":{let n=r[0];if(!Fe(n))throw new Error(`not supported data type: ${n} for deserializing GPU tensor`);let{gpuBuffer:e,download:a,dispose:s}=r[2];return Z.fromGpuBuffer(e,{dataType:n,dims:r[1],download:a,dispose:s})}default:throw new Error(`invalid data location: ${r[3]}`)}},ze=class{async createSessionAllocate(n){let e=await fetch(n);if(e.status!==200)throw new Error(`failed to load model: ${n}`);let a=await e.arrayBuffer();return xr(new Uint8Array(a))}async loadModel(n,e){if(await Cr()||(We||(We=Ir(M)),await We,We=void 0),typeof n=="string")if(typeof process<"u"&&process.versions&&process.versions.node){let a=await(void 0)(n);[this.sessionId,this.inputNames,this.outputNames]=await at(a,e)}else{let a=await this.createSessionAllocate(n);[this.sessionId,this.inputNames,this.outputNames]=await Pr(a,e)}else[this.sessionId,this.inputNames,this.outputNames]=await at(n,e)}async dispose(){return _r(this.sessionId)}async run(n,e,a){let s=[],m=[];Object.entries(n).forEach(y=>{let b=y[0],T=y[1],O=this.inputNames.indexOf(b);if(O===-1)throw new Error(`invalid input '${b}'`);s.push(T),m.push(O)});let u=[],c=[];Object.entries(e).forEach(y=>{let b=y[0],T=y[1],O=this.outputNames.indexOf(b);if(O===-1)throw new Error(`invalid output '${b}'`);u.push(T),c.push(O)});let p=s.map((y,b)=>Lr(y,()=>`input "${this.inputNames[m[b]]}"`)),l=u.map((y,b)=>y?Lr(y,()=>`output "${this.outputNames[c[b]]}"`):null),h=await Br(this.sessionId,m,p,c,l,a),g={};for(let y=0;y<h.length;y++)g[this.outputNames[c[y]]]=u[y]??un(h[y]);return g}startProfiling(){}endProfiling(){Dr(this.sessionId)}}});var fn,Ne,kr=P(()=>{"use strict";le();ut();Mr();fn=()=>{if((typeof M.wasm.initTimeout!="number"||M.wasm.initTimeout<0)&&(M.wasm.initTimeout=0),typeof M.wasm.simd!="boolean"&&(M.wasm.simd=!0),typeof M.wasm.proxy!="boolean"&&(M.wasm.proxy=!1),typeof M.wasm.numThreads!="number"||!Number.isInteger(M.wasm.numThreads)||M.wasm.numThreads<=0){let r=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;M.wasm.numThreads=Math.min(4,Math.ceil((r||1)/2))}},Ne=class{async init(){fn(),await vr()}async createInferenceSessionHandler(n,e){let a=new ze;return await a.loadModel(n,e),Promise.resolve(a)}}});var Rr={};be(Rr,{wasmBackend:()=>ln});var ln,Ur=P(()=>{"use strict";kr();ln=new Ne});var dn={};be(dn,{InferenceSession:()=>Yt,Tensor:()=>Z,TrainingSession:()=>Jt,default:()=>cn,env:()=>M,registerBackend:()=>re});le();le();le();var Zt="1.17.0";var cn=Ke;{let r=(Ur(),Pe(Rr)).wasmBackend;re("cpu",r,10),re("wasm",r,10),re("xnnpack",r,9),re("webnn",r,9)}Object.defineProperty(M.versions,"web",{value:Zt,enumerable:!0});return Pe(dn);})();
//# sourceMappingURL=ort.wasm-core.min.js.map
