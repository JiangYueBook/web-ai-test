/*!
 * ONNX Runtime Web v1.17.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
"use strict";var jt=Object.create;var je=Object.defineProperty;var Gt=Object.getOwnPropertyDescriptor;var Yt=Object.getOwnPropertyNames;var Vt=Object.getPrototypeOf,Xt=Object.prototype.hasOwnProperty;var Q=(a,u)=>()=>(a&&(u=a(a=0)),u);var qt=(a,u)=>()=>(u||a((u={exports:{}}).exports,u),u.exports),Fr=(a,u)=>{for(var n in u)je(a,n,{get:u[n],enumerable:!0})},$e=(a,u,n,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of Yt(u))!Xt.call(a,d)&&d!==n&&je(a,d,{get:()=>u[d],enumerable:!(f=Gt(u,d))||f.enumerable});return a},ie=(a,u,n)=>($e(a,u,"default"),n&&$e(n,u,"default")),Jt=(a,u,n)=>(n=a!=null?jt(Vt(a)):{},$e(u||!a||!a.__esModule?je(n,"default",{value:a,enumerable:!0}):n,a)),kr=a=>$e(je({},"__esModule",{value:!0}),a);var Nr=qt((Hr,tr)=>{"use strict";var zr=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(a=a||__filename),function(u={}){var n=u,f,d;n.ready=new Promise((e,r)=>{f=e,d=r});var y=Object.assign({},n),l="./this.program",w=typeof window=="object",b=typeof importScripts=="function",T=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",E="",x,h,v;if(T){var D=require("fs"),_=require("path");E=b?_.dirname(E)+"/":__dirname+"/",x=(e,r)=>(e=e.startsWith("file://")?new URL(e):_.normalize(e),D.readFileSync(e,r?void 0:"utf8")),v=e=>(e=x(e,!0),e.buffer||(e=new Uint8Array(e)),e),h=(e,r,t,o=!0)=>{e=e.startsWith("file://")?new URL(e):_.normalize(e),D.readFile(e,o?void 0:"utf8",(i,c)=>{i?t(i):r(o?c.buffer:c)})},!n.thisProgram&&1<process.argv.length&&(l=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),n.inspect=()=>"[Emscripten Module object]"}else(w||b)&&(b?E=self.location.href:typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),a&&(E=a),E.indexOf("blob:")!==0?E=E.substr(0,E.replace(/[?#].*/,"").lastIndexOf("/")+1):E="",x=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},b&&(v=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),h=(e,r,t)=>{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{o.status==200||o.status==0&&o.response?r(o.response):t()},o.onerror=t,o.send(null)});var M=console.log.bind(console),H=console.error.bind(console);Object.assign(n,y),y=null,typeof WebAssembly!="object"&&xe("no native wasm support detected");var J,Pe=!1,re,k,te,de,m,P,Ce,Ie,Se,se;function C(){var e=J.buffer;n.HEAP8=re=new Int8Array(e),n.HEAP16=te=new Int16Array(e),n.HEAPU8=k=new Uint8Array(e),n.HEAPU16=de=new Uint16Array(e),n.HEAP32=m=new Int32Array(e),n.HEAPU32=P=new Uint32Array(e),n.HEAPF32=Ce=new Float32Array(e),n.HEAPF64=se=new Float64Array(e),n.HEAP64=Ie=new BigInt64Array(e),n.HEAPU64=Se=new BigUint64Array(e)}var ue=[],he=[],Z=[],K=0,R=null,N=null;function xe(e){throw e="Aborted("+e+")",H(e),Pe=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),d(e),e}function pe(e){return e.startsWith("data:application/octet-stream;base64,")}var le;if(le="ort-wasm.wasm",!pe(le)){var Oe=le;le=n.locateFile?n.locateFile(Oe,E):E+Oe}function De(e){if(v)return v(e);throw"both async and sync fetching of the wasm failed"}function me(e){if(w||b){if(typeof fetch=="function"&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at '"+e+"'";return r.arrayBuffer()}).catch(()=>De(e));if(h)return new Promise((r,t)=>{h(e,o=>r(new Uint8Array(o)),t)})}return Promise.resolve().then(()=>De(e))}function ce(e,r,t){return me(e).then(o=>WebAssembly.instantiate(o,r)).then(o=>o).then(t,o=>{H(`failed to asynchronously prepare wasm: ${o}`),xe(o)})}function Me(e,r){var t=le;return typeof WebAssembly.instantiateStreaming!="function"||pe(t)||t.startsWith("file://")||T||typeof fetch!="function"?ce(t,e,r):fetch(t,{credentials:"same-origin"}).then(o=>WebAssembly.instantiateStreaming(o,e).then(r,function(i){return H(`wasm streaming compile failed: ${i}`),H("falling back to ArrayBuffer instantiation"),ce(t,e,r)}))}function $(e){this.Va=e-24,this.fb=function(r){P[this.Va+4>>>2>>>0]=r},this.eb=function(r){P[this.Va+8>>>2>>>0]=r},this.Za=function(r,t){this.$a(),this.fb(r),this.eb(t)},this.$a=function(){P[this.Va+16>>>2>>>0]=0}}var z=0,be=0,Ee=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Be=(e,r,t)=>{r>>>=0;var o=r+t;for(t=r;e[t]&&!(t>=o);)++t;if(16<t-r&&e.buffer&&Ee)return Ee.decode(e.subarray(r,t));for(o="";r<t;){var i=e[r++];if(i&128){var c=e[r++]&63;if((i&224)==192)o+=String.fromCharCode((i&31)<<6|c);else{var g=e[r++]&63;i=(i&240)==224?(i&15)<<12|c<<6|g:(i&7)<<18|c<<12|g<<6|e[r++]&63,65536>i?o+=String.fromCharCode(i):(i-=65536,o+=String.fromCharCode(55296|i>>10,56320|i&1023))}}else o+=String.fromCharCode(i)}return o},Ue=(e,r)=>(e>>>=0)?Be(k,e,r):"",We=e=>{for(var r=0,t=0;t<e.length;++t){var o=e.charCodeAt(t);127>=o?r++:2047>=o?r+=2:55296<=o&&57343>=o?(r+=4,++t):r+=3}return r},Le=(e,r,t,o)=>{if(t>>>=0,!(0<o))return 0;var i=t;o=t+o-1;for(var c=0;c<e.length;++c){var g=e.charCodeAt(c);if(55296<=g&&57343>=g){var p=e.charCodeAt(++c);g=65536+((g&1023)<<10)|p&1023}if(127>=g){if(t>=o)break;r[t++>>>0]=g}else{if(2047>=g){if(t+1>=o)break;r[t++>>>0]=192|g>>6}else{if(65535>=g){if(t+2>=o)break;r[t++>>>0]=224|g>>12}else{if(t+3>=o)break;r[t++>>>0]=240|g>>18,r[t++>>>0]=128|g>>12&63}r[t++>>>0]=128|g>>6&63}r[t++>>>0]=128|g&63}}return r[t>>>0]=0,t-i},pr=e=>{if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e},mr,q=e=>{for(var r="";k[e>>>0];)r+=mr[k[e++>>>0]];return r},Ze={},Ke={},At={},fe;function Tt(e,r,t={}){var o=r.name;if(!e)throw new fe(`type "${o}" must have a positive integer typeid pointer`);if(Ke.hasOwnProperty(e)){if(t.gb)return;throw new fe(`Cannot register type '${o}' twice`)}Ke[e]=r,delete At[e],Ze.hasOwnProperty(e)&&(r=Ze[e],delete Ze[e],r.forEach(i=>i()))}function ne(e,r,t={}){if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");Tt(e,r,t)}var gr=(e,r,t)=>{switch(r){case 1:return t?o=>re[o>>>0>>>0]:o=>k[o>>>0>>>0];case 2:return t?o=>te[o>>>1>>>0]:o=>de[o>>>1>>>0];case 4:return t?o=>m[o>>>2>>>0]:o=>P[o>>>2>>>0];case 8:return t?o=>Ie[o>>>3]:o=>Se[o>>>3];default:throw new TypeError(`invalid integer width (${r}): ${e}`)}};function yr(){this.Sa=[void 0],this.bb=[]}var Y=new yr;function Qe(e){e>>>=0,e>=Y.Va&&--Y.get(e).cb===0&&Y.$a(e)}var j=e=>{if(!e)throw new fe("Cannot use deleted val. handle = "+e);return Y.get(e).value},V=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Y.Za({cb:1,value:e})}};function hr(e){return this.fromWireType(m[e>>>2>>>0])}var _t=(e,r)=>{switch(r){case 4:return function(t){return this.fromWireType(Ce[t>>>2>>>0])};case 8:return function(t){return this.fromWireType(se[t>>>3>>>0])};default:throw new TypeError(`invalid float width (${r}): ${e}`)}};function Pt(e){return this.fromWireType(P[e>>>2>>>0])}var wr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Ct=(e,r)=>{for(var t=e>>1,o=t+r/2;!(t>=o)&&de[t>>>0];)++t;if(t<<=1,32<t-e&&wr)return wr.decode(k.subarray(e>>>0,t>>>0));for(t="",o=0;!(o>=r/2);++o){var i=te[e+2*o>>>1>>>0];if(i==0)break;t+=String.fromCharCode(i)}return t},It=(e,r,t)=>{if(t===void 0&&(t=2147483647),2>t)return 0;t-=2;var o=r;t=t<2*e.length?t/2:e.length;for(var i=0;i<t;++i)te[r>>>1>>>0]=e.charCodeAt(i),r+=2;return te[r>>>1>>>0]=0,r-o},xt=e=>2*e.length,Dt=(e,r)=>{for(var t=0,o="";!(t>=r/4);){var i=m[e+4*t>>>2>>>0];if(i==0)break;++t,65536<=i?(i-=65536,o+=String.fromCharCode(55296|i>>10,56320|i&1023)):o+=String.fromCharCode(i)}return o},Mt=(e,r,t)=>{if(r>>>=0,t===void 0&&(t=2147483647),4>t)return 0;var o=r;t=o+t-4;for(var i=0;i<e.length;++i){var c=e.charCodeAt(i);if(55296<=c&&57343>=c){var g=e.charCodeAt(++i);c=65536+((c&1023)<<10)|g&1023}if(m[r>>>2>>>0]=c,r+=4,r+4>t)break}return m[r>>>2>>>0]=0,r-o},Bt=e=>{for(var r=0,t=0;t<e.length;++t){var o=e.charCodeAt(t);55296<=o&&57343>=o&&++t,r+=4}return r},Fe=(e,r)=>{var t=Ke[e];if(t===void 0)throw e=Dr(e),t=q(e),oe(e),new fe(r+" has unknown type "+t);return t},Ut={},ke=e=>{var r=Ut[e];return r===void 0?q(e):r},Re=[],vr=()=>typeof globalThis=="object"?globalThis:Function("return this")(),Wt=e=>{var r=Re.length;return Re.push(e),r},Lt=(e,r)=>{for(var t=Array(e),o=0;o<e;++o)t[o]=Fe(P[r+4*o>>>2>>>0],"parameter "+o);return t},Sr=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var r=e.charCodeAt(0);return 48<=r&&57>=r?`_${e}`:e},Or={};function Ft(e,r){return e=Sr(e),{[e]:function(){return r.apply(this,arguments)}}[e]}function kt(e){var r=Function;if(!(r instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof r} which is not a function`);var t=Ft(r.name||"unknownFunctionName",function(){});return t.prototype=r.prototype,t=new t,e=r.apply(t,e),e instanceof Object?e:t}var Rt=e=>{for(var r="",t=0;t<e;++t)r+=(t!==0?", ":"")+"arg"+t;var o="return function emval_allocator_"+e+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`;for(t=0;t<e;++t)o+="var argType"+t+" = requireRegisteredType(HEAPU32[((argTypes)>>>2)], 'parameter "+t+`');
var arg`+t+" = argType"+t+`.readValueFromPointer(args);
args += argType`+t+`['argPackAdvance'];
argTypes += 4;
`;return new Function("requireRegisteredType","Module","valueToHandle","getMemory",o+("var obj = new constructor("+r+`);
return valueToHandle(obj);
}
`))(Fe,n,V,()=>P)},br={},we=e=>e%4===0&&(e%100!==0||e%400===0),Er=[0,31,60,91,121,152,182,213,244,274,305,335],Ar=[0,31,59,90,120,151,181,212,243,273,304,334],Tr=e=>{var r=We(e)+1,t=He(r);return t&&Le(e,k,t,r),t},er={},_r=()=>{if(!rr){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"},r;for(r in er)er[r]===void 0?delete e[r]:e[r]=er[r];var t=[];for(r in e)t.push(`${r}=${e[r]}`);rr=t}return rr},rr,zt=[null,[],[]],Pr=[31,29,31,30,31,30,31,31,30,31,30,31],Cr=[31,28,31,30,31,30,31,31,30,31,30,31];function Ht(e){var r=Array(We(e)+1);return Le(e,r,0,r.length),r}function Ir(e,r,t,o){function i(s,I,U){for(s=typeof s=="number"?s.toString():s||"";s.length<I;)s=U[0]+s;return s}function c(s,I){return i(s,I,"0")}function g(s,I){function U(Lr){return 0>Lr?-1:0<Lr?1:0}var ge;return(ge=U(s.getFullYear()-I.getFullYear()))===0&&(ge=U(s.getMonth()-I.getMonth()))===0&&(ge=U(s.getDate()-I.getDate())),ge}function p(s){switch(s.getDay()){case 0:return new Date(s.getFullYear()-1,11,29);case 1:return s;case 2:return new Date(s.getFullYear(),0,3);case 3:return new Date(s.getFullYear(),0,2);case 4:return new Date(s.getFullYear(),0,1);case 5:return new Date(s.getFullYear()-1,11,31);case 6:return new Date(s.getFullYear()-1,11,30)}}function S(s){var I=s.Ta;for(s=new Date(new Date(s.Ua+1900,0,1).getTime());0<I;){var U=s.getMonth(),ge=(we(s.getFullYear())?Pr:Cr)[U];if(I>ge-s.getDate())I-=ge-s.getDate()+1,s.setDate(1),11>U?s.setMonth(U+1):(s.setMonth(0),s.setFullYear(s.getFullYear()+1));else{s.setDate(s.getDate()+I);break}}return U=new Date(s.getFullYear()+1,0,4),I=p(new Date(s.getFullYear(),0,4)),U=p(U),0>=g(I,s)?0>=g(U,s)?s.getFullYear()+1:s.getFullYear():s.getFullYear()-1}e>>>=0,r>>>=0,t>>>=0,o>>>=0;var A=P[o+40>>>2>>>0];o={kb:m[o>>>2>>>0],jb:m[o+4>>>2>>>0],Xa:m[o+8>>>2>>>0],ab:m[o+12>>>2>>>0],Ya:m[o+16>>>2>>>0],Ua:m[o+20>>>2>>>0],Oa:m[o+24>>>2>>>0],Ta:m[o+28>>>2>>>0],mb:m[o+32>>>2>>>0],ib:m[o+36>>>2>>>0],lb:A?Ue(A):""},t=Ue(t),A={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var B in A)t=t.replace(new RegExp(B,"g"),A[B]);var G="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ae="January February March April May June July August September October November December".split(" ");A={"%a":s=>G[s.Oa].substring(0,3),"%A":s=>G[s.Oa],"%b":s=>ae[s.Ya].substring(0,3),"%B":s=>ae[s.Ya],"%C":s=>c((s.Ua+1900)/100|0,2),"%d":s=>c(s.ab,2),"%e":s=>i(s.ab,2," "),"%g":s=>S(s).toString().substring(2),"%G":s=>S(s),"%H":s=>c(s.Xa,2),"%I":s=>(s=s.Xa,s==0?s=12:12<s&&(s-=12),c(s,2)),"%j":s=>{for(var I=0,U=0;U<=s.Ya-1;I+=(we(s.Ua+1900)?Pr:Cr)[U++]);return c(s.ab+I,3)},"%m":s=>c(s.Ya+1,2),"%M":s=>c(s.jb,2),"%n":()=>`
`,"%p":s=>0<=s.Xa&&12>s.Xa?"AM":"PM","%S":s=>c(s.kb,2),"%t":()=>"	","%u":s=>s.Oa||7,"%U":s=>c(Math.floor((s.Ta+7-s.Oa)/7),2),"%V":s=>{var I=Math.floor((s.Ta+7-(s.Oa+6)%7)/7);if(2>=(s.Oa+371-s.Ta-2)%7&&I++,I)I==53&&(U=(s.Oa+371-s.Ta)%7,U==4||U==3&&we(s.Ua)||(I=1));else{I=52;var U=(s.Oa+7-s.Ta-1)%7;(U==4||U==5&&we(s.Ua%400-1))&&I++}return c(I,2)},"%w":s=>s.Oa,"%W":s=>c(Math.floor((s.Ta+7-(s.Oa+6)%7)/7),2),"%y":s=>(s.Ua+1900).toString().substring(2),"%Y":s=>s.Ua+1900,"%z":s=>{s=s.ib;var I=0<=s;return s=Math.abs(s)/60,(I?"+":"-")+("0000"+(s/60*100+s%60)).slice(-4)},"%Z":s=>s.lb,"%%":()=>"%"},t=t.replace(/%%/g,"\0\0");for(B in A)t.includes(B)&&(t=t.replace(new RegExp(B,"g"),A[B](o)));return t=t.replace(/\0\0/g,"%"),B=Ht(t),B.length>r?0:(re.set(B,e>>>0),B.length-1)}for(var xr=Array(256),ze=0;256>ze;++ze)xr[ze]=String.fromCharCode(ze);mr=xr,fe=n.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},n.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Object.assign(yr.prototype,{get(e){return this.Sa[e]},has(e){return this.Sa[e]!==void 0},Za(e){var r=this.bb.pop()||this.Sa.length;return this.Sa[r]=e,r},$a(e){this.Sa[e]=void 0,this.bb.push(e)}}),Y.Sa.push({value:void 0},{value:null},{value:!0},{value:!1}),Y.Va=Y.Sa.length,n.count_emval_handles=()=>{for(var e=0,r=Y.Va;r<Y.Sa.length;++r)Y.Sa[r]!==void 0&&++e;return e};var Nt={a:function(e,r,t){throw e>>>=0,new $(e).Za(r>>>0,t>>>0),z=e,be++,z},v:function(){return 0},ba:function(){},N:function(){},P:function(){},H:function(){return 0},$:function(){},V:function(){},_:function(){},A:function(){},O:function(){},L:function(){},aa:function(){},M:function(){},D:function(e,r,t,o,i){r>>>=0,r=q(r);var c=r.indexOf("u")!=-1;c&&(i=(1n<<64n)-1n),ne(e>>>0,{name:r,fromWireType:g=>g,toWireType:function(g,p){if(typeof p!="bigint"&&typeof p!="number")throw new TypeError(`Cannot convert "${pr(p)}" to ${this.name}`);if(p<o||p>i)throw new TypeError(`Passing a number "${pr(p)}" from JS side to C/C++ side to an argument of type "${r}", which is outside the valid range [${o}, ${i}]!`);return p},argPackAdvance:8,readValueFromPointer:gr(r,t>>>0,!c),Wa:null})},ea:function(e,r,t,o){r=q(r>>>0),ne(e>>>0,{name:r,fromWireType:function(i){return!!i},toWireType:function(i,c){return c?t:o},argPackAdvance:8,readValueFromPointer:function(i){return this.fromWireType(k[i>>>0])},Wa:null})},da:function(e,r){r=q(r>>>0),ne(e>>>0,{name:r,fromWireType:t=>{var o=j(t);return Qe(t),o},toWireType:(t,o)=>V(o),argPackAdvance:8,readValueFromPointer:hr,Wa:null})},C:function(e,r,t){r=q(r>>>0),ne(e>>>0,{name:r,fromWireType:o=>o,toWireType:(o,i)=>i,argPackAdvance:8,readValueFromPointer:_t(r,t>>>0),Wa:null})},p:function(e,r,t,o,i){if(e>>>=0,t>>>=0,r=q(r>>>0),i===-1&&(i=4294967295),i=p=>p,o===0){var c=32-8*t;i=p=>p<<c>>>c}var g=r.includes("unsigned")?function(p,S){return S>>>0}:function(p,S){return S};ne(e,{name:r,fromWireType:i,toWireType:g,argPackAdvance:8,readValueFromPointer:gr(r,t,o!==0),Wa:null})},l:function(e,r,t){function o(c){return new i(re.buffer,P[c+4>>>2>>>0],P[c>>>2>>>0])}var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][r];t=q(t>>>0),ne(e>>>0,{name:t,fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{gb:!0})},E:function(e,r){r=q(r>>>0);var t=r==="std::string";ne(e>>>0,{name:r,fromWireType:function(o){var i=P[o>>>2>>>0],c=o+4;if(t)for(var g=c,p=0;p<=i;++p){var S=c+p;if(p==i||k[S>>>0]==0){if(g=Ue(g,S-g),A===void 0)var A=g;else A+=String.fromCharCode(0),A+=g;g=S+1}}else{for(A=Array(i),p=0;p<i;++p)A[p]=String.fromCharCode(k[c+p>>>0]);A=A.join("")}return oe(o),A},toWireType:function(o,i){i instanceof ArrayBuffer&&(i=new Uint8Array(i));var c=typeof i=="string";if(!(c||i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Int8Array))throw new fe("Cannot pass non-string to std::string");var g=t&&c?We(i):i.length,p=He(4+g+1),S=p+4;if(P[p>>>2>>>0]=g,t&&c)Le(i,k,S,g+1);else if(c)for(c=0;c<g;++c){var A=i.charCodeAt(c);if(255<A)throw oe(S),new fe("String has UTF-16 code units that do not fit in 8 bits");k[S+c>>>0]=A}else for(c=0;c<g;++c)k[S+c>>>0]=i[c];return o!==null&&o.push(oe,p),p},argPackAdvance:8,readValueFromPointer:Pt,Wa(o){oe(o)}})},x:function(e,r,t){if(r>>>=0,t>>>=0,t=q(t),r===2)var o=Ct,i=It,c=xt,g=()=>de,p=1;else r===4&&(o=Dt,i=Mt,c=Bt,g=()=>P,p=2);ne(e>>>0,{name:t,fromWireType:S=>{for(var A=P[S>>>2>>>0],B=g(),G,ae=S+4,s=0;s<=A;++s){var I=S+4+s*r;(s==A||B[I>>>p]==0)&&(ae=o(ae,I-ae),G===void 0?G=ae:(G+=String.fromCharCode(0),G+=ae),ae=I+r)}return oe(S),G},toWireType:(S,A)=>{if(typeof A!="string")throw new fe(`Cannot pass non-string to C++ string type ${t}`);var B=c(A),G=He(4+B+r);return P[G>>>2]=B>>p,i(A,G+4,B+r),S!==null&&S.push(oe,G),G},argPackAdvance:8,readValueFromPointer:hr,Wa(S){oe(S)}})},fa:function(e,r){r=q(r>>>0),ne(e>>>0,{hb:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ca:()=>!0,o:function(e,r,t){r>>>=0,t>>>=0,e=j(e>>>0),r=Fe(r,"emval::as");var o=[],i=V(o);return P[t>>>2>>>0]=i,r.toWireType(o,e)},h:function(e,r,t,o,i){t>>>=0,o>>>=0,i>>>=0,e=Re[e>>>0],r=j(r>>>0),t=ke(t);var c=[];return P[o>>>2>>>0]=V(c),e(r,t,c,i)},r:function(e,r,t,o){t>>>=0,o>>>=0,e=Re[e>>>0],r=j(r>>>0),t=ke(t),e(r,t,null,o)},b:Qe,F:function(e,r){return r>>>=0,e=j(e>>>0),r=j(r),e==r},u:function(e){return e>>>=0,e===0?V(vr()):(e=ke(e),V(vr()[e]))},g:function(e,r){var t=Lt(e,r>>>0),o=t[0];r=o.name+"_$"+t.slice(1).map(function(B){return B.name}).join("_")+"$";var i=Or[r];if(i!==void 0)return i;i=["retType"];for(var c=[o],g="",p=0;p<e-1;++p)g+=(p!==0?", ":"")+"arg"+p,i.push("argType"+p),c.push(t[1+p]);var S="return function "+Sr("methodCaller_"+r)+`(handle, name, destructors, args) {
`,A=0;for(p=0;p<e-1;++p)S+="    var arg"+p+" = argType"+p+".readValueFromPointer(args"+(A?"+"+A:"")+`);
`,A+=t[p+1].argPackAdvance;for(S+="    var rv = handle[name]("+g+`);
`,p=0;p<e-1;++p)t[p+1].deleteObject&&(S+="    argType"+p+".deleteObject(arg"+p+`);
`);return o.hb||(S+=`    return retType.toWireType(destructors, rv);
`),i.push(S+`};
`),e=kt(i).apply(null,c),i=Wt(e),Or[r]=i},q:function(e,r){return r>>>=0,e=j(e>>>0),r=j(r),V(e[r])},c:function(e){e>>>=0,4<e&&(Y.get(e).cb+=1)},G:function(e,r,t,o){t>>>=0,o>>>=0,e=j(e>>>0);var i=br[r];return i||(i=Rt(r),br[r]=i),i(e,t,o)},s:function(){return V([])},k:function(e){e=j(e>>>0);for(var r=Array(e.length),t=0;t<e.length;t++)r[t]=e[t];return V(r)},d:function(e){return V(ke(e>>>0))},j:function(){return V({})},f:function(e){e>>>=0;for(var r=j(e);r.length;){var t=r.pop();r.pop()(t)}Qe(e)},i:function(e,r,t){r>>>=0,t>>>=0,e=j(e>>>0),r=j(r),t=j(t),e[r]=t},e:function(e,r){return r>>>=0,e=Fe(e>>>0,"_emval_take_value"),e=e.readValueFromPointer(r),V(e)},S:function(e,r){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),r>>>=0,e=new Date(1e3*e),m[r>>>2>>>0]=e.getUTCSeconds(),m[r+4>>>2>>>0]=e.getUTCMinutes(),m[r+8>>>2>>>0]=e.getUTCHours(),m[r+12>>>2>>>0]=e.getUTCDate(),m[r+16>>>2>>>0]=e.getUTCMonth(),m[r+20>>>2>>>0]=e.getUTCFullYear()-1900,m[r+24>>>2>>>0]=e.getUTCDay(),m[r+28>>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},T:function(e,r){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),r>>>=0,e=new Date(1e3*e),m[r>>>2>>>0]=e.getSeconds(),m[r+4>>>2>>>0]=e.getMinutes(),m[r+8>>>2>>>0]=e.getHours(),m[r+12>>>2>>>0]=e.getDate(),m[r+16>>>2>>>0]=e.getMonth(),m[r+20>>>2>>>0]=e.getFullYear()-1900,m[r+24>>>2>>>0]=e.getDay(),m[r+28>>>2>>>0]=(we(e.getFullYear())?Er:Ar)[e.getMonth()]+e.getDate()-1|0,m[r+36>>>2>>>0]=-(60*e.getTimezoneOffset());var t=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=new Date(e.getFullYear(),0,1).getTimezoneOffset();m[r+32>>>2>>>0]=(t!=o&&e.getTimezoneOffset()==Math.min(o,t))|0},U:function(e){e>>>=0;var r=new Date(m[e+20>>>2>>>0]+1900,m[e+16>>>2>>>0],m[e+12>>>2>>>0],m[e+8>>>2>>>0],m[e+4>>>2>>>0],m[e>>>2>>>0],0),t=m[e+32>>>2>>>0],o=r.getTimezoneOffset(),i=new Date(r.getFullYear(),6,1).getTimezoneOffset(),c=new Date(r.getFullYear(),0,1).getTimezoneOffset(),g=Math.min(c,i);return 0>t?m[e+32>>>2>>>0]=+(i!=c&&g==o):0<t!=(g==o)&&(i=Math.max(c,i),r.setTime(r.getTime()+6e4*((0<t?g:i)-o))),m[e+24>>>2>>>0]=r.getDay(),m[e+28>>>2>>>0]=(we(r.getFullYear())?Er:Ar)[r.getMonth()]+r.getDate()-1|0,m[e>>>2>>>0]=r.getSeconds(),m[e+4>>>2>>>0]=r.getMinutes(),m[e+8>>>2>>>0]=r.getHours(),m[e+12>>>2>>>0]=r.getDate(),m[e+16>>>2>>>0]=r.getMonth(),m[e+20>>>2>>>0]=r.getYear(),BigInt(r.getTime()/1e3)},Q:function(){return-52},R:function(){},J:function(e,r,t){function o(S){return(S=S.toTimeString().match(/\(([A-Za-z ]+)\)$/))?S[1]:"GMT"}t>>>=0;var i=new Date().getFullYear(),c=new Date(i,0,1),g=new Date(i,6,1);i=c.getTimezoneOffset();var p=g.getTimezoneOffset();P[e>>>0>>>2>>>0]=60*Math.max(i,p),m[r>>>0>>>2>>>0]=+(i!=p),e=o(c),r=o(g),e=Tr(e),r=Tr(r),p<i?(P[t>>>2>>>0]=e,P[t+4>>>2>>>0]=r):(P[t>>>2>>>0]=r,P[t+4>>>2>>>0]=e)},t:()=>{xe("")},B:()=>Date.now(),K:function(){return 4294901760},n:()=>performance.now(),Z:function(e,r,t){return r>>>=0,k.copyWithin(e>>>0>>>0,r>>>0,r+(t>>>0)>>>0)},I:function(e){e>>>=0;var r=k.length;if(4294901760<e)return!1;for(var t=1;4>=t;t*=2){var o=r*(1+.2/t);o=Math.min(o,e+100663296);var i=Math;o=Math.max(e,o);e:{i=(i.min.call(i,4294901760,o+(65536-o%65536)%65536)-J.buffer.byteLength+65535)/65536;try{J.grow(i),C();var c=1;break e}catch{}c=void 0}if(c)return!0}return!1},X:function(e,r){e>>>=0,r>>>=0;var t=0;return _r().forEach((o,i)=>{var c=r+t;for(i=P[e+4*i>>>2>>>0]=c,c=0;c<o.length;++c)re[i++>>>0>>>0]=o.charCodeAt(c);re[i>>>0>>>0]=0,t+=o.length+1}),0},Y:function(e,r){e>>>=0,r>>>=0;var t=_r();P[e>>>2>>>0]=t.length;var o=0;return t.forEach(i=>o+=i.length+1),P[r>>>2>>>0]=o,0},w:()=>52,z:function(){return 52},W:function(){return 70},y:function(e,r,t,o){r>>>=0,t>>>=0,o>>>=0;for(var i=0,c=0;c<t;c++){var g=P[r>>>2>>>0],p=P[r+4>>>2>>>0];r+=8;for(var S=0;S<p;S++){var A=k[g+S>>>0],B=zt[e];A===0||A===10?((e===1?M:H)(Be(B,0)),B.length=0):B.push(A)}i+=p}return P[o>>>2>>>0]=i,0},ga:Ir,m:function(e,r,t,o){return Ir(e>>>0,r>>>0,t>>>0,o>>>0)}},O=function(){var e={a:Nt};return K++,Me(e,function(r){O=r.instance.exports,O=$t(),J=O.ha,C(),he.unshift(O.ia),K--,K==0&&(R!==null&&(clearInterval(R),R=null),N&&(r=N,N=null,r()))}).catch(d),{}}();n._OrtInit=(e,r)=>(n._OrtInit=O.ja)(e,r),n._OrtGetLastError=(e,r)=>(n._OrtGetLastError=O.ka)(e,r),n._OrtCreateSessionOptions=(e,r,t,o,i,c,g,p,S,A)=>(n._OrtCreateSessionOptions=O.la)(e,r,t,o,i,c,g,p,S,A),n._OrtAppendExecutionProvider=(e,r)=>(n._OrtAppendExecutionProvider=O.ma)(e,r),n._OrtAddFreeDimensionOverride=(e,r,t)=>(n._OrtAddFreeDimensionOverride=O.na)(e,r,t),n._OrtAddSessionConfigEntry=(e,r,t)=>(n._OrtAddSessionConfigEntry=O.oa)(e,r,t),n._OrtReleaseSessionOptions=e=>(n._OrtReleaseSessionOptions=O.pa)(e),n._OrtCreateSession=(e,r,t)=>(n._OrtCreateSession=O.qa)(e,r,t),n._OrtReleaseSession=e=>(n._OrtReleaseSession=O.ra)(e),n._OrtGetInputOutputCount=(e,r,t)=>(n._OrtGetInputOutputCount=O.sa)(e,r,t),n._OrtGetInputName=(e,r)=>(n._OrtGetInputName=O.ta)(e,r),n._OrtGetOutputName=(e,r)=>(n._OrtGetOutputName=O.ua)(e,r),n._OrtFree=e=>(n._OrtFree=O.va)(e),n._OrtCreateTensor=(e,r,t,o,i,c)=>(n._OrtCreateTensor=O.wa)(e,r,t,o,i,c),n._OrtGetTensorData=(e,r,t,o,i)=>(n._OrtGetTensorData=O.xa)(e,r,t,o,i),n._OrtReleaseTensor=e=>(n._OrtReleaseTensor=O.ya)(e),n._OrtCreateRunOptions=(e,r,t,o)=>(n._OrtCreateRunOptions=O.za)(e,r,t,o),n._OrtAddRunConfigEntry=(e,r,t)=>(n._OrtAddRunConfigEntry=O.Aa)(e,r,t),n._OrtReleaseRunOptions=e=>(n._OrtReleaseRunOptions=O.Ba)(e),n._OrtCreateBinding=e=>(n._OrtCreateBinding=O.Ca)(e),n._OrtBindInput=(e,r,t)=>(n._OrtBindInput=O.Da)(e,r,t),n._OrtBindOutput=(e,r,t,o)=>(n._OrtBindOutput=O.Ea)(e,r,t,o),n._OrtClearBoundOutputs=e=>(n._OrtClearBoundOutputs=O.Fa)(e),n._OrtReleaseBinding=e=>(n._OrtReleaseBinding=O.Ga)(e),n._OrtRunWithBinding=(e,r,t,o,i)=>(n._OrtRunWithBinding=O.Ha)(e,r,t,o,i),n._OrtRun=(e,r,t,o,i,c,g,p)=>(n._OrtRun=O.Ia)(e,r,t,o,i,c,g,p),n._OrtEndProfiling=e=>(n._OrtEndProfiling=O.Ja)(e);var He=n._malloc=e=>(He=n._malloc=O.Ka)(e),oe=n._free=e=>(oe=n._free=O.La)(e),Dr=e=>(Dr=O.Ma)(e);n.__embind_initialize_bindings=()=>(n.__embind_initialize_bindings=O.Na)();var Mr=()=>(Mr=O.Pa)(),Br=e=>(Br=O.Qa)(e),Ur=e=>(Ur=O.Ra)(e);function $t(){var e=O;e=Object.assign({},e);var r=o=>()=>o()>>>0,t=o=>i=>o(i)>>>0;return e.__errno_location=r(e.__errno_location),e.Ka=t(e.Ka),e.Ma=t(e.Ma),e.Pa=r(e.Pa),e.Ra=t(e.Ra),e}n.stackAlloc=Ur,n.stackSave=Mr,n.stackRestore=Br,n.UTF8ToString=Ue,n.stringToUTF8=(e,r,t)=>Le(e,k,r,t),n.lengthBytesUTF8=We;var Ne;N=function e(){Ne||Wr(),Ne||(N=e)};function Wr(){if(!(0<K)){for(;0<ue.length;)ue.shift()(n);if(!(0<K||Ne||(Ne=!0,n.calledRun=!0,Pe))){for(;0<he.length;)he.shift()(n);for(f(n);0<Z.length;)Z.shift()(n)}}}return Wr(),u.ready}})();typeof Hr=="object"&&typeof tr=="object"?tr.exports=zr:typeof define=="function"&&define.amd&&define([],()=>zr)});var ar,Zt,nr,or,Ge,$r,Kt,Qt,en,jr,L,ve=Q(()=>{"use strict";ar=Nr();Zt=ar,or=!1,Ge=!1,$r=!1,Kt=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},Qt=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},en=(a,u)=>a?u?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":u?"ort-wasm-threaded.wasm":"ort-wasm.wasm",jr=async a=>{if(or)return Promise.resolve();if(Ge)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if($r)throw new Error("previous call to 'initializeWebAssembly()' failed.");Ge=!0;let u=a.initTimeout,n=a.numThreads,f=a.simd,d=n>1&&Kt(),y=f&&Qt(),l=a.wasmPaths,w=typeof l=="string"?l:void 0,b=en(y,d),T=typeof l=="object"?l[b]:void 0,E=!1,x=[];if(u>0&&x.push(new Promise(h=>{setTimeout(()=>{E=!0,h()},u)})),x.push(new Promise((h,v)=>{(d?Zt:ar)({locateFile:(M,H)=>M.endsWith(".wasm")?T||(w??H)+b:H+M}).then(M=>{Ge=!1,or=!0,nr=M,h()},M=>{Ge=!1,$r=!0,v(M)})})),await Promise.race(x),E)throw new Error(`WebAssembly backend initializing failed due to timeout: ${u}ms`)},L=()=>{if(or&&nr)return nr;throw new Error("WebAssembly is not initialized yet.")}});var F,Ae,W,Ye=Q(()=>{"use strict";ve();F=(a,u)=>{let n=L(),f=n.lengthBytesUTF8(a)+1,d=n._malloc(f);return n.stringToUTF8(a,d,f),u.push(d),d},Ae=(a,u,n,f)=>{if(typeof a=="object"&&a!==null){if(n.has(a))throw new Error("Circular reference in options");n.add(a)}Object.entries(a).forEach(([d,y])=>{let l=u?u+d:d;if(typeof y=="object")Ae(y,l+".",n,f);else if(typeof y=="string"||typeof y=="number")f(l,y.toString());else if(typeof y=="boolean")f(l,y?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof y}`)})},W=a=>{let u=L(),n=u.stackSave();try{let f=u.stackAlloc(8);u._OrtGetLastError(f,f+4);let d=u.HEAP32[f/4],y=u.HEAPU32[f/4+1],l=y?u.UTF8ToString(y):"";throw new Error(`${a} ERROR_CODE: ${d}, ERROR_MESSAGE: ${l}`)}finally{u.stackRestore(n)}}});var Gr,Yr=Q(()=>{"use strict";ve();Ye();Gr=a=>{let u=L(),n=0,f=[],d=a||{};try{if(a?.logSeverityLevel===void 0)d.logSeverityLevel=2;else if(typeof a.logSeverityLevel!="number"||!Number.isInteger(a.logSeverityLevel)||a.logSeverityLevel<0||a.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${a.logSeverityLevel}`);if(a?.logVerbosityLevel===void 0)d.logVerbosityLevel=0;else if(typeof a.logVerbosityLevel!="number"||!Number.isInteger(a.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${a.logVerbosityLevel}`);a?.terminate===void 0&&(d.terminate=!1);let y=0;return a?.tag!==void 0&&(y=F(a.tag,f)),n=u._OrtCreateRunOptions(d.logSeverityLevel,d.logVerbosityLevel,!!d.terminate,y),n===0&&W("Can't create run options."),a?.extra!==void 0&&Ae(a.extra,"",new WeakSet,(l,w)=>{let b=F(l,f),T=F(w,f);u._OrtAddRunConfigEntry(n,b,T)!==0&&W(`Can't set a run config entry: ${l} - ${w}.`)}),[n,f]}catch(y){throw n!==0&&u._OrtReleaseRunOptions(n),f.forEach(l=>u._free(l)),y}}});var rn,tn,nn,on,Vr,Xr=Q(()=>{"use strict";ve();Ye();rn=a=>{switch(a){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${a}`)}},tn=a=>{switch(a){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${a}`)}},nn=a=>{a.extra||(a.extra={}),a.extra.session||(a.extra.session={});let u=a.extra.session;u.use_ort_model_bytes_directly||(u.use_ort_model_bytes_directly="1"),a.executionProviders&&a.executionProviders.some(n=>(typeof n=="string"?n:n.name)==="webgpu")&&(a.enableMemPattern=!1)},on=(a,u,n)=>{for(let f of u){let d=typeof f=="string"?f:f.name;switch(d){case"xnnpack":d="XNNPACK";break;case"webnn":if(d="WEBNN",typeof f!="string"){let l=f;if(l?.deviceType){let w=F("deviceType",n),b=F(l.deviceType,n);L()._OrtAddSessionConfigEntry(a,w,b)!==0&&W(`Can't set a session config entry: 'deviceType' - ${l.deviceType}.`)}if(l?.numThreads){let w=l.numThreads;(typeof w!="number"||!Number.isInteger(w)||w<0)&&(w=0);let b=F("numThreads",n),T=F(w.toString(),n);L()._OrtAddSessionConfigEntry(a,b,T)!==0&&W(`Can't set a session config entry: 'numThreads' - ${l.numThreads}.`)}if(l?.powerPreference){let w=F("powerPreference",n),b=F(l.powerPreference,n);L()._OrtAddSessionConfigEntry(a,w,b)!==0&&W(`Can't set a session config entry: 'powerPreference' - ${l.powerPreference}.`)}}break;case"webgpu":if(d="JS",typeof f!="string"){let l=f;if(l?.preferredLayout){if(l.preferredLayout!=="NCHW"&&l.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${l.preferredLayout}`);let w=F("preferredLayout",n),b=F(l.preferredLayout,n);L()._OrtAddSessionConfigEntry(a,w,b)!==0&&W(`Can't set a session config entry: 'preferredLayout' - ${l.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${d}`)}let y=F(d,n);L()._OrtAppendExecutionProvider(a,y)!==0&&W(`Can't append execution provider: ${d}.`)}},Vr=a=>{let u=L(),n=0,f=[],d=a||{};nn(d);try{let y=rn(d.graphOptimizationLevel??"all"),l=tn(d.executionMode??"sequential"),w=typeof d.logId=="string"?F(d.logId,f):0,b=d.logSeverityLevel??2;if(!Number.isInteger(b)||b<0||b>4)throw new Error(`log serverity level is not valid: ${b}`);let T=d.logVerbosityLevel??0;if(!Number.isInteger(T)||T<0||T>4)throw new Error(`log verbosity level is not valid: ${T}`);let E=typeof d.optimizedModelFilePath=="string"?F(d.optimizedModelFilePath,f):0;if(n=u._OrtCreateSessionOptions(y,!!d.enableCpuMemArena,!!d.enableMemPattern,l,!!d.enableProfiling,0,w,b,T,E),n===0&&W("Can't create session options."),d.executionProviders&&on(n,d.executionProviders,f),d.freeDimensionOverrides)for(let[x,h]of Object.entries(d.freeDimensionOverrides)){if(typeof x!="string")throw new Error(`free dimension override name must be a string: ${x}`);if(typeof h!="number"||!Number.isInteger(h)||h<0)throw new Error(`free dimension override value must be a non-negative integer: ${h}`);let v=F(x,f);u._OrtAddFreeDimensionOverride(n,v,h)!==0&&W(`Can't set a free dimension override: ${x} - ${h}.`)}return d.extra!==void 0&&Ae(d.extra,"",new WeakSet,(x,h)=>{let v=F(x,f),D=F(h,f);u._OrtAddSessionConfigEntry(n,v,D)!==0&&W(`Can't set a session config entry: ${x} - ${h}.`)}),[n,f]}catch(y){throw n!==0&&u._OrtReleaseSessionOptions(n),f.forEach(l=>u._free(l)),y}}});var ir,qr,sr,Jr,Zr,Ve,Kr,ur=Q(()=>{"use strict";ir=a=>{switch(a){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${a}`)}},qr=a=>{switch(a){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${a}`)}},sr=a=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][a],Jr=a=>{switch(a){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${a}`)}},Zr=a=>{switch(a){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${a}`)}},Ve=a=>a==="float32"||a==="int32"||a==="int64"||a==="bool"||a==="float16"||a==="uint32",Kr=a=>{switch(a){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${a}`)}}});var et,an,sn,rt,Te,tt,lr,cr,nt,ot,Qr,at,it,st=Q(()=>{"use strict";Yr();Xr();ur();ve();Ye();et=!1,an=a=>{let u=L(),n=u.stackSave();try{let f=u.stackAlloc(8);return u._OrtGetInputOutputCount(a,f,f+4)!==0&&W("Can't get session input/output count."),[u.HEAP32[f/4],u.HEAP32[f/4+1]]}finally{u.stackRestore(n)}},sn=(a,u)=>{L()._OrtInit(a,u)!==0&&W("Can't initialize onnxruntime.")},rt=async a=>{sn(a.wasm.numThreads,Zr(a.logLevel)),et=!0},Te=new Map,tt=()=>et,lr=a=>{let u=L(),n=u._malloc(a.byteLength);if(n===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${a.byteLength}.`);return u.HEAPU8.set(a,n),[n,a.byteLength]},cr=(a,u)=>{let n=L(),f=0,d=0,y=0,l=[],w=[],b=[];try{[d,l]=Vr(u),f=n._OrtCreateSession(a[0],a[1],d),f===0&&W("Can't create a session.");let[T,E]=an(f),x=[],h=[],v=[];for(let _=0;_<T;_++){let M=n._OrtGetInputName(f,_);M===0&&W("Can't get an input name."),w.push(M),x.push(n.UTF8ToString(M))}for(let _=0;_<E;_++){let M=n._OrtGetOutputName(f,_);M===0&&W("Can't get an output name."),b.push(M);let H=n.UTF8ToString(M);h.push(H)}let D=null;return Te.set(f,[f,w,b,D]),[f,x,h]}catch(T){throw w.forEach(E=>n._OrtFree(E)),b.forEach(E=>n._OrtFree(E)),y!==0&&n._OrtReleaseBinding(y),f!==0&&n._OrtReleaseSession(f),T}finally{n._free(a[0]),d!==0&&n._OrtReleaseSessionOptions(d),l.forEach(T=>n._free(T))}},nt=(a,u)=>{let n=lr(a);return cr(n,u)},ot=a=>{let u=L(),n=Te.get(a);if(!n)throw new Error(`cannot release session. invalid session id: ${a}`);let[f,d,y,l]=n;l&&u._OrtReleaseBinding(l.handle),u.jsepUnregisterBuffers?.(a),d.forEach(w=>u._OrtFree(w)),y.forEach(w=>u._OrtFree(w)),u._OrtReleaseSession(f),Te.delete(a)},Qr=(a,u,n,f,d)=>{if(!a){u.push(0);return}let y=L(),l=a[0],w=a[1],b=a[3],T,E;if(l==="string"&&b==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(b==="gpu-buffer"){let v=a[2].gpuBuffer,D=sr(ir(l));E=w.reduce((_,M)=>_*M,1)*D,T=y.jsepRegisterBuffer(f,d,v,E)}else{let v=a[2];if(Array.isArray(v)){E=4*v.length,T=y._malloc(E),n.push(T);let D=T/4;for(let _=0;_<v.length;_++){if(typeof v[_]!="string")throw new TypeError(`tensor data at index ${_} is not a string`);y.HEAPU32[D++]=F(v[_],n)}}else E=v.byteLength,T=y._malloc(E),n.push(T),y.HEAPU8.set(new Uint8Array(v.buffer,v.byteOffset,E),T)}let x=y.stackSave(),h=y.stackAlloc(4*w.length);try{let v=h/4;w.forEach(_=>y.HEAP32[v++]=_);let D=y._OrtCreateTensor(ir(l),T,E,h,w.length,Kr(b));D===0&&W(`Can't create tensor for input/output. session=${f}, index=${d}.`),u.push(D)}finally{y.stackRestore(x)}},at=async(a,u,n,f,d,y)=>{let l=L(),w=Te.get(a);if(!w)throw new Error(`cannot run inference. invalid session id: ${a}`);let[b,T,E,x]=w,h=u.length,v=f.length,D=0,_=[],M=[],H=[],J=[],Pe=l.stackSave(),re=l.stackAlloc(h*4),k=l.stackAlloc(h*4),te=l.stackAlloc(v*4),de=l.stackAlloc(v*4);try{[D,_]=Gr(y);for(let C=0;C<h;C++)Qr(n[C],M,J,a,u[C]);for(let C=0;C<v;C++)Qr(d[C],H,J,a,h+f[C]);let m=re/4,P=k/4,Ce=te/4,Ie=de/4;for(let C=0;C<h;C++)l.HEAPU32[m++]=M[C],l.HEAPU32[P++]=T[u[C]];for(let C=0;C<v;C++)l.HEAPU32[Ce++]=H[C],l.HEAPU32[Ie++]=E[f[C]];let Se;Se=await l._OrtRun(b,k,re,h,de,v,te,D),Se!==0&&W("failed to call OrtRun().");let se=[];for(let C=0;C<v;C++){let ue=l.HEAPU32[te/4+C];if(ue===H[C]){se.push(d[C]);continue}let he=l.stackSave(),Z=l.stackAlloc(4*4),K=!1,R,N=0;try{l._OrtGetTensorData(ue,Z,Z+4,Z+8,Z+12)!==0&&W(`Can't access output tensor data on index ${C}.`);let pe=Z/4,le=l.HEAPU32[pe++];N=l.HEAPU32[pe++];let Oe=l.HEAPU32[pe++],De=l.HEAPU32[pe++],me=[];for(let $=0;$<De;$++)me.push(l.HEAPU32[Oe/4+$]);l._OrtFree(Oe);let ce=me.reduce(($,z)=>$*z,1);R=qr(le);let Me=x?.outputPreferredLocations[f[C]];if(R==="string"){if(Me==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let $=[],z=N/4;for(let be=0;be<ce;be++){let Ee=l.HEAPU32[z++],Be=be===ce-1?void 0:l.HEAPU32[z]-Ee;$.push(l.UTF8ToString(Ee,Be))}se.push([R,me,$,"cpu"])}else if(Me==="gpu-buffer"&&ce>0){let $=l.jsepGetBuffer(N),z=sr(le);if(z===void 0||!Ve(R))throw new Error(`Unsupported data type: ${R}`);K=!0,se.push([R,me,{gpuBuffer:$,download:l.jsepCreateDownloader($,ce*z,R),dispose:()=>{l._OrtReleaseTensor(ue)}},"gpu-buffer"])}else{let $=Jr(R),z=new $(ce);new Uint8Array(z.buffer,z.byteOffset,z.byteLength).set(l.HEAPU8.subarray(N,N+z.byteLength)),se.push([R,me,z,"cpu"])}}finally{l.stackRestore(he),R==="string"&&N&&l._free(N),K||l._OrtReleaseTensor(ue)}}return x&&l._OrtClearBoundOutputs(x.handle),se}finally{l.stackRestore(Pe),M.forEach(m=>l._OrtReleaseTensor(m)),H.forEach(m=>l._OrtReleaseTensor(m)),J.forEach(m=>l._free(m)),D!==0&&l._OrtReleaseRunOptions(D),_.forEach(m=>l._free(m))}},it=a=>{let u=L(),n=Te.get(a);if(!n)throw new Error("invalid session id");let f=n[0],d=u._OrtEndProfiling(f);d===0&&W("Can't get an profile file name."),u._OrtFree(d)}});var ut,Fn,lt,ct,ft,dt,fr,pt,mt,gt,yt,dr=Q(()=>{"use strict";ut=require("onnxruntime-common");st();ve();Fn=typeof document<"u"?document?.currentScript?.src:void 0,lt=async()=>jr(ut.env.wasm),ct=async a=>{await rt(a)},ft=async a=>lr(a),dt=async(a,u)=>cr(a,u),fr=async(a,u)=>nt(a,u),pt=async a=>{ot(a)},mt=async(a,u,n,f,d,y)=>at(a,u,n,f,d,y),gt=async a=>{it(a)},yt=async()=>tt()});var wt,_e,Xe,ht,ln,qe,vt=Q(()=>{"use strict";wt=require("node:fs/promises"),_e=require("onnxruntime-common");dr();ur();ht=(a,u)=>{switch(a.location){case"cpu":return[a.type,a.dims,a.data,"cpu"];case"gpu-buffer":return[a.type,a.dims,{gpuBuffer:a.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${a.location} for ${u()}`)}},ln=a=>{switch(a[3]){case"cpu":return new _e.Tensor(a[0],a[2],a[1]);case"gpu-buffer":{let u=a[0];if(!Ve(u))throw new Error(`not supported data type: ${u} for deserializing GPU tensor`);let{gpuBuffer:n,download:f,dispose:d}=a[2];return _e.Tensor.fromGpuBuffer(n,{dataType:u,dims:a[1],download:f,dispose:d})}default:throw new Error(`invalid data location: ${a[3]}`)}},qe=class{async createSessionAllocate(u){let n=await fetch(u);if(n.status!==200)throw new Error(`failed to load model: ${u}`);let f=await n.arrayBuffer();return ft(new Uint8Array(f))}async loadModel(u,n){if(await yt()||(Xe||(Xe=ct(_e.env)),await Xe,Xe=void 0),typeof u=="string")if(typeof process<"u"&&process.versions&&process.versions.node){let f=await(0,wt.readFile)(u);[this.sessionId,this.inputNames,this.outputNames]=await fr(f,n)}else{let f=await this.createSessionAllocate(u);[this.sessionId,this.inputNames,this.outputNames]=await dt(f,n)}else[this.sessionId,this.inputNames,this.outputNames]=await fr(u,n)}async dispose(){return pt(this.sessionId)}async run(u,n,f){let d=[],y=[];Object.entries(u).forEach(h=>{let v=h[0],D=h[1],_=this.inputNames.indexOf(v);if(_===-1)throw new Error(`invalid input '${v}'`);d.push(D),y.push(_)});let l=[],w=[];Object.entries(n).forEach(h=>{let v=h[0],D=h[1],_=this.outputNames.indexOf(v);if(_===-1)throw new Error(`invalid output '${v}'`);l.push(D),w.push(_)});let b=d.map((h,v)=>ht(h,()=>`input "${this.inputNames[y[v]]}"`)),T=l.map((h,v)=>h?ht(h,()=>`output "${this.outputNames[w[v]]}"`):null),E=await mt(this.sessionId,y,b,w,T,f),x={};for(let h=0;h<E.length;h++)x[this.outputNames[w[h]]]=l[h]??ln(E[h]);return x}startProfiling(){}endProfiling(){gt(this.sessionId)}}});var St,X,cn,Je,Ot=Q(()=>{"use strict";St=require("node:os"),X=require("onnxruntime-common");dr();vt();cn=()=>{if((typeof X.env.wasm.initTimeout!="number"||X.env.wasm.initTimeout<0)&&(X.env.wasm.initTimeout=0),typeof X.env.wasm.simd!="boolean"&&(X.env.wasm.simd=!0),typeof X.env.wasm.proxy!="boolean"&&(X.env.wasm.proxy=!1),typeof X.env.wasm.numThreads!="number"||!Number.isInteger(X.env.wasm.numThreads)||X.env.wasm.numThreads<=0){let a=typeof navigator>"u"?(0,St.cpus)().length:navigator.hardwareConcurrency;X.env.wasm.numThreads=Math.min(4,Math.ceil((a||1)/2))}},Je=class{async init(){cn(),await lt()}async createInferenceSessionHandler(u,n){let f=new qe;return await f.loadModel(u,n),Promise.resolve(f)}}});var bt={};Fr(bt,{wasmBackend:()=>fn});var fn,Et=Q(()=>{"use strict";Ot();fn=new Je});var ee={};Fr(ee,{default:()=>pn});module.exports=kr(ee);ie(ee,require("onnxruntime-common"),module.exports);var dn=Jt(require("onnxruntime-common")),ye=require("onnxruntime-common");var Rr="1.17.0";var pn=dn;{let a=(Et(),kr(bt)).wasmBackend;(0,ye.registerBackend)("cpu",a,10),(0,ye.registerBackend)("wasm",a,10),(0,ye.registerBackend)("xnnpack",a,9),(0,ye.registerBackend)("webnn",a,9)}Object.defineProperty(ye.env.versions,"web",{value:Rr,enumerable:!0});0&&(module.exports={...require("onnxruntime-common")});
//# sourceMappingURL=ort.node.min.js.map
