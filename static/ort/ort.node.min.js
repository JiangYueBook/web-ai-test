/*!
 * ONNX Runtime Web v1.17.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
"use strict";var $t=Object.create;var je=Object.defineProperty;var jt=Object.getOwnPropertyDescriptor;var zt=Object.getOwnPropertyNames;var Gt=Object.getPrototypeOf,Yt=Object.prototype.hasOwnProperty;var ee=(o,u)=>()=>(o&&(u=o(o=0)),u);var Vt=(o,u)=>()=>(u||o((u={exports:{}}).exports,u),u.exports),Mr=(o,u)=>{for(var a in u)je(o,a,{get:u[a],enumerable:!0})},$e=(o,u,a,d)=>{if(u&&typeof u=="object"||typeof u=="function")for(let l of zt(u))!Yt.call(o,l)&&l!==a&&je(o,l,{get:()=>u[l],enumerable:!(d=jt(u,l))||d.enumerable});return o},se=(o,u,a)=>($e(o,u,"default"),a&&$e(a,u,"default")),qt=(o,u,a)=>(a=o!=null?$t(Gt(o)):{},$e(u||!o||!o.__esModule?je(a,"default",{value:o,enumerable:!0}):a,o)),Fr=o=>$e(je({},"__esModule",{value:!0}),o);var Nr=Vt((Hr,rr)=>{"use strict";var Rr=(()=>{var o=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(o=o||__filename),function(u={}){var a=u,d,l;a.ready=new Promise((e,r)=>{d=e,l=r});var g=Object.assign({},a),f="./this.program",v=typeof window=="object",E=typeof importScripts=="function",A=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",T="",I,h,w;if(A){var x=require("fs"),B=require("path");T=E?B.dirname(T)+"/":__dirname+"/",I=(e,r)=>(e=e.startsWith("file://")?new URL(e):B.normalize(e),x.readFileSync(e,r?void 0:"utf8")),w=e=>(e=I(e,!0),e.buffer||(e=new Uint8Array(e)),e),h=(e,r,t,n=!0)=>{e=e.startsWith("file://")?new URL(e):B.normalize(e),x.readFile(e,n?void 0:"utf8",(s,c)=>{s?t(s):r(n?c.buffer:c)})},!a.thisProgram&&1<process.argv.length&&(f=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),a.inspect=()=>"[Emscripten Module object]"}else(v||E)&&(E?T=self.location.href:typeof document<"u"&&document.currentScript&&(T=document.currentScript.src),o&&(T=o),T.indexOf("blob:")!==0?T=T.substr(0,T.replace(/[?#].*/,"").lastIndexOf("/")+1):T="",I=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},E&&(w=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),h=(e,r,t)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?r(n.response):t()},n.onerror=t,n.send(null)});var R=console.log.bind(console),U=console.error.bind(console);Object.assign(a,g),g=null,typeof WebAssembly!="object"&&Ie("no native wasm support detected");var H,he=!1,Z,k,te,de,m,_,Pe,Ce,Se,ie;function P(){var e=H.buffer;a.HEAP8=Z=new Int8Array(e),a.HEAP16=te=new Int16Array(e),a.HEAPU8=k=new Uint8Array(e),a.HEAPU16=de=new Uint16Array(e),a.HEAP32=m=new Int32Array(e),a.HEAPU32=_=new Uint32Array(e),a.HEAPF32=Pe=new Float32Array(e),a.HEAPF64=ie=new Float64Array(e),a.HEAP64=Ce=new BigInt64Array(e),a.HEAPU64=Se=new BigUint64Array(e)}var ue=[],we=[],K=[],Q=0,N=null,j=null;function Ie(e){throw e="Aborted("+e+")",U(e),he=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),l(e),e}function pe(e){return e.startsWith("data:application/octet-stream;base64,")}var fe;if(fe="ort-wasm.wasm",!pe(fe)){var be=fe;fe=a.locateFile?a.locateFile(be,T):T+be}function xe(e){if(w)return w(e);throw"both async and sync fetching of the wasm failed"}function me(e){if(v||E){if(typeof fetch=="function"&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at '"+e+"'";return r.arrayBuffer()}).catch(()=>xe(e));if(h)return new Promise((r,t)=>{h(e,n=>r(new Uint8Array(n)),t)})}return Promise.resolve().then(()=>xe(e))}function ce(e,r,t){return me(e).then(n=>WebAssembly.instantiate(n,r)).then(n=>n).then(t,n=>{U(`failed to asynchronously prepare wasm: ${n}`),Ie(n)})}function Be(e,r){var t=fe;return typeof WebAssembly.instantiateStreaming!="function"||pe(t)||t.startsWith("file://")||A||typeof fetch!="function"?ce(t,e,r):fetch(t,{credentials:"same-origin"}).then(n=>WebAssembly.instantiateStreaming(n,e).then(r,function(s){return U(`wasm streaming compile failed: ${s}`),U("falling back to ArrayBuffer instantiation"),ce(t,e,r)}))}function z(e){this.Va=e-24,this.fb=function(r){_[this.Va+4>>>2>>>0]=r},this.eb=function(r){_[this.Va+8>>>2>>>0]=r},this.Za=function(r,t){this.$a(),this.fb(r),this.eb(t)},this.$a=function(){_[this.Va+16>>>2>>>0]=0}}var $=0,Ee=0,Te=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ue=(e,r,t)=>{r>>>=0;var n=r+t;for(t=r;e[t]&&!(t>=n);)++t;if(16<t-r&&e.buffer&&Te)return Te.decode(e.subarray(r,t));for(n="";r<t;){var s=e[r++];if(s&128){var c=e[r++]&63;if((s&224)==192)n+=String.fromCharCode((s&31)<<6|c);else{var y=e[r++]&63;s=(s&240)==224?(s&15)<<12|c<<6|y:(s&7)<<18|c<<12|y<<6|e[r++]&63,65536>s?n+=String.fromCharCode(s):(s-=65536,n+=String.fromCharCode(55296|s>>10,56320|s&1023))}}else n+=String.fromCharCode(s)}return n},De=(e,r)=>(e>>>=0)?Ue(k,e,r):"",We=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);127>=n?r++:2047>=n?r+=2:55296<=n&&57343>=n?(r+=4,++t):r+=3}return r},Le=(e,r,t,n)=>{if(t>>>=0,!(0<n))return 0;var s=t;n=t+n-1;for(var c=0;c<e.length;++c){var y=e.charCodeAt(c);if(55296<=y&&57343>=y){var p=e.charCodeAt(++c);y=65536+((y&1023)<<10)|p&1023}if(127>=y){if(t>=n)break;r[t++>>>0]=y}else{if(2047>=y){if(t+1>=n)break;r[t++>>>0]=192|y>>6}else{if(65535>=y){if(t+2>=n)break;r[t++>>>0]=224|y>>12}else{if(t+3>=n)break;r[t++>>>0]=240|y>>18,r[t++>>>0]=128|y>>12&63}r[t++>>>0]=128|y>>6&63}r[t++>>>0]=128|y&63}}return r[t>>>0]=0,t-s},dr=e=>{if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e},pr,J=e=>{for(var r="";k[e>>>0];)r+=pr[k[e++>>>0]];return r},Je={},Ze={},bt={},le;function Et(e,r,t={}){var n=r.name;if(!e)throw new le(`type "${n}" must have a positive integer typeid pointer`);if(Ze.hasOwnProperty(e)){if(t.gb)return;throw new le(`Cannot register type '${n}' twice`)}Ze[e]=r,delete bt[e],Je.hasOwnProperty(e)&&(r=Je[e],delete Je[e],r.forEach(s=>s()))}function ne(e,r,t={}){if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");Et(e,r,t)}var mr=(e,r,t)=>{switch(r){case 1:return t?n=>Z[n>>>0>>>0]:n=>k[n>>>0>>>0];case 2:return t?n=>te[n>>>1>>>0]:n=>de[n>>>1>>>0];case 4:return t?n=>m[n>>>2>>>0]:n=>_[n>>>2>>>0];case 8:return t?n=>Ce[n>>>3]:n=>Se[n>>>3];default:throw new TypeError(`invalid integer width (${r}): ${e}`)}};function gr(){this.Sa=[void 0],this.bb=[]}var V=new gr;function Ke(e){e>>>=0,e>=V.Va&&--V.get(e).cb===0&&V.$a(e)}var G=e=>{if(!e)throw new le("Cannot use deleted val. handle = "+e);return V.get(e).value},q=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return V.Za({cb:1,value:e})}};function yr(e){return this.fromWireType(m[e>>>2>>>0])}var Tt=(e,r)=>{switch(r){case 4:return function(t){return this.fromWireType(Pe[t>>>2>>>0])};case 8:return function(t){return this.fromWireType(ie[t>>>3>>>0])};default:throw new TypeError(`invalid float width (${r}): ${e}`)}};function At(e){return this.fromWireType(_[e>>>2>>>0])}var hr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,_t=(e,r)=>{for(var t=e>>1,n=t+r/2;!(t>=n)&&de[t>>>0];)++t;if(t<<=1,32<t-e&&hr)return hr.decode(k.subarray(e>>>0,t>>>0));for(t="",n=0;!(n>=r/2);++n){var s=te[e+2*n>>>1>>>0];if(s==0)break;t+=String.fromCharCode(s)}return t},Pt=(e,r,t)=>{if(t===void 0&&(t=2147483647),2>t)return 0;t-=2;var n=r;t=t<2*e.length?t/2:e.length;for(var s=0;s<t;++s)te[r>>>1>>>0]=e.charCodeAt(s),r+=2;return te[r>>>1>>>0]=0,r-n},Ct=e=>2*e.length,It=(e,r)=>{for(var t=0,n="";!(t>=r/4);){var s=m[e+4*t>>>2>>>0];if(s==0)break;++t,65536<=s?(s-=65536,n+=String.fromCharCode(55296|s>>10,56320|s&1023)):n+=String.fromCharCode(s)}return n},xt=(e,r,t)=>{if(r>>>=0,t===void 0&&(t=2147483647),4>t)return 0;var n=r;t=n+t-4;for(var s=0;s<e.length;++s){var c=e.charCodeAt(s);if(55296<=c&&57343>=c){var y=e.charCodeAt(++s);c=65536+((c&1023)<<10)|y&1023}if(m[r>>>2>>>0]=c,r+=4,r+4>t)break}return m[r>>>2>>>0]=0,r-n},Bt=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);55296<=n&&57343>=n&&++t,r+=4}return r},Me=(e,r)=>{var t=Ze[e];if(t===void 0)throw e=xr(e),t=J(e),oe(e),new le(r+" has unknown type "+t);return t},Ut={},Fe=e=>{var r=Ut[e];return r===void 0?J(e):r},ke=[],wr=()=>typeof globalThis=="object"?globalThis:Function("return this")(),Dt=e=>{var r=ke.length;return ke.push(e),r},Wt=(e,r)=>{for(var t=Array(e),n=0;n<e;++n)t[n]=Me(_[r+4*n>>>2>>>0],"parameter "+n);return t},vr=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var r=e.charCodeAt(0);return 48<=r&&57>=r?`_${e}`:e},Or={};function Lt(e,r){return e=vr(e),{[e]:function(){return r.apply(this,arguments)}}[e]}function Mt(e){var r=Function;if(!(r instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof r} which is not a function`);var t=Lt(r.name||"unknownFunctionName",function(){});return t.prototype=r.prototype,t=new t,e=r.apply(t,e),e instanceof Object?e:t}var Ft=e=>{for(var r="",t=0;t<e;++t)r+=(t!==0?", ":"")+"arg"+t;var n="return function emval_allocator_"+e+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`;for(t=0;t<e;++t)n+="var argType"+t+" = requireRegisteredType(HEAPU32[((argTypes)>>>2)], 'parameter "+t+`');
var arg`+t+" = argType"+t+`.readValueFromPointer(args);
args += argType`+t+`['argPackAdvance'];
argTypes += 4;
`;return new Function("requireRegisteredType","Module","valueToHandle","getMemory",n+("var obj = new constructor("+r+`);
return valueToHandle(obj);
}
`))(Me,a,q,()=>_)},Sr={},ve=e=>e%4===0&&(e%100!==0||e%400===0),br=[0,31,60,91,121,152,182,213,244,274,305,335],Er=[0,31,59,90,120,151,181,212,243,273,304,334],Tr=e=>{var r=We(e)+1,t=He(r);return t&&Le(e,k,t,r),t},Qe={},Ar=()=>{if(!er){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:f||"./this.program"},r;for(r in Qe)Qe[r]===void 0?delete e[r]:e[r]=Qe[r];var t=[];for(r in e)t.push(`${r}=${e[r]}`);er=t}return er},er,kt=[null,[],[]],_r=[31,29,31,30,31,30,31,31,30,31,30,31],Pr=[31,28,31,30,31,30,31,31,30,31,30,31];function Rt(e){var r=Array(We(e)+1);return Le(e,r,0,r.length),r}function Cr(e,r,t,n){function s(i,C,W){for(i=typeof i=="number"?i.toString():i||"";i.length<C;)i=W[0]+i;return i}function c(i,C){return s(i,C,"0")}function y(i,C){function W(Lr){return 0>Lr?-1:0<Lr?1:0}var ge;return(ge=W(i.getFullYear()-C.getFullYear()))===0&&(ge=W(i.getMonth()-C.getMonth()))===0&&(ge=W(i.getDate()-C.getDate())),ge}function p(i){switch(i.getDay()){case 0:return new Date(i.getFullYear()-1,11,29);case 1:return i;case 2:return new Date(i.getFullYear(),0,3);case 3:return new Date(i.getFullYear(),0,2);case 4:return new Date(i.getFullYear(),0,1);case 5:return new Date(i.getFullYear()-1,11,31);case 6:return new Date(i.getFullYear()-1,11,30)}}function O(i){var C=i.Ta;for(i=new Date(new Date(i.Ua+1900,0,1).getTime());0<C;){var W=i.getMonth(),ge=(ve(i.getFullYear())?_r:Pr)[W];if(C>ge-i.getDate())C-=ge-i.getDate()+1,i.setDate(1),11>W?i.setMonth(W+1):(i.setMonth(0),i.setFullYear(i.getFullYear()+1));else{i.setDate(i.getDate()+C);break}}return W=new Date(i.getFullYear()+1,0,4),C=p(new Date(i.getFullYear(),0,4)),W=p(W),0>=y(C,i)?0>=y(W,i)?i.getFullYear()+1:i.getFullYear():i.getFullYear()-1}e>>>=0,r>>>=0,t>>>=0,n>>>=0;var b=_[n+40>>>2>>>0];n={kb:m[n>>>2>>>0],jb:m[n+4>>>2>>>0],Xa:m[n+8>>>2>>>0],ab:m[n+12>>>2>>>0],Ya:m[n+16>>>2>>>0],Ua:m[n+20>>>2>>>0],Oa:m[n+24>>>2>>>0],Ta:m[n+28>>>2>>>0],mb:m[n+32>>>2>>>0],ib:m[n+36>>>2>>>0],lb:b?De(b):""},t=De(t),b={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var D in b)t=t.replace(new RegExp(D,"g"),b[D]);var Y="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ae="January February March April May June July August September October November December".split(" ");b={"%a":i=>Y[i.Oa].substring(0,3),"%A":i=>Y[i.Oa],"%b":i=>ae[i.Ya].substring(0,3),"%B":i=>ae[i.Ya],"%C":i=>c((i.Ua+1900)/100|0,2),"%d":i=>c(i.ab,2),"%e":i=>s(i.ab,2," "),"%g":i=>O(i).toString().substring(2),"%G":i=>O(i),"%H":i=>c(i.Xa,2),"%I":i=>(i=i.Xa,i==0?i=12:12<i&&(i-=12),c(i,2)),"%j":i=>{for(var C=0,W=0;W<=i.Ya-1;C+=(ve(i.Ua+1900)?_r:Pr)[W++]);return c(i.ab+C,3)},"%m":i=>c(i.Ya+1,2),"%M":i=>c(i.jb,2),"%n":()=>`
`,"%p":i=>0<=i.Xa&&12>i.Xa?"AM":"PM","%S":i=>c(i.kb,2),"%t":()=>"	","%u":i=>i.Oa||7,"%U":i=>c(Math.floor((i.Ta+7-i.Oa)/7),2),"%V":i=>{var C=Math.floor((i.Ta+7-(i.Oa+6)%7)/7);if(2>=(i.Oa+371-i.Ta-2)%7&&C++,C)C==53&&(W=(i.Oa+371-i.Ta)%7,W==4||W==3&&ve(i.Ua)||(C=1));else{C=52;var W=(i.Oa+7-i.Ta-1)%7;(W==4||W==5&&ve(i.Ua%400-1))&&C++}return c(C,2)},"%w":i=>i.Oa,"%W":i=>c(Math.floor((i.Ta+7-(i.Oa+6)%7)/7),2),"%y":i=>(i.Ua+1900).toString().substring(2),"%Y":i=>i.Ua+1900,"%z":i=>{i=i.ib;var C=0<=i;return i=Math.abs(i)/60,(C?"+":"-")+("0000"+(i/60*100+i%60)).slice(-4)},"%Z":i=>i.lb,"%%":()=>"%"},t=t.replace(/%%/g,"\0\0");for(D in b)t.includes(D)&&(t=t.replace(new RegExp(D,"g"),b[D](n)));return t=t.replace(/\0\0/g,"%"),D=Rt(t),D.length>r?0:(Z.set(D,e>>>0),D.length-1)}for(var Ir=Array(256),Re=0;256>Re;++Re)Ir[Re]=String.fromCharCode(Re);pr=Ir,le=a.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},a.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Object.assign(gr.prototype,{get(e){return this.Sa[e]},has(e){return this.Sa[e]!==void 0},Za(e){var r=this.bb.pop()||this.Sa.length;return this.Sa[r]=e,r},$a(e){this.Sa[e]=void 0,this.bb.push(e)}}),V.Sa.push({value:void 0},{value:null},{value:!0},{value:!1}),V.Va=V.Sa.length,a.count_emval_handles=()=>{for(var e=0,r=V.Va;r<V.Sa.length;++r)V.Sa[r]!==void 0&&++e;return e};var Ht={a:function(e,r,t){throw e>>>=0,new z(e).Za(r>>>0,t>>>0),$=e,Ee++,$},v:function(){return 0},ba:function(){},N:function(){},P:function(){},H:function(){return 0},$:function(){},V:function(){},_:function(){},B:function(){},O:function(){},L:function(){},aa:function(){},M:function(){},E:function(e,r,t,n,s){r>>>=0,r=J(r);var c=r.indexOf("u")!=-1;c&&(s=(1n<<64n)-1n),ne(e>>>0,{name:r,fromWireType:y=>y,toWireType:function(y,p){if(typeof p!="bigint"&&typeof p!="number")throw new TypeError(`Cannot convert "${dr(p)}" to ${this.name}`);if(p<n||p>s)throw new TypeError(`Passing a number "${dr(p)}" from JS side to C/C++ side to an argument of type "${r}", which is outside the valid range [${n}, ${s}]!`);return p},argPackAdvance:8,readValueFromPointer:mr(r,t>>>0,!c),Wa:null})},ea:function(e,r,t,n){r=J(r>>>0),ne(e>>>0,{name:r,fromWireType:function(s){return!!s},toWireType:function(s,c){return c?t:n},argPackAdvance:8,readValueFromPointer:function(s){return this.fromWireType(k[s>>>0])},Wa:null})},da:function(e,r){r=J(r>>>0),ne(e>>>0,{name:r,fromWireType:t=>{var n=G(t);return Ke(t),n},toWireType:(t,n)=>q(n),argPackAdvance:8,readValueFromPointer:yr,Wa:null})},D:function(e,r,t){r=J(r>>>0),ne(e>>>0,{name:r,fromWireType:n=>n,toWireType:(n,s)=>s,argPackAdvance:8,readValueFromPointer:Tt(r,t>>>0),Wa:null})},p:function(e,r,t,n,s){if(e>>>=0,t>>>=0,r=J(r>>>0),s===-1&&(s=4294967295),s=p=>p,n===0){var c=32-8*t;s=p=>p<<c>>>c}var y=r.includes("unsigned")?function(p,O){return O>>>0}:function(p,O){return O};ne(e,{name:r,fromWireType:s,toWireType:y,argPackAdvance:8,readValueFromPointer:mr(r,t,n!==0),Wa:null})},l:function(e,r,t){function n(c){return new s(Z.buffer,_[c+4>>>2>>>0],_[c>>>2>>>0])}var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][r];t=J(t>>>0),ne(e>>>0,{name:t,fromWireType:n,argPackAdvance:8,readValueFromPointer:n},{gb:!0})},F:function(e,r){r=J(r>>>0);var t=r==="std::string";ne(e>>>0,{name:r,fromWireType:function(n){var s=_[n>>>2>>>0],c=n+4;if(t)for(var y=c,p=0;p<=s;++p){var O=c+p;if(p==s||k[O>>>0]==0){if(y=De(y,O-y),b===void 0)var b=y;else b+=String.fromCharCode(0),b+=y;y=O+1}}else{for(b=Array(s),p=0;p<s;++p)b[p]=String.fromCharCode(k[c+p>>>0]);b=b.join("")}return oe(n),b},toWireType:function(n,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var c=typeof s=="string";if(!(c||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array))throw new le("Cannot pass non-string to std::string");var y=t&&c?We(s):s.length,p=He(4+y+1),O=p+4;if(_[p>>>2>>>0]=y,t&&c)Le(s,k,O,y+1);else if(c)for(c=0;c<y;++c){var b=s.charCodeAt(c);if(255<b)throw oe(O),new le("String has UTF-16 code units that do not fit in 8 bits");k[O+c>>>0]=b}else for(c=0;c<y;++c)k[O+c>>>0]=s[c];return n!==null&&n.push(oe,p),p},argPackAdvance:8,readValueFromPointer:At,Wa(n){oe(n)}})},x:function(e,r,t){if(r>>>=0,t>>>=0,t=J(t),r===2)var n=_t,s=Pt,c=Ct,y=()=>de,p=1;else r===4&&(n=It,s=xt,c=Bt,y=()=>_,p=2);ne(e>>>0,{name:t,fromWireType:O=>{for(var b=_[O>>>2>>>0],D=y(),Y,ae=O+4,i=0;i<=b;++i){var C=O+4+i*r;(i==b||D[C>>>p]==0)&&(ae=n(ae,C-ae),Y===void 0?Y=ae:(Y+=String.fromCharCode(0),Y+=ae),ae=C+r)}return oe(O),Y},toWireType:(O,b)=>{if(typeof b!="string")throw new le(`Cannot pass non-string to C++ string type ${t}`);var D=c(b),Y=He(4+D+r);return _[Y>>>2]=D>>p,s(b,Y+4,D+r),O!==null&&O.push(oe,Y),Y},argPackAdvance:8,readValueFromPointer:yr,Wa(O){oe(O)}})},fa:function(e,r){r=J(r>>>0),ne(e>>>0,{hb:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ca:()=>!0,o:function(e,r,t){r>>>=0,t>>>=0,e=G(e>>>0),r=Me(r,"emval::as");var n=[],s=q(n);return _[t>>>2>>>0]=s,r.toWireType(n,e)},h:function(e,r,t,n,s){t>>>=0,n>>>=0,s>>>=0,e=ke[e>>>0],r=G(r>>>0),t=Fe(t);var c=[];return _[n>>>2>>>0]=q(c),e(r,t,c,s)},r:function(e,r,t,n){t>>>=0,n>>>=0,e=ke[e>>>0],r=G(r>>>0),t=Fe(t),e(r,t,null,n)},b:Ke,y:function(e,r){return r>>>=0,e=G(e>>>0),r=G(r),e==r},u:function(e){return e>>>=0,e===0?q(wr()):(e=Fe(e),q(wr()[e]))},g:function(e,r){var t=Wt(e,r>>>0),n=t[0];r=n.name+"_$"+t.slice(1).map(function(D){return D.name}).join("_")+"$";var s=Or[r];if(s!==void 0)return s;s=["retType"];for(var c=[n],y="",p=0;p<e-1;++p)y+=(p!==0?", ":"")+"arg"+p,s.push("argType"+p),c.push(t[1+p]);var O="return function "+vr("methodCaller_"+r)+`(handle, name, destructors, args) {
`,b=0;for(p=0;p<e-1;++p)O+="    var arg"+p+" = argType"+p+".readValueFromPointer(args"+(b?"+"+b:"")+`);
`,b+=t[p+1].argPackAdvance;for(O+="    var rv = handle[name]("+y+`);
`,p=0;p<e-1;++p)t[p+1].deleteObject&&(O+="    argType"+p+".deleteObject(arg"+p+`);
`);return n.hb||(O+=`    return retType.toWireType(destructors, rv);
`),s.push(O+`};
`),e=Mt(s).apply(null,c),s=Dt(e),Or[r]=s},q:function(e,r){return r>>>=0,e=G(e>>>0),r=G(r),q(e[r])},c:function(e){e>>>=0,4<e&&(V.get(e).cb+=1)},G:function(e,r,t,n){t>>>=0,n>>>=0,e=G(e>>>0);var s=Sr[r];return s||(s=Ft(r),Sr[r]=s),s(e,t,n)},s:function(){return q([])},k:function(e){e=G(e>>>0);for(var r=Array(e.length),t=0;t<e.length;t++)r[t]=e[t];return q(r)},d:function(e){return q(Fe(e>>>0))},j:function(){return q({})},e:function(e){e>>>=0;for(var r=G(e);r.length;){var t=r.pop();r.pop()(t)}Ke(e)},i:function(e,r,t){r>>>=0,t>>>=0,e=G(e>>>0),r=G(r),t=G(t),e[r]=t},f:function(e,r){return r>>>=0,e=Me(e>>>0,"_emval_take_value"),e=e.readValueFromPointer(r),q(e)},S:function(e,r){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),r>>>=0,e=new Date(1e3*e),m[r>>>2>>>0]=e.getUTCSeconds(),m[r+4>>>2>>>0]=e.getUTCMinutes(),m[r+8>>>2>>>0]=e.getUTCHours(),m[r+12>>>2>>>0]=e.getUTCDate(),m[r+16>>>2>>>0]=e.getUTCMonth(),m[r+20>>>2>>>0]=e.getUTCFullYear()-1900,m[r+24>>>2>>>0]=e.getUTCDay(),m[r+28>>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},T:function(e,r){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),r>>>=0,e=new Date(1e3*e),m[r>>>2>>>0]=e.getSeconds(),m[r+4>>>2>>>0]=e.getMinutes(),m[r+8>>>2>>>0]=e.getHours(),m[r+12>>>2>>>0]=e.getDate(),m[r+16>>>2>>>0]=e.getMonth(),m[r+20>>>2>>>0]=e.getFullYear()-1900,m[r+24>>>2>>>0]=e.getDay(),m[r+28>>>2>>>0]=(ve(e.getFullYear())?br:Er)[e.getMonth()]+e.getDate()-1|0,m[r+36>>>2>>>0]=-(60*e.getTimezoneOffset());var t=new Date(e.getFullYear(),6,1).getTimezoneOffset(),n=new Date(e.getFullYear(),0,1).getTimezoneOffset();m[r+32>>>2>>>0]=(t!=n&&e.getTimezoneOffset()==Math.min(n,t))|0},U:function(e){e>>>=0;var r=new Date(m[e+20>>>2>>>0]+1900,m[e+16>>>2>>>0],m[e+12>>>2>>>0],m[e+8>>>2>>>0],m[e+4>>>2>>>0],m[e>>>2>>>0],0),t=m[e+32>>>2>>>0],n=r.getTimezoneOffset(),s=new Date(r.getFullYear(),6,1).getTimezoneOffset(),c=new Date(r.getFullYear(),0,1).getTimezoneOffset(),y=Math.min(c,s);return 0>t?m[e+32>>>2>>>0]=+(s!=c&&y==n):0<t!=(y==n)&&(s=Math.max(c,s),r.setTime(r.getTime()+6e4*((0<t?y:s)-n))),m[e+24>>>2>>>0]=r.getDay(),m[e+28>>>2>>>0]=(ve(r.getFullYear())?br:Er)[r.getMonth()]+r.getDate()-1|0,m[e>>>2>>>0]=r.getSeconds(),m[e+4>>>2>>>0]=r.getMinutes(),m[e+8>>>2>>>0]=r.getHours(),m[e+12>>>2>>>0]=r.getDate(),m[e+16>>>2>>>0]=r.getMonth(),m[e+20>>>2>>>0]=r.getYear(),BigInt(r.getTime()/1e3)},Q:function(){return-52},R:function(){},J:function(e,r,t){function n(O){return(O=O.toTimeString().match(/\(([A-Za-z ]+)\)$/))?O[1]:"GMT"}t>>>=0;var s=new Date().getFullYear(),c=new Date(s,0,1),y=new Date(s,6,1);s=c.getTimezoneOffset();var p=y.getTimezoneOffset();_[e>>>0>>>2>>>0]=60*Math.max(s,p),m[r>>>0>>>2>>>0]=+(s!=p),e=n(c),r=n(y),e=Tr(e),r=Tr(r),p<s?(_[t>>>2>>>0]=e,_[t+4>>>2>>>0]=r):(_[t>>>2>>>0]=r,_[t+4>>>2>>>0]=e)},t:()=>{Ie("")},C:()=>Date.now(),K:function(){return 4294901760},n:()=>performance.now(),Z:function(e,r,t){return r>>>=0,k.copyWithin(e>>>0>>>0,r>>>0,r+(t>>>0)>>>0)},I:function(e){e>>>=0;var r=k.length;if(4294901760<e)return!1;for(var t=1;4>=t;t*=2){var n=r*(1+.2/t);n=Math.min(n,e+100663296);var s=Math;n=Math.max(e,n);e:{s=(s.min.call(s,4294901760,n+(65536-n%65536)%65536)-H.buffer.byteLength+65535)/65536;try{H.grow(s),P();var c=1;break e}catch{}c=void 0}if(c)return!0}return!1},X:function(e,r){e>>>=0,r>>>=0;var t=0;return Ar().forEach((n,s)=>{var c=r+t;for(s=_[e+4*s>>>2>>>0]=c,c=0;c<n.length;++c)Z[s++>>>0>>>0]=n.charCodeAt(c);Z[s>>>0>>>0]=0,t+=n.length+1}),0},Y:function(e,r){e>>>=0,r>>>=0;var t=Ar();_[e>>>2>>>0]=t.length;var n=0;return t.forEach(s=>n+=s.length+1),_[r>>>2>>>0]=n,0},w:()=>52,A:function(){return 52},W:function(){return 70},z:function(e,r,t,n){r>>>=0,t>>>=0,n>>>=0;for(var s=0,c=0;c<t;c++){var y=_[r>>>2>>>0],p=_[r+4>>>2>>>0];r+=8;for(var O=0;O<p;O++){var b=k[y+O>>>0],D=kt[e];b===0||b===10?((e===1?R:U)(Ue(D,0)),D.length=0):D.push(b)}s+=p}return _[n>>>2>>>0]=s,0},ga:Cr,m:function(e,r,t,n){return Cr(e>>>0,r>>>0,t>>>0,n>>>0)}},S=function(){var e={a:Ht};return Q++,Be(e,function(r){S=r.instance.exports,S=Nt(),H=S.ha,P(),we.unshift(S.ia),Q--,Q==0&&(N!==null&&(clearInterval(N),N=null),j&&(r=j,j=null,r()))}).catch(l),{}}();a._OrtInit=(e,r)=>(a._OrtInit=S.ja)(e,r),a._OrtGetLastError=(e,r)=>(a._OrtGetLastError=S.ka)(e,r),a._OrtCreateSessionOptions=(e,r,t,n,s,c,y,p,O,b)=>(a._OrtCreateSessionOptions=S.la)(e,r,t,n,s,c,y,p,O,b),a._OrtAppendExecutionProvider=(e,r)=>(a._OrtAppendExecutionProvider=S.ma)(e,r),a._OrtAddFreeDimensionOverride=(e,r,t)=>(a._OrtAddFreeDimensionOverride=S.na)(e,r,t),a._OrtAddSessionConfigEntry=(e,r,t)=>(a._OrtAddSessionConfigEntry=S.oa)(e,r,t),a._OrtReleaseSessionOptions=e=>(a._OrtReleaseSessionOptions=S.pa)(e),a._OrtCreateSession=(e,r,t)=>(a._OrtCreateSession=S.qa)(e,r,t),a._OrtReleaseSession=e=>(a._OrtReleaseSession=S.ra)(e),a._OrtGetInputOutputCount=(e,r,t)=>(a._OrtGetInputOutputCount=S.sa)(e,r,t),a._OrtGetInputName=(e,r)=>(a._OrtGetInputName=S.ta)(e,r),a._OrtGetOutputName=(e,r)=>(a._OrtGetOutputName=S.ua)(e,r),a._OrtFree=e=>(a._OrtFree=S.va)(e),a._OrtCreateTensor=(e,r,t,n,s,c)=>(a._OrtCreateTensor=S.wa)(e,r,t,n,s,c),a._OrtGetTensorData=(e,r,t,n,s)=>(a._OrtGetTensorData=S.xa)(e,r,t,n,s),a._OrtReleaseTensor=e=>(a._OrtReleaseTensor=S.ya)(e),a._OrtCreateRunOptions=(e,r,t,n)=>(a._OrtCreateRunOptions=S.za)(e,r,t,n),a._OrtAddRunConfigEntry=(e,r,t)=>(a._OrtAddRunConfigEntry=S.Aa)(e,r,t),a._OrtReleaseRunOptions=e=>(a._OrtReleaseRunOptions=S.Ba)(e),a._OrtCreateBinding=e=>(a._OrtCreateBinding=S.Ca)(e),a._OrtBindInput=(e,r,t)=>(a._OrtBindInput=S.Da)(e,r,t),a._OrtBindOutput=(e,r,t,n)=>(a._OrtBindOutput=S.Ea)(e,r,t,n),a._OrtClearBoundOutputs=e=>(a._OrtClearBoundOutputs=S.Fa)(e),a._OrtReleaseBinding=e=>(a._OrtReleaseBinding=S.Ga)(e),a._OrtRunWithBinding=(e,r,t,n,s)=>(a._OrtRunWithBinding=S.Ha)(e,r,t,n,s),a._OrtRun=(e,r,t,n,s,c,y,p)=>(a._OrtRun=S.Ia)(e,r,t,n,s,c,y,p),a._OrtEndProfiling=e=>(a._OrtEndProfiling=S.Ja)(e);var He=a._malloc=e=>(He=a._malloc=S.Ka)(e),oe=a._free=e=>(oe=a._free=S.La)(e),xr=e=>(xr=S.Ma)(e);a.__embind_initialize_bindings=()=>(a.__embind_initialize_bindings=S.Na)();var Br=()=>(Br=S.Pa)(),Ur=e=>(Ur=S.Qa)(e),Dr=e=>(Dr=S.Ra)(e);function Nt(){var e=S;e=Object.assign({},e);var r=n=>()=>n()>>>0,t=n=>s=>n(s)>>>0;return e.__errno_location=r(e.__errno_location),e.Ka=t(e.Ka),e.Ma=t(e.Ma),e.Pa=r(e.Pa),e.Ra=t(e.Ra),e}a.stackAlloc=Dr,a.stackSave=Br,a.stackRestore=Ur,a.UTF8ToString=De,a.stringToUTF8=(e,r,t)=>Le(e,k,r,t),a.lengthBytesUTF8=We;var Ne;j=function e(){Ne||Wr(),Ne||(j=e)};function Wr(){if(!(0<Q)){for(;0<ue.length;)ue.shift()(a);if(!(0<Q||Ne||(Ne=!0,a.calledRun=!0,he))){for(;0<we.length;)we.shift()(a);for(d(a);0<K.length;)K.shift()(a)}}}return Wr(),u.ready}})();typeof Hr=="object"&&typeof rr=="object"?rr.exports=Rr:typeof define=="function"&&define.amd&&define([],()=>Rr)});var or,Xt,tr,nr,ze,$r,Jt,Zt,Kt,jr,M,Oe=ee(()=>{"use strict";or=Nr();Xt=or,nr=!1,ze=!1,$r=!1,Jt=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},Zt=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},Kt=(o,u)=>o?u?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":u?"ort-wasm-threaded.wasm":"ort-wasm.wasm",jr=async o=>{if(nr)return Promise.resolve();if(ze)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if($r)throw new Error("previous call to 'initializeWebAssembly()' failed.");ze=!0;let u=o.initTimeout,a=o.numThreads,d=o.simd,l=a>1&&Jt(),g=d&&Zt(),f=o.wasmPaths,v=typeof f=="string"?f:void 0,E=Kt(g,l),A=typeof f=="object"?f[E]:void 0,T=!1,I=[];if(u>0&&I.push(new Promise(h=>{setTimeout(()=>{T=!0,h()},u)})),I.push(new Promise((h,w)=>{(l?Xt:or)({locateFile:(R,U)=>R.endsWith(".wasm")?A||(v??U)+E:U+R}).then(R=>{ze=!1,nr=!0,tr=R,h()},R=>{ze=!1,$r=!0,w(R)})})),await Promise.race(I),T)throw new Error(`WebAssembly backend initializing failed due to timeout: ${u}ms`)},M=()=>{if(nr&&tr)return tr;throw new Error("WebAssembly is not initialized yet.")}});var F,Ae,L,Ge=ee(()=>{"use strict";Oe();F=(o,u)=>{let a=M(),d=a.lengthBytesUTF8(o)+1,l=a._malloc(d);return a.stringToUTF8(o,l,d),u.push(l),l},Ae=(o,u,a,d)=>{if(typeof o=="object"&&o!==null){if(a.has(o))throw new Error("Circular reference in options");a.add(o)}Object.entries(o).forEach(([l,g])=>{let f=u?u+l:l;if(typeof g=="object")Ae(g,f+".",a,d);else if(typeof g=="string"||typeof g=="number")d(f,g.toString());else if(typeof g=="boolean")d(f,g?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof g}`)})},L=o=>{let u=M(),a=u.stackSave();try{let d=u.stackAlloc(8);u._OrtGetLastError(d,d+4);let l=u.HEAP32[d/4],g=u.HEAPU32[d/4+1],f=g?u.UTF8ToString(g):"";throw new Error(`${o} ERROR_CODE: ${l}, ERROR_MESSAGE: ${f}`)}finally{u.stackRestore(a)}}});var zr,Gr=ee(()=>{"use strict";Oe();Ge();zr=o=>{let u=M(),a=0,d=[],l=o||{};try{if(o?.logSeverityLevel===void 0)l.logSeverityLevel=2;else if(typeof o.logSeverityLevel!="number"||!Number.isInteger(o.logSeverityLevel)||o.logSeverityLevel<0||o.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${o.logSeverityLevel}`);if(o?.logVerbosityLevel===void 0)l.logVerbosityLevel=0;else if(typeof o.logVerbosityLevel!="number"||!Number.isInteger(o.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${o.logVerbosityLevel}`);o?.terminate===void 0&&(l.terminate=!1);let g=0;return o?.tag!==void 0&&(g=F(o.tag,d)),a=u._OrtCreateRunOptions(l.logSeverityLevel,l.logVerbosityLevel,!!l.terminate,g),a===0&&L("Can't create run options."),o?.extra!==void 0&&Ae(o.extra,"",new WeakSet,(f,v)=>{let E=F(f,d),A=F(v,d);u._OrtAddRunConfigEntry(a,E,A)!==0&&L(`Can't set a run config entry: ${f} - ${v}.`)}),[a,d]}catch(g){throw a!==0&&u._OrtReleaseRunOptions(a),d.forEach(f=>u._free(f)),g}}});var Qt,en,rn,tn,Yr,Vr=ee(()=>{"use strict";Oe();Ge();Qt=o=>{switch(o){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${o}`)}},en=o=>{switch(o){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${o}`)}},rn=o=>{o.extra||(o.extra={}),o.extra.session||(o.extra.session={});let u=o.extra.session;u.use_ort_model_bytes_directly||(u.use_ort_model_bytes_directly="1"),o.executionProviders&&o.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(o.enableMemPattern=!1)},tn=(o,u,a)=>{for(let d of u){let l=typeof d=="string"?d:d.name;switch(l){case"xnnpack":l="XNNPACK";break;case"webnn":if(l="WEBNN",typeof d!="string"){let f=d;if(f?.deviceType){let v=F("deviceType",a),E=F(f.deviceType,a);M()._OrtAddSessionConfigEntry(o,v,E)!==0&&L(`Can't set a session config entry: 'deviceType' - ${f.deviceType}.`)}if(f?.numThreads){let v=f.numThreads;(typeof v!="number"||!Number.isInteger(v)||v<0)&&(v=0);let E=F("numThreads",a),A=F(v.toString(),a);M()._OrtAddSessionConfigEntry(o,E,A)!==0&&L(`Can't set a session config entry: 'numThreads' - ${f.numThreads}.`)}if(f?.powerPreference){let v=F("powerPreference",a),E=F(f.powerPreference,a);M()._OrtAddSessionConfigEntry(o,v,E)!==0&&L(`Can't set a session config entry: 'powerPreference' - ${f.powerPreference}.`)}}break;case"webgpu":if(l="JS",typeof d!="string"){let f=d;if(f?.preferredLayout){if(f.preferredLayout!=="NCHW"&&f.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${f.preferredLayout}`);let v=F("preferredLayout",a),E=F(f.preferredLayout,a);M()._OrtAddSessionConfigEntry(o,v,E)!==0&&L(`Can't set a session config entry: 'preferredLayout' - ${f.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${l}`)}let g=F(l,a);M()._OrtAppendExecutionProvider(o,g)!==0&&L(`Can't append execution provider: ${l}.`)}},Yr=o=>{let u=M(),a=0,d=[],l=o||{};rn(l);try{let g=Qt(l.graphOptimizationLevel??"all"),f=en(l.executionMode??"sequential"),v=typeof l.logId=="string"?F(l.logId,d):0,E=l.logSeverityLevel??2;if(!Number.isInteger(E)||E<0||E>4)throw new Error(`log serverity level is not valid: ${E}`);let A=l.logVerbosityLevel??0;if(!Number.isInteger(A)||A<0||A>4)throw new Error(`log verbosity level is not valid: ${A}`);let T=typeof l.optimizedModelFilePath=="string"?F(l.optimizedModelFilePath,d):0;if(a=u._OrtCreateSessionOptions(g,!!l.enableCpuMemArena,!!l.enableMemPattern,f,!!l.enableProfiling,0,v,E,A,T),a===0&&L("Can't create session options."),l.executionProviders&&tn(a,l.executionProviders,d),l.freeDimensionOverrides)for(let[I,h]of Object.entries(l.freeDimensionOverrides)){if(typeof I!="string")throw new Error(`free dimension override name must be a string: ${I}`);if(typeof h!="number"||!Number.isInteger(h)||h<0)throw new Error(`free dimension override value must be a non-negative integer: ${h}`);let w=F(I,d);u._OrtAddFreeDimensionOverride(a,w,h)!==0&&L(`Can't set a free dimension override: ${I} - ${h}.`)}return l.extra!==void 0&&Ae(l.extra,"",new WeakSet,(I,h)=>{let w=F(I,d),x=F(h,d);u._OrtAddSessionConfigEntry(a,w,x)!==0&&L(`Can't set a session config entry: ${I} - ${h}.`)}),[a,d]}catch(g){throw a!==0&&u._OrtReleaseSessionOptions(a),d.forEach(f=>u._free(f)),g}}});var ar,qr,sr,Xr,Jr,Ye,Zr,ir=ee(()=>{"use strict";ar=o=>{switch(o){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${o}`)}},qr=o=>{switch(o){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${o}`)}},sr=o=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][o],Xr=o=>{switch(o){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${o}`)}},Jr=o=>{switch(o){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${o}`)}},Ye=o=>o==="float32"||o==="int32"||o==="int64"||o==="bool"||o==="float16"||o==="uint32",Zr=o=>{switch(o){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${o}`)}}});var nn,Qr,et,_e,on,ur,rt,tt,Kr,nt,ot,at=ee(()=>{"use strict";Gr();Vr();ir();Oe();Ge();nn=(o,u)=>{M()._OrtInit(o,u)!==0&&L("Can't initialize onnxruntime.")},Qr=async o=>{nn(o.wasm.numThreads,Jr(o.logLevel))},et=async(o,u)=>{},_e=new Map,on=o=>{let u=M(),a=u.stackSave();try{let d=u.stackAlloc(8);return u._OrtGetInputOutputCount(o,d,d+4)!==0&&L("Can't get session input/output count."),[u.HEAP32[d/4],u.HEAP32[d/4+1]]}finally{u.stackRestore(a)}},ur=o=>{let u=M(),a=u._malloc(o.byteLength);if(a===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${o.byteLength}.`);return u.HEAPU8.set(o,a),[a,o.byteLength]},rt=(o,u)=>{let a,d,l=M();Array.isArray(o)?[a,d]=o:o.buffer===l.HEAPU8.buffer?[a,d]=[o.byteOffset,o.byteLength]:[a,d]=ur(o);let g=0,f=0,v=0,E=[],A=[],T=[];try{[f,E]=Yr(u),g=l._OrtCreateSession(a,d,f),g===0&&L("Can't create a session.");let[I,h]=on(g),w=[],x=[],B=[];for(let U=0;U<I;U++){let H=l._OrtGetInputName(g,U);H===0&&L("Can't get an input name."),A.push(H),w.push(l.UTF8ToString(H))}for(let U=0;U<h;U++){let H=l._OrtGetOutputName(g,U);H===0&&L("Can't get an output name."),T.push(H);let he=l.UTF8ToString(H);x.push(he)}let R=null;return _e.set(g,[g,A,T,R]),[g,w,x]}catch(I){throw A.forEach(h=>l._OrtFree(h)),T.forEach(h=>l._OrtFree(h)),v!==0&&l._OrtReleaseBinding(v),g!==0&&l._OrtReleaseSession(g),I}finally{l._free(a),f!==0&&l._OrtReleaseSessionOptions(f),E.forEach(I=>l._free(I))}},tt=o=>{let u=M(),a=_e.get(o);if(!a)throw new Error(`cannot release session. invalid session id: ${o}`);let[d,l,g,f]=a;f&&u._OrtReleaseBinding(f.handle),u.jsepUnregisterBuffers?.(o),l.forEach(v=>u._OrtFree(v)),g.forEach(v=>u._OrtFree(v)),u._OrtReleaseSession(d),_e.delete(o)},Kr=(o,u,a,d,l)=>{if(!o){u.push(0);return}let g=M(),f=o[0],v=o[1],E=o[3],A,T;if(f==="string"&&E==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(E==="gpu-buffer"){let w=o[2].gpuBuffer,x=sr(ar(f));T=v.reduce((B,R)=>B*R,1)*x,A=g.jsepRegisterBuffer(d,l,w,T)}else{let w=o[2];if(Array.isArray(w)){T=4*w.length,A=g._malloc(T),a.push(A);let x=A/4;for(let B=0;B<w.length;B++){if(typeof w[B]!="string")throw new TypeError(`tensor data at index ${B} is not a string`);g.HEAPU32[x++]=F(w[B],a)}}else T=w.byteLength,A=g._malloc(T),a.push(A),g.HEAPU8.set(new Uint8Array(w.buffer,w.byteOffset,T),A)}let I=g.stackSave(),h=g.stackAlloc(4*v.length);try{let w=h/4;v.forEach(B=>g.HEAP32[w++]=B);let x=g._OrtCreateTensor(ar(f),A,T,h,v.length,Zr(E));x===0&&L(`Can't create tensor for input/output. session=${d}, index=${l}.`),u.push(x)}finally{g.stackRestore(I)}},nt=async(o,u,a,d,l,g)=>{let f=M(),v=_e.get(o);if(!v)throw new Error(`cannot run inference. invalid session id: ${o}`);let[E,A,T,I]=v,h=u.length,w=d.length,x=0,B=[],R=[],U=[],H=[],he=f.stackSave(),Z=f.stackAlloc(h*4),k=f.stackAlloc(h*4),te=f.stackAlloc(w*4),de=f.stackAlloc(w*4);try{[x,B]=zr(g);for(let P=0;P<h;P++)Kr(a[P],R,H,o,u[P]);for(let P=0;P<w;P++)Kr(l[P],U,H,o,h+d[P]);let m=Z/4,_=k/4,Pe=te/4,Ce=de/4;for(let P=0;P<h;P++)f.HEAPU32[m++]=R[P],f.HEAPU32[_++]=A[u[P]];for(let P=0;P<w;P++)f.HEAPU32[Pe++]=U[P],f.HEAPU32[Ce++]=T[d[P]];let Se;Se=await f._OrtRun(E,k,Z,h,de,w,te,x),Se!==0&&L("failed to call OrtRun().");let ie=[];for(let P=0;P<w;P++){let ue=f.HEAPU32[te/4+P];if(ue===U[P]){ie.push(l[P]);continue}let we=f.stackSave(),K=f.stackAlloc(4*4),Q=!1,N,j=0;try{f._OrtGetTensorData(ue,K,K+4,K+8,K+12)!==0&&L(`Can't access output tensor data on index ${P}.`);let pe=K/4,fe=f.HEAPU32[pe++];j=f.HEAPU32[pe++];let be=f.HEAPU32[pe++],xe=f.HEAPU32[pe++],me=[];for(let z=0;z<xe;z++)me.push(f.HEAPU32[be/4+z]);f._OrtFree(be);let ce=me.reduce((z,$)=>z*$,1);N=qr(fe);let Be=I?.outputPreferredLocations[d[P]];if(N==="string"){if(Be==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let z=[],$=j/4;for(let Ee=0;Ee<ce;Ee++){let Te=f.HEAPU32[$++],Ue=Ee===ce-1?void 0:f.HEAPU32[$]-Te;z.push(f.UTF8ToString(Te,Ue))}ie.push([N,me,z,"cpu"])}else if(Be==="gpu-buffer"&&ce>0){let z=f.jsepGetBuffer(j),$=sr(fe);if($===void 0||!Ye(N))throw new Error(`Unsupported data type: ${N}`);Q=!0,ie.push([N,me,{gpuBuffer:z,download:f.jsepCreateDownloader(z,ce*$,N),dispose:()=>{f._OrtReleaseTensor(ue)}},"gpu-buffer"])}else{let z=Xr(N),$=new z(ce);new Uint8Array($.buffer,$.byteOffset,$.byteLength).set(f.HEAPU8.subarray(j,j+$.byteLength)),ie.push([N,me,$,"cpu"])}}finally{f.stackRestore(we),N==="string"&&j&&f._free(j),Q||f._OrtReleaseTensor(ue)}}return I&&f._OrtClearBoundOutputs(I.handle),ie}finally{f.stackRestore(he),R.forEach(m=>f._OrtReleaseTensor(m)),U.forEach(m=>f._OrtReleaseTensor(m)),H.forEach(m=>f._free(m)),x!==0&&f._OrtReleaseRunOptions(x),B.forEach(m=>f._free(m))}},ot=o=>{let u=M(),a=_e.get(o);if(!a)throw new Error("invalid session id");let d=a[0],l=u._OrtEndProfiling(d);l===0&&L("Can't get an profile file name."),u._OrtFree(l)}});var Ve,fr,st,it,Wn,ut,ft,ct,lt,dt,pt,mt,cr=ee(()=>{"use strict";Ve=require("onnxruntime-common");at();Oe();fr=!1,st=!1,it=!1,Wn=typeof document<"u"?document?.currentScript?.src:void 0,ut=async()=>{if(!st){if(fr)throw new Error("multiple calls to 'initWasm()' detected.");if(it)throw new Error("previous call to 'initWasm()' failed.");fr=!0;try{await jr(Ve.env.wasm),await Qr(Ve.env),st=!0}catch(o){throw it=!0,o}finally{fr=!1}}},ft=async o=>{await et(Ve.env,o)},ct=async o=>ur(o),lt=async(o,u)=>rt(o,u),dt=async o=>{tt(o)},pt=async(o,u,a,d,l,g)=>nt(o,u,a,d,l,g),mt=async o=>{ot(o)}});var yt,lr,gt,sn,qe,ht=ee(()=>{"use strict";yt=require("node:fs/promises"),lr=require("onnxruntime-common");cr();ir();gt=(o,u)=>{switch(o.location){case"cpu":return[o.type,o.dims,o.data,"cpu"];case"gpu-buffer":return[o.type,o.dims,{gpuBuffer:o.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${o.location} for ${u()}`)}},sn=o=>{switch(o[3]){case"cpu":return new lr.Tensor(o[0],o[2],o[1]);case"gpu-buffer":{let u=o[0];if(!Ye(u))throw new Error(`not supported data type: ${u} for deserializing GPU tensor`);let{gpuBuffer:a,download:d,dispose:l}=o[2];return lr.Tensor.fromGpuBuffer(a,{dataType:u,dims:o[1],download:d,dispose:l})}default:throw new Error(`invalid data location: ${o[3]}`)}},qe=class{async fetchModelAndCopyToWasmMemory(u){let a=await fetch(u);if(a.status!==200)throw new Error(`failed to load model: ${u}`);let d=await a.arrayBuffer();return ct(new Uint8Array(d))}async loadModel(u,a){let d;typeof u=="string"?typeof process<"u"&&process.versions&&process.versions.node?d=await(0,yt.readFile)(u):d=await this.fetchModelAndCopyToWasmMemory(u):d=u,[this.sessionId,this.inputNames,this.outputNames]=await lt(d,a)}async dispose(){return dt(this.sessionId)}async run(u,a,d){let l=[],g=[];Object.entries(u).forEach(h=>{let w=h[0],x=h[1],B=this.inputNames.indexOf(w);if(B===-1)throw new Error(`invalid input '${w}'`);l.push(x),g.push(B)});let f=[],v=[];Object.entries(a).forEach(h=>{let w=h[0],x=h[1],B=this.outputNames.indexOf(w);if(B===-1)throw new Error(`invalid output '${w}'`);f.push(x),v.push(B)});let E=l.map((h,w)=>gt(h,()=>`input "${this.inputNames[g[w]]}"`)),A=f.map((h,w)=>h?gt(h,()=>`output "${this.outputNames[v[w]]}"`):null),T=await pt(this.sessionId,g,E,v,A,d),I={};for(let h=0;h<T.length;h++)I[this.outputNames[v[h]]]=f[h]??sn(T[h]);return I}startProfiling(){}endProfiling(){mt(this.sessionId)}}});var wt,X,un,Xe,vt=ee(()=>{"use strict";wt=require("node:os"),X=require("onnxruntime-common");cr();ht();un=()=>{if((typeof X.env.wasm.initTimeout!="number"||X.env.wasm.initTimeout<0)&&(X.env.wasm.initTimeout=0),typeof X.env.wasm.simd!="boolean"&&(X.env.wasm.simd=!0),typeof X.env.wasm.proxy!="boolean"&&(X.env.wasm.proxy=!1),typeof X.env.wasm.numThreads!="number"||!Number.isInteger(X.env.wasm.numThreads)||X.env.wasm.numThreads<=0){let o=typeof navigator>"u"?(0,wt.cpus)().length:navigator.hardwareConcurrency;X.env.wasm.numThreads=Math.min(4,Math.ceil((o||1)/2))}},Xe=class{async init(u){un(),await ut(),await ft(u)}async createInferenceSessionHandler(u,a){let d=new qe;return await d.loadModel(u,a),Promise.resolve(d)}}});var Ot={};Mr(Ot,{wasmBackend:()=>fn});var fn,St=ee(()=>{"use strict";vt();fn=new Xe});var re={};Mr(re,{default:()=>ln});module.exports=Fr(re);se(re,require("onnxruntime-common"),module.exports);var cn=qt(require("onnxruntime-common")),ye=require("onnxruntime-common");var kr="1.17.0";var ln=cn;{let o=(St(),Fr(Ot)).wasmBackend;(0,ye.registerBackend)("cpu",o,10),(0,ye.registerBackend)("wasm",o,10),(0,ye.registerBackend)("xnnpack",o,9),(0,ye.registerBackend)("webnn",o,9)}Object.defineProperty(ye.env.versions,"web",{value:kr,enumerable:!0});0&&(module.exports={...require("onnxruntime-common")});
//# sourceMappingURL=ort.node.min.js.map
