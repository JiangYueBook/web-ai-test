/*!
 * ONNX Runtime Web v1.17.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
var fh=Object.create;var go=Object.defineProperty;var ch=Object.getOwnPropertyDescriptor;var ph=Object.getOwnPropertyNames;var dh=Object.getPrototypeOf,hh=Object.prototype.hasOwnProperty;var $=(i,t)=>()=>(i&&(t=i(i=0)),t);var Ie=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),rn=(i,t)=>{for(var o in t)go(i,o,{get:t[o],enumerable:!0})},Ds=(i,t,o,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of ph(t))!hh.call(i,r)&&r!==o&&go(i,r,{get:()=>t[r],enumerable:!(e=ch(t,r))||e.enumerable});return i};var nn=(i,t,o)=>(o=i!=null?fh(dh(i)):{},Ds(t||!i||!i.__esModule?go(o,"default",{value:i,enumerable:!0}):o,i)),Ar=i=>Ds(go({},"__esModule",{value:!0}),i);var yo,Ir,ir,To,vo=$(()=>{"use strict";yo=new Map,Ir=[],ir=(i,t,o)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){let e=yo.get(i);if(e===void 0)yo.set(i,{backend:t,priority:o});else{if(e.priority>o)return;if(e.priority===o&&e.backend!==t)throw new Error(`cannot register backend "${i}" using priority ${o}`)}if(o>=0){let r=Ir.indexOf(i);r!==-1&&Ir.splice(r,1);for(let n=0;n<Ir.length;n++)if(yo.get(Ir[n]).priority<=o){Ir.splice(n,0,i);return}Ir.push(i)}return}throw new TypeError("not a valid backend")},To=async i=>{let t=i.length===0?Ir:i,o=[];for(let e of t){let r=yo.get(e);if(r){if(r.initialized)return r.backend;if(r.aborted)continue;let n=!!r.initPromise;try{return n||(r.initPromise=r.backend.init(e)),await r.initPromise,r.initialized=!0,r.backend}catch(s){n||o.push({name:e,err:s}),r.aborted=!0}finally{delete r.initPromise}}}throw new Error(`no available backend found. ERR: ${o.map(e=>`[${e.name}] ${e.err}`).join(", ")}`)}});var Ls=$(()=>{"use strict";vo()});var Cs,Fs=$(()=>{"use strict";Cs="1.17.0"});var $s,Sr,Fi=$(()=>{"use strict";Fs();$s="warning",Sr={wasm:{},webgl:{},webgpu:{},versions:{common:Cs},set logLevel(i){if(i!==void 0){if(typeof i!="string"||["verbose","info","warning","error","fatal"].indexOf(i)===-1)throw new Error(`Unsupported logging level: ${i}`);$s=i}},get logLevel(){return $s}};Object.defineProperty(Sr,"logLevel",{enumerable:!0})});var re,ks=$(()=>{"use strict";Fi();re=Sr});var Bs,Ns,Rs=$(()=>{"use strict";Bs=(i,t)=>{let o=document.createElement("canvas");o.width=i.dims[3],o.height=i.dims[2];let e=o.getContext("2d");if(e!=null){let r,n;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(r=i.dims[2],n=i.dims[3]):(r=i.dims[3],n=i.dims[2]);let s=t?.format!==void 0?t.format:"RGB",a=t?.norm,u,l;a===void 0||a.mean===void 0?u=[255,255,255,255]:typeof a.mean=="number"?u=[a.mean,a.mean,a.mean,a.mean]:(u=[a.mean[0],a.mean[1],a.mean[2],0],a.mean[3]!==void 0&&(u[3]=a.mean[3])),a===void 0||a.bias===void 0?l=[0,0,0,0]:typeof a.bias=="number"?l=[a.bias,a.bias,a.bias,a.bias]:(l=[a.bias[0],a.bias[1],a.bias[2],0],a.bias[3]!==void 0&&(l[3]=a.bias[3]));let c=n*r,b=0,y=c,w=c*2,S=-1;s==="RGBA"?(b=0,y=c,w=c*2,S=c*3):s==="RGB"?(b=0,y=c,w=c*2):s==="RBG"&&(b=0,w=c,y=c*2);for(let I=0;I<n;I++)for(let F=0;F<r;F++){let k=(i.data[b++]-l[0])*u[0],L=(i.data[y++]-l[1])*u[1],N=(i.data[w++]-l[2])*u[2],te=S===-1?255:(i.data[S++]-l[3])*u[3];e.fillStyle="rgba("+k+","+L+","+N+","+te+")",e.fillRect(F,I,1,1)}return o.toDataURL()}else throw new Error("Can not access image data")},Ns=(i,t)=>{let o=document.createElement("canvas").getContext("2d"),e;if(o!=null){let r,n,s;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(r=i.dims[2],n=i.dims[1],s=i.dims[3]):(r=i.dims[3],n=i.dims[2],s=i.dims[1]);let a=t!==void 0&&t.format!==void 0?t.format:"RGB",u=t?.norm,l,c;u===void 0||u.mean===void 0?l=[255,255,255,255]:typeof u.mean=="number"?l=[u.mean,u.mean,u.mean,u.mean]:(l=[u.mean[0],u.mean[1],u.mean[2],255],u.mean[3]!==void 0&&(l[3]=u.mean[3])),u===void 0||u.bias===void 0?c=[0,0,0,0]:typeof u.bias=="number"?c=[u.bias,u.bias,u.bias,u.bias]:(c=[u.bias[0],u.bias[1],u.bias[2],0],u.bias[3]!==void 0&&(c[3]=u.bias[3]));let b=n*r;if(t!==void 0&&(t.format!==void 0&&s===4&&t.format!=="RGBA"||s===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let y=4,w=0,S=1,I=2,F=3,k=0,L=b,N=b*2,te=-1;a==="RGBA"?(k=0,L=b,N=b*2,te=b*3):a==="RGB"?(k=0,L=b,N=b*2):a==="RBG"&&(k=0,N=b,L=b*2),e=o.createImageData(r,n);for(let q=0;q<n*r;w+=y,S+=y,I+=y,F+=y,q++)e.data[w]=(i.data[k++]-c[0])*l[0],e.data[S]=(i.data[L++]-c[1])*l[1],e.data[I]=(i.data[N++]-c[2])*l[2],e.data[F]=te===-1?255:(i.data[te++]-c[3])*l[3]}else throw new Error("Can not access image data");return e}});var $i,Ms,Gs,Us,Ws,Vs=$(()=>{"use strict";xo();$i=(i,t)=>{if(i===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:o,width:e}=t,r=t.norm??{mean:255,bias:0},n,s;typeof r.mean=="number"?n=[r.mean,r.mean,r.mean,r.mean]:n=[r.mean[0],r.mean[1],r.mean[2],r.mean[3]??255],typeof r.bias=="number"?s=[r.bias,r.bias,r.bias,r.bias]:s=[r.bias[0],r.bias[1],r.bias[2],r.bias[3]??0];let a=t.format!==void 0?t.format:"RGBA",u=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",l=o*e,c=u==="RGBA"?new Float32Array(l*4):new Float32Array(l*3),b=4,y=0,w=1,S=2,I=3,F=0,k=l,L=l*2,N=-1;a==="RGB"&&(b=3,y=0,w=1,S=2,I=-1),u==="RGBA"?N=l*3:u==="RBG"?(F=0,L=l,k=l*2):u==="BGR"&&(L=0,k=l,F=l*2);for(let q=0;q<l;q++,y+=b,S+=b,w+=b,I+=b)c[F++]=(i[y]+s[0])/n[0],c[k++]=(i[w]+s[1])/n[1],c[L++]=(i[S]+s[2])/n[2],N!==-1&&I!==-1&&(c[N++]=(i[I]+s[3])/n[3]);return u==="RGBA"?new at("float32",c,[1,4,o,e]):new at("float32",c,[1,3,o,e])},Ms=async(i,t)=>{let o=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,e=typeof ImageData<"u"&&i instanceof ImageData,r=typeof ImageBitmap<"u"&&i instanceof ImageBitmap,n=typeof i=="string",s,a=t??{};if(o){let u=document.createElement("canvas");u.width=i.width,u.height=i.height;let l=u.getContext("2d");if(l!=null){let c=i.height,b=i.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(c=t.resizedHeight,b=t.resizedWidth),t!==void 0){if(a=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");a.tensorFormat="RGBA",a.height=c,a.width=b}else a.tensorFormat="RGBA",a.height=c,a.width=b;l.drawImage(i,0,0),s=l.getImageData(0,0,b,c).data}else throw new Error("Can not access image data")}else if(e){let u,l;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(u=t.resizedHeight,l=t.resizedWidth):(u=i.height,l=i.width),t!==void 0&&(a=t),a.format="RGBA",a.height=u,a.width=l,t!==void 0){let c=document.createElement("canvas");c.width=l,c.height=u;let b=c.getContext("2d");if(b!=null)b.putImageData(i,0,0),s=b.getImageData(0,0,l,u).data;else throw new Error("Can not access image data")}else s=i.data}else if(r){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");let u=document.createElement("canvas");u.width=i.width,u.height=i.height;let l=u.getContext("2d");if(l!=null){let c=i.height,b=i.width;return l.drawImage(i,0,0,b,c),s=l.getImageData(0,0,b,c).data,a.height=c,a.width=b,$i(s,a)}else throw new Error("Can not access image data")}else{if(n)return new Promise((u,l)=>{let c=document.createElement("canvas"),b=c.getContext("2d");if(!i||!b)return l();let y=new Image;y.crossOrigin="Anonymous",y.src=i,y.onload=()=>{c.width=y.width,c.height=y.height,b.drawImage(y,0,0,c.width,c.height);let w=b.getImageData(0,0,c.width,c.height);a.height=c.height,a.width=c.width,u($i(w.data,a))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(s!==void 0)return $i(s,a);throw new Error("Input data provided is not supported - aborted tensor creation")},Gs=(i,t)=>{let{width:o,height:e,download:r,dispose:n}=t,s=[1,e,o,4];return new at({location:"texture",type:"float32",texture:i,dims:s,download:r,dispose:n})},Us=(i,t)=>{let{dataType:o,dims:e,download:r,dispose:n}=t;return new at({location:"gpu-buffer",type:o??"float32",gpuBuffer:i,dims:e,download:r,dispose:n})},Ws=(i,t,o)=>new at({location:"cpu-pinned",type:i,data:t,dims:o??[t.length]})});var $n,wo,zs,Hs,js=$(()=>{"use strict";$n=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),wo=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),zs=!1,Hs=()=>{if(!zs){zs=!0;let i=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",t=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";i&&($n.set("int64",BigInt64Array),wo.set(BigInt64Array,"int64")),t&&($n.set("uint64",BigUint64Array),wo.set(BigUint64Array,"uint64"))}}});var qs,Ys,Xs=$(()=>{"use strict";xo();qs=i=>{let t=1;for(let o=0;o<i.length;o++){let e=i[o];if(typeof e!="number"||!Number.isSafeInteger(e))throw new TypeError(`dims[${o}] must be an integer, got: ${e}`);if(e<0)throw new RangeError(`dims[${o}] must be a non-negative integer, got: ${e}`);t*=e}return t},Ys=(i,t)=>{switch(i.location){case"cpu":return new at(i.type,i.data,t);case"cpu-pinned":return new at({location:"cpu-pinned",data:i.data,type:i.type,dims:t});case"texture":return new at({location:"texture",texture:i.texture,type:i.type,dims:t});case"gpu-buffer":return new at({location:"gpu-buffer",gpuBuffer:i.gpuBuffer,type:i.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${i.location} is not supported`)}}});var at,xo=$(()=>{"use strict";Rs();Vs();js();Xs();at=class{constructor(t,o,e){Hs();let r,n;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,r=t.type,n=t.dims,t.location){case"cpu-pinned":{let a=$n.get(r);if(!a)throw new TypeError(`unsupported type "${r}" to create tensor from pinned buffer`);if(!(t.data instanceof a))throw new TypeError(`buffer should be of type ${a.name}`);this.cpuData=t.data;break}case"texture":{if(r!=="float32")throw new TypeError(`unsupported type "${r}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(r!=="float32"&&r!=="float16"&&r!=="int32"&&r!=="int64"&&r!=="uint32"&&r!=="bool")throw new TypeError(`unsupported type "${r}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let a,u;if(typeof t=="string")if(r=t,u=e,t==="string"){if(!Array.isArray(o))throw new TypeError("A string tensor's data must be a string array.");a=o}else{let l=$n.get(t);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(o)){if(t==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");t==="uint64"||t==="int64"?a=l.from(o,BigInt):a=l.from(o)}else if(o instanceof l)a=o;else throw new TypeError(`A ${r} tensor's data must be type of ${l}`)}else if(u=o,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof t[0];if(l==="string")r="string",a=t;else if(l==="boolean")r="bool",a=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else{let l=wo.get(t.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);r=l,a=t}if(u===void 0)u=[a.length];else if(!Array.isArray(u))throw new TypeError("A tensor's dims must be a number array");n=u,this.cpuData=a,this.dataLocation="cpu"}let s=qs(n);if(this.cpuData&&s!==this.cpuData.length)throw new Error(`Tensor's size(${s}) does not match data length(${this.cpuData.length}).`);this.type=r,this.dims=n,this.size=s}static async fromImage(t,o){return Ms(t,o)}static fromTexture(t,o){return Gs(t,o)}static fromGpuBuffer(t,o){return Us(t,o)}static fromPinnedBuffer(t,o,e){return Ws(t,o,e)}toDataURL(t){return Bs(this,t)}toImageData(t){return Ns(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let o=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=o,t&&this.disposer&&(this.disposer(),this.disposer=void 0),o}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return Ys(this,t)}}});var je,_o=$(()=>{"use strict";xo();je=at});var Ks,Js,Pr,Er,ki=$(()=>{"use strict";Fi();Ks=(i,t)=>{Sr.wasm.trace&&console.timeStamp(`${i}::ORT::${t}`)},Js=(i,t)=>{let o=new Error().stack?.split(/\r\n|\r|\n/g)||[],e=!1;for(let r=0;r<o.length;r++){if(e&&!o[r].includes("TRACE_FUNC")){let n=`FUNC_${i}::${o[r].trim().split(" ")[1]}`;t&&(n+=`::${t}`),Ks("CPU",n);return}o[r].includes("TRACE_FUNC")&&(e=!0)}},Pr=i=>{Sr.wasm.trace&&Js("BEGIN",i)},Er=i=>{Sr.wasm.trace&&Js("END",i)}});var Oo,Zs=$(()=>{"use strict";vo();_o();ki();Oo=class i{constructor(t){this.handler=t}async run(t,o,e){Pr();let r={},n={};if(typeof t!="object"||t===null||t instanceof je||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let s=!0;if(typeof o=="object"){if(o===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(o instanceof je)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(o)){if(o.length===0)throw new TypeError("'fetches' cannot be an empty array.");s=!1;for(let l of o){if(typeof l!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(l)===-1)throw new RangeError(`'fetches' contains invalid output name: ${l}.`);r[l]=null}if(typeof e=="object"&&e!==null)n=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else{let l=!1,c=Object.getOwnPropertyNames(o);for(let b of this.outputNames)if(c.indexOf(b)!==-1){let y=o[b];(y===null||y instanceof je)&&(l=!0,s=!1,r[b]=y)}if(l){if(typeof e=="object"&&e!==null)n=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else n=o}}else if(typeof o<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let l of this.inputNames)if(typeof t[l]>"u")throw new Error(`input '${l}' is missing in 'feeds'.`);if(s)for(let l of this.outputNames)r[l]=null;let a=await this.handler.run(t,r,n),u={};for(let l in a)if(Object.hasOwnProperty.call(a,l)){let c=a[l];c instanceof je?u[l]=c:u[l]=new je(c.type,c.data,c.dims)}return Er(),u}async release(){return this.handler.dispose()}static async create(t,o,e,r){Pr();let n,s={};if(typeof t=="string"){if(n=t,typeof o=="object"&&o!==null)s=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(n=t,typeof o=="object"&&o!==null)s=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){let b=t,y=0,w=t.byteLength;if(typeof o=="object"&&o!==null)s=o;else if(typeof o=="number"){if(y=o,!Number.isSafeInteger(y))throw new RangeError("'byteOffset' must be an integer.");if(y<0||y>=b.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${b.byteLength}).`);if(w=t.byteLength-y,typeof e=="number"){if(w=e,!Number.isSafeInteger(w))throw new RangeError("'byteLength' must be an integer.");if(w<=0||y+w>b.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${b.byteLength-y}].`);if(typeof r=="object"&&r!==null)s=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(typeof e<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof o<"u")throw new TypeError("'options' must be an object.");n=new Uint8Array(b,y,w)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let u=(s.executionProviders||[]).map(b=>typeof b=="string"?b:b.name),c=await(await To(u)).createInferenceSessionHandler(n,s);return Er(),new i(c)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}});var mh,Qs=$(()=>{"use strict";Zs();mh=Oo});var eu=$(()=>{"use strict"});var bh,Ao,tu=$(()=>{"use strict";vo();_o();bh="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",Ao=class i{constructor(t,o,e){this.handler=t,this.hasOptimizerModel=o,this.hasEvalModel=e}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(t,o){let e=t.evalModel||"",r=t.optimizerModel||"",n=o||{},a=(n.executionProviders||[]).map(l=>typeof l=="string"?l:l.name),u=await To(a);if(u.createTrainingSessionHandler){let l=await u.createTrainingSessionHandler(t.checkpointState,t.trainModel,e,r,n);return new i(l,!!t.optimizerModel,!!t.evalModel)}else throw new Error(bh)}typeNarrowingForRunStep(t,o,e,r,n){let s={},a={};if(typeof e!="object"||e===null||e instanceof je||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof je)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");u=!1;for(let l of r){if(typeof l!="string")throw new TypeError("'fetches' must be a string array or an object.");if(o.indexOf(l)===-1)throw new RangeError(`'fetches' contains invalid output name: ${l}.`);s[l]=null}if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let l=!1,c=Object.getOwnPropertyNames(r);for(let b of o)if(c.indexOf(b)!==-1){let y=r[b];(y===null||y instanceof je)&&(l=!0,u=!1,s[b]=y)}if(l){if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else a=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let l of t)if(typeof e[l]>"u")throw new Error(`input '${l}' is missing in 'feeds'.`);if(u)for(let l of o)s[l]=null;return[s,a]}convertHandlerReturnTypeToMapOfTensors(t){let o={};for(let e in t)if(Object.hasOwnProperty.call(t,e)){let r=t[e];r instanceof je?o[e]=r:o[e]=new je(r.type,r.data,r.dims)}return o}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(t,o,e){let[r,n]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,t,o,e),s=await this.handler.runTrainStep(t,r,n);return this.convertHandlerReturnTypeToMapOfTensors(s)}async runOptimizerStep(t){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(t||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(t,o,e){if(this.hasEvalModel){let[r,n]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,t,o,e),s=await this.handler.runEvalStep(t,r,n);return this.convertHandlerReturnTypeToMapOfTensors(s)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(t=!0){return this.handler.getParametersSize(t)}async loadParametersBuffer(t,o=!0){let e=await this.getParametersSize(o);if(t.length!==4*e)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(t,o)}async getContiguousParameters(t=!0){return this.handler.getContiguousParameters(t)}async release(){return this.handler.dispose()}}});var gh,ru=$(()=>{"use strict";tu();gh=Ao});var Bi={};rn(Bi,{InferenceSession:()=>mh,TRACE:()=>Ks,TRACE_FUNC_BEGIN:()=>Pr,TRACE_FUNC_END:()=>Er,Tensor:()=>je,TrainingSession:()=>gh,env:()=>re,registerBackend:()=>ir});var Lt=$(()=>{"use strict";Ls();ks();Qs();_o();ki();eu();ru()});function ar(i,t,o,e){if(t===void 0)return Th(i);if(o===void 0)Io(i,t,1);else if(typeof o=="number"&&e===void 0)Io(i,t,o);else if(typeof o=="string"&&e===void 0)Io(i,o,1,t);else if(typeof o=="string"&&typeof e=="number")Io(i,o,e,t);else throw new TypeError("input is valid")}function Th(i){return{verbose:ar.verbose.bind(null,i),info:ar.info.bind(null,i),warning:ar.warning.bind(null,i),error:ar.error.bind(null,i),fatal:ar.fatal.bind(null,i)}}function Io(i,t,o,e){let r=kn[e||""]||kn[""];ou[i]<ou[r.minimalSeverity]||(r.logDateTime&&(t=`${new Date().toISOString()}|${t}`),r.logSourceLocation,yh[r.provider].log(i,t,e))}var Ni,Ri,ou,yh,iu,kn,Te,Po,Eo,Do,So,gt=$(()=>{"use strict";Ni=class{log(t,o,e){}},Ri=class{log(t,o,e){console.log(`${this.color(t)} ${e?"\x1B[35m"+e+"\x1B[0m ":""}${o}`)}color(t){switch(t){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${t}`)}}},ou={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},yh={none:new Ni,console:new Ri},iu={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},kn={"":iu};(u=>{function i(l,c){u("verbose",l,c)}u.verbose=i;function t(l,c){u("info",l,c)}u.info=t;function o(l,c){u("warning",l,c)}u.warning=o;function e(l,c){u("error",l,c)}u.error=e;function r(l,c){u("fatal",l,c)}u.fatal=r;function n(l){kn={},s("",l||{})}u.reset=n;function s(l,c){if(l==="*")n(c);else{let b=kn[l]||iu;kn[l]={provider:c.provider||b.provider,minimalSeverity:c.minimalSeverity||b.minimalSeverity,logDateTime:c.logDateTime===void 0?b.logDateTime:c.logDateTime,logSourceLocation:c.logSourceLocation===void 0?b.logSourceLocation:c.logSourceLocation}}}u.set=s;function a(l){let c={};l.logLevel&&(c.minimalSeverity=l.logLevel),s("",c)}u.setWithEnv=a})(ar||={});Te=ar,Po=class{constructor(t,o,e,r,n,s){this.category=t;this.name=o;this.startTime=e;this.endCallback=r;this.timer=n;this.ctx=s}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}},Eo=class{constructor(t,o,e,r){this.category=t;this.name=o;this.startTime=e;this.endTime=r}},Do=class{constructor(t,o,e){this._started=!1;this._flushPointer=0;this._started=!1,this._maxNumberEvents=t===void 0?1e4:t,this._flushBatchSize=o===void 0?10:o,this._flushIntervalInMilliseconds=e===void 0?5e3:e}static create(t){return t===void 0?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=So(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(t,o,e,r){let n=this._started?this.begin(t,o,r):void 0,s=!1,a=e();if(a&&typeof a.then=="function")return s=!0,new Promise((u,l)=>{a.then(async c=>{n&&await n.end(),u(c)},async c=>{n&&await n.end(),l(c)})});if(!s&&n){let u=n.end();if(u&&typeof u.then=="function")return new Promise((l,c)=>{u.then(()=>{l(a)},b=>{c(b)})})}return a}begin(t,o,e){if(!this._started)throw new Error("profiler is not started yet");if(e===void 0){let r=So();return this.flush(r),new Po(t,o,r,n=>this.endSync(n))}else{let r=e.beginTimer();return new Po(t,o,0,async n=>this.end(n),r,e)}}async end(t){let o=await t.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Eo(t.category,t.name,t.startTime,o)),this.flush(o))}endSync(t){let o=So();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Eo(t.category,t.name,t.startTime,o)),this.flush(o))}logOneEvent(t){Te.verbose(`Profiler.${t.category}`,`${(t.endTime-t.startTime).toFixed(2)}ms on event '${t.name}' at ${t.endTime.toFixed(2)}`)}flush(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(let o=this._flushPointer;this._flushPointer<o+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=So()}}get started(){return this._started}},So=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function au(i,t,o){for(let e of o){let r=e[0],n=e[1],s=e[2],a=e[3],u=e[4];if(i.opType===r){for(let l of t)if((l.domain===n||l.domain==="ai.onnx"&&n==="")&&vh(l.version,s))return{opImpl:a,opInit:u}}}throw new TypeError(`cannot resolve operator '${i.opType}' with opsets: ${t.map(e=>`${e.domain||"ai.onnx"} v${e.version}`).join(", ")}`)}function vh(i,t){if(t.endsWith("+")){let o=Number.parseInt(t.substring(0,t.length-1),10);return!isNaN(o)&&o<=i}else if(t.split("-").length===2){let o=t.split("-"),e=Number.parseInt(o[0],10),r=Number.parseInt(o[1],10);return!isNaN(e)&&!isNaN(r)&&e<=i&&i<=r}else return Number.parseInt(t,10)===i}var su=$(()=>{"use strict"});var uu=Ie(Mi=>{"use strict";Mi.__esModule=!0;var xh=function(){function i(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=i.EMPTY,t&&i.isGuid(t)&&(this.value=t)}return i.isGuid=function(t){var o=t.toString();return t&&(t instanceof i||i.validator.test(o))},i.create=function(){return new i([i.gen(2),i.gen(1),i.gen(1),i.gen(1),i.gen(3)].join("-"))},i.createEmpty=function(){return new i("emptyguid")},i.parse=function(t){return new i(t)},i.raw=function(){return[i.gen(2),i.gen(1),i.gen(1),i.gen(1),i.gen(3)].join("-")},i.gen=function(t){for(var o="",e=0;e<t;e++)o+=((1+Math.random())*65536|0).toString(16).substring(1);return o},i.prototype.equals=function(t){return i.isGuid(t)&&this.value===t.toString()},i.prototype.isEmpty=function(){return this.value===i.EMPTY},i.prototype.toString=function(){return this.value},i.prototype.toJSON=function(){return{value:this.value}},i.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),i.EMPTY="00000000-0000-0000-0000-000000000000",i}();Mi.Guid=xh});function Se(i,t,o){this.low=i|0,this.high=t|0,this.unsigned=!!o}function tt(i){return(i&&i.__isLong__)===!0}function lu(i){var t=Math.clz32(i&-i);return i?31-t:t}function Dr(i,t){var o,e,r;return t?(i>>>=0,(r=0<=i&&i<256)&&(e=cu[i],e)?e:(o=be(i,0,!0),r&&(cu[i]=o),o)):(i|=0,(r=-128<=i&&i<128)&&(e=fu[i],e)?e:(o=be(i,i<0?-1:0,!1),r&&(fu[i]=o),o))}function Tt(i,t){if(isNaN(i))return t?Zt:Ct;if(t){if(i<0)return Zt;if(i>=mu)return yu}else{if(i<=-du)return ct;if(i+1>=du)return gu}return i<0?Tt(-i,t).neg():be(i%an|0,i/an|0,t)}function be(i,t,o){return new Se(i,t,o)}function Ui(i,t,o){if(i.length===0)throw Error("empty string");if(typeof t=="number"?(o=t,t=!1):t=!!t,i==="NaN"||i==="Infinity"||i==="+Infinity"||i==="-Infinity")return t?Zt:Ct;if(o=o||10,o<2||36<o)throw RangeError("radix");var e;if((e=i.indexOf("-"))>0)throw Error("interior hyphen");if(e===0)return Ui(i.substring(1),t,o).neg();for(var r=Tt(Lo(o,8)),n=Ct,s=0;s<i.length;s+=8){var a=Math.min(8,i.length-s),u=parseInt(i.substring(s,s+a),o);if(a<8){var l=Tt(Lo(o,a));n=n.mul(l).add(Tt(u))}else n=n.mul(r),n=n.add(Tt(u))}return n.unsigned=t,n}function Ft(i,t){return typeof i=="number"?Tt(i,t):typeof i=="string"?Ui(i,t):be(i.low,i.high,typeof t=="boolean"?t:i.unsigned)}var yt,fu,cu,Lo,pu,wh,an,mu,du,hu,Ct,Zt,on,bu,Gi,gu,yu,ct,R,Qt,Wi=$(()=>{yt=null;try{yt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}Se.prototype.__isLong__;Object.defineProperty(Se.prototype,"__isLong__",{value:!0});Se.isLong=tt;fu={},cu={};Se.fromInt=Dr;Se.fromNumber=Tt;Se.fromBits=be;Lo=Math.pow;Se.fromString=Ui;Se.fromValue=Ft;pu=65536,wh=1<<24,an=pu*pu,mu=an*an,du=mu/2,hu=Dr(wh),Ct=Dr(0);Se.ZERO=Ct;Zt=Dr(0,!0);Se.UZERO=Zt;on=Dr(1);Se.ONE=on;bu=Dr(1,!0);Se.UONE=bu;Gi=Dr(-1);Se.NEG_ONE=Gi;gu=be(-1,2147483647,!1);Se.MAX_VALUE=gu;yu=be(-1,-1,!0);Se.MAX_UNSIGNED_VALUE=yu;ct=be(0,-2147483648,!1);Se.MIN_VALUE=ct;R=Se.prototype;R.toInt=function(){return this.unsigned?this.low>>>0:this.low};R.toNumber=function(){return this.unsigned?(this.high>>>0)*an+(this.low>>>0):this.high*an+(this.low>>>0)};R.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(ct)){var o=Tt(t),e=this.div(o),r=e.mul(o).sub(this);return e.toString(t)+r.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var n=Tt(Lo(t,6),this.unsigned),s=this,a="";;){var u=s.div(n),l=s.sub(u.mul(n)).toInt()>>>0,c=l.toString(t);if(s=u,s.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};R.getHighBits=function(){return this.high};R.getHighBitsUnsigned=function(){return this.high>>>0};R.getLowBits=function(){return this.low};R.getLowBitsUnsigned=function(){return this.low>>>0};R.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ct)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,o=31;o>0&&!(t&1<<o);o--);return this.high!=0?o+33:o+1};R.isZero=function(){return this.high===0&&this.low===0};R.eqz=R.isZero;R.isNegative=function(){return!this.unsigned&&this.high<0};R.isPositive=function(){return this.unsigned||this.high>=0};R.isOdd=function(){return(this.low&1)===1};R.isEven=function(){return(this.low&1)===0};R.equals=function(t){return tt(t)||(t=Ft(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};R.eq=R.equals;R.notEquals=function(t){return!this.eq(t)};R.neq=R.notEquals;R.ne=R.notEquals;R.lessThan=function(t){return this.comp(t)<0};R.lt=R.lessThan;R.lessThanOrEqual=function(t){return this.comp(t)<=0};R.lte=R.lessThanOrEqual;R.le=R.lessThanOrEqual;R.greaterThan=function(t){return this.comp(t)>0};R.gt=R.greaterThan;R.greaterThanOrEqual=function(t){return this.comp(t)>=0};R.gte=R.greaterThanOrEqual;R.ge=R.greaterThanOrEqual;R.compare=function(t){if(tt(t)||(t=Ft(t)),this.eq(t))return 0;var o=this.isNegative(),e=t.isNegative();return o&&!e?-1:!o&&e?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};R.comp=R.compare;R.negate=function(){return!this.unsigned&&this.eq(ct)?ct:this.not().add(on)};R.neg=R.negate;R.add=function(t){tt(t)||(t=Ft(t));var o=this.high>>>16,e=this.high&65535,r=this.low>>>16,n=this.low&65535,s=t.high>>>16,a=t.high&65535,u=t.low>>>16,l=t.low&65535,c=0,b=0,y=0,w=0;return w+=n+l,y+=w>>>16,w&=65535,y+=r+u,b+=y>>>16,y&=65535,b+=e+a,c+=b>>>16,b&=65535,c+=o+s,c&=65535,be(y<<16|w,c<<16|b,this.unsigned)};R.subtract=function(t){return tt(t)||(t=Ft(t)),this.add(t.neg())};R.sub=R.subtract;R.multiply=function(t){if(this.isZero())return this;if(tt(t)||(t=Ft(t)),yt){var o=yt.mul(this.low,this.high,t.low,t.high);return be(o,yt.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?Zt:Ct;if(this.eq(ct))return t.isOdd()?ct:Ct;if(t.eq(ct))return this.isOdd()?ct:Ct;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(hu)&&t.lt(hu))return Tt(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,r=this.high&65535,n=this.low>>>16,s=this.low&65535,a=t.high>>>16,u=t.high&65535,l=t.low>>>16,c=t.low&65535,b=0,y=0,w=0,S=0;return S+=s*c,w+=S>>>16,S&=65535,w+=n*c,y+=w>>>16,w&=65535,w+=s*l,y+=w>>>16,w&=65535,y+=r*c,b+=y>>>16,y&=65535,y+=n*l,b+=y>>>16,y&=65535,y+=s*u,b+=y>>>16,y&=65535,b+=e*c+r*l+n*u+s*a,b&=65535,be(w<<16|S,b<<16|y,this.unsigned)};R.mul=R.multiply;R.divide=function(t){if(tt(t)||(t=Ft(t)),t.isZero())throw Error("division by zero");if(yt){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var o=(this.unsigned?yt.div_u:yt.div_s)(this.low,this.high,t.low,t.high);return be(o,yt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Zt:Ct;var e,r,n;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Zt;if(t.gt(this.shru(1)))return bu;n=Zt}else{if(this.eq(ct)){if(t.eq(on)||t.eq(Gi))return ct;if(t.eq(ct))return on;var s=this.shr(1);return e=s.div(t).shl(1),e.eq(Ct)?t.isNegative()?on:Gi:(r=this.sub(t.mul(e)),n=e.add(r.div(t)),n)}else if(t.eq(ct))return this.unsigned?Zt:Ct;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();n=Ct}for(r=this;r.gte(t);){e=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(e)/Math.LN2),u=a<=48?1:Lo(2,a-48),l=Tt(e),c=l.mul(t);c.isNegative()||c.gt(r);)e-=u,l=Tt(e,this.unsigned),c=l.mul(t);l.isZero()&&(l=on),n=n.add(l),r=r.sub(c)}return n};R.div=R.divide;R.modulo=function(t){if(tt(t)||(t=Ft(t)),yt){var o=(this.unsigned?yt.rem_u:yt.rem_s)(this.low,this.high,t.low,t.high);return be(o,yt.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};R.mod=R.modulo;R.rem=R.modulo;R.not=function(){return be(~this.low,~this.high,this.unsigned)};R.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};R.clz=R.countLeadingZeros;R.countTrailingZeros=function(){return this.low?lu(this.low):lu(this.high)+32};R.ctz=R.countTrailingZeros;R.and=function(t){return tt(t)||(t=Ft(t)),be(this.low&t.low,this.high&t.high,this.unsigned)};R.or=function(t){return tt(t)||(t=Ft(t)),be(this.low|t.low,this.high|t.high,this.unsigned)};R.xor=function(t){return tt(t)||(t=Ft(t)),be(this.low^t.low,this.high^t.high,this.unsigned)};R.shiftLeft=function(t){return tt(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?be(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):be(0,this.low<<t-32,this.unsigned)};R.shl=R.shiftLeft;R.shiftRight=function(t){return tt(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?be(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):be(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};R.shr=R.shiftRight;R.shiftRightUnsigned=function(t){return tt(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?be(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?be(this.high,0,this.unsigned):be(this.high>>>t-32,0,this.unsigned)};R.shru=R.shiftRightUnsigned;R.shr_u=R.shiftRightUnsigned;R.rotateLeft=function(t){var o;return tt(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?be(this.high,this.low,this.unsigned):t<32?(o=32-t,be(this.low<<t|this.high>>>o,this.high<<t|this.low>>>o,this.unsigned)):(t-=32,o=32-t,be(this.high<<t|this.low>>>o,this.low<<t|this.high>>>o,this.unsigned))};R.rotl=R.rotateLeft;R.rotateRight=function(t){var o;return tt(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?be(this.high,this.low,this.unsigned):t<32?(o=32-t,be(this.high<<o|this.low>>>t,this.low<<o|this.high>>>t,this.unsigned)):(t-=32,o=32-t,be(this.low<<o|this.high>>>t,this.high<<o|this.low>>>t,this.unsigned))};R.rotr=R.rotateRight;R.toSigned=function(){return this.unsigned?be(this.low,this.high,!1):this};R.toUnsigned=function(){return this.unsigned?this:be(this.low,this.high,!0)};R.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};R.toBytesLE=function(){var t=this.high,o=this.low;return[o&255,o>>>8&255,o>>>16&255,o>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};R.toBytesBE=function(){var t=this.high,o=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,o>>>24,o>>>16&255,o>>>8&255,o&255]};Se.fromBytes=function(t,o,e){return e?Se.fromBytesLE(t,o):Se.fromBytesBE(t,o)};Se.fromBytesLE=function(t,o){return new Se(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,o)};Se.fromBytesBE=function(t,o){return new Se(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],o)};Qt=Se});var O,Co=$(()=>{O={};O.Offset;O.Table;O.SIZEOF_SHORT=2;O.SIZEOF_INT=4;O.FILE_IDENTIFIER_LENGTH=4;O.SIZE_PREFIX_LENGTH=4;O.Encoding={UTF8_BYTES:1,UTF16_STRING:2};O.int32=new Int32Array(2);O.float32=new Float32Array(O.int32.buffer);O.float64=new Float64Array(O.int32.buffer);O.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;O.Long=function(i,t){this.low=i|0,this.high=t|0};O.Long.create=function(i,t){return i==0&&t==0?O.Long.ZERO:new O.Long(i,t)};O.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296};O.Long.prototype.equals=function(i){return this.low==i.low&&this.high==i.high};O.Long.ZERO=new O.Long(0,0);O.Builder=function(i){if(i)var t=i;else var t=1024;this.bb=O.ByteBuffer.allocate(t),this.space=t,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1};O.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1};O.Builder.prototype.forceDefaults=function(i){this.force_defaults=i};O.Builder.prototype.dataBuffer=function(){return this.bb};O.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())};O.Builder.prototype.prep=function(i,t){i>this.minalign&&(this.minalign=i);for(var o=~(this.bb.capacity()-this.space+t)+1&i-1;this.space<o+i+t;){var e=this.bb.capacity();this.bb=O.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-e}this.pad(o)};O.Builder.prototype.pad=function(i){for(var t=0;t<i;t++)this.bb.writeInt8(--this.space,0)};O.Builder.prototype.writeInt8=function(i){this.bb.writeInt8(this.space-=1,i)};O.Builder.prototype.writeInt16=function(i){this.bb.writeInt16(this.space-=2,i)};O.Builder.prototype.writeInt32=function(i){this.bb.writeInt32(this.space-=4,i)};O.Builder.prototype.writeInt64=function(i){this.bb.writeInt64(this.space-=8,i)};O.Builder.prototype.writeFloat32=function(i){this.bb.writeFloat32(this.space-=4,i)};O.Builder.prototype.writeFloat64=function(i){this.bb.writeFloat64(this.space-=8,i)};O.Builder.prototype.addInt8=function(i){this.prep(1,0),this.writeInt8(i)};O.Builder.prototype.addInt16=function(i){this.prep(2,0),this.writeInt16(i)};O.Builder.prototype.addInt32=function(i){this.prep(4,0),this.writeInt32(i)};O.Builder.prototype.addInt64=function(i){this.prep(8,0),this.writeInt64(i)};O.Builder.prototype.addFloat32=function(i){this.prep(4,0),this.writeFloat32(i)};O.Builder.prototype.addFloat64=function(i){this.prep(8,0),this.writeFloat64(i)};O.Builder.prototype.addFieldInt8=function(i,t,o){(this.force_defaults||t!=o)&&(this.addInt8(t),this.slot(i))};O.Builder.prototype.addFieldInt16=function(i,t,o){(this.force_defaults||t!=o)&&(this.addInt16(t),this.slot(i))};O.Builder.prototype.addFieldInt32=function(i,t,o){(this.force_defaults||t!=o)&&(this.addInt32(t),this.slot(i))};O.Builder.prototype.addFieldInt64=function(i,t,o){(this.force_defaults||!t.equals(o))&&(this.addInt64(t),this.slot(i))};O.Builder.prototype.addFieldFloat32=function(i,t,o){(this.force_defaults||t!=o)&&(this.addFloat32(t),this.slot(i))};O.Builder.prototype.addFieldFloat64=function(i,t,o){(this.force_defaults||t!=o)&&(this.addFloat64(t),this.slot(i))};O.Builder.prototype.addFieldOffset=function(i,t,o){(this.force_defaults||t!=o)&&(this.addOffset(t),this.slot(i))};O.Builder.prototype.addFieldStruct=function(i,t,o){t!=o&&(this.nested(t),this.slot(i))};O.Builder.prototype.nested=function(i){if(i!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")};O.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")};O.Builder.prototype.slot=function(i){this.vtable[i]=this.offset()};O.Builder.prototype.offset=function(){return this.bb.capacity()-this.space};O.Builder.growByteBuffer=function(i){var t=i.capacity();if(t&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var o=t<<1,e=O.ByteBuffer.allocate(o);return e.setPosition(o-t),e.bytes().set(i.bytes(),o-t),e};O.Builder.prototype.addOffset=function(i){this.prep(O.SIZEOF_INT,0),this.writeInt32(this.offset()-i+O.SIZEOF_INT)};O.Builder.prototype.startObject=function(i){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=i;for(var t=0;t<i;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()};O.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var i=this.offset(),t=this.vtable_in_use-1;t>=0&&this.vtable[t]==0;t--);for(var o=t+1;t>=0;t--)this.addInt16(this.vtable[t]!=0?i-this.vtable[t]:0);var e=2;this.addInt16(i-this.object_start);var r=(o+e)*O.SIZEOF_SHORT;this.addInt16(r);var n=0,s=this.space;e:for(t=0;t<this.vtables.length;t++){var a=this.bb.capacity()-this.vtables[t];if(r==this.bb.readInt16(a)){for(var u=O.SIZEOF_SHORT;u<r;u+=O.SIZEOF_SHORT)if(this.bb.readInt16(s+u)!=this.bb.readInt16(a+u))continue e;n=this.vtables[t];break}}return n?(this.space=this.bb.capacity()-i,this.bb.writeInt32(this.space,n-i)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-i,this.offset()-i)),this.isNested=!1,i};O.Builder.prototype.finish=function(i,t,o){var e=o?O.SIZE_PREFIX_LENGTH:0;if(t){var r=t;if(this.prep(this.minalign,O.SIZEOF_INT+O.FILE_IDENTIFIER_LENGTH+e),r.length!=O.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+O.FILE_IDENTIFIER_LENGTH);for(var n=O.FILE_IDENTIFIER_LENGTH-1;n>=0;n--)this.writeInt8(r.charCodeAt(n))}this.prep(this.minalign,O.SIZEOF_INT+e),this.addOffset(i),e&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)};O.Builder.prototype.finishSizePrefixed=function(i,t){this.finish(i,t,!0)};O.Builder.prototype.requiredField=function(i,t){var o=this.bb.capacity()-i,e=o-this.bb.readInt32(o),r=this.bb.readInt16(e+t)!=0;if(!r)throw new Error("FlatBuffers: field "+t+" must be set")};O.Builder.prototype.startVector=function(i,t,o){this.notNested(),this.vector_num_elems=t,this.prep(O.SIZEOF_INT,i*t),this.prep(o,i*t)};O.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()};O.Builder.prototype.createString=function(i){if(i instanceof Uint8Array)var t=i;else for(var t=[],o=0;o<i.length;){var e,r=i.charCodeAt(o++);if(r<55296||r>=56320)e=r;else{var n=i.charCodeAt(o++);e=(r<<10)+n+(65536-56623104-56320)}e<128?t.push(e):(e<2048?t.push(e>>6&31|192):(e<65536?t.push(e>>12&15|224):t.push(e>>18&7|240,e>>12&63|128),t.push(e>>6&63|128)),t.push(e&63|128))}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);for(var o=0,s=this.space,a=this.bb.bytes();o<t.length;o++)a[s++]=t[o];return this.endVector()};O.Builder.prototype.createLong=function(i,t){return O.Long.create(i,t)};O.ByteBuffer=function(i){this.bytes_=i,this.position_=0};O.ByteBuffer.allocate=function(i){return new O.ByteBuffer(new Uint8Array(i))};O.ByteBuffer.prototype.clear=function(){this.position_=0};O.ByteBuffer.prototype.bytes=function(){return this.bytes_};O.ByteBuffer.prototype.position=function(){return this.position_};O.ByteBuffer.prototype.setPosition=function(i){this.position_=i};O.ByteBuffer.prototype.capacity=function(){return this.bytes_.length};O.ByteBuffer.prototype.readInt8=function(i){return this.readUint8(i)<<24>>24};O.ByteBuffer.prototype.readUint8=function(i){return this.bytes_[i]};O.ByteBuffer.prototype.readInt16=function(i){return this.readUint16(i)<<16>>16};O.ByteBuffer.prototype.readUint16=function(i){return this.bytes_[i]|this.bytes_[i+1]<<8};O.ByteBuffer.prototype.readInt32=function(i){return this.bytes_[i]|this.bytes_[i+1]<<8|this.bytes_[i+2]<<16|this.bytes_[i+3]<<24};O.ByteBuffer.prototype.readUint32=function(i){return this.readInt32(i)>>>0};O.ByteBuffer.prototype.readInt64=function(i){return new O.Long(this.readInt32(i),this.readInt32(i+4))};O.ByteBuffer.prototype.readUint64=function(i){return new O.Long(this.readUint32(i),this.readUint32(i+4))};O.ByteBuffer.prototype.readFloat32=function(i){return O.int32[0]=this.readInt32(i),O.float32[0]};O.ByteBuffer.prototype.readFloat64=function(i){return O.int32[O.isLittleEndian?0:1]=this.readInt32(i),O.int32[O.isLittleEndian?1:0]=this.readInt32(i+4),O.float64[0]};O.ByteBuffer.prototype.writeInt8=function(i,t){this.bytes_[i]=t};O.ByteBuffer.prototype.writeUint8=function(i,t){this.bytes_[i]=t};O.ByteBuffer.prototype.writeInt16=function(i,t){this.bytes_[i]=t,this.bytes_[i+1]=t>>8};O.ByteBuffer.prototype.writeUint16=function(i,t){this.bytes_[i]=t,this.bytes_[i+1]=t>>8};O.ByteBuffer.prototype.writeInt32=function(i,t){this.bytes_[i]=t,this.bytes_[i+1]=t>>8,this.bytes_[i+2]=t>>16,this.bytes_[i+3]=t>>24};O.ByteBuffer.prototype.writeUint32=function(i,t){this.bytes_[i]=t,this.bytes_[i+1]=t>>8,this.bytes_[i+2]=t>>16,this.bytes_[i+3]=t>>24};O.ByteBuffer.prototype.writeInt64=function(i,t){this.writeInt32(i,t.low),this.writeInt32(i+4,t.high)};O.ByteBuffer.prototype.writeUint64=function(i,t){this.writeUint32(i,t.low),this.writeUint32(i+4,t.high)};O.ByteBuffer.prototype.writeFloat32=function(i,t){O.float32[0]=t,this.writeInt32(i,O.int32[0])};O.ByteBuffer.prototype.writeFloat64=function(i,t){O.float64[0]=t,this.writeInt32(i,O.int32[O.isLittleEndian?0:1]),this.writeInt32(i+4,O.int32[O.isLittleEndian?1:0])};O.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+O.SIZEOF_INT+O.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var i="",t=0;t<O.FILE_IDENTIFIER_LENGTH;t++)i+=String.fromCharCode(this.readInt8(this.position_+O.SIZEOF_INT+t));return i};O.ByteBuffer.prototype.__offset=function(i,t){var o=i-this.readInt32(i);return t<this.readInt16(o)?this.readInt16(o+t):0};O.ByteBuffer.prototype.__union=function(i,t){return i.bb_pos=t+this.readInt32(t),i.bb=this,i};O.ByteBuffer.prototype.__string=function(i,t){i+=this.readInt32(i);var o=this.readInt32(i),e="",r=0;if(i+=O.SIZEOF_INT,t===O.Encoding.UTF8_BYTES)return this.bytes_.subarray(i,i+o);for(;r<o;){var n,s=this.readUint8(i+r++);if(s<192)n=s;else{var a=this.readUint8(i+r++);if(s<224)n=(s&31)<<6|a&63;else{var u=this.readUint8(i+r++);if(s<240)n=(s&15)<<12|(a&63)<<6|u&63;else{var l=this.readUint8(i+r++);n=(s&7)<<18|(a&63)<<12|(u&63)<<6|l&63}}}n<65536?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1024-1)+56320))}return e};O.ByteBuffer.prototype.__indirect=function(i){return i+this.readInt32(i)};O.ByteBuffer.prototype.__vector=function(i){return i+this.readInt32(i)+O.SIZEOF_INT};O.ByteBuffer.prototype.__vector_len=function(i){return this.readInt32(i+this.readInt32(i))};O.ByteBuffer.prototype.__has_identifier=function(i){if(i.length!=O.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+O.FILE_IDENTIFIER_LENGTH);for(var t=0;t<O.FILE_IDENTIFIER_LENGTH;t++)if(i.charCodeAt(t)!=this.readInt8(this.position_+O.SIZEOF_INT+t))return!1;return!0};O.ByteBuffer.prototype.createLong=function(i,t){return O.Long.create(i,t)}});var Y,Bn=$(()=>{"use strict";Co();(t=>{let i;(e=>{let o;(n=>{let r;(N=>(N[N.UNDEFINED=0]="UNDEFINED",N[N.FLOAT=1]="FLOAT",N[N.INT=2]="INT",N[N.STRING=3]="STRING",N[N.TENSOR=4]="TENSOR",N[N.GRAPH=5]="GRAPH",N[N.FLOATS=6]="FLOATS",N[N.INTS=7]="INTS",N[N.STRINGS=8]="STRINGS",N[N.TENSORS=9]="TENSORS",N[N.GRAPHS=10]="GRAPHS",N[N.SPARSE_TENSOR=11]="SPARSE_TENSOR",N[N.SPARSE_TENSORS=12]="SPARSE_TENSORS"))(r=n.AttributeType||={})})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{let r;(l=>(l[l.UNKNOWN=0]="UNKNOWN",l[l.VALUE=1]="VALUE",l[l.PARAM=2]="PARAM"))(r=n.DimensionValueType||={})})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{let r;(J=>(J[J.UNDEFINED=0]="UNDEFINED",J[J.FLOAT=1]="FLOAT",J[J.UINT8=2]="UINT8",J[J.INT8=3]="INT8",J[J.UINT16=4]="UINT16",J[J.INT16=5]="INT16",J[J.INT32=6]="INT32",J[J.INT64=7]="INT64",J[J.STRING=8]="STRING",J[J.BOOL=9]="BOOL",J[J.FLOAT16=10]="FLOAT16",J[J.DOUBLE=11]="DOUBLE",J[J.UINT32=12]="UINT32",J[J.UINT64=13]="UINT64",J[J.COMPLEX64=14]="COMPLEX64",J[J.COMPLEX128=15]="COMPLEX128",J[J.BFLOAT16=16]="BFLOAT16",J[J.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",J[J.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",J[J.FLOAT8E5M2=19]="FLOAT8E5M2",J[J.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"))(r=n.TensorDataType||={})})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{let r;(u=>(u[u.Primitive=0]="Primitive",u[u.Fused=1]="Fused"))(r=n.NodeType||={})})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{let r;(c=>(c[c.NONE=0]="NONE",c[c.tensor_type=1]="tensor_type",c[c.sequence_type=2]="sequence_type",c[c.map_type=3]="map_type"))(r=n.TypeInfoValue||={})})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsShape(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsShape(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}dim(a,u){let l=this.bb.__offset(this.bb_pos,4);return l?(u||new t.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}dimLength(){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__vector_len(this.bb_pos+a):0}static startShape(a){a.startObject(1)}static addDim(a,u){a.addFieldOffset(0,u,0)}static createDimVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startDimVector(a,u){a.startVector(4,u,4)}static endShape(a){return a.endObject()}static createShape(a,u){return r.startShape(a),r.addDim(a,u),r.endShape(a)}}n.Shape=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsDimension(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsDimension(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}value(a){let u=this.bb.__offset(this.bb_pos,4);return u?(a||new t.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}denotation(a){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__string(this.bb_pos+u,a):null}static startDimension(a){a.startObject(2)}static addValue(a,u){a.addFieldOffset(0,u,0)}static addDenotation(a,u){a.addFieldOffset(1,u,0)}static endDimension(a){return a.endObject()}static createDimension(a,u,l){return r.startDimension(a),r.addValue(a,u),r.addDenotation(a,l),r.endDimension(a)}}n.Dimension=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsDimensionValue(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsDimensionValue(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}dimType(){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt8(this.bb_pos+a):0}dimValue(){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readInt64(this.bb_pos+a):this.bb.createLong(0,0)}dimParam(a){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__string(this.bb_pos+u,a):null}static startDimensionValue(a){a.startObject(3)}static addDimType(a,u){a.addFieldInt8(0,u,0)}static addDimValue(a,u){a.addFieldInt64(1,u,a.createLong(0,0))}static addDimParam(a,u){a.addFieldOffset(2,u,0)}static endDimensionValue(a){return a.endObject()}static createDimensionValue(a,u,l,c){return r.startDimensionValue(a),r.addDimType(a,u),r.addDimValue(a,l),r.addDimParam(a,c),r.endDimensionValue(a)}}n.DimensionValue=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsTensorTypeAndShape(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsTensorTypeAndShape(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}elemType(){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt32(this.bb_pos+a):0}shape(a){let u=this.bb.__offset(this.bb_pos,6);return u?(a||new t.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startTensorTypeAndShape(a){a.startObject(2)}static addElemType(a,u){a.addFieldInt32(0,u,0)}static addShape(a,u){a.addFieldOffset(1,u,0)}static endTensorTypeAndShape(a){return a.endObject()}static createTensorTypeAndShape(a,u,l){return r.startTensorTypeAndShape(a),r.addElemType(a,u),r.addShape(a,l),r.endTensorTypeAndShape(a)}}n.TensorTypeAndShape=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsMapType(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsMapType(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}keyType(){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt32(this.bb_pos+a):0}valueType(a){let u=this.bb.__offset(this.bb_pos,6);return u?(a||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startMapType(a){a.startObject(2)}static addKeyType(a,u){a.addFieldInt32(0,u,0)}static addValueType(a,u){a.addFieldOffset(1,u,0)}static endMapType(a){return a.endObject()}static createMapType(a,u,l){return r.startMapType(a),r.addKeyType(a,u),r.addValueType(a,l),r.endMapType(a)}}n.MapType=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsSequenceType(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsSequenceType(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}elemType(a){let u=this.bb.__offset(this.bb_pos,4);return u?(a||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startSequenceType(a){a.startObject(1)}static addElemType(a,u){a.addFieldOffset(0,u,0)}static endSequenceType(a){return a.endObject()}static createSequenceType(a,u){return r.startSequenceType(a),r.addElemType(a,u),r.endSequenceType(a)}}n.SequenceType=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(a,u,l,c){return a.prep(4,12),a.writeInt32(c),a.writeInt32(l),a.writeInt32(u),a.offset()}}n.EdgeEnd=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsNodeEdge(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsNodeEdge(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}nodeIndex(){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readUint32(this.bb_pos+a):0}inputEdges(a,u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+l)+a*12,this.bb):null}inputEdgesLength(){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}outputEdges(a,u){let l=this.bb.__offset(this.bb_pos,8);return l?(u||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+l)+a*12,this.bb):null}outputEdgesLength(){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}static startNodeEdge(a){a.startObject(3)}static addNodeIndex(a,u){a.addFieldInt32(0,u,0)}static addInputEdges(a,u){a.addFieldOffset(1,u,0)}static startInputEdgesVector(a,u){a.startVector(12,u,4)}static addOutputEdges(a,u){a.addFieldOffset(2,u,0)}static startOutputEdgesVector(a,u){a.startVector(12,u,4)}static endNodeEdge(a){return a.endObject()}static createNodeEdge(a,u,l,c){return r.startNodeEdge(a),r.addNodeIndex(a,u),r.addInputEdges(a,l),r.addOutputEdges(a,c),r.endNodeEdge(a)}}n.NodeEdge=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsNode(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsNode(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}name(a){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,a):null}docString(a){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__string(this.bb_pos+u,a):null}domain(a){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__string(this.bb_pos+u,a):null}sinceVersion(){let a=this.bb.__offset(this.bb_pos,10);return a?this.bb.readInt32(this.bb_pos+a):0}index(){let a=this.bb.__offset(this.bb_pos,12);return a?this.bb.readUint32(this.bb_pos+a):0}opType(a){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.__string(this.bb_pos+u,a):null}type(){let a=this.bb.__offset(this.bb_pos,16);return a?this.bb.readInt32(this.bb_pos+a):0}executionProviderType(a){let u=this.bb.__offset(this.bb_pos,18);return u?this.bb.__string(this.bb_pos+u,a):null}inputs(a,u){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+a*4,u):null}inputsLength(){let a=this.bb.__offset(this.bb_pos,20);return a?this.bb.__vector_len(this.bb_pos+a):0}outputs(a,u){let l=this.bb.__offset(this.bb_pos,22);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+a*4,u):null}outputsLength(){let a=this.bb.__offset(this.bb_pos,22);return a?this.bb.__vector_len(this.bb_pos+a):0}attributes(a,u){let l=this.bb.__offset(this.bb_pos,24);return l?(u||new t.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}attributesLength(){let a=this.bb.__offset(this.bb_pos,24);return a?this.bb.__vector_len(this.bb_pos+a):0}inputArgCounts(a){let u=this.bb.__offset(this.bb_pos,26);return u?this.bb.readInt32(this.bb.__vector(this.bb_pos+u)+a*4):0}inputArgCountsLength(){let a=this.bb.__offset(this.bb_pos,26);return a?this.bb.__vector_len(this.bb_pos+a):0}inputArgCountsArray(){let a=this.bb.__offset(this.bb_pos,26);return a?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null}implicitInputs(a,u){let l=this.bb.__offset(this.bb_pos,28);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+a*4,u):null}implicitInputsLength(){let a=this.bb.__offset(this.bb_pos,28);return a?this.bb.__vector_len(this.bb_pos+a):0}static startNode(a){a.startObject(13)}static addName(a,u){a.addFieldOffset(0,u,0)}static addDocString(a,u){a.addFieldOffset(1,u,0)}static addDomain(a,u){a.addFieldOffset(2,u,0)}static addSinceVersion(a,u){a.addFieldInt32(3,u,0)}static addIndex(a,u){a.addFieldInt32(4,u,0)}static addOpType(a,u){a.addFieldOffset(5,u,0)}static addType(a,u){a.addFieldInt32(6,u,0)}static addExecutionProviderType(a,u){a.addFieldOffset(7,u,0)}static addInputs(a,u){a.addFieldOffset(8,u,0)}static createInputsVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startInputsVector(a,u){a.startVector(4,u,4)}static addOutputs(a,u){a.addFieldOffset(9,u,0)}static createOutputsVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startOutputsVector(a,u){a.startVector(4,u,4)}static addAttributes(a,u){a.addFieldOffset(10,u,0)}static createAttributesVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startAttributesVector(a,u){a.startVector(4,u,4)}static addInputArgCounts(a,u){a.addFieldOffset(11,u,0)}static createInputArgCountsVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addInt32(u[l]);return a.endVector()}static startInputArgCountsVector(a,u){a.startVector(4,u,4)}static addImplicitInputs(a,u){a.addFieldOffset(12,u,0)}static createImplicitInputsVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startImplicitInputsVector(a,u){a.startVector(4,u,4)}static endNode(a){return a.endObject()}static createNode(a,u,l,c,b,y,w,S,I,F,k,L,N,te){return r.startNode(a),r.addName(a,u),r.addDocString(a,l),r.addDomain(a,c),r.addSinceVersion(a,b),r.addIndex(a,y),r.addOpType(a,w),r.addType(a,S),r.addExecutionProviderType(a,I),r.addInputs(a,F),r.addOutputs(a,k),r.addAttributes(a,L),r.addInputArgCounts(a,N),r.addImplicitInputs(a,te),r.endNode(a)}}n.Node=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsValueInfo(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsValueInfo(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}name(a){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,a):null}docString(a){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__string(this.bb_pos+u,a):null}type(a){let u=this.bb.__offset(this.bb_pos,8);return u?(a||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startValueInfo(a){a.startObject(3)}static addName(a,u){a.addFieldOffset(0,u,0)}static addDocString(a,u){a.addFieldOffset(1,u,0)}static addType(a,u){a.addFieldOffset(2,u,0)}static endValueInfo(a){return a.endObject()}static createValueInfo(a,u,l,c){return r.startValueInfo(a),r.addName(a,u),r.addDocString(a,l),r.addType(a,c),r.endValueInfo(a)}}n.ValueInfo=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsTypeInfo(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsTypeInfo(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}denotation(a){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,a):null}valueType(){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readUint8(this.bb_pos+a):0}value(a){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__union(a,this.bb_pos+u):null}static startTypeInfo(a){a.startObject(3)}static addDenotation(a,u){a.addFieldOffset(0,u,0)}static addValueType(a,u){a.addFieldInt8(1,u,0)}static addValue(a,u){a.addFieldOffset(2,u,0)}static endTypeInfo(a){return a.endObject()}static createTypeInfo(a,u,l,c){return r.startTypeInfo(a),r.addDenotation(a,u),r.addValueType(a,l),r.addValue(a,c),r.endTypeInfo(a)}}n.TypeInfo=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsOperatorSetId(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsOperatorSetId(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}domain(a){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,a):null}version(){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readInt64(this.bb_pos+a):this.bb.createLong(0,0)}static startOperatorSetId(a){a.startObject(2)}static addDomain(a,u){a.addFieldOffset(0,u,0)}static addVersion(a,u){a.addFieldInt64(1,u,a.createLong(0,0))}static endOperatorSetId(a){return a.endObject()}static createOperatorSetId(a,u,l){return r.startOperatorSetId(a),r.addDomain(a,u),r.addVersion(a,l),r.endOperatorSetId(a)}}n.OperatorSetId=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsTensor(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsTensor(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}name(a){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,a):null}docString(a){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__string(this.bb_pos+u,a):null}dims(a){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.readInt64(this.bb.__vector(this.bb_pos+u)+a*8):this.bb.createLong(0,0)}dimsLength(){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}dataType(){let a=this.bb.__offset(this.bb_pos,10);return a?this.bb.readInt32(this.bb_pos+a):0}rawData(a){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.readUint8(this.bb.__vector(this.bb_pos+u)+a):0}rawDataLength(){let a=this.bb.__offset(this.bb_pos,12);return a?this.bb.__vector_len(this.bb_pos+a):0}rawDataArray(){let a=this.bb.__offset(this.bb_pos,12);return a?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null}stringData(a,u){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+a*4,u):null}stringDataLength(){let a=this.bb.__offset(this.bb_pos,14);return a?this.bb.__vector_len(this.bb_pos+a):0}static startTensor(a){a.startObject(6)}static addName(a,u){a.addFieldOffset(0,u,0)}static addDocString(a,u){a.addFieldOffset(1,u,0)}static addDims(a,u){a.addFieldOffset(2,u,0)}static createDimsVector(a,u){a.startVector(8,u.length,8);for(let l=u.length-1;l>=0;l--)a.addInt64(u[l]);return a.endVector()}static startDimsVector(a,u){a.startVector(8,u,8)}static addDataType(a,u){a.addFieldInt32(3,u,0)}static addRawData(a,u){a.addFieldOffset(4,u,0)}static createRawDataVector(a,u){a.startVector(1,u.length,1);for(let l=u.length-1;l>=0;l--)a.addInt8(u[l]);return a.endVector()}static startRawDataVector(a,u){a.startVector(1,u,1)}static addStringData(a,u){a.addFieldOffset(5,u,0)}static createStringDataVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startStringDataVector(a,u){a.startVector(4,u,4)}static endTensor(a){return a.endObject()}static createTensor(a,u,l,c,b,y,w){return r.startTensor(a),r.addName(a,u),r.addDocString(a,l),r.addDims(a,c),r.addDataType(a,b),r.addRawData(a,y),r.addStringData(a,w),r.endTensor(a)}}n.Tensor=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsSparseTensor(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsSparseTensor(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}values(a){let u=this.bb.__offset(this.bb_pos,4);return u?(a||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}indices(a){let u=this.bb.__offset(this.bb_pos,6);return u?(a||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}dims(a){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.readInt64(this.bb.__vector(this.bb_pos+u)+a*8):this.bb.createLong(0,0)}dimsLength(){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}static startSparseTensor(a){a.startObject(3)}static addValues(a,u){a.addFieldOffset(0,u,0)}static addIndices(a,u){a.addFieldOffset(1,u,0)}static addDims(a,u){a.addFieldOffset(2,u,0)}static createDimsVector(a,u){a.startVector(8,u.length,8);for(let l=u.length-1;l>=0;l--)a.addInt64(u[l]);return a.endVector()}static startDimsVector(a,u){a.startVector(8,u,8)}static endSparseTensor(a){return a.endObject()}static createSparseTensor(a,u,l,c){return r.startSparseTensor(a),r.addValues(a,u),r.addIndices(a,l),r.addDims(a,c),r.endSparseTensor(a)}}n.SparseTensor=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsAttribute(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsAttribute(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}name(a){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,a):null}docString(a){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__string(this.bb_pos+u,a):null}type(){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.readInt32(this.bb_pos+a):0}f(){let a=this.bb.__offset(this.bb_pos,10);return a?this.bb.readFloat32(this.bb_pos+a):0}i(){let a=this.bb.__offset(this.bb_pos,12);return a?this.bb.readInt64(this.bb_pos+a):this.bb.createLong(0,0)}s(a){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.__string(this.bb_pos+u,a):null}t(a){let u=this.bb.__offset(this.bb_pos,16);return u?(a||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}g(a){let u=this.bb.__offset(this.bb_pos,18);return u?(a||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}floats(a){let u=this.bb.__offset(this.bb_pos,20);return u?this.bb.readFloat32(this.bb.__vector(this.bb_pos+u)+a*4):0}floatsLength(){let a=this.bb.__offset(this.bb_pos,20);return a?this.bb.__vector_len(this.bb_pos+a):0}floatsArray(){let a=this.bb.__offset(this.bb_pos,20);return a?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null}ints(a){let u=this.bb.__offset(this.bb_pos,22);return u?this.bb.readInt64(this.bb.__vector(this.bb_pos+u)+a*8):this.bb.createLong(0,0)}intsLength(){let a=this.bb.__offset(this.bb_pos,22);return a?this.bb.__vector_len(this.bb_pos+a):0}strings(a,u){let l=this.bb.__offset(this.bb_pos,24);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+a*4,u):null}stringsLength(){let a=this.bb.__offset(this.bb_pos,24);return a?this.bb.__vector_len(this.bb_pos+a):0}tensors(a,u){let l=this.bb.__offset(this.bb_pos,26);return l?(u||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}tensorsLength(){let a=this.bb.__offset(this.bb_pos,26);return a?this.bb.__vector_len(this.bb_pos+a):0}graphs(a,u){let l=this.bb.__offset(this.bb_pos,28);return l?(u||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}graphsLength(){let a=this.bb.__offset(this.bb_pos,28);return a?this.bb.__vector_len(this.bb_pos+a):0}static startAttribute(a){a.startObject(13)}static addName(a,u){a.addFieldOffset(0,u,0)}static addDocString(a,u){a.addFieldOffset(1,u,0)}static addType(a,u){a.addFieldInt32(2,u,0)}static addF(a,u){a.addFieldFloat32(3,u,0)}static addI(a,u){a.addFieldInt64(4,u,a.createLong(0,0))}static addS(a,u){a.addFieldOffset(5,u,0)}static addT(a,u){a.addFieldOffset(6,u,0)}static addG(a,u){a.addFieldOffset(7,u,0)}static addFloats(a,u){a.addFieldOffset(8,u,0)}static createFloatsVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addFloat32(u[l]);return a.endVector()}static startFloatsVector(a,u){a.startVector(4,u,4)}static addInts(a,u){a.addFieldOffset(9,u,0)}static createIntsVector(a,u){a.startVector(8,u.length,8);for(let l=u.length-1;l>=0;l--)a.addInt64(u[l]);return a.endVector()}static startIntsVector(a,u){a.startVector(8,u,8)}static addStrings(a,u){a.addFieldOffset(10,u,0)}static createStringsVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startStringsVector(a,u){a.startVector(4,u,4)}static addTensors(a,u){a.addFieldOffset(11,u,0)}static createTensorsVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startTensorsVector(a,u){a.startVector(4,u,4)}static addGraphs(a,u){a.addFieldOffset(12,u,0)}static createGraphsVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startGraphsVector(a,u){a.startVector(4,u,4)}static endAttribute(a){return a.endObject()}static createAttribute(a,u,l,c,b,y,w,S,I,F,k,L,N,te){return r.startAttribute(a),r.addName(a,u),r.addDocString(a,l),r.addType(a,c),r.addF(a,b),r.addI(a,y),r.addS(a,w),r.addT(a,S),r.addG(a,I),r.addFloats(a,F),r.addInts(a,k),r.addStrings(a,L),r.addTensors(a,N),r.addGraphs(a,te),r.endAttribute(a)}}n.Attribute=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsGraph(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsGraph(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}initializers(a,u){let l=this.bb.__offset(this.bb_pos,4);return l?(u||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}initializersLength(){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__vector_len(this.bb_pos+a):0}nodeArgs(a,u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new t.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}nodeArgsLength(){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}nodes(a,u){let l=this.bb.__offset(this.bb_pos,8);return l?(u||new t.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}nodesLength(){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}maxNodeIndex(){let a=this.bb.__offset(this.bb_pos,10);return a?this.bb.readUint32(this.bb_pos+a):0}nodeEdges(a,u){let l=this.bb.__offset(this.bb_pos,12);return l?(u||new t.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}nodeEdgesLength(){let a=this.bb.__offset(this.bb_pos,12);return a?this.bb.__vector_len(this.bb_pos+a):0}inputs(a,u){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+a*4,u):null}inputsLength(){let a=this.bb.__offset(this.bb_pos,14);return a?this.bb.__vector_len(this.bb_pos+a):0}outputs(a,u){let l=this.bb.__offset(this.bb_pos,16);return l?this.bb.__string(this.bb.__vector(this.bb_pos+l)+a*4,u):null}outputsLength(){let a=this.bb.__offset(this.bb_pos,16);return a?this.bb.__vector_len(this.bb_pos+a):0}sparseInitializers(a,u){let l=this.bb.__offset(this.bb_pos,18);return l?(u||new t.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}sparseInitializersLength(){let a=this.bb.__offset(this.bb_pos,18);return a?this.bb.__vector_len(this.bb_pos+a):0}static startGraph(a){a.startObject(8)}static addInitializers(a,u){a.addFieldOffset(0,u,0)}static createInitializersVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startInitializersVector(a,u){a.startVector(4,u,4)}static addNodeArgs(a,u){a.addFieldOffset(1,u,0)}static createNodeArgsVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startNodeArgsVector(a,u){a.startVector(4,u,4)}static addNodes(a,u){a.addFieldOffset(2,u,0)}static createNodesVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startNodesVector(a,u){a.startVector(4,u,4)}static addMaxNodeIndex(a,u){a.addFieldInt32(3,u,0)}static addNodeEdges(a,u){a.addFieldOffset(4,u,0)}static createNodeEdgesVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startNodeEdgesVector(a,u){a.startVector(4,u,4)}static addInputs(a,u){a.addFieldOffset(5,u,0)}static createInputsVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startInputsVector(a,u){a.startVector(4,u,4)}static addOutputs(a,u){a.addFieldOffset(6,u,0)}static createOutputsVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startOutputsVector(a,u){a.startVector(4,u,4)}static addSparseInitializers(a,u){a.addFieldOffset(7,u,0)}static createSparseInitializersVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startSparseInitializersVector(a,u){a.startVector(4,u,4)}static endGraph(a){return a.endObject()}static createGraph(a,u,l,c,b,y,w,S,I){return r.startGraph(a),r.addInitializers(a,u),r.addNodeArgs(a,l),r.addNodes(a,c),r.addMaxNodeIndex(a,b),r.addNodeEdges(a,y),r.addInputs(a,w),r.addOutputs(a,S),r.addSparseInitializers(a,I),r.endGraph(a)}}n.Graph=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsModel(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsModel(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}irVersion(){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt64(this.bb_pos+a):this.bb.createLong(0,0)}opsetImport(a,u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new t.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}opsetImportLength(){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}producerName(a){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__string(this.bb_pos+u,a):null}producerVersion(a){let u=this.bb.__offset(this.bb_pos,10);return u?this.bb.__string(this.bb_pos+u,a):null}domain(a){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.__string(this.bb_pos+u,a):null}modelVersion(){let a=this.bb.__offset(this.bb_pos,14);return a?this.bb.readInt64(this.bb_pos+a):this.bb.createLong(0,0)}docString(a){let u=this.bb.__offset(this.bb_pos,16);return u?this.bb.__string(this.bb_pos+u,a):null}graph(a){let u=this.bb.__offset(this.bb_pos,18);return u?(a||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}graphDocString(a){let u=this.bb.__offset(this.bb_pos,20);return u?this.bb.__string(this.bb_pos+u,a):null}static startModel(a){a.startObject(9)}static addIrVersion(a,u){a.addFieldInt64(0,u,a.createLong(0,0))}static addOpsetImport(a,u){a.addFieldOffset(1,u,0)}static createOpsetImportVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startOpsetImportVector(a,u){a.startVector(4,u,4)}static addProducerName(a,u){a.addFieldOffset(2,u,0)}static addProducerVersion(a,u){a.addFieldOffset(3,u,0)}static addDomain(a,u){a.addFieldOffset(4,u,0)}static addModelVersion(a,u){a.addFieldInt64(5,u,a.createLong(0,0))}static addDocString(a,u){a.addFieldOffset(6,u,0)}static addGraph(a,u){a.addFieldOffset(7,u,0)}static addGraphDocString(a,u){a.addFieldOffset(8,u,0)}static endModel(a){return a.endObject()}static createModel(a,u,l,c,b,y,w,S,I,F){return r.startModel(a),r.addIrVersion(a,u),r.addOpsetImport(a,l),r.addProducerName(a,c),r.addProducerVersion(a,b),r.addDomain(a,y),r.addModelVersion(a,w),r.addDocString(a,S),r.addGraph(a,I),r.addGraphDocString(a,F),r.endModel(a)}}n.Model=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsKernelCreateInfos(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsKernelCreateInfos(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}nodeIndices(a){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readUint32(this.bb.__vector(this.bb_pos+u)+a*4):0}nodeIndicesLength(){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__vector_len(this.bb_pos+a):0}nodeIndicesArray(){let a=this.bb.__offset(this.bb_pos,4);return a?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null}kernelDefHashes(a){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.readUint64(this.bb.__vector(this.bb_pos+u)+a*8):this.bb.createLong(0,0)}kernelDefHashesLength(){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}static startKernelCreateInfos(a){a.startObject(2)}static addNodeIndices(a,u){a.addFieldOffset(0,u,0)}static createNodeIndicesVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addInt32(u[l]);return a.endVector()}static startNodeIndicesVector(a,u){a.startVector(4,u,4)}static addKernelDefHashes(a,u){a.addFieldOffset(1,u,0)}static createKernelDefHashesVector(a,u){a.startVector(8,u.length,8);for(let l=u.length-1;l>=0;l--)a.addInt64(u[l]);return a.endVector()}static startKernelDefHashesVector(a,u){a.startVector(8,u,8)}static endKernelCreateInfos(a){return a.endObject()}static createKernelCreateInfos(a,u,l){return r.startKernelCreateInfos(a),r.addNodeIndices(a,u),r.addKernelDefHashes(a,l),r.endKernelCreateInfos(a)}}n.KernelCreateInfos=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsSubGraphSessionState(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsSubGraphSessionState(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}graphId(a){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,a):null}sessionState(a){let u=this.bb.__offset(this.bb_pos,6);return u?(a||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startSubGraphSessionState(a){a.startObject(2)}static addGraphId(a,u){a.addFieldOffset(0,u,0)}static addSessionState(a,u){a.addFieldOffset(1,u,0)}static endSubGraphSessionState(a){let u=a.endObject();return a.requiredField(u,4),u}static createSubGraphSessionState(a,u,l){return r.startSubGraphSessionState(a),r.addGraphId(a,u),r.addSessionState(a,l),r.endSubGraphSessionState(a)}}n.SubGraphSessionState=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsSessionState(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsSessionState(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}kernels(a){let u=this.bb.__offset(this.bb_pos,4);return u?(a||new t.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}subGraphSessionStates(a,u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new t.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}subGraphSessionStatesLength(){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}static startSessionState(a){a.startObject(2)}static addKernels(a,u){a.addFieldOffset(0,u,0)}static addSubGraphSessionStates(a,u){a.addFieldOffset(1,u,0)}static createSubGraphSessionStatesVector(a,u){a.startVector(4,u.length,4);for(let l=u.length-1;l>=0;l--)a.addOffset(u[l]);return a.endVector()}static startSubGraphSessionStatesVector(a,u){a.startVector(4,u,4)}static endSessionState(a){return a.endObject()}static createSessionState(a,u,l){return r.startSessionState(a),r.addKernels(a,u),r.addSubGraphSessionStates(a,l),r.endSessionState(a)}}n.SessionState=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={});(t=>{let i;(e=>{let o;(n=>{class r{constructor(){this.bb=null;this.bb_pos=0}__init(a,u){return this.bb_pos=a,this.bb=u,this}static getRootAsInferenceSession(a,u){return(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsInferenceSession(a,u){return a.setPosition(a.position()+O.SIZE_PREFIX_LENGTH),(u||new r).__init(a.readInt32(a.position())+a.position(),a)}static bufferHasIdentifier(a){return a.__has_identifier("ORTM")}ortVersion(a){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__string(this.bb_pos+u,a):null}model(a){let u=this.bb.__offset(this.bb_pos,6);return u?(a||new t.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}sessionState(a){let u=this.bb.__offset(this.bb_pos,8);return u?(a||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}static startInferenceSession(a){a.startObject(3)}static addOrtVersion(a,u){a.addFieldOffset(0,u,0)}static addModel(a,u){a.addFieldOffset(1,u,0)}static addSessionState(a,u){a.addFieldOffset(2,u,0)}static endInferenceSession(a){return a.endObject()}static finishInferenceSessionBuffer(a,u){a.finish(u,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(a,u){a.finish(u,"ORTM",!0)}static createInferenceSession(a,u,l,c){return r.startInferenceSession(a),r.addOrtVersion(a,u),r.addModel(a,l),r.addSessionState(a,c),r.endInferenceSession(a)}}n.InferenceSession=r})(o=e.fbs||={})})(i=t.experimental||={})})(Y||={})});var vu=Ie((i0,Tu)=>{"use strict";Tu.exports=_h;function _h(i,t){for(var o=new Array(arguments.length-1),e=0,r=2,n=!0;r<arguments.length;)o[e++]=arguments[r++];return new Promise(function(a,u){o[e]=function(c){if(n)if(n=!1,c)u(c);else{for(var b=new Array(arguments.length-1),y=0;y<b.length;)b[y++]=arguments[y];a.apply(null,b)}};try{i.apply(t||null,o)}catch(l){n&&(n=!1,u(l))}})}});var Ou=Ie(_u=>{"use strict";var Fo=_u;Fo.length=function(t){var o=t.length;if(!o)return 0;for(var e=0;--o%4>1&&t.charAt(o)==="=";)++e;return Math.ceil(t.length*3)/4-e};var sn=new Array(64),wu=new Array(123);for($t=0;$t<64;)wu[sn[$t]=$t<26?$t+65:$t<52?$t+71:$t<62?$t-4:$t-59|43]=$t++;var $t;Fo.encode=function(t,o,e){for(var r=null,n=[],s=0,a=0,u;o<e;){var l=t[o++];switch(a){case 0:n[s++]=sn[l>>2],u=(l&3)<<4,a=1;break;case 1:n[s++]=sn[u|l>>4],u=(l&15)<<2,a=2;break;case 2:n[s++]=sn[u|l>>6],n[s++]=sn[l&63],a=0;break}s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,n)),s=0)}return a&&(n[s++]=sn[u],n[s++]=61,a===1&&(n[s++]=61)),r?(s&&r.push(String.fromCharCode.apply(String,n.slice(0,s))),r.join("")):String.fromCharCode.apply(String,n.slice(0,s))};var xu="invalid encoding";Fo.decode=function(t,o,e){for(var r=e,n=0,s,a=0;a<t.length;){var u=t.charCodeAt(a++);if(u===61&&n>1)break;if((u=wu[u])===void 0)throw Error(xu);switch(n){case 0:s=u,n=1;break;case 1:o[e++]=s<<2|(u&48)>>4,s=u,n=2;break;case 2:o[e++]=(s&15)<<4|(u&60)>>2,s=u,n=3;break;case 3:o[e++]=(s&3)<<6|u,n=0;break}}if(n===1)throw Error(xu);return e-r};Fo.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}});var Iu=Ie((s0,Au)=>{"use strict";Au.exports=$o;function $o(){this._listeners={}}$o.prototype.on=function(t,o,e){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:o,ctx:e||this}),this};$o.prototype.off=function(t,o){if(t===void 0)this._listeners={};else if(o===void 0)this._listeners[t]=[];else for(var e=this._listeners[t],r=0;r<e.length;)e[r].fn===o?e.splice(r,1):++r;return this};$o.prototype.emit=function(t){var o=this._listeners[t];if(o){for(var e=[],r=1;r<arguments.length;)e.push(arguments[r++]);for(r=0;r<o.length;)o[r].fn.apply(o[r++].ctx,e)}return this}});var Fu=Ie((u0,Cu)=>{"use strict";Cu.exports=Su(Su);function Su(i){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),o=new Uint8Array(t.buffer),e=o[3]===128;function r(u,l,c){t[0]=u,l[c]=o[0],l[c+1]=o[1],l[c+2]=o[2],l[c+3]=o[3]}function n(u,l,c){t[0]=u,l[c]=o[3],l[c+1]=o[2],l[c+2]=o[1],l[c+3]=o[0]}i.writeFloatLE=e?r:n,i.writeFloatBE=e?n:r;function s(u,l){return o[0]=u[l],o[1]=u[l+1],o[2]=u[l+2],o[3]=u[l+3],t[0]}function a(u,l){return o[3]=u[l],o[2]=u[l+1],o[1]=u[l+2],o[0]=u[l+3],t[0]}i.readFloatLE=e?s:a,i.readFloatBE=e?a:s}():function(){function t(e,r,n,s){var a=r<0?1:0;if(a&&(r=-r),r===0)e(1/r>0?0:2147483648,n,s);else if(isNaN(r))e(2143289344,n,s);else if(r>34028234663852886e22)e((a<<31|2139095040)>>>0,n,s);else if(r<11754943508222875e-54)e((a<<31|Math.round(r/1401298464324817e-60))>>>0,n,s);else{var u=Math.floor(Math.log(r)/Math.LN2),l=Math.round(r*Math.pow(2,-u)*8388608)&8388607;e((a<<31|u+127<<23|l)>>>0,n,s)}}i.writeFloatLE=t.bind(null,Pu),i.writeFloatBE=t.bind(null,Eu);function o(e,r,n){var s=e(r,n),a=(s>>31)*2+1,u=s>>>23&255,l=s&8388607;return u===255?l?NaN:a*(1/0):u===0?a*1401298464324817e-60*l:a*Math.pow(2,u-150)*(l+8388608)}i.readFloatLE=o.bind(null,Du),i.readFloatBE=o.bind(null,Lu)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),o=new Uint8Array(t.buffer),e=o[7]===128;function r(u,l,c){t[0]=u,l[c]=o[0],l[c+1]=o[1],l[c+2]=o[2],l[c+3]=o[3],l[c+4]=o[4],l[c+5]=o[5],l[c+6]=o[6],l[c+7]=o[7]}function n(u,l,c){t[0]=u,l[c]=o[7],l[c+1]=o[6],l[c+2]=o[5],l[c+3]=o[4],l[c+4]=o[3],l[c+5]=o[2],l[c+6]=o[1],l[c+7]=o[0]}i.writeDoubleLE=e?r:n,i.writeDoubleBE=e?n:r;function s(u,l){return o[0]=u[l],o[1]=u[l+1],o[2]=u[l+2],o[3]=u[l+3],o[4]=u[l+4],o[5]=u[l+5],o[6]=u[l+6],o[7]=u[l+7],t[0]}function a(u,l){return o[7]=u[l],o[6]=u[l+1],o[5]=u[l+2],o[4]=u[l+3],o[3]=u[l+4],o[2]=u[l+5],o[1]=u[l+6],o[0]=u[l+7],t[0]}i.readDoubleLE=e?s:a,i.readDoubleBE=e?a:s}():function(){function t(e,r,n,s,a,u){var l=s<0?1:0;if(l&&(s=-s),s===0)e(0,a,u+r),e(1/s>0?0:2147483648,a,u+n);else if(isNaN(s))e(0,a,u+r),e(2146959360,a,u+n);else if(s>17976931348623157e292)e(0,a,u+r),e((l<<31|2146435072)>>>0,a,u+n);else{var c;if(s<22250738585072014e-324)c=s/5e-324,e(c>>>0,a,u+r),e((l<<31|c/4294967296)>>>0,a,u+n);else{var b=Math.floor(Math.log(s)/Math.LN2);b===1024&&(b=1023),c=s*Math.pow(2,-b),e(c*4503599627370496>>>0,a,u+r),e((l<<31|b+1023<<20|c*1048576&1048575)>>>0,a,u+n)}}}i.writeDoubleLE=t.bind(null,Pu,0,4),i.writeDoubleBE=t.bind(null,Eu,4,0);function o(e,r,n,s,a){var u=e(s,a+r),l=e(s,a+n),c=(l>>31)*2+1,b=l>>>20&2047,y=4294967296*(l&1048575)+u;return b===2047?y?NaN:c*(1/0):b===0?c*5e-324*y:c*Math.pow(2,b-1075)*(y+4503599627370496)}i.readDoubleLE=o.bind(null,Du,0,4),i.readDoubleBE=o.bind(null,Lu,4,0)}(),i}function Pu(i,t,o){t[o]=i&255,t[o+1]=i>>>8&255,t[o+2]=i>>>16&255,t[o+3]=i>>>24}function Eu(i,t,o){t[o]=i>>>24,t[o+1]=i>>>16&255,t[o+2]=i>>>8&255,t[o+3]=i&255}function Du(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16|i[t+3]<<24)>>>0}function Lu(i,t){return(i[t]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3])>>>0}});var $u=Ie((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(i){}return null}});var Bu=Ie(ku=>{"use strict";var Vi=ku;Vi.length=function(t){for(var o=0,e=0,r=0;r<t.length;++r)e=t.charCodeAt(r),e<128?o+=1:e<2048?o+=2:(e&64512)===55296&&(t.charCodeAt(r+1)&64512)===56320?(++r,o+=4):o+=3;return o};Vi.read=function(t,o,e){var r=e-o;if(r<1)return"";for(var n=null,s=[],a=0,u;o<e;)u=t[o++],u<128?s[a++]=u:u>191&&u<224?s[a++]=(u&31)<<6|t[o++]&63:u>239&&u<365?(u=((u&7)<<18|(t[o++]&63)<<12|(t[o++]&63)<<6|t[o++]&63)-65536,s[a++]=55296+(u>>10),s[a++]=56320+(u&1023)):s[a++]=(u&15)<<12|(t[o++]&63)<<6|t[o++]&63,a>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,s)),a=0);return n?(a&&n.push(String.fromCharCode.apply(String,s.slice(0,a))),n.join("")):String.fromCharCode.apply(String,s.slice(0,a))};Vi.write=function(t,o,e){for(var r=e,n,s,a=0;a<t.length;++a)n=t.charCodeAt(a),n<128?o[e++]=n:n<2048?(o[e++]=n>>6|192,o[e++]=n&63|128):(n&64512)===55296&&((s=t.charCodeAt(a+1))&64512)===56320?(n=65536+((n&1023)<<10)+(s&1023),++a,o[e++]=n>>18|240,o[e++]=n>>12&63|128,o[e++]=n>>6&63|128,o[e++]=n&63|128):(o[e++]=n>>12|224,o[e++]=n>>6&63|128,o[e++]=n&63|128);return e-r}});var Ru=Ie((f0,Nu)=>{"use strict";Nu.exports=Oh;function Oh(i,t,o){var e=o||8192,r=e>>>1,n=null,s=e;return function(u){if(u<1||u>r)return i(u);s+u>e&&(n=i(e),s=0);var l=t.call(n,s,s+=u);return s&7&&(s=(s|7)+1),l}}});var Gu=Ie((c0,Mu)=>{"use strict";Mu.exports=qe;var Nn=ur();function qe(i,t){this.lo=i>>>0,this.hi=t>>>0}var Lr=qe.zero=new qe(0,0);Lr.toNumber=function(){return 0};Lr.zzEncode=Lr.zzDecode=function(){return this};Lr.length=function(){return 1};var Ah=qe.zeroHash="\0\0\0\0\0\0\0\0";qe.fromNumber=function(t){if(t===0)return Lr;var o=t<0;o&&(t=-t);var e=t>>>0,r=(t-e)/4294967296>>>0;return o&&(r=~r>>>0,e=~e>>>0,++e>4294967295&&(e=0,++r>4294967295&&(r=0))),new qe(e,r)};qe.from=function(t){if(typeof t=="number")return qe.fromNumber(t);if(Nn.isString(t))if(Nn.Long)t=Nn.Long.fromString(t);else return qe.fromNumber(parseInt(t,10));return t.low||t.high?new qe(t.low>>>0,t.high>>>0):Lr};qe.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var o=~this.lo+1>>>0,e=~this.hi>>>0;return o||(e=e+1>>>0),-(o+e*4294967296)}return this.lo+this.hi*4294967296};qe.prototype.toLong=function(t){return Nn.Long?new Nn.Long(this.lo|0,this.hi|0,!!t):{low:this.lo|0,high:this.hi|0,unsigned:!!t}};var sr=String.prototype.charCodeAt;qe.fromHash=function(t){return t===Ah?Lr:new qe((sr.call(t,0)|sr.call(t,1)<<8|sr.call(t,2)<<16|sr.call(t,3)<<24)>>>0,(sr.call(t,4)|sr.call(t,5)<<8|sr.call(t,6)<<16|sr.call(t,7)<<24)>>>0)};qe.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};qe.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};qe.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};qe.prototype.length=function(){var t=this.lo,o=(this.lo>>>28|this.hi<<4)>>>0,e=this.hi>>>24;return e===0?o===0?t<16384?t<128?1:2:t<2097152?3:4:o<16384?o<128?5:6:o<2097152?7:8:e<128?9:10}});var ur=Ie(zi=>{"use strict";var X=zi;X.asPromise=vu();X.base64=Ou();X.EventEmitter=Iu();X.float=Fu();X.inquire=$u();X.utf8=Bu();X.pool=Ru();X.LongBits=Gu();X.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);X.global=X.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||zi;X.emptyArray=Object.freeze?Object.freeze([]):[];X.emptyObject=Object.freeze?Object.freeze({}):{};X.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};X.isString=function(t){return typeof t=="string"||t instanceof String};X.isObject=function(t){return t&&typeof t=="object"};X.isset=X.isSet=function(t,o){var e=t[o];return e!=null&&t.hasOwnProperty(o)?typeof e!="object"||(Array.isArray(e)?e.length:Object.keys(e).length)>0:!1};X.Buffer=function(){try{var i=X.inquire("buffer").Buffer;return i.prototype.utf8Write?i:null}catch{return null}}();X._Buffer_from=null;X._Buffer_allocUnsafe=null;X.newBuffer=function(t){return typeof t=="number"?X.Buffer?X._Buffer_allocUnsafe(t):new X.Array(t):X.Buffer?X._Buffer_from(t):typeof Uint8Array>"u"?t:new Uint8Array(t)};X.Array=typeof Uint8Array<"u"?Uint8Array:Array;X.Long=X.global.dcodeIO&&X.global.dcodeIO.Long||X.global.Long||X.inquire("long");X.key2Re=/^true|false|0|1$/;X.key32Re=/^-?(?:0|[1-9][0-9]*)$/;X.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;X.longToHash=function(t){return t?X.LongBits.from(t).toHash():X.LongBits.zeroHash};X.longFromHash=function(t,o){var e=X.LongBits.fromHash(t);return X.Long?X.Long.fromBits(e.lo,e.hi,o):e.toNumber(!!o)};function Uu(i,t,o){for(var e=Object.keys(t),r=0;r<e.length;++r)(i[e[r]]===void 0||!o)&&(i[e[r]]=t[e[r]]);return i}X.merge=Uu;X.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function Wu(i){function t(o,e){if(!(this instanceof t))return new t(o,e);Object.defineProperty(this,"message",{get:function(){return o}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),e&&Uu(this,e)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return i},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}X.newError=Wu;X.ProtocolError=Wu("ProtocolError");X.oneOfGetter=function(t){for(var o={},e=0;e<t.length;++e)o[t[e]]=1;return function(){for(var r=Object.keys(this),n=r.length-1;n>-1;--n)if(o[r[n]]===1&&this[r[n]]!==void 0&&this[r[n]]!==null)return r[n]}};X.oneOfSetter=function(t){return function(o){for(var e=0;e<t.length;++e)t[e]!==o&&delete this[t[e]]}};X.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};X._configure=function(){var i=X.Buffer;if(!i){X._Buffer_from=X._Buffer_allocUnsafe=null;return}X._Buffer_from=i.from!==Uint8Array.from&&i.from||function(o,e){return new i(o,e)},X._Buffer_allocUnsafe=i.allocUnsafe||function(o){return new i(o)}}});var Ji=Ie((d0,ju)=>{"use strict";ju.exports=he;var vt=ur(),Hi,ko=vt.LongBits,Vu=vt.base64,zu=vt.utf8;function Rn(i,t,o){this.fn=i,this.len=t,this.next=void 0,this.val=o}function qi(){}function Ih(i){this.head=i.head,this.tail=i.tail,this.len=i.len,this.next=i.states}function he(){this.len=0,this.head=new Rn(qi,0,0),this.tail=this.head,this.states=null}var Hu=function(){return vt.Buffer?function(){return(he.create=function(){return new Hi})()}:function(){return new he}};he.create=Hu();he.alloc=function(t){return new vt.Array(t)};vt.Array!==Array&&(he.alloc=vt.pool(he.alloc,vt.Array.prototype.subarray));he.prototype._push=function(t,o,e){return this.tail=this.tail.next=new Rn(t,o,e),this.len+=o,this};function Yi(i,t,o){t[o]=i&255}function Sh(i,t,o){for(;i>127;)t[o++]=i&127|128,i>>>=7;t[o]=i}function Xi(i,t){this.len=i,this.next=void 0,this.val=t}Xi.prototype=Object.create(Rn.prototype);Xi.prototype.fn=Sh;he.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new Xi((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};he.prototype.int32=function(t){return t<0?this._push(Ki,10,ko.fromNumber(t)):this.uint32(t)};he.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function Ki(i,t,o){for(;i.hi;)t[o++]=i.lo&127|128,i.lo=(i.lo>>>7|i.hi<<25)>>>0,i.hi>>>=7;for(;i.lo>127;)t[o++]=i.lo&127|128,i.lo=i.lo>>>7;t[o++]=i.lo}he.prototype.uint64=function(t){var o=ko.from(t);return this._push(Ki,o.length(),o)};he.prototype.int64=he.prototype.uint64;he.prototype.sint64=function(t){var o=ko.from(t).zzEncode();return this._push(Ki,o.length(),o)};he.prototype.bool=function(t){return this._push(Yi,1,t?1:0)};function ji(i,t,o){t[o]=i&255,t[o+1]=i>>>8&255,t[o+2]=i>>>16&255,t[o+3]=i>>>24}he.prototype.fixed32=function(t){return this._push(ji,4,t>>>0)};he.prototype.sfixed32=he.prototype.fixed32;he.prototype.fixed64=function(t){var o=ko.from(t);return this._push(ji,4,o.lo)._push(ji,4,o.hi)};he.prototype.sfixed64=he.prototype.fixed64;he.prototype.float=function(t){return this._push(vt.float.writeFloatLE,4,t)};he.prototype.double=function(t){return this._push(vt.float.writeDoubleLE,8,t)};var Ph=vt.Array.prototype.set?function(t,o,e){o.set(t,e)}:function(t,o,e){for(var r=0;r<t.length;++r)o[e+r]=t[r]};he.prototype.bytes=function(t){var o=t.length>>>0;if(!o)return this._push(Yi,1,0);if(vt.isString(t)){var e=he.alloc(o=Vu.length(t));Vu.decode(t,e,0),t=e}return this.uint32(o)._push(Ph,o,t)};he.prototype.string=function(t){var o=zu.length(t);return o?this.uint32(o)._push(zu.write,o,t):this._push(Yi,1,0)};he.prototype.fork=function(){return this.states=new Ih(this),this.head=this.tail=new Rn(qi,0,0),this.len=0,this};he.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Rn(qi,0,0),this.len=0),this};he.prototype.ldelim=function(){var t=this.head,o=this.tail,e=this.len;return this.reset().uint32(e),e&&(this.tail.next=t.next,this.tail=o,this.len+=e),this};he.prototype.finish=function(){for(var t=this.head.next,o=this.constructor.alloc(this.len),e=0;t;)t.fn(t.val,o,e),e+=t.len,t=t.next;return o};he._configure=function(i){Hi=i,he.create=Hu(),Hi._configure()}});var Xu=Ie((h0,Yu)=>{"use strict";Yu.exports=Mt;var qu=Ji();(Mt.prototype=Object.create(qu.prototype)).constructor=Mt;var lr=ur();function Mt(){qu.call(this)}Mt._configure=function(){Mt.alloc=lr._Buffer_allocUnsafe,Mt.writeBytesBuffer=lr.Buffer&&lr.Buffer.prototype instanceof Uint8Array&&lr.Buffer.prototype.set.name==="set"?function(t,o,e){o.set(t,e)}:function(t,o,e){if(t.copy)t.copy(o,e,0,t.length);else for(var r=0;r<t.length;)o[e++]=t[r++]}};Mt.prototype.bytes=function(t){lr.isString(t)&&(t=lr._Buffer_from(t,"base64"));var o=t.length>>>0;return this.uint32(o),o&&this._push(Mt.writeBytesBuffer,o,t),this};function Eh(i,t,o){i.length<40?lr.utf8.write(i,t,o):t.utf8Write?t.utf8Write(i,o):t.write(i,o)}Mt.prototype.string=function(t){var o=lr.Buffer.byteLength(t);return this.uint32(o),o&&this._push(Eh,o,t),this};Mt._configure()});var ea=Ie((m0,el)=>{"use strict";el.exports=Be;var Gt=ur(),Qi,Zu=Gt.LongBits,Dh=Gt.utf8;function kt(i,t){return RangeError("index out of range: "+i.pos+" + "+(t||1)+" > "+i.len)}function Be(i){this.buf=i,this.pos=0,this.len=i.length}var Ku=typeof Uint8Array<"u"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new Be(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new Be(t);throw Error("illegal buffer")},Qu=function(){return Gt.Buffer?function(o){return(Be.create=function(r){return Gt.Buffer.isBuffer(r)?new Qi(r):Ku(r)})(o)}:Ku};Be.create=Qu();Be.prototype._slice=Gt.Array.prototype.subarray||Gt.Array.prototype.slice;Be.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,kt(this,10);return t}}();Be.prototype.int32=function(){return this.uint32()|0};Be.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function Zi(){var i=new Zu(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(i.lo=(i.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return i;if(i.lo=(i.lo|(this.buf[this.pos]&127)<<28)>>>0,i.hi=(i.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return i;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw kt(this);if(i.lo=(i.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return i}return i.lo=(i.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,i}if(this.len-this.pos>4){for(;t<5;++t)if(i.hi=(i.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return i}else for(;t<5;++t){if(this.pos>=this.len)throw kt(this);if(i.hi=(i.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return i}throw Error("invalid varint encoding")}Be.prototype.bool=function(){return this.uint32()!==0};function Bo(i,t){return(i[t-4]|i[t-3]<<8|i[t-2]<<16|i[t-1]<<24)>>>0}Be.prototype.fixed32=function(){if(this.pos+4>this.len)throw kt(this,4);return Bo(this.buf,this.pos+=4)};Be.prototype.sfixed32=function(){if(this.pos+4>this.len)throw kt(this,4);return Bo(this.buf,this.pos+=4)|0};function Ju(){if(this.pos+8>this.len)throw kt(this,8);return new Zu(Bo(this.buf,this.pos+=4),Bo(this.buf,this.pos+=4))}Be.prototype.float=function(){if(this.pos+4>this.len)throw kt(this,4);var t=Gt.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};Be.prototype.double=function(){if(this.pos+8>this.len)throw kt(this,4);var t=Gt.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};Be.prototype.bytes=function(){var t=this.uint32(),o=this.pos,e=this.pos+t;if(e>this.len)throw kt(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(o,e):o===e?new this.buf.constructor(0):this._slice.call(this.buf,o,e)};Be.prototype.string=function(){var t=this.bytes();return Dh.read(t,0,t.length)};Be.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw kt(this,t);this.pos+=t}else do if(this.pos>=this.len)throw kt(this);while(this.buf[this.pos++]&128);return this};Be.prototype.skipType=function(i){switch(i){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(i=this.uint32()&7)!==4;)this.skipType(i);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+i+" at offset "+this.pos)}return this};Be._configure=function(i){Qi=i,Be.create=Qu(),Qi._configure();var t=Gt.Long?"toLong":"toNumber";Gt.merge(Be.prototype,{int64:function(){return Zi.call(this)[t](!1)},uint64:function(){return Zi.call(this)[t](!0)},sint64:function(){return Zi.call(this).zzDecode()[t](!1)},fixed64:function(){return Ju.call(this)[t](!0)},sfixed64:function(){return Ju.call(this)[t](!1)}})}});var ol=Ie((b0,nl)=>{"use strict";nl.exports=Cr;var rl=ea();(Cr.prototype=Object.create(rl.prototype)).constructor=Cr;var tl=ur();function Cr(i){rl.call(this,i)}Cr._configure=function(){tl.Buffer&&(Cr.prototype._slice=tl.Buffer.prototype.slice)};Cr.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};Cr._configure()});var al=Ie((g0,il)=>{"use strict";il.exports=Mn;var ta=ur();(Mn.prototype=Object.create(ta.EventEmitter.prototype)).constructor=Mn;function Mn(i,t,o){if(typeof i!="function")throw TypeError("rpcImpl must be a function");ta.EventEmitter.call(this),this.rpcImpl=i,this.requestDelimited=!!t,this.responseDelimited=!!o}Mn.prototype.rpcCall=function i(t,o,e,r,n){if(!r)throw TypeError("request must be specified");var s=this;if(!n)return ta.asPromise(i,s,t,o,e,r);if(!s.rpcImpl){setTimeout(function(){n(Error("already ended"))},0);return}try{return s.rpcImpl(t,o[s.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(u,l){if(u)return s.emit("error",u,t),n(u);if(l===null){s.end(!0);return}if(!(l instanceof e))try{l=e[s.responseDelimited?"decodeDelimited":"decode"](l)}catch(c){return s.emit("error",c,t),n(c)}return s.emit("data",l,t),n(null,l)})}catch(a){s.emit("error",a,t),setTimeout(function(){n(a)},0);return}};Mn.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var ul=Ie(sl=>{"use strict";var Lh=sl;Lh.Service=al()});var fl=Ie((T0,ll)=>{"use strict";ll.exports={}});var dl=Ie(pl=>{"use strict";var pt=pl;pt.build="minimal";pt.Writer=Ji();pt.BufferWriter=Xu();pt.Reader=ea();pt.BufferReader=ol();pt.util=ur();pt.rpc=ul();pt.roots=fl();pt.configure=cl;function cl(){pt.util._configure(),pt.Writer._configure(pt.BufferWriter),pt.Reader._configure(pt.BufferReader)}cl()});var ml=Ie((x0,hl)=>{"use strict";hl.exports=dl()});var un=Ie((w0,bl)=>{"use strict";var Pe=ml(),G=Pe.Reader,Ne=Pe.Writer,x=Pe.util,g=Pe.roots.default||(Pe.roots.default={});g.onnx=function(){var i={};return i.Version=function(){var t={},o=Object.create(t);return o[t[0]="_START_VERSION"]=0,o[t[1]="IR_VERSION_2017_10_10"]=1,o[t[2]="IR_VERSION_2017_10_30"]=2,o[t[3]="IR_VERSION_2017_11_3"]=3,o[t[4]="IR_VERSION_2019_1_22"]=4,o[t[5]="IR_VERSION_2019_3_18"]=5,o[t[6]="IR_VERSION_2019_9_19"]=6,o[t[7]="IR_VERSION_2020_5_8"]=7,o[t[8]="IR_VERSION_2021_7_30"]=8,o[t[9]="IR_VERSION"]=9,o}(),i.AttributeProto=function(){function t(o){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.name="",t.prototype.refAttrName="",t.prototype.docString="",t.prototype.type=0,t.prototype.f=0,t.prototype.i=x.Long?x.Long.fromBits(0,0,!1):0,t.prototype.s=x.newBuffer([]),t.prototype.t=null,t.prototype.g=null,t.prototype.sparseTensor=null,t.prototype.tp=null,t.prototype.floats=x.emptyArray,t.prototype.ints=x.emptyArray,t.prototype.strings=x.emptyArray,t.prototype.tensors=x.emptyArray,t.prototype.graphs=x.emptyArray,t.prototype.sparseTensors=x.emptyArray,t.prototype.typeProtos=x.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ne.create()),e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(10).string(e.name),e.f!=null&&Object.hasOwnProperty.call(e,"f")&&r.uint32(21).float(e.f),e.i!=null&&Object.hasOwnProperty.call(e,"i")&&r.uint32(24).int64(e.i),e.s!=null&&Object.hasOwnProperty.call(e,"s")&&r.uint32(34).bytes(e.s),e.t!=null&&Object.hasOwnProperty.call(e,"t")&&g.onnx.TensorProto.encode(e.t,r.uint32(42).fork()).ldelim(),e.g!=null&&Object.hasOwnProperty.call(e,"g")&&g.onnx.GraphProto.encode(e.g,r.uint32(50).fork()).ldelim(),e.floats!=null&&e.floats.length){r.uint32(58).fork();for(var n=0;n<e.floats.length;++n)r.float(e.floats[n]);r.ldelim()}if(e.ints!=null&&e.ints.length){r.uint32(66).fork();for(var n=0;n<e.ints.length;++n)r.int64(e.ints[n]);r.ldelim()}if(e.strings!=null&&e.strings.length)for(var n=0;n<e.strings.length;++n)r.uint32(74).bytes(e.strings[n]);if(e.tensors!=null&&e.tensors.length)for(var n=0;n<e.tensors.length;++n)g.onnx.TensorProto.encode(e.tensors[n],r.uint32(82).fork()).ldelim();if(e.graphs!=null&&e.graphs.length)for(var n=0;n<e.graphs.length;++n)g.onnx.GraphProto.encode(e.graphs[n],r.uint32(90).fork()).ldelim();if(e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(106).string(e.docString),e.tp!=null&&Object.hasOwnProperty.call(e,"tp")&&g.onnx.TypeProto.encode(e.tp,r.uint32(114).fork()).ldelim(),e.typeProtos!=null&&e.typeProtos.length)for(var n=0;n<e.typeProtos.length;++n)g.onnx.TypeProto.encode(e.typeProtos[n],r.uint32(122).fork()).ldelim();if(e.type!=null&&Object.hasOwnProperty.call(e,"type")&&r.uint32(160).int32(e.type),e.refAttrName!=null&&Object.hasOwnProperty.call(e,"refAttrName")&&r.uint32(170).string(e.refAttrName),e.sparseTensor!=null&&Object.hasOwnProperty.call(e,"sparseTensor")&&g.onnx.SparseTensorProto.encode(e.sparseTensor,r.uint32(178).fork()).ldelim(),e.sparseTensors!=null&&e.sparseTensors.length)for(var n=0;n<e.sparseTensors.length;++n)g.onnx.SparseTensorProto.encode(e.sparseTensors[n],r.uint32(186).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.AttributeProto;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:{s.name=e.string();break}case 21:{s.refAttrName=e.string();break}case 13:{s.docString=e.string();break}case 20:{s.type=e.int32();break}case 2:{s.f=e.float();break}case 3:{s.i=e.int64();break}case 4:{s.s=e.bytes();break}case 5:{s.t=g.onnx.TensorProto.decode(e,e.uint32());break}case 6:{s.g=g.onnx.GraphProto.decode(e,e.uint32());break}case 22:{s.sparseTensor=g.onnx.SparseTensorProto.decode(e,e.uint32());break}case 14:{s.tp=g.onnx.TypeProto.decode(e,e.uint32());break}case 7:{if(s.floats&&s.floats.length||(s.floats=[]),(a&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.floats.push(e.float());else s.floats.push(e.float());break}case 8:{if(s.ints&&s.ints.length||(s.ints=[]),(a&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.ints.push(e.int64());else s.ints.push(e.int64());break}case 9:{s.strings&&s.strings.length||(s.strings=[]),s.strings.push(e.bytes());break}case 10:{s.tensors&&s.tensors.length||(s.tensors=[]),s.tensors.push(g.onnx.TensorProto.decode(e,e.uint32()));break}case 11:{s.graphs&&s.graphs.length||(s.graphs=[]),s.graphs.push(g.onnx.GraphProto.decode(e,e.uint32()));break}case 23:{s.sparseTensors&&s.sparseTensors.length||(s.sparseTensors=[]),s.sparseTensors.push(g.onnx.SparseTensorProto.decode(e,e.uint32()));break}case 15:{s.typeProtos&&s.typeProtos.length||(s.typeProtos=[]),s.typeProtos.push(g.onnx.TypeProto.decode(e,e.uint32()));break}default:e.skipType(a&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.name!=null&&e.hasOwnProperty("name")&&!x.isString(e.name))return"name: string expected";if(e.refAttrName!=null&&e.hasOwnProperty("refAttrName")&&!x.isString(e.refAttrName))return"refAttrName: string expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!x.isString(e.docString))return"docString: string expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:break}if(e.f!=null&&e.hasOwnProperty("f")&&typeof e.f!="number")return"f: number expected";if(e.i!=null&&e.hasOwnProperty("i")&&!x.isInteger(e.i)&&!(e.i&&x.isInteger(e.i.low)&&x.isInteger(e.i.high)))return"i: integer|Long expected";if(e.s!=null&&e.hasOwnProperty("s")&&!(e.s&&typeof e.s.length=="number"||x.isString(e.s)))return"s: buffer expected";if(e.t!=null&&e.hasOwnProperty("t")){var r=g.onnx.TensorProto.verify(e.t);if(r)return"t."+r}if(e.g!=null&&e.hasOwnProperty("g")){var r=g.onnx.GraphProto.verify(e.g);if(r)return"g."+r}if(e.sparseTensor!=null&&e.hasOwnProperty("sparseTensor")){var r=g.onnx.SparseTensorProto.verify(e.sparseTensor);if(r)return"sparseTensor."+r}if(e.tp!=null&&e.hasOwnProperty("tp")){var r=g.onnx.TypeProto.verify(e.tp);if(r)return"tp."+r}if(e.floats!=null&&e.hasOwnProperty("floats")){if(!Array.isArray(e.floats))return"floats: array expected";for(var n=0;n<e.floats.length;++n)if(typeof e.floats[n]!="number")return"floats: number[] expected"}if(e.ints!=null&&e.hasOwnProperty("ints")){if(!Array.isArray(e.ints))return"ints: array expected";for(var n=0;n<e.ints.length;++n)if(!x.isInteger(e.ints[n])&&!(e.ints[n]&&x.isInteger(e.ints[n].low)&&x.isInteger(e.ints[n].high)))return"ints: integer|Long[] expected"}if(e.strings!=null&&e.hasOwnProperty("strings")){if(!Array.isArray(e.strings))return"strings: array expected";for(var n=0;n<e.strings.length;++n)if(!(e.strings[n]&&typeof e.strings[n].length=="number"||x.isString(e.strings[n])))return"strings: buffer[] expected"}if(e.tensors!=null&&e.hasOwnProperty("tensors")){if(!Array.isArray(e.tensors))return"tensors: array expected";for(var n=0;n<e.tensors.length;++n){var r=g.onnx.TensorProto.verify(e.tensors[n]);if(r)return"tensors."+r}}if(e.graphs!=null&&e.hasOwnProperty("graphs")){if(!Array.isArray(e.graphs))return"graphs: array expected";for(var n=0;n<e.graphs.length;++n){var r=g.onnx.GraphProto.verify(e.graphs[n]);if(r)return"graphs."+r}}if(e.sparseTensors!=null&&e.hasOwnProperty("sparseTensors")){if(!Array.isArray(e.sparseTensors))return"sparseTensors: array expected";for(var n=0;n<e.sparseTensors.length;++n){var r=g.onnx.SparseTensorProto.verify(e.sparseTensors[n]);if(r)return"sparseTensors."+r}}if(e.typeProtos!=null&&e.hasOwnProperty("typeProtos")){if(!Array.isArray(e.typeProtos))return"typeProtos: array expected";for(var n=0;n<e.typeProtos.length;++n){var r=g.onnx.TypeProto.verify(e.typeProtos[n]);if(r)return"typeProtos."+r}}return null},t.fromObject=function(e){if(e instanceof g.onnx.AttributeProto)return e;var r=new g.onnx.AttributeProto;switch(e.name!=null&&(r.name=String(e.name)),e.refAttrName!=null&&(r.refAttrName=String(e.refAttrName)),e.docString!=null&&(r.docString=String(e.docString)),e.type){default:if(typeof e.type=="number"){r.type=e.type;break}break;case"UNDEFINED":case 0:r.type=0;break;case"FLOAT":case 1:r.type=1;break;case"INT":case 2:r.type=2;break;case"STRING":case 3:r.type=3;break;case"TENSOR":case 4:r.type=4;break;case"GRAPH":case 5:r.type=5;break;case"SPARSE_TENSOR":case 11:r.type=11;break;case"TYPE_PROTO":case 13:r.type=13;break;case"FLOATS":case 6:r.type=6;break;case"INTS":case 7:r.type=7;break;case"STRINGS":case 8:r.type=8;break;case"TENSORS":case 9:r.type=9;break;case"GRAPHS":case 10:r.type=10;break;case"SPARSE_TENSORS":case 12:r.type=12;break;case"TYPE_PROTOS":case 14:r.type=14;break}if(e.f!=null&&(r.f=Number(e.f)),e.i!=null&&(x.Long?(r.i=x.Long.fromValue(e.i)).unsigned=!1:typeof e.i=="string"?r.i=parseInt(e.i,10):typeof e.i=="number"?r.i=e.i:typeof e.i=="object"&&(r.i=new x.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber())),e.s!=null&&(typeof e.s=="string"?x.base64.decode(e.s,r.s=x.newBuffer(x.base64.length(e.s)),0):e.s.length>=0&&(r.s=e.s)),e.t!=null){if(typeof e.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");r.t=g.onnx.TensorProto.fromObject(e.t)}if(e.g!=null){if(typeof e.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");r.g=g.onnx.GraphProto.fromObject(e.g)}if(e.sparseTensor!=null){if(typeof e.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");r.sparseTensor=g.onnx.SparseTensorProto.fromObject(e.sparseTensor)}if(e.tp!=null){if(typeof e.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");r.tp=g.onnx.TypeProto.fromObject(e.tp)}if(e.floats){if(!Array.isArray(e.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");r.floats=[];for(var n=0;n<e.floats.length;++n)r.floats[n]=Number(e.floats[n])}if(e.ints){if(!Array.isArray(e.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");r.ints=[];for(var n=0;n<e.ints.length;++n)x.Long?(r.ints[n]=x.Long.fromValue(e.ints[n])).unsigned=!1:typeof e.ints[n]=="string"?r.ints[n]=parseInt(e.ints[n],10):typeof e.ints[n]=="number"?r.ints[n]=e.ints[n]:typeof e.ints[n]=="object"&&(r.ints[n]=new x.LongBits(e.ints[n].low>>>0,e.ints[n].high>>>0).toNumber())}if(e.strings){if(!Array.isArray(e.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");r.strings=[];for(var n=0;n<e.strings.length;++n)typeof e.strings[n]=="string"?x.base64.decode(e.strings[n],r.strings[n]=x.newBuffer(x.base64.length(e.strings[n])),0):e.strings[n].length>=0&&(r.strings[n]=e.strings[n])}if(e.tensors){if(!Array.isArray(e.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");r.tensors=[];for(var n=0;n<e.tensors.length;++n){if(typeof e.tensors[n]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");r.tensors[n]=g.onnx.TensorProto.fromObject(e.tensors[n])}}if(e.graphs){if(!Array.isArray(e.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");r.graphs=[];for(var n=0;n<e.graphs.length;++n){if(typeof e.graphs[n]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");r.graphs[n]=g.onnx.GraphProto.fromObject(e.graphs[n])}}if(e.sparseTensors){if(!Array.isArray(e.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");r.sparseTensors=[];for(var n=0;n<e.sparseTensors.length;++n){if(typeof e.sparseTensors[n]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");r.sparseTensors[n]=g.onnx.SparseTensorProto.fromObject(e.sparseTensors[n])}}if(e.typeProtos){if(!Array.isArray(e.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");r.typeProtos=[];for(var n=0;n<e.typeProtos.length;++n){if(typeof e.typeProtos[n]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");r.typeProtos[n]=g.onnx.TypeProto.fromObject(e.typeProtos[n])}}return r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.floats=[],n.ints=[],n.strings=[],n.tensors=[],n.graphs=[],n.typeProtos=[],n.sparseTensors=[]),r.defaults){if(n.name="",n.f=0,x.Long){var s=new x.Long(0,0,!1);n.i=r.longs===String?s.toString():r.longs===Number?s.toNumber():s}else n.i=r.longs===String?"0":0;r.bytes===String?n.s="":(n.s=[],r.bytes!==Array&&(n.s=x.newBuffer(n.s))),n.t=null,n.g=null,n.docString="",n.tp=null,n.type=r.enums===String?"UNDEFINED":0,n.refAttrName="",n.sparseTensor=null}if(e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.f!=null&&e.hasOwnProperty("f")&&(n.f=r.json&&!isFinite(e.f)?String(e.f):e.f),e.i!=null&&e.hasOwnProperty("i")&&(typeof e.i=="number"?n.i=r.longs===String?String(e.i):e.i:n.i=r.longs===String?x.Long.prototype.toString.call(e.i):r.longs===Number?new x.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber():e.i),e.s!=null&&e.hasOwnProperty("s")&&(n.s=r.bytes===String?x.base64.encode(e.s,0,e.s.length):r.bytes===Array?Array.prototype.slice.call(e.s):e.s),e.t!=null&&e.hasOwnProperty("t")&&(n.t=g.onnx.TensorProto.toObject(e.t,r)),e.g!=null&&e.hasOwnProperty("g")&&(n.g=g.onnx.GraphProto.toObject(e.g,r)),e.floats&&e.floats.length){n.floats=[];for(var a=0;a<e.floats.length;++a)n.floats[a]=r.json&&!isFinite(e.floats[a])?String(e.floats[a]):e.floats[a]}if(e.ints&&e.ints.length){n.ints=[];for(var a=0;a<e.ints.length;++a)typeof e.ints[a]=="number"?n.ints[a]=r.longs===String?String(e.ints[a]):e.ints[a]:n.ints[a]=r.longs===String?x.Long.prototype.toString.call(e.ints[a]):r.longs===Number?new x.LongBits(e.ints[a].low>>>0,e.ints[a].high>>>0).toNumber():e.ints[a]}if(e.strings&&e.strings.length){n.strings=[];for(var a=0;a<e.strings.length;++a)n.strings[a]=r.bytes===String?x.base64.encode(e.strings[a],0,e.strings[a].length):r.bytes===Array?Array.prototype.slice.call(e.strings[a]):e.strings[a]}if(e.tensors&&e.tensors.length){n.tensors=[];for(var a=0;a<e.tensors.length;++a)n.tensors[a]=g.onnx.TensorProto.toObject(e.tensors[a],r)}if(e.graphs&&e.graphs.length){n.graphs=[];for(var a=0;a<e.graphs.length;++a)n.graphs[a]=g.onnx.GraphProto.toObject(e.graphs[a],r)}if(e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.tp!=null&&e.hasOwnProperty("tp")&&(n.tp=g.onnx.TypeProto.toObject(e.tp,r)),e.typeProtos&&e.typeProtos.length){n.typeProtos=[];for(var a=0;a<e.typeProtos.length;++a)n.typeProtos[a]=g.onnx.TypeProto.toObject(e.typeProtos[a],r)}if(e.type!=null&&e.hasOwnProperty("type")&&(n.type=r.enums===String?g.onnx.AttributeProto.AttributeType[e.type]===void 0?e.type:g.onnx.AttributeProto.AttributeType[e.type]:e.type),e.refAttrName!=null&&e.hasOwnProperty("refAttrName")&&(n.refAttrName=e.refAttrName),e.sparseTensor!=null&&e.hasOwnProperty("sparseTensor")&&(n.sparseTensor=g.onnx.SparseTensorProto.toObject(e.sparseTensor,r)),e.sparseTensors&&e.sparseTensors.length){n.sparseTensors=[];for(var a=0;a<e.sparseTensors.length;++a)n.sparseTensors[a]=g.onnx.SparseTensorProto.toObject(e.sparseTensors[a],r)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.AttributeProto"},t.AttributeType=function(){var o={},e=Object.create(o);return e[o[0]="UNDEFINED"]=0,e[o[1]="FLOAT"]=1,e[o[2]="INT"]=2,e[o[3]="STRING"]=3,e[o[4]="TENSOR"]=4,e[o[5]="GRAPH"]=5,e[o[11]="SPARSE_TENSOR"]=11,e[o[13]="TYPE_PROTO"]=13,e[o[6]="FLOATS"]=6,e[o[7]="INTS"]=7,e[o[8]="STRINGS"]=8,e[o[9]="TENSORS"]=9,e[o[10]="GRAPHS"]=10,e[o[12]="SPARSE_TENSORS"]=12,e[o[14]="TYPE_PROTOS"]=14,e}(),t}(),i.ValueInfoProto=function(){function t(o){if(o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.name="",t.prototype.type=null,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(e,r){return r||(r=Ne.create()),e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(10).string(e.name),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&g.onnx.TypeProto.encode(e.type,r.uint32(18).fork()).ldelim(),e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(26).string(e.docString),r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.ValueInfoProto;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:{s.name=e.string();break}case 2:{s.type=g.onnx.TypeProto.decode(e,e.uint32());break}case 3:{s.docString=e.string();break}default:e.skipType(a&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.name!=null&&e.hasOwnProperty("name")&&!x.isString(e.name))return"name: string expected";if(e.type!=null&&e.hasOwnProperty("type")){var r=g.onnx.TypeProto.verify(e.type);if(r)return"type."+r}return e.docString!=null&&e.hasOwnProperty("docString")&&!x.isString(e.docString)?"docString: string expected":null},t.fromObject=function(e){if(e instanceof g.onnx.ValueInfoProto)return e;var r=new g.onnx.ValueInfoProto;if(e.name!=null&&(r.name=String(e.name)),e.type!=null){if(typeof e.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");r.type=g.onnx.TypeProto.fromObject(e.type)}return e.docString!=null&&(r.docString=String(e.docString)),r},t.toObject=function(e,r){r||(r={});var n={};return r.defaults&&(n.name="",n.type=null,n.docString=""),e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.type!=null&&e.hasOwnProperty("type")&&(n.type=g.onnx.TypeProto.toObject(e.type,r)),e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.ValueInfoProto"},t}(),i.NodeProto=function(){function t(o){if(this.input=[],this.output=[],this.attribute=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.input=x.emptyArray,t.prototype.output=x.emptyArray,t.prototype.name="",t.prototype.opType="",t.prototype.domain="",t.prototype.attribute=x.emptyArray,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ne.create()),e.input!=null&&e.input.length)for(var n=0;n<e.input.length;++n)r.uint32(10).string(e.input[n]);if(e.output!=null&&e.output.length)for(var n=0;n<e.output.length;++n)r.uint32(18).string(e.output[n]);if(e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(26).string(e.name),e.opType!=null&&Object.hasOwnProperty.call(e,"opType")&&r.uint32(34).string(e.opType),e.attribute!=null&&e.attribute.length)for(var n=0;n<e.attribute.length;++n)g.onnx.AttributeProto.encode(e.attribute[n],r.uint32(42).fork()).ldelim();return e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(50).string(e.docString),e.domain!=null&&Object.hasOwnProperty.call(e,"domain")&&r.uint32(58).string(e.domain),r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.NodeProto;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:{s.input&&s.input.length||(s.input=[]),s.input.push(e.string());break}case 2:{s.output&&s.output.length||(s.output=[]),s.output.push(e.string());break}case 3:{s.name=e.string();break}case 4:{s.opType=e.string();break}case 7:{s.domain=e.string();break}case 5:{s.attribute&&s.attribute.length||(s.attribute=[]),s.attribute.push(g.onnx.AttributeProto.decode(e,e.uint32()));break}case 6:{s.docString=e.string();break}default:e.skipType(a&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.input!=null&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var r=0;r<e.input.length;++r)if(!x.isString(e.input[r]))return"input: string[] expected"}if(e.output!=null&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(var r=0;r<e.output.length;++r)if(!x.isString(e.output[r]))return"output: string[] expected"}if(e.name!=null&&e.hasOwnProperty("name")&&!x.isString(e.name))return"name: string expected";if(e.opType!=null&&e.hasOwnProperty("opType")&&!x.isString(e.opType))return"opType: string expected";if(e.domain!=null&&e.hasOwnProperty("domain")&&!x.isString(e.domain))return"domain: string expected";if(e.attribute!=null&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(var r=0;r<e.attribute.length;++r){var n=g.onnx.AttributeProto.verify(e.attribute[r]);if(n)return"attribute."+n}}return e.docString!=null&&e.hasOwnProperty("docString")&&!x.isString(e.docString)?"docString: string expected":null},t.fromObject=function(e){if(e instanceof g.onnx.NodeProto)return e;var r=new g.onnx.NodeProto;if(e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.NodeProto.input: array expected");r.input=[];for(var n=0;n<e.input.length;++n)r.input[n]=String(e.input[n])}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.NodeProto.output: array expected");r.output=[];for(var n=0;n<e.output.length;++n)r.output[n]=String(e.output[n])}if(e.name!=null&&(r.name=String(e.name)),e.opType!=null&&(r.opType=String(e.opType)),e.domain!=null&&(r.domain=String(e.domain)),e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");r.attribute=[];for(var n=0;n<e.attribute.length;++n){if(typeof e.attribute[n]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");r.attribute[n]=g.onnx.AttributeProto.fromObject(e.attribute[n])}}return e.docString!=null&&(r.docString=String(e.docString)),r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.input=[],n.output=[],n.attribute=[]),r.defaults&&(n.name="",n.opType="",n.docString="",n.domain=""),e.input&&e.input.length){n.input=[];for(var s=0;s<e.input.length;++s)n.input[s]=e.input[s]}if(e.output&&e.output.length){n.output=[];for(var s=0;s<e.output.length;++s)n.output[s]=e.output[s]}if(e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.opType!=null&&e.hasOwnProperty("opType")&&(n.opType=e.opType),e.attribute&&e.attribute.length){n.attribute=[];for(var s=0;s<e.attribute.length;++s)n.attribute[s]=g.onnx.AttributeProto.toObject(e.attribute[s],r)}return e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.domain!=null&&e.hasOwnProperty("domain")&&(n.domain=e.domain),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.NodeProto"},t}(),i.TrainingInfoProto=function(){function t(o){if(this.initializationBinding=[],this.updateBinding=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.initialization=null,t.prototype.algorithm=null,t.prototype.initializationBinding=x.emptyArray,t.prototype.updateBinding=x.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ne.create()),e.initialization!=null&&Object.hasOwnProperty.call(e,"initialization")&&g.onnx.GraphProto.encode(e.initialization,r.uint32(10).fork()).ldelim(),e.algorithm!=null&&Object.hasOwnProperty.call(e,"algorithm")&&g.onnx.GraphProto.encode(e.algorithm,r.uint32(18).fork()).ldelim(),e.initializationBinding!=null&&e.initializationBinding.length)for(var n=0;n<e.initializationBinding.length;++n)g.onnx.StringStringEntryProto.encode(e.initializationBinding[n],r.uint32(26).fork()).ldelim();if(e.updateBinding!=null&&e.updateBinding.length)for(var n=0;n<e.updateBinding.length;++n)g.onnx.StringStringEntryProto.encode(e.updateBinding[n],r.uint32(34).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.TrainingInfoProto;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:{s.initialization=g.onnx.GraphProto.decode(e,e.uint32());break}case 2:{s.algorithm=g.onnx.GraphProto.decode(e,e.uint32());break}case 3:{s.initializationBinding&&s.initializationBinding.length||(s.initializationBinding=[]),s.initializationBinding.push(g.onnx.StringStringEntryProto.decode(e,e.uint32()));break}case 4:{s.updateBinding&&s.updateBinding.length||(s.updateBinding=[]),s.updateBinding.push(g.onnx.StringStringEntryProto.decode(e,e.uint32()));break}default:e.skipType(a&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.initialization!=null&&e.hasOwnProperty("initialization")){var r=g.onnx.GraphProto.verify(e.initialization);if(r)return"initialization."+r}if(e.algorithm!=null&&e.hasOwnProperty("algorithm")){var r=g.onnx.GraphProto.verify(e.algorithm);if(r)return"algorithm."+r}if(e.initializationBinding!=null&&e.hasOwnProperty("initializationBinding")){if(!Array.isArray(e.initializationBinding))return"initializationBinding: array expected";for(var n=0;n<e.initializationBinding.length;++n){var r=g.onnx.StringStringEntryProto.verify(e.initializationBinding[n]);if(r)return"initializationBinding."+r}}if(e.updateBinding!=null&&e.hasOwnProperty("updateBinding")){if(!Array.isArray(e.updateBinding))return"updateBinding: array expected";for(var n=0;n<e.updateBinding.length;++n){var r=g.onnx.StringStringEntryProto.verify(e.updateBinding[n]);if(r)return"updateBinding."+r}}return null},t.fromObject=function(e){if(e instanceof g.onnx.TrainingInfoProto)return e;var r=new g.onnx.TrainingInfoProto;if(e.initialization!=null){if(typeof e.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");r.initialization=g.onnx.GraphProto.fromObject(e.initialization)}if(e.algorithm!=null){if(typeof e.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");r.algorithm=g.onnx.GraphProto.fromObject(e.algorithm)}if(e.initializationBinding){if(!Array.isArray(e.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");r.initializationBinding=[];for(var n=0;n<e.initializationBinding.length;++n){if(typeof e.initializationBinding[n]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");r.initializationBinding[n]=g.onnx.StringStringEntryProto.fromObject(e.initializationBinding[n])}}if(e.updateBinding){if(!Array.isArray(e.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");r.updateBinding=[];for(var n=0;n<e.updateBinding.length;++n){if(typeof e.updateBinding[n]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");r.updateBinding[n]=g.onnx.StringStringEntryProto.fromObject(e.updateBinding[n])}}return r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.initializationBinding=[],n.updateBinding=[]),r.defaults&&(n.initialization=null,n.algorithm=null),e.initialization!=null&&e.hasOwnProperty("initialization")&&(n.initialization=g.onnx.GraphProto.toObject(e.initialization,r)),e.algorithm!=null&&e.hasOwnProperty("algorithm")&&(n.algorithm=g.onnx.GraphProto.toObject(e.algorithm,r)),e.initializationBinding&&e.initializationBinding.length){n.initializationBinding=[];for(var s=0;s<e.initializationBinding.length;++s)n.initializationBinding[s]=g.onnx.StringStringEntryProto.toObject(e.initializationBinding[s],r)}if(e.updateBinding&&e.updateBinding.length){n.updateBinding=[];for(var s=0;s<e.updateBinding.length;++s)n.updateBinding[s]=g.onnx.StringStringEntryProto.toObject(e.updateBinding[s],r)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.TrainingInfoProto"},t}(),i.ModelProto=function(){function t(o){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.irVersion=x.Long?x.Long.fromBits(0,0,!1):0,t.prototype.opsetImport=x.emptyArray,t.prototype.producerName="",t.prototype.producerVersion="",t.prototype.domain="",t.prototype.modelVersion=x.Long?x.Long.fromBits(0,0,!1):0,t.prototype.docString="",t.prototype.graph=null,t.prototype.metadataProps=x.emptyArray,t.prototype.trainingInfo=x.emptyArray,t.prototype.functions=x.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ne.create()),e.irVersion!=null&&Object.hasOwnProperty.call(e,"irVersion")&&r.uint32(8).int64(e.irVersion),e.producerName!=null&&Object.hasOwnProperty.call(e,"producerName")&&r.uint32(18).string(e.producerName),e.producerVersion!=null&&Object.hasOwnProperty.call(e,"producerVersion")&&r.uint32(26).string(e.producerVersion),e.domain!=null&&Object.hasOwnProperty.call(e,"domain")&&r.uint32(34).string(e.domain),e.modelVersion!=null&&Object.hasOwnProperty.call(e,"modelVersion")&&r.uint32(40).int64(e.modelVersion),e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(50).string(e.docString),e.graph!=null&&Object.hasOwnProperty.call(e,"graph")&&g.onnx.GraphProto.encode(e.graph,r.uint32(58).fork()).ldelim(),e.opsetImport!=null&&e.opsetImport.length)for(var n=0;n<e.opsetImport.length;++n)g.onnx.OperatorSetIdProto.encode(e.opsetImport[n],r.uint32(66).fork()).ldelim();if(e.metadataProps!=null&&e.metadataProps.length)for(var n=0;n<e.metadataProps.length;++n)g.onnx.StringStringEntryProto.encode(e.metadataProps[n],r.uint32(114).fork()).ldelim();if(e.trainingInfo!=null&&e.trainingInfo.length)for(var n=0;n<e.trainingInfo.length;++n)g.onnx.TrainingInfoProto.encode(e.trainingInfo[n],r.uint32(162).fork()).ldelim();if(e.functions!=null&&e.functions.length)for(var n=0;n<e.functions.length;++n)g.onnx.FunctionProto.encode(e.functions[n],r.uint32(202).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.ModelProto;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:{s.irVersion=e.int64();break}case 8:{s.opsetImport&&s.opsetImport.length||(s.opsetImport=[]),s.opsetImport.push(g.onnx.OperatorSetIdProto.decode(e,e.uint32()));break}case 2:{s.producerName=e.string();break}case 3:{s.producerVersion=e.string();break}case 4:{s.domain=e.string();break}case 5:{s.modelVersion=e.int64();break}case 6:{s.docString=e.string();break}case 7:{s.graph=g.onnx.GraphProto.decode(e,e.uint32());break}case 14:{s.metadataProps&&s.metadataProps.length||(s.metadataProps=[]),s.metadataProps.push(g.onnx.StringStringEntryProto.decode(e,e.uint32()));break}case 20:{s.trainingInfo&&s.trainingInfo.length||(s.trainingInfo=[]),s.trainingInfo.push(g.onnx.TrainingInfoProto.decode(e,e.uint32()));break}case 25:{s.functions&&s.functions.length||(s.functions=[]),s.functions.push(g.onnx.FunctionProto.decode(e,e.uint32()));break}default:e.skipType(a&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.irVersion!=null&&e.hasOwnProperty("irVersion")&&!x.isInteger(e.irVersion)&&!(e.irVersion&&x.isInteger(e.irVersion.low)&&x.isInteger(e.irVersion.high)))return"irVersion: integer|Long expected";if(e.opsetImport!=null&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(var r=0;r<e.opsetImport.length;++r){var n=g.onnx.OperatorSetIdProto.verify(e.opsetImport[r]);if(n)return"opsetImport."+n}}if(e.producerName!=null&&e.hasOwnProperty("producerName")&&!x.isString(e.producerName))return"producerName: string expected";if(e.producerVersion!=null&&e.hasOwnProperty("producerVersion")&&!x.isString(e.producerVersion))return"producerVersion: string expected";if(e.domain!=null&&e.hasOwnProperty("domain")&&!x.isString(e.domain))return"domain: string expected";if(e.modelVersion!=null&&e.hasOwnProperty("modelVersion")&&!x.isInteger(e.modelVersion)&&!(e.modelVersion&&x.isInteger(e.modelVersion.low)&&x.isInteger(e.modelVersion.high)))return"modelVersion: integer|Long expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!x.isString(e.docString))return"docString: string expected";if(e.graph!=null&&e.hasOwnProperty("graph")){var n=g.onnx.GraphProto.verify(e.graph);if(n)return"graph."+n}if(e.metadataProps!=null&&e.hasOwnProperty("metadataProps")){if(!Array.isArray(e.metadataProps))return"metadataProps: array expected";for(var r=0;r<e.metadataProps.length;++r){var n=g.onnx.StringStringEntryProto.verify(e.metadataProps[r]);if(n)return"metadataProps."+n}}if(e.trainingInfo!=null&&e.hasOwnProperty("trainingInfo")){if(!Array.isArray(e.trainingInfo))return"trainingInfo: array expected";for(var r=0;r<e.trainingInfo.length;++r){var n=g.onnx.TrainingInfoProto.verify(e.trainingInfo[r]);if(n)return"trainingInfo."+n}}if(e.functions!=null&&e.hasOwnProperty("functions")){if(!Array.isArray(e.functions))return"functions: array expected";for(var r=0;r<e.functions.length;++r){var n=g.onnx.FunctionProto.verify(e.functions[r]);if(n)return"functions."+n}}return null},t.fromObject=function(e){if(e instanceof g.onnx.ModelProto)return e;var r=new g.onnx.ModelProto;if(e.irVersion!=null&&(x.Long?(r.irVersion=x.Long.fromValue(e.irVersion)).unsigned=!1:typeof e.irVersion=="string"?r.irVersion=parseInt(e.irVersion,10):typeof e.irVersion=="number"?r.irVersion=e.irVersion:typeof e.irVersion=="object"&&(r.irVersion=new x.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber())),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");r.opsetImport=[];for(var n=0;n<e.opsetImport.length;++n){if(typeof e.opsetImport[n]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");r.opsetImport[n]=g.onnx.OperatorSetIdProto.fromObject(e.opsetImport[n])}}if(e.producerName!=null&&(r.producerName=String(e.producerName)),e.producerVersion!=null&&(r.producerVersion=String(e.producerVersion)),e.domain!=null&&(r.domain=String(e.domain)),e.modelVersion!=null&&(x.Long?(r.modelVersion=x.Long.fromValue(e.modelVersion)).unsigned=!1:typeof e.modelVersion=="string"?r.modelVersion=parseInt(e.modelVersion,10):typeof e.modelVersion=="number"?r.modelVersion=e.modelVersion:typeof e.modelVersion=="object"&&(r.modelVersion=new x.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber())),e.docString!=null&&(r.docString=String(e.docString)),e.graph!=null){if(typeof e.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");r.graph=g.onnx.GraphProto.fromObject(e.graph)}if(e.metadataProps){if(!Array.isArray(e.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");r.metadataProps=[];for(var n=0;n<e.metadataProps.length;++n){if(typeof e.metadataProps[n]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");r.metadataProps[n]=g.onnx.StringStringEntryProto.fromObject(e.metadataProps[n])}}if(e.trainingInfo){if(!Array.isArray(e.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");r.trainingInfo=[];for(var n=0;n<e.trainingInfo.length;++n){if(typeof e.trainingInfo[n]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");r.trainingInfo[n]=g.onnx.TrainingInfoProto.fromObject(e.trainingInfo[n])}}if(e.functions){if(!Array.isArray(e.functions))throw TypeError(".onnx.ModelProto.functions: array expected");r.functions=[];for(var n=0;n<e.functions.length;++n){if(typeof e.functions[n]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");r.functions[n]=g.onnx.FunctionProto.fromObject(e.functions[n])}}return r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.opsetImport=[],n.metadataProps=[],n.trainingInfo=[],n.functions=[]),r.defaults){if(x.Long){var s=new x.Long(0,0,!1);n.irVersion=r.longs===String?s.toString():r.longs===Number?s.toNumber():s}else n.irVersion=r.longs===String?"0":0;if(n.producerName="",n.producerVersion="",n.domain="",x.Long){var s=new x.Long(0,0,!1);n.modelVersion=r.longs===String?s.toString():r.longs===Number?s.toNumber():s}else n.modelVersion=r.longs===String?"0":0;n.docString="",n.graph=null}if(e.irVersion!=null&&e.hasOwnProperty("irVersion")&&(typeof e.irVersion=="number"?n.irVersion=r.longs===String?String(e.irVersion):e.irVersion:n.irVersion=r.longs===String?x.Long.prototype.toString.call(e.irVersion):r.longs===Number?new x.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber():e.irVersion),e.producerName!=null&&e.hasOwnProperty("producerName")&&(n.producerName=e.producerName),e.producerVersion!=null&&e.hasOwnProperty("producerVersion")&&(n.producerVersion=e.producerVersion),e.domain!=null&&e.hasOwnProperty("domain")&&(n.domain=e.domain),e.modelVersion!=null&&e.hasOwnProperty("modelVersion")&&(typeof e.modelVersion=="number"?n.modelVersion=r.longs===String?String(e.modelVersion):e.modelVersion:n.modelVersion=r.longs===String?x.Long.prototype.toString.call(e.modelVersion):r.longs===Number?new x.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber():e.modelVersion),e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.graph!=null&&e.hasOwnProperty("graph")&&(n.graph=g.onnx.GraphProto.toObject(e.graph,r)),e.opsetImport&&e.opsetImport.length){n.opsetImport=[];for(var a=0;a<e.opsetImport.length;++a)n.opsetImport[a]=g.onnx.OperatorSetIdProto.toObject(e.opsetImport[a],r)}if(e.metadataProps&&e.metadataProps.length){n.metadataProps=[];for(var a=0;a<e.metadataProps.length;++a)n.metadataProps[a]=g.onnx.StringStringEntryProto.toObject(e.metadataProps[a],r)}if(e.trainingInfo&&e.trainingInfo.length){n.trainingInfo=[];for(var a=0;a<e.trainingInfo.length;++a)n.trainingInfo[a]=g.onnx.TrainingInfoProto.toObject(e.trainingInfo[a],r)}if(e.functions&&e.functions.length){n.functions=[];for(var a=0;a<e.functions.length;++a)n.functions[a]=g.onnx.FunctionProto.toObject(e.functions[a],r)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.ModelProto"},t}(),i.StringStringEntryProto=function(){function t(o){if(o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.key="",t.prototype.value="",t.create=function(e){return new t(e)},t.encode=function(e,r){return r||(r=Ne.create()),e.key!=null&&Object.hasOwnProperty.call(e,"key")&&r.uint32(10).string(e.key),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&r.uint32(18).string(e.value),r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.StringStringEntryProto;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:{s.key=e.string();break}case 2:{s.value=e.string();break}default:e.skipType(a&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":e.key!=null&&e.hasOwnProperty("key")&&!x.isString(e.key)?"key: string expected":e.value!=null&&e.hasOwnProperty("value")&&!x.isString(e.value)?"value: string expected":null},t.fromObject=function(e){if(e instanceof g.onnx.StringStringEntryProto)return e;var r=new g.onnx.StringStringEntryProto;return e.key!=null&&(r.key=String(e.key)),e.value!=null&&(r.value=String(e.value)),r},t.toObject=function(e,r){r||(r={});var n={};return r.defaults&&(n.key="",n.value=""),e.key!=null&&e.hasOwnProperty("key")&&(n.key=e.key),e.value!=null&&e.hasOwnProperty("value")&&(n.value=e.value),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.StringStringEntryProto"},t}(),i.TensorAnnotation=function(){function t(o){if(this.quantParameterTensorNames=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.tensorName="",t.prototype.quantParameterTensorNames=x.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ne.create()),e.tensorName!=null&&Object.hasOwnProperty.call(e,"tensorName")&&r.uint32(10).string(e.tensorName),e.quantParameterTensorNames!=null&&e.quantParameterTensorNames.length)for(var n=0;n<e.quantParameterTensorNames.length;++n)g.onnx.StringStringEntryProto.encode(e.quantParameterTensorNames[n],r.uint32(18).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.TensorAnnotation;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:{s.tensorName=e.string();break}case 2:{s.quantParameterTensorNames&&s.quantParameterTensorNames.length||(s.quantParameterTensorNames=[]),s.quantParameterTensorNames.push(g.onnx.StringStringEntryProto.decode(e,e.uint32()));break}default:e.skipType(a&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.tensorName!=null&&e.hasOwnProperty("tensorName")&&!x.isString(e.tensorName))return"tensorName: string expected";if(e.quantParameterTensorNames!=null&&e.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(e.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var r=0;r<e.quantParameterTensorNames.length;++r){var n=g.onnx.StringStringEntryProto.verify(e.quantParameterTensorNames[r]);if(n)return"quantParameterTensorNames."+n}}return null},t.fromObject=function(e){if(e instanceof g.onnx.TensorAnnotation)return e;var r=new g.onnx.TensorAnnotation;if(e.tensorName!=null&&(r.tensorName=String(e.tensorName)),e.quantParameterTensorNames){if(!Array.isArray(e.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");r.quantParameterTensorNames=[];for(var n=0;n<e.quantParameterTensorNames.length;++n){if(typeof e.quantParameterTensorNames[n]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");r.quantParameterTensorNames[n]=g.onnx.StringStringEntryProto.fromObject(e.quantParameterTensorNames[n])}}return r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.quantParameterTensorNames=[]),r.defaults&&(n.tensorName=""),e.tensorName!=null&&e.hasOwnProperty("tensorName")&&(n.tensorName=e.tensorName),e.quantParameterTensorNames&&e.quantParameterTensorNames.length){n.quantParameterTensorNames=[];for(var s=0;s<e.quantParameterTensorNames.length;++s)n.quantParameterTensorNames[s]=g.onnx.StringStringEntryProto.toObject(e.quantParameterTensorNames[s],r)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.TensorAnnotation"},t}(),i.GraphProto=function(){function t(o){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.node=x.emptyArray,t.prototype.name="",t.prototype.initializer=x.emptyArray,t.prototype.sparseInitializer=x.emptyArray,t.prototype.docString="",t.prototype.input=x.emptyArray,t.prototype.output=x.emptyArray,t.prototype.valueInfo=x.emptyArray,t.prototype.quantizationAnnotation=x.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ne.create()),e.node!=null&&e.node.length)for(var n=0;n<e.node.length;++n)g.onnx.NodeProto.encode(e.node[n],r.uint32(10).fork()).ldelim();if(e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(18).string(e.name),e.initializer!=null&&e.initializer.length)for(var n=0;n<e.initializer.length;++n)g.onnx.TensorProto.encode(e.initializer[n],r.uint32(42).fork()).ldelim();if(e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(82).string(e.docString),e.input!=null&&e.input.length)for(var n=0;n<e.input.length;++n)g.onnx.ValueInfoProto.encode(e.input[n],r.uint32(90).fork()).ldelim();if(e.output!=null&&e.output.length)for(var n=0;n<e.output.length;++n)g.onnx.ValueInfoProto.encode(e.output[n],r.uint32(98).fork()).ldelim();if(e.valueInfo!=null&&e.valueInfo.length)for(var n=0;n<e.valueInfo.length;++n)g.onnx.ValueInfoProto.encode(e.valueInfo[n],r.uint32(106).fork()).ldelim();if(e.quantizationAnnotation!=null&&e.quantizationAnnotation.length)for(var n=0;n<e.quantizationAnnotation.length;++n)g.onnx.TensorAnnotation.encode(e.quantizationAnnotation[n],r.uint32(114).fork()).ldelim();if(e.sparseInitializer!=null&&e.sparseInitializer.length)for(var n=0;n<e.sparseInitializer.length;++n)g.onnx.SparseTensorProto.encode(e.sparseInitializer[n],r.uint32(122).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.GraphProto;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:{s.node&&s.node.length||(s.node=[]),s.node.push(g.onnx.NodeProto.decode(e,e.uint32()));break}case 2:{s.name=e.string();break}case 5:{s.initializer&&s.initializer.length||(s.initializer=[]),s.initializer.push(g.onnx.TensorProto.decode(e,e.uint32()));break}case 15:{s.sparseInitializer&&s.sparseInitializer.length||(s.sparseInitializer=[]),s.sparseInitializer.push(g.onnx.SparseTensorProto.decode(e,e.uint32()));break}case 10:{s.docString=e.string();break}case 11:{s.input&&s.input.length||(s.input=[]),s.input.push(g.onnx.ValueInfoProto.decode(e,e.uint32()));break}case 12:{s.output&&s.output.length||(s.output=[]),s.output.push(g.onnx.ValueInfoProto.decode(e,e.uint32()));break}case 13:{s.valueInfo&&s.valueInfo.length||(s.valueInfo=[]),s.valueInfo.push(g.onnx.ValueInfoProto.decode(e,e.uint32()));break}case 14:{s.quantizationAnnotation&&s.quantizationAnnotation.length||(s.quantizationAnnotation=[]),s.quantizationAnnotation.push(g.onnx.TensorAnnotation.decode(e,e.uint32()));break}default:e.skipType(a&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.node!=null&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(var r=0;r<e.node.length;++r){var n=g.onnx.NodeProto.verify(e.node[r]);if(n)return"node."+n}}if(e.name!=null&&e.hasOwnProperty("name")&&!x.isString(e.name))return"name: string expected";if(e.initializer!=null&&e.hasOwnProperty("initializer")){if(!Array.isArray(e.initializer))return"initializer: array expected";for(var r=0;r<e.initializer.length;++r){var n=g.onnx.TensorProto.verify(e.initializer[r]);if(n)return"initializer."+n}}if(e.sparseInitializer!=null&&e.hasOwnProperty("sparseInitializer")){if(!Array.isArray(e.sparseInitializer))return"sparseInitializer: array expected";for(var r=0;r<e.sparseInitializer.length;++r){var n=g.onnx.SparseTensorProto.verify(e.sparseInitializer[r]);if(n)return"sparseInitializer."+n}}if(e.docString!=null&&e.hasOwnProperty("docString")&&!x.isString(e.docString))return"docString: string expected";if(e.input!=null&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var r=0;r<e.input.length;++r){var n=g.onnx.ValueInfoProto.verify(e.input[r]);if(n)return"input."+n}}if(e.output!=null&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(var r=0;r<e.output.length;++r){var n=g.onnx.ValueInfoProto.verify(e.output[r]);if(n)return"output."+n}}if(e.valueInfo!=null&&e.hasOwnProperty("valueInfo")){if(!Array.isArray(e.valueInfo))return"valueInfo: array expected";for(var r=0;r<e.valueInfo.length;++r){var n=g.onnx.ValueInfoProto.verify(e.valueInfo[r]);if(n)return"valueInfo."+n}}if(e.quantizationAnnotation!=null&&e.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(e.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var r=0;r<e.quantizationAnnotation.length;++r){var n=g.onnx.TensorAnnotation.verify(e.quantizationAnnotation[r]);if(n)return"quantizationAnnotation."+n}}return null},t.fromObject=function(e){if(e instanceof g.onnx.GraphProto)return e;var r=new g.onnx.GraphProto;if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.GraphProto.node: array expected");r.node=[];for(var n=0;n<e.node.length;++n){if(typeof e.node[n]!="object")throw TypeError(".onnx.GraphProto.node: object expected");r.node[n]=g.onnx.NodeProto.fromObject(e.node[n])}}if(e.name!=null&&(r.name=String(e.name)),e.initializer){if(!Array.isArray(e.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");r.initializer=[];for(var n=0;n<e.initializer.length;++n){if(typeof e.initializer[n]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");r.initializer[n]=g.onnx.TensorProto.fromObject(e.initializer[n])}}if(e.sparseInitializer){if(!Array.isArray(e.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");r.sparseInitializer=[];for(var n=0;n<e.sparseInitializer.length;++n){if(typeof e.sparseInitializer[n]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");r.sparseInitializer[n]=g.onnx.SparseTensorProto.fromObject(e.sparseInitializer[n])}}if(e.docString!=null&&(r.docString=String(e.docString)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.GraphProto.input: array expected");r.input=[];for(var n=0;n<e.input.length;++n){if(typeof e.input[n]!="object")throw TypeError(".onnx.GraphProto.input: object expected");r.input[n]=g.onnx.ValueInfoProto.fromObject(e.input[n])}}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.GraphProto.output: array expected");r.output=[];for(var n=0;n<e.output.length;++n){if(typeof e.output[n]!="object")throw TypeError(".onnx.GraphProto.output: object expected");r.output[n]=g.onnx.ValueInfoProto.fromObject(e.output[n])}}if(e.valueInfo){if(!Array.isArray(e.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");r.valueInfo=[];for(var n=0;n<e.valueInfo.length;++n){if(typeof e.valueInfo[n]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");r.valueInfo[n]=g.onnx.ValueInfoProto.fromObject(e.valueInfo[n])}}if(e.quantizationAnnotation){if(!Array.isArray(e.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");r.quantizationAnnotation=[];for(var n=0;n<e.quantizationAnnotation.length;++n){if(typeof e.quantizationAnnotation[n]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");r.quantizationAnnotation[n]=g.onnx.TensorAnnotation.fromObject(e.quantizationAnnotation[n])}}return r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.node=[],n.initializer=[],n.input=[],n.output=[],n.valueInfo=[],n.quantizationAnnotation=[],n.sparseInitializer=[]),r.defaults&&(n.name="",n.docString=""),e.node&&e.node.length){n.node=[];for(var s=0;s<e.node.length;++s)n.node[s]=g.onnx.NodeProto.toObject(e.node[s],r)}if(e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.initializer&&e.initializer.length){n.initializer=[];for(var s=0;s<e.initializer.length;++s)n.initializer[s]=g.onnx.TensorProto.toObject(e.initializer[s],r)}if(e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.input&&e.input.length){n.input=[];for(var s=0;s<e.input.length;++s)n.input[s]=g.onnx.ValueInfoProto.toObject(e.input[s],r)}if(e.output&&e.output.length){n.output=[];for(var s=0;s<e.output.length;++s)n.output[s]=g.onnx.ValueInfoProto.toObject(e.output[s],r)}if(e.valueInfo&&e.valueInfo.length){n.valueInfo=[];for(var s=0;s<e.valueInfo.length;++s)n.valueInfo[s]=g.onnx.ValueInfoProto.toObject(e.valueInfo[s],r)}if(e.quantizationAnnotation&&e.quantizationAnnotation.length){n.quantizationAnnotation=[];for(var s=0;s<e.quantizationAnnotation.length;++s)n.quantizationAnnotation[s]=g.onnx.TensorAnnotation.toObject(e.quantizationAnnotation[s],r)}if(e.sparseInitializer&&e.sparseInitializer.length){n.sparseInitializer=[];for(var s=0;s<e.sparseInitializer.length;++s)n.sparseInitializer[s]=g.onnx.SparseTensorProto.toObject(e.sparseInitializer[s],r)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.GraphProto"},t}(),i.TensorProto=function(){function t(o){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.dims=x.emptyArray,t.prototype.dataType=0,t.prototype.segment=null,t.prototype.floatData=x.emptyArray,t.prototype.int32Data=x.emptyArray,t.prototype.stringData=x.emptyArray,t.prototype.int64Data=x.emptyArray,t.prototype.name="",t.prototype.docString="",t.prototype.rawData=x.newBuffer([]),t.prototype.externalData=x.emptyArray,t.prototype.dataLocation=0,t.prototype.doubleData=x.emptyArray,t.prototype.uint64Data=x.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ne.create()),e.dims!=null&&e.dims.length){r.uint32(10).fork();for(var n=0;n<e.dims.length;++n)r.int64(e.dims[n]);r.ldelim()}if(e.dataType!=null&&Object.hasOwnProperty.call(e,"dataType")&&r.uint32(16).int32(e.dataType),e.segment!=null&&Object.hasOwnProperty.call(e,"segment")&&g.onnx.TensorProto.Segment.encode(e.segment,r.uint32(26).fork()).ldelim(),e.floatData!=null&&e.floatData.length){r.uint32(34).fork();for(var n=0;n<e.floatData.length;++n)r.float(e.floatData[n]);r.ldelim()}if(e.int32Data!=null&&e.int32Data.length){r.uint32(42).fork();for(var n=0;n<e.int32Data.length;++n)r.int32(e.int32Data[n]);r.ldelim()}if(e.stringData!=null&&e.stringData.length)for(var n=0;n<e.stringData.length;++n)r.uint32(50).bytes(e.stringData[n]);if(e.int64Data!=null&&e.int64Data.length){r.uint32(58).fork();for(var n=0;n<e.int64Data.length;++n)r.int64(e.int64Data[n]);r.ldelim()}if(e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(66).string(e.name),e.rawData!=null&&Object.hasOwnProperty.call(e,"rawData")&&r.uint32(74).bytes(e.rawData),e.doubleData!=null&&e.doubleData.length){r.uint32(82).fork();for(var n=0;n<e.doubleData.length;++n)r.double(e.doubleData[n]);r.ldelim()}if(e.uint64Data!=null&&e.uint64Data.length){r.uint32(90).fork();for(var n=0;n<e.uint64Data.length;++n)r.uint64(e.uint64Data[n]);r.ldelim()}if(e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(98).string(e.docString),e.externalData!=null&&e.externalData.length)for(var n=0;n<e.externalData.length;++n)g.onnx.StringStringEntryProto.encode(e.externalData[n],r.uint32(106).fork()).ldelim();return e.dataLocation!=null&&Object.hasOwnProperty.call(e,"dataLocation")&&r.uint32(112).int32(e.dataLocation),r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.TensorProto;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:{if(s.dims&&s.dims.length||(s.dims=[]),(a&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.dims.push(e.int64());else s.dims.push(e.int64());break}case 2:{s.dataType=e.int32();break}case 3:{s.segment=g.onnx.TensorProto.Segment.decode(e,e.uint32());break}case 4:{if(s.floatData&&s.floatData.length||(s.floatData=[]),(a&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.floatData.push(e.float());else s.floatData.push(e.float());break}case 5:{if(s.int32Data&&s.int32Data.length||(s.int32Data=[]),(a&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.int32Data.push(e.int32());else s.int32Data.push(e.int32());break}case 6:{s.stringData&&s.stringData.length||(s.stringData=[]),s.stringData.push(e.bytes());break}case 7:{if(s.int64Data&&s.int64Data.length||(s.int64Data=[]),(a&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.int64Data.push(e.int64());else s.int64Data.push(e.int64());break}case 8:{s.name=e.string();break}case 12:{s.docString=e.string();break}case 9:{s.rawData=e.bytes();break}case 13:{s.externalData&&s.externalData.length||(s.externalData=[]),s.externalData.push(g.onnx.StringStringEntryProto.decode(e,e.uint32()));break}case 14:{s.dataLocation=e.int32();break}case 10:{if(s.doubleData&&s.doubleData.length||(s.doubleData=[]),(a&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.doubleData.push(e.double());else s.doubleData.push(e.double());break}case 11:{if(s.uint64Data&&s.uint64Data.length||(s.uint64Data=[]),(a&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.uint64Data.push(e.uint64());else s.uint64Data.push(e.uint64());break}default:e.skipType(a&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.dims!=null&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var r=0;r<e.dims.length;++r)if(!x.isInteger(e.dims[r])&&!(e.dims[r]&&x.isInteger(e.dims[r].low)&&x.isInteger(e.dims[r].high)))return"dims: integer|Long[] expected"}if(e.dataType!=null&&e.hasOwnProperty("dataType")&&!x.isInteger(e.dataType))return"dataType: integer expected";if(e.segment!=null&&e.hasOwnProperty("segment")){var n=g.onnx.TensorProto.Segment.verify(e.segment);if(n)return"segment."+n}if(e.floatData!=null&&e.hasOwnProperty("floatData")){if(!Array.isArray(e.floatData))return"floatData: array expected";for(var r=0;r<e.floatData.length;++r)if(typeof e.floatData[r]!="number")return"floatData: number[] expected"}if(e.int32Data!=null&&e.hasOwnProperty("int32Data")){if(!Array.isArray(e.int32Data))return"int32Data: array expected";for(var r=0;r<e.int32Data.length;++r)if(!x.isInteger(e.int32Data[r]))return"int32Data: integer[] expected"}if(e.stringData!=null&&e.hasOwnProperty("stringData")){if(!Array.isArray(e.stringData))return"stringData: array expected";for(var r=0;r<e.stringData.length;++r)if(!(e.stringData[r]&&typeof e.stringData[r].length=="number"||x.isString(e.stringData[r])))return"stringData: buffer[] expected"}if(e.int64Data!=null&&e.hasOwnProperty("int64Data")){if(!Array.isArray(e.int64Data))return"int64Data: array expected";for(var r=0;r<e.int64Data.length;++r)if(!x.isInteger(e.int64Data[r])&&!(e.int64Data[r]&&x.isInteger(e.int64Data[r].low)&&x.isInteger(e.int64Data[r].high)))return"int64Data: integer|Long[] expected"}if(e.name!=null&&e.hasOwnProperty("name")&&!x.isString(e.name))return"name: string expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!x.isString(e.docString))return"docString: string expected";if(e.rawData!=null&&e.hasOwnProperty("rawData")&&!(e.rawData&&typeof e.rawData.length=="number"||x.isString(e.rawData)))return"rawData: buffer expected";if(e.externalData!=null&&e.hasOwnProperty("externalData")){if(!Array.isArray(e.externalData))return"externalData: array expected";for(var r=0;r<e.externalData.length;++r){var n=g.onnx.StringStringEntryProto.verify(e.externalData[r]);if(n)return"externalData."+n}}if(e.dataLocation!=null&&e.hasOwnProperty("dataLocation"))switch(e.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:break}if(e.doubleData!=null&&e.hasOwnProperty("doubleData")){if(!Array.isArray(e.doubleData))return"doubleData: array expected";for(var r=0;r<e.doubleData.length;++r)if(typeof e.doubleData[r]!="number")return"doubleData: number[] expected"}if(e.uint64Data!=null&&e.hasOwnProperty("uint64Data")){if(!Array.isArray(e.uint64Data))return"uint64Data: array expected";for(var r=0;r<e.uint64Data.length;++r)if(!x.isInteger(e.uint64Data[r])&&!(e.uint64Data[r]&&x.isInteger(e.uint64Data[r].low)&&x.isInteger(e.uint64Data[r].high)))return"uint64Data: integer|Long[] expected"}return null},t.fromObject=function(e){if(e instanceof g.onnx.TensorProto)return e;var r=new g.onnx.TensorProto;if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.TensorProto.dims: array expected");r.dims=[];for(var n=0;n<e.dims.length;++n)x.Long?(r.dims[n]=x.Long.fromValue(e.dims[n])).unsigned=!1:typeof e.dims[n]=="string"?r.dims[n]=parseInt(e.dims[n],10):typeof e.dims[n]=="number"?r.dims[n]=e.dims[n]:typeof e.dims[n]=="object"&&(r.dims[n]=new x.LongBits(e.dims[n].low>>>0,e.dims[n].high>>>0).toNumber())}if(e.dataType!=null&&(r.dataType=e.dataType|0),e.segment!=null){if(typeof e.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");r.segment=g.onnx.TensorProto.Segment.fromObject(e.segment)}if(e.floatData){if(!Array.isArray(e.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");r.floatData=[];for(var n=0;n<e.floatData.length;++n)r.floatData[n]=Number(e.floatData[n])}if(e.int32Data){if(!Array.isArray(e.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");r.int32Data=[];for(var n=0;n<e.int32Data.length;++n)r.int32Data[n]=e.int32Data[n]|0}if(e.stringData){if(!Array.isArray(e.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");r.stringData=[];for(var n=0;n<e.stringData.length;++n)typeof e.stringData[n]=="string"?x.base64.decode(e.stringData[n],r.stringData[n]=x.newBuffer(x.base64.length(e.stringData[n])),0):e.stringData[n].length>=0&&(r.stringData[n]=e.stringData[n])}if(e.int64Data){if(!Array.isArray(e.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");r.int64Data=[];for(var n=0;n<e.int64Data.length;++n)x.Long?(r.int64Data[n]=x.Long.fromValue(e.int64Data[n])).unsigned=!1:typeof e.int64Data[n]=="string"?r.int64Data[n]=parseInt(e.int64Data[n],10):typeof e.int64Data[n]=="number"?r.int64Data[n]=e.int64Data[n]:typeof e.int64Data[n]=="object"&&(r.int64Data[n]=new x.LongBits(e.int64Data[n].low>>>0,e.int64Data[n].high>>>0).toNumber())}if(e.name!=null&&(r.name=String(e.name)),e.docString!=null&&(r.docString=String(e.docString)),e.rawData!=null&&(typeof e.rawData=="string"?x.base64.decode(e.rawData,r.rawData=x.newBuffer(x.base64.length(e.rawData)),0):e.rawData.length>=0&&(r.rawData=e.rawData)),e.externalData){if(!Array.isArray(e.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");r.externalData=[];for(var n=0;n<e.externalData.length;++n){if(typeof e.externalData[n]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");r.externalData[n]=g.onnx.StringStringEntryProto.fromObject(e.externalData[n])}}switch(e.dataLocation){default:if(typeof e.dataLocation=="number"){r.dataLocation=e.dataLocation;break}break;case"DEFAULT":case 0:r.dataLocation=0;break;case"EXTERNAL":case 1:r.dataLocation=1;break}if(e.doubleData){if(!Array.isArray(e.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");r.doubleData=[];for(var n=0;n<e.doubleData.length;++n)r.doubleData[n]=Number(e.doubleData[n])}if(e.uint64Data){if(!Array.isArray(e.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");r.uint64Data=[];for(var n=0;n<e.uint64Data.length;++n)x.Long?(r.uint64Data[n]=x.Long.fromValue(e.uint64Data[n])).unsigned=!0:typeof e.uint64Data[n]=="string"?r.uint64Data[n]=parseInt(e.uint64Data[n],10):typeof e.uint64Data[n]=="number"?r.uint64Data[n]=e.uint64Data[n]:typeof e.uint64Data[n]=="object"&&(r.uint64Data[n]=new x.LongBits(e.uint64Data[n].low>>>0,e.uint64Data[n].high>>>0).toNumber(!0))}return r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.dims=[],n.floatData=[],n.int32Data=[],n.stringData=[],n.int64Data=[],n.doubleData=[],n.uint64Data=[],n.externalData=[]),r.defaults&&(n.dataType=0,n.segment=null,n.name="",r.bytes===String?n.rawData="":(n.rawData=[],r.bytes!==Array&&(n.rawData=x.newBuffer(n.rawData))),n.docString="",n.dataLocation=r.enums===String?"DEFAULT":0),e.dims&&e.dims.length){n.dims=[];for(var s=0;s<e.dims.length;++s)typeof e.dims[s]=="number"?n.dims[s]=r.longs===String?String(e.dims[s]):e.dims[s]:n.dims[s]=r.longs===String?x.Long.prototype.toString.call(e.dims[s]):r.longs===Number?new x.LongBits(e.dims[s].low>>>0,e.dims[s].high>>>0).toNumber():e.dims[s]}if(e.dataType!=null&&e.hasOwnProperty("dataType")&&(n.dataType=e.dataType),e.segment!=null&&e.hasOwnProperty("segment")&&(n.segment=g.onnx.TensorProto.Segment.toObject(e.segment,r)),e.floatData&&e.floatData.length){n.floatData=[];for(var s=0;s<e.floatData.length;++s)n.floatData[s]=r.json&&!isFinite(e.floatData[s])?String(e.floatData[s]):e.floatData[s]}if(e.int32Data&&e.int32Data.length){n.int32Data=[];for(var s=0;s<e.int32Data.length;++s)n.int32Data[s]=e.int32Data[s]}if(e.stringData&&e.stringData.length){n.stringData=[];for(var s=0;s<e.stringData.length;++s)n.stringData[s]=r.bytes===String?x.base64.encode(e.stringData[s],0,e.stringData[s].length):r.bytes===Array?Array.prototype.slice.call(e.stringData[s]):e.stringData[s]}if(e.int64Data&&e.int64Data.length){n.int64Data=[];for(var s=0;s<e.int64Data.length;++s)typeof e.int64Data[s]=="number"?n.int64Data[s]=r.longs===String?String(e.int64Data[s]):e.int64Data[s]:n.int64Data[s]=r.longs===String?x.Long.prototype.toString.call(e.int64Data[s]):r.longs===Number?new x.LongBits(e.int64Data[s].low>>>0,e.int64Data[s].high>>>0).toNumber():e.int64Data[s]}if(e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.rawData!=null&&e.hasOwnProperty("rawData")&&(n.rawData=r.bytes===String?x.base64.encode(e.rawData,0,e.rawData.length):r.bytes===Array?Array.prototype.slice.call(e.rawData):e.rawData),e.doubleData&&e.doubleData.length){n.doubleData=[];for(var s=0;s<e.doubleData.length;++s)n.doubleData[s]=r.json&&!isFinite(e.doubleData[s])?String(e.doubleData[s]):e.doubleData[s]}if(e.uint64Data&&e.uint64Data.length){n.uint64Data=[];for(var s=0;s<e.uint64Data.length;++s)typeof e.uint64Data[s]=="number"?n.uint64Data[s]=r.longs===String?String(e.uint64Data[s]):e.uint64Data[s]:n.uint64Data[s]=r.longs===String?x.Long.prototype.toString.call(e.uint64Data[s]):r.longs===Number?new x.LongBits(e.uint64Data[s].low>>>0,e.uint64Data[s].high>>>0).toNumber(!0):e.uint64Data[s]}if(e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.externalData&&e.externalData.length){n.externalData=[];for(var s=0;s<e.externalData.length;++s)n.externalData[s]=g.onnx.StringStringEntryProto.toObject(e.externalData[s],r)}return e.dataLocation!=null&&e.hasOwnProperty("dataLocation")&&(n.dataLocation=r.enums===String?g.onnx.TensorProto.DataLocation[e.dataLocation]===void 0?e.dataLocation:g.onnx.TensorProto.DataLocation[e.dataLocation]:e.dataLocation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.TensorProto"},t.DataType=function(){var o={},e=Object.create(o);return e[o[0]="UNDEFINED"]=0,e[o[1]="FLOAT"]=1,e[o[2]="UINT8"]=2,e[o[3]="INT8"]=3,e[o[4]="UINT16"]=4,e[o[5]="INT16"]=5,e[o[6]="INT32"]=6,e[o[7]="INT64"]=7,e[o[8]="STRING"]=8,e[o[9]="BOOL"]=9,e[o[10]="FLOAT16"]=10,e[o[11]="DOUBLE"]=11,e[o[12]="UINT32"]=12,e[o[13]="UINT64"]=13,e[o[14]="COMPLEX64"]=14,e[o[15]="COMPLEX128"]=15,e[o[16]="BFLOAT16"]=16,e[o[17]="FLOAT8E4M3FN"]=17,e[o[18]="FLOAT8E4M3FNUZ"]=18,e[o[19]="FLOAT8E5M2"]=19,e[o[20]="FLOAT8E5M2FNUZ"]=20,e}(),t.Segment=function(){function o(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return o.prototype.begin=x.Long?x.Long.fromBits(0,0,!1):0,o.prototype.end=x.Long?x.Long.fromBits(0,0,!1):0,o.create=function(r){return new o(r)},o.encode=function(r,n){return n||(n=Ne.create()),r.begin!=null&&Object.hasOwnProperty.call(r,"begin")&&n.uint32(8).int64(r.begin),r.end!=null&&Object.hasOwnProperty.call(r,"end")&&n.uint32(16).int64(r.end),n},o.encodeDelimited=function(r,n){return this.encode(r,n).ldelim()},o.decode=function(r,n){r instanceof G||(r=G.create(r));for(var s=n===void 0?r.len:r.pos+n,a=new g.onnx.TensorProto.Segment;r.pos<s;){var u=r.uint32();switch(u>>>3){case 1:{a.begin=r.int64();break}case 2:{a.end=r.int64();break}default:r.skipType(u&7);break}}return a},o.decodeDelimited=function(r){return r instanceof G||(r=new G(r)),this.decode(r,r.uint32())},o.verify=function(r){return typeof r!="object"||r===null?"object expected":r.begin!=null&&r.hasOwnProperty("begin")&&!x.isInteger(r.begin)&&!(r.begin&&x.isInteger(r.begin.low)&&x.isInteger(r.begin.high))?"begin: integer|Long expected":r.end!=null&&r.hasOwnProperty("end")&&!x.isInteger(r.end)&&!(r.end&&x.isInteger(r.end.low)&&x.isInteger(r.end.high))?"end: integer|Long expected":null},o.fromObject=function(r){if(r instanceof g.onnx.TensorProto.Segment)return r;var n=new g.onnx.TensorProto.Segment;return r.begin!=null&&(x.Long?(n.begin=x.Long.fromValue(r.begin)).unsigned=!1:typeof r.begin=="string"?n.begin=parseInt(r.begin,10):typeof r.begin=="number"?n.begin=r.begin:typeof r.begin=="object"&&(n.begin=new x.LongBits(r.begin.low>>>0,r.begin.high>>>0).toNumber())),r.end!=null&&(x.Long?(n.end=x.Long.fromValue(r.end)).unsigned=!1:typeof r.end=="string"?n.end=parseInt(r.end,10):typeof r.end=="number"?n.end=r.end:typeof r.end=="object"&&(n.end=new x.LongBits(r.end.low>>>0,r.end.high>>>0).toNumber())),n},o.toObject=function(r,n){n||(n={});var s={};if(n.defaults){if(x.Long){var a=new x.Long(0,0,!1);s.begin=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else s.begin=n.longs===String?"0":0;if(x.Long){var a=new x.Long(0,0,!1);s.end=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else s.end=n.longs===String?"0":0}return r.begin!=null&&r.hasOwnProperty("begin")&&(typeof r.begin=="number"?s.begin=n.longs===String?String(r.begin):r.begin:s.begin=n.longs===String?x.Long.prototype.toString.call(r.begin):n.longs===Number?new x.LongBits(r.begin.low>>>0,r.begin.high>>>0).toNumber():r.begin),r.end!=null&&r.hasOwnProperty("end")&&(typeof r.end=="number"?s.end=n.longs===String?String(r.end):r.end:s.end=n.longs===String?x.Long.prototype.toString.call(r.end):n.longs===Number?new x.LongBits(r.end.low>>>0,r.end.high>>>0).toNumber():r.end),s},o.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},o.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TensorProto.Segment"},o}(),t.DataLocation=function(){var o={},e=Object.create(o);return e[o[0]="DEFAULT"]=0,e[o[1]="EXTERNAL"]=1,e}(),t}(),i.SparseTensorProto=function(){function t(o){if(this.dims=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.values=null,t.prototype.indices=null,t.prototype.dims=x.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ne.create()),e.values!=null&&Object.hasOwnProperty.call(e,"values")&&g.onnx.TensorProto.encode(e.values,r.uint32(10).fork()).ldelim(),e.indices!=null&&Object.hasOwnProperty.call(e,"indices")&&g.onnx.TensorProto.encode(e.indices,r.uint32(18).fork()).ldelim(),e.dims!=null&&e.dims.length){r.uint32(26).fork();for(var n=0;n<e.dims.length;++n)r.int64(e.dims[n]);r.ldelim()}return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.SparseTensorProto;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:{s.values=g.onnx.TensorProto.decode(e,e.uint32());break}case 2:{s.indices=g.onnx.TensorProto.decode(e,e.uint32());break}case 3:{if(s.dims&&s.dims.length||(s.dims=[]),(a&7)===2)for(var u=e.uint32()+e.pos;e.pos<u;)s.dims.push(e.int64());else s.dims.push(e.int64());break}default:e.skipType(a&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.values!=null&&e.hasOwnProperty("values")){var r=g.onnx.TensorProto.verify(e.values);if(r)return"values."+r}if(e.indices!=null&&e.hasOwnProperty("indices")){var r=g.onnx.TensorProto.verify(e.indices);if(r)return"indices."+r}if(e.dims!=null&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var n=0;n<e.dims.length;++n)if(!x.isInteger(e.dims[n])&&!(e.dims[n]&&x.isInteger(e.dims[n].low)&&x.isInteger(e.dims[n].high)))return"dims: integer|Long[] expected"}return null},t.fromObject=function(e){if(e instanceof g.onnx.SparseTensorProto)return e;var r=new g.onnx.SparseTensorProto;if(e.values!=null){if(typeof e.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");r.values=g.onnx.TensorProto.fromObject(e.values)}if(e.indices!=null){if(typeof e.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");r.indices=g.onnx.TensorProto.fromObject(e.indices)}if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");r.dims=[];for(var n=0;n<e.dims.length;++n)x.Long?(r.dims[n]=x.Long.fromValue(e.dims[n])).unsigned=!1:typeof e.dims[n]=="string"?r.dims[n]=parseInt(e.dims[n],10):typeof e.dims[n]=="number"?r.dims[n]=e.dims[n]:typeof e.dims[n]=="object"&&(r.dims[n]=new x.LongBits(e.dims[n].low>>>0,e.dims[n].high>>>0).toNumber())}return r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.dims=[]),r.defaults&&(n.values=null,n.indices=null),e.values!=null&&e.hasOwnProperty("values")&&(n.values=g.onnx.TensorProto.toObject(e.values,r)),e.indices!=null&&e.hasOwnProperty("indices")&&(n.indices=g.onnx.TensorProto.toObject(e.indices,r)),e.dims&&e.dims.length){n.dims=[];for(var s=0;s<e.dims.length;++s)typeof e.dims[s]=="number"?n.dims[s]=r.longs===String?String(e.dims[s]):e.dims[s]:n.dims[s]=r.longs===String?x.Long.prototype.toString.call(e.dims[s]):r.longs===Number?new x.LongBits(e.dims[s].low>>>0,e.dims[s].high>>>0).toNumber():e.dims[s]}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.SparseTensorProto"},t}(),i.TensorShapeProto=function(){function t(o){if(this.dim=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.dim=x.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ne.create()),e.dim!=null&&e.dim.length)for(var n=0;n<e.dim.length;++n)g.onnx.TensorShapeProto.Dimension.encode(e.dim[n],r.uint32(10).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.TensorShapeProto;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:{s.dim&&s.dim.length||(s.dim=[]),s.dim.push(g.onnx.TensorShapeProto.Dimension.decode(e,e.uint32()));break}default:e.skipType(a&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.dim!=null&&e.hasOwnProperty("dim")){if(!Array.isArray(e.dim))return"dim: array expected";for(var r=0;r<e.dim.length;++r){var n=g.onnx.TensorShapeProto.Dimension.verify(e.dim[r]);if(n)return"dim."+n}}return null},t.fromObject=function(e){if(e instanceof g.onnx.TensorShapeProto)return e;var r=new g.onnx.TensorShapeProto;if(e.dim){if(!Array.isArray(e.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");r.dim=[];for(var n=0;n<e.dim.length;++n){if(typeof e.dim[n]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");r.dim[n]=g.onnx.TensorShapeProto.Dimension.fromObject(e.dim[n])}}return r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.dim=[]),e.dim&&e.dim.length){n.dim=[];for(var s=0;s<e.dim.length;++s)n.dim[s]=g.onnx.TensorShapeProto.Dimension.toObject(e.dim[s],r)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.TensorShapeProto"},t.Dimension=function(){function o(r){if(r)for(var n=Object.keys(r),s=0;s<n.length;++s)r[n[s]]!=null&&(this[n[s]]=r[n[s]])}o.prototype.dimValue=null,o.prototype.dimParam=null,o.prototype.denotation="";var e;return Object.defineProperty(o.prototype,"value",{get:x.oneOfGetter(e=["dimValue","dimParam"]),set:x.oneOfSetter(e)}),o.create=function(n){return new o(n)},o.encode=function(n,s){return s||(s=Ne.create()),n.dimValue!=null&&Object.hasOwnProperty.call(n,"dimValue")&&s.uint32(8).int64(n.dimValue),n.dimParam!=null&&Object.hasOwnProperty.call(n,"dimParam")&&s.uint32(18).string(n.dimParam),n.denotation!=null&&Object.hasOwnProperty.call(n,"denotation")&&s.uint32(26).string(n.denotation),s},o.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},o.decode=function(n,s){n instanceof G||(n=G.create(n));for(var a=s===void 0?n.len:n.pos+s,u=new g.onnx.TensorShapeProto.Dimension;n.pos<a;){var l=n.uint32();switch(l>>>3){case 1:{u.dimValue=n.int64();break}case 2:{u.dimParam=n.string();break}case 3:{u.denotation=n.string();break}default:n.skipType(l&7);break}}return u},o.decodeDelimited=function(n){return n instanceof G||(n=new G(n)),this.decode(n,n.uint32())},o.verify=function(n){if(typeof n!="object"||n===null)return"object expected";var s={};if(n.dimValue!=null&&n.hasOwnProperty("dimValue")&&(s.value=1,!x.isInteger(n.dimValue)&&!(n.dimValue&&x.isInteger(n.dimValue.low)&&x.isInteger(n.dimValue.high))))return"dimValue: integer|Long expected";if(n.dimParam!=null&&n.hasOwnProperty("dimParam")){if(s.value===1)return"value: multiple values";if(s.value=1,!x.isString(n.dimParam))return"dimParam: string expected"}return n.denotation!=null&&n.hasOwnProperty("denotation")&&!x.isString(n.denotation)?"denotation: string expected":null},o.fromObject=function(n){if(n instanceof g.onnx.TensorShapeProto.Dimension)return n;var s=new g.onnx.TensorShapeProto.Dimension;return n.dimValue!=null&&(x.Long?(s.dimValue=x.Long.fromValue(n.dimValue)).unsigned=!1:typeof n.dimValue=="string"?s.dimValue=parseInt(n.dimValue,10):typeof n.dimValue=="number"?s.dimValue=n.dimValue:typeof n.dimValue=="object"&&(s.dimValue=new x.LongBits(n.dimValue.low>>>0,n.dimValue.high>>>0).toNumber())),n.dimParam!=null&&(s.dimParam=String(n.dimParam)),n.denotation!=null&&(s.denotation=String(n.denotation)),s},o.toObject=function(n,s){s||(s={});var a={};return s.defaults&&(a.denotation=""),n.dimValue!=null&&n.hasOwnProperty("dimValue")&&(typeof n.dimValue=="number"?a.dimValue=s.longs===String?String(n.dimValue):n.dimValue:a.dimValue=s.longs===String?x.Long.prototype.toString.call(n.dimValue):s.longs===Number?new x.LongBits(n.dimValue.low>>>0,n.dimValue.high>>>0).toNumber():n.dimValue,s.oneofs&&(a.value="dimValue")),n.dimParam!=null&&n.hasOwnProperty("dimParam")&&(a.dimParam=n.dimParam,s.oneofs&&(a.value="dimParam")),n.denotation!=null&&n.hasOwnProperty("denotation")&&(a.denotation=n.denotation),a},o.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},o.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/onnx.TensorShapeProto.Dimension"},o}(),t}(),i.TypeProto=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}t.prototype.tensorType=null,t.prototype.sequenceType=null,t.prototype.mapType=null,t.prototype.optionalType=null,t.prototype.sparseTensorType=null,t.prototype.denotation="";var o;return Object.defineProperty(t.prototype,"value",{get:x.oneOfGetter(o=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:x.oneOfSetter(o)}),t.create=function(r){return new t(r)},t.encode=function(r,n){return n||(n=Ne.create()),r.tensorType!=null&&Object.hasOwnProperty.call(r,"tensorType")&&g.onnx.TypeProto.Tensor.encode(r.tensorType,n.uint32(10).fork()).ldelim(),r.sequenceType!=null&&Object.hasOwnProperty.call(r,"sequenceType")&&g.onnx.TypeProto.Sequence.encode(r.sequenceType,n.uint32(34).fork()).ldelim(),r.mapType!=null&&Object.hasOwnProperty.call(r,"mapType")&&g.onnx.TypeProto.Map.encode(r.mapType,n.uint32(42).fork()).ldelim(),r.denotation!=null&&Object.hasOwnProperty.call(r,"denotation")&&n.uint32(50).string(r.denotation),r.sparseTensorType!=null&&Object.hasOwnProperty.call(r,"sparseTensorType")&&g.onnx.TypeProto.SparseTensor.encode(r.sparseTensorType,n.uint32(66).fork()).ldelim(),r.optionalType!=null&&Object.hasOwnProperty.call(r,"optionalType")&&g.onnx.TypeProto.Optional.encode(r.optionalType,n.uint32(74).fork()).ldelim(),n},t.encodeDelimited=function(r,n){return this.encode(r,n).ldelim()},t.decode=function(r,n){r instanceof G||(r=G.create(r));for(var s=n===void 0?r.len:r.pos+n,a=new g.onnx.TypeProto;r.pos<s;){var u=r.uint32();switch(u>>>3){case 1:{a.tensorType=g.onnx.TypeProto.Tensor.decode(r,r.uint32());break}case 4:{a.sequenceType=g.onnx.TypeProto.Sequence.decode(r,r.uint32());break}case 5:{a.mapType=g.onnx.TypeProto.Map.decode(r,r.uint32());break}case 9:{a.optionalType=g.onnx.TypeProto.Optional.decode(r,r.uint32());break}case 8:{a.sparseTensorType=g.onnx.TypeProto.SparseTensor.decode(r,r.uint32());break}case 6:{a.denotation=r.string();break}default:r.skipType(u&7);break}}return a},t.decodeDelimited=function(r){return r instanceof G||(r=new G(r)),this.decode(r,r.uint32())},t.verify=function(r){if(typeof r!="object"||r===null)return"object expected";var n={};if(r.tensorType!=null&&r.hasOwnProperty("tensorType")){n.value=1;{var s=g.onnx.TypeProto.Tensor.verify(r.tensorType);if(s)return"tensorType."+s}}if(r.sequenceType!=null&&r.hasOwnProperty("sequenceType")){if(n.value===1)return"value: multiple values";n.value=1;{var s=g.onnx.TypeProto.Sequence.verify(r.sequenceType);if(s)return"sequenceType."+s}}if(r.mapType!=null&&r.hasOwnProperty("mapType")){if(n.value===1)return"value: multiple values";n.value=1;{var s=g.onnx.TypeProto.Map.verify(r.mapType);if(s)return"mapType."+s}}if(r.optionalType!=null&&r.hasOwnProperty("optionalType")){if(n.value===1)return"value: multiple values";n.value=1;{var s=g.onnx.TypeProto.Optional.verify(r.optionalType);if(s)return"optionalType."+s}}if(r.sparseTensorType!=null&&r.hasOwnProperty("sparseTensorType")){if(n.value===1)return"value: multiple values";n.value=1;{var s=g.onnx.TypeProto.SparseTensor.verify(r.sparseTensorType);if(s)return"sparseTensorType."+s}}return r.denotation!=null&&r.hasOwnProperty("denotation")&&!x.isString(r.denotation)?"denotation: string expected":null},t.fromObject=function(r){if(r instanceof g.onnx.TypeProto)return r;var n=new g.onnx.TypeProto;if(r.tensorType!=null){if(typeof r.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");n.tensorType=g.onnx.TypeProto.Tensor.fromObject(r.tensorType)}if(r.sequenceType!=null){if(typeof r.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");n.sequenceType=g.onnx.TypeProto.Sequence.fromObject(r.sequenceType)}if(r.mapType!=null){if(typeof r.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");n.mapType=g.onnx.TypeProto.Map.fromObject(r.mapType)}if(r.optionalType!=null){if(typeof r.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");n.optionalType=g.onnx.TypeProto.Optional.fromObject(r.optionalType)}if(r.sparseTensorType!=null){if(typeof r.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");n.sparseTensorType=g.onnx.TypeProto.SparseTensor.fromObject(r.sparseTensorType)}return r.denotation!=null&&(n.denotation=String(r.denotation)),n},t.toObject=function(r,n){n||(n={});var s={};return n.defaults&&(s.denotation=""),r.tensorType!=null&&r.hasOwnProperty("tensorType")&&(s.tensorType=g.onnx.TypeProto.Tensor.toObject(r.tensorType,n),n.oneofs&&(s.value="tensorType")),r.sequenceType!=null&&r.hasOwnProperty("sequenceType")&&(s.sequenceType=g.onnx.TypeProto.Sequence.toObject(r.sequenceType,n),n.oneofs&&(s.value="sequenceType")),r.mapType!=null&&r.hasOwnProperty("mapType")&&(s.mapType=g.onnx.TypeProto.Map.toObject(r.mapType,n),n.oneofs&&(s.value="mapType")),r.denotation!=null&&r.hasOwnProperty("denotation")&&(s.denotation=r.denotation),r.sparseTensorType!=null&&r.hasOwnProperty("sparseTensorType")&&(s.sparseTensorType=g.onnx.TypeProto.SparseTensor.toObject(r.sparseTensorType,n),n.oneofs&&(s.value="sparseTensorType")),r.optionalType!=null&&r.hasOwnProperty("optionalType")&&(s.optionalType=g.onnx.TypeProto.Optional.toObject(r.optionalType,n),n.oneofs&&(s.value="optionalType")),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},t.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TypeProto"},t.Tensor=function(){function e(r){if(r)for(var n=Object.keys(r),s=0;s<n.length;++s)r[n[s]]!=null&&(this[n[s]]=r[n[s]])}return e.prototype.elemType=0,e.prototype.shape=null,e.create=function(n){return new e(n)},e.encode=function(n,s){return s||(s=Ne.create()),n.elemType!=null&&Object.hasOwnProperty.call(n,"elemType")&&s.uint32(8).int32(n.elemType),n.shape!=null&&Object.hasOwnProperty.call(n,"shape")&&g.onnx.TensorShapeProto.encode(n.shape,s.uint32(18).fork()).ldelim(),s},e.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},e.decode=function(n,s){n instanceof G||(n=G.create(n));for(var a=s===void 0?n.len:n.pos+s,u=new g.onnx.TypeProto.Tensor;n.pos<a;){var l=n.uint32();switch(l>>>3){case 1:{u.elemType=n.int32();break}case 2:{u.shape=g.onnx.TensorShapeProto.decode(n,n.uint32());break}default:n.skipType(l&7);break}}return u},e.decodeDelimited=function(n){return n instanceof G||(n=new G(n)),this.decode(n,n.uint32())},e.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.elemType!=null&&n.hasOwnProperty("elemType")&&!x.isInteger(n.elemType))return"elemType: integer expected";if(n.shape!=null&&n.hasOwnProperty("shape")){var s=g.onnx.TensorShapeProto.verify(n.shape);if(s)return"shape."+s}return null},e.fromObject=function(n){if(n instanceof g.onnx.TypeProto.Tensor)return n;var s=new g.onnx.TypeProto.Tensor;if(n.elemType!=null&&(s.elemType=n.elemType|0),n.shape!=null){if(typeof n.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");s.shape=g.onnx.TensorShapeProto.fromObject(n.shape)}return s},e.toObject=function(n,s){s||(s={});var a={};return s.defaults&&(a.elemType=0,a.shape=null),n.elemType!=null&&n.hasOwnProperty("elemType")&&(a.elemType=n.elemType),n.shape!=null&&n.hasOwnProperty("shape")&&(a.shape=g.onnx.TensorShapeProto.toObject(n.shape,s)),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/onnx.TypeProto.Tensor"},e}(),t.Sequence=function(){function e(r){if(r)for(var n=Object.keys(r),s=0;s<n.length;++s)r[n[s]]!=null&&(this[n[s]]=r[n[s]])}return e.prototype.elemType=null,e.create=function(n){return new e(n)},e.encode=function(n,s){return s||(s=Ne.create()),n.elemType!=null&&Object.hasOwnProperty.call(n,"elemType")&&g.onnx.TypeProto.encode(n.elemType,s.uint32(10).fork()).ldelim(),s},e.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},e.decode=function(n,s){n instanceof G||(n=G.create(n));for(var a=s===void 0?n.len:n.pos+s,u=new g.onnx.TypeProto.Sequence;n.pos<a;){var l=n.uint32();switch(l>>>3){case 1:{u.elemType=g.onnx.TypeProto.decode(n,n.uint32());break}default:n.skipType(l&7);break}}return u},e.decodeDelimited=function(n){return n instanceof G||(n=new G(n)),this.decode(n,n.uint32())},e.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.elemType!=null&&n.hasOwnProperty("elemType")){var s=g.onnx.TypeProto.verify(n.elemType);if(s)return"elemType."+s}return null},e.fromObject=function(n){if(n instanceof g.onnx.TypeProto.Sequence)return n;var s=new g.onnx.TypeProto.Sequence;if(n.elemType!=null){if(typeof n.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");s.elemType=g.onnx.TypeProto.fromObject(n.elemType)}return s},e.toObject=function(n,s){s||(s={});var a={};return s.defaults&&(a.elemType=null),n.elemType!=null&&n.hasOwnProperty("elemType")&&(a.elemType=g.onnx.TypeProto.toObject(n.elemType,s)),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/onnx.TypeProto.Sequence"},e}(),t.Map=function(){function e(r){if(r)for(var n=Object.keys(r),s=0;s<n.length;++s)r[n[s]]!=null&&(this[n[s]]=r[n[s]])}return e.prototype.keyType=0,e.prototype.valueType=null,e.create=function(n){return new e(n)},e.encode=function(n,s){return s||(s=Ne.create()),n.keyType!=null&&Object.hasOwnProperty.call(n,"keyType")&&s.uint32(8).int32(n.keyType),n.valueType!=null&&Object.hasOwnProperty.call(n,"valueType")&&g.onnx.TypeProto.encode(n.valueType,s.uint32(18).fork()).ldelim(),s},e.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},e.decode=function(n,s){n instanceof G||(n=G.create(n));for(var a=s===void 0?n.len:n.pos+s,u=new g.onnx.TypeProto.Map;n.pos<a;){var l=n.uint32();switch(l>>>3){case 1:{u.keyType=n.int32();break}case 2:{u.valueType=g.onnx.TypeProto.decode(n,n.uint32());break}default:n.skipType(l&7);break}}return u},e.decodeDelimited=function(n){return n instanceof G||(n=new G(n)),this.decode(n,n.uint32())},e.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.keyType!=null&&n.hasOwnProperty("keyType")&&!x.isInteger(n.keyType))return"keyType: integer expected";if(n.valueType!=null&&n.hasOwnProperty("valueType")){var s=g.onnx.TypeProto.verify(n.valueType);if(s)return"valueType."+s}return null},e.fromObject=function(n){if(n instanceof g.onnx.TypeProto.Map)return n;var s=new g.onnx.TypeProto.Map;if(n.keyType!=null&&(s.keyType=n.keyType|0),n.valueType!=null){if(typeof n.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");s.valueType=g.onnx.TypeProto.fromObject(n.valueType)}return s},e.toObject=function(n,s){s||(s={});var a={};return s.defaults&&(a.keyType=0,a.valueType=null),n.keyType!=null&&n.hasOwnProperty("keyType")&&(a.keyType=n.keyType),n.valueType!=null&&n.hasOwnProperty("valueType")&&(a.valueType=g.onnx.TypeProto.toObject(n.valueType,s)),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/onnx.TypeProto.Map"},e}(),t.Optional=function(){function e(r){if(r)for(var n=Object.keys(r),s=0;s<n.length;++s)r[n[s]]!=null&&(this[n[s]]=r[n[s]])}return e.prototype.elemType=null,e.create=function(n){return new e(n)},e.encode=function(n,s){return s||(s=Ne.create()),n.elemType!=null&&Object.hasOwnProperty.call(n,"elemType")&&g.onnx.TypeProto.encode(n.elemType,s.uint32(10).fork()).ldelim(),s},e.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},e.decode=function(n,s){n instanceof G||(n=G.create(n));for(var a=s===void 0?n.len:n.pos+s,u=new g.onnx.TypeProto.Optional;n.pos<a;){var l=n.uint32();switch(l>>>3){case 1:{u.elemType=g.onnx.TypeProto.decode(n,n.uint32());break}default:n.skipType(l&7);break}}return u},e.decodeDelimited=function(n){return n instanceof G||(n=new G(n)),this.decode(n,n.uint32())},e.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.elemType!=null&&n.hasOwnProperty("elemType")){var s=g.onnx.TypeProto.verify(n.elemType);if(s)return"elemType."+s}return null},e.fromObject=function(n){if(n instanceof g.onnx.TypeProto.Optional)return n;var s=new g.onnx.TypeProto.Optional;if(n.elemType!=null){if(typeof n.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");s.elemType=g.onnx.TypeProto.fromObject(n.elemType)}return s},e.toObject=function(n,s){s||(s={});var a={};return s.defaults&&(a.elemType=null),n.elemType!=null&&n.hasOwnProperty("elemType")&&(a.elemType=g.onnx.TypeProto.toObject(n.elemType,s)),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/onnx.TypeProto.Optional"},e}(),t.SparseTensor=function(){function e(r){if(r)for(var n=Object.keys(r),s=0;s<n.length;++s)r[n[s]]!=null&&(this[n[s]]=r[n[s]])}return e.prototype.elemType=0,e.prototype.shape=null,e.create=function(n){return new e(n)},e.encode=function(n,s){return s||(s=Ne.create()),n.elemType!=null&&Object.hasOwnProperty.call(n,"elemType")&&s.uint32(8).int32(n.elemType),n.shape!=null&&Object.hasOwnProperty.call(n,"shape")&&g.onnx.TensorShapeProto.encode(n.shape,s.uint32(18).fork()).ldelim(),s},e.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},e.decode=function(n,s){n instanceof G||(n=G.create(n));for(var a=s===void 0?n.len:n.pos+s,u=new g.onnx.TypeProto.SparseTensor;n.pos<a;){var l=n.uint32();switch(l>>>3){case 1:{u.elemType=n.int32();break}case 2:{u.shape=g.onnx.TensorShapeProto.decode(n,n.uint32());break}default:n.skipType(l&7);break}}return u},e.decodeDelimited=function(n){return n instanceof G||(n=new G(n)),this.decode(n,n.uint32())},e.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.elemType!=null&&n.hasOwnProperty("elemType")&&!x.isInteger(n.elemType))return"elemType: integer expected";if(n.shape!=null&&n.hasOwnProperty("shape")){var s=g.onnx.TensorShapeProto.verify(n.shape);if(s)return"shape."+s}return null},e.fromObject=function(n){if(n instanceof g.onnx.TypeProto.SparseTensor)return n;var s=new g.onnx.TypeProto.SparseTensor;if(n.elemType!=null&&(s.elemType=n.elemType|0),n.shape!=null){if(typeof n.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");s.shape=g.onnx.TensorShapeProto.fromObject(n.shape)}return s},e.toObject=function(n,s){s||(s={});var a={};return s.defaults&&(a.elemType=0,a.shape=null),n.elemType!=null&&n.hasOwnProperty("elemType")&&(a.elemType=n.elemType),n.shape!=null&&n.hasOwnProperty("shape")&&(a.shape=g.onnx.TensorShapeProto.toObject(n.shape,s)),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/onnx.TypeProto.SparseTensor"},e}(),t}(),i.OperatorSetIdProto=function(){function t(o){if(o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.domain="",t.prototype.version=x.Long?x.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(e,r){return r||(r=Ne.create()),e.domain!=null&&Object.hasOwnProperty.call(e,"domain")&&r.uint32(10).string(e.domain),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&r.uint32(16).int64(e.version),r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.OperatorSetIdProto;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:{s.domain=e.string();break}case 2:{s.version=e.int64();break}default:e.skipType(a&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":e.domain!=null&&e.hasOwnProperty("domain")&&!x.isString(e.domain)?"domain: string expected":e.version!=null&&e.hasOwnProperty("version")&&!x.isInteger(e.version)&&!(e.version&&x.isInteger(e.version.low)&&x.isInteger(e.version.high))?"version: integer|Long expected":null},t.fromObject=function(e){if(e instanceof g.onnx.OperatorSetIdProto)return e;var r=new g.onnx.OperatorSetIdProto;return e.domain!=null&&(r.domain=String(e.domain)),e.version!=null&&(x.Long?(r.version=x.Long.fromValue(e.version)).unsigned=!1:typeof e.version=="string"?r.version=parseInt(e.version,10):typeof e.version=="number"?r.version=e.version:typeof e.version=="object"&&(r.version=new x.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber())),r},t.toObject=function(e,r){r||(r={});var n={};if(r.defaults)if(n.domain="",x.Long){var s=new x.Long(0,0,!1);n.version=r.longs===String?s.toString():r.longs===Number?s.toNumber():s}else n.version=r.longs===String?"0":0;return e.domain!=null&&e.hasOwnProperty("domain")&&(n.domain=e.domain),e.version!=null&&e.hasOwnProperty("version")&&(typeof e.version=="number"?n.version=r.longs===String?String(e.version):e.version:n.version=r.longs===String?x.Long.prototype.toString.call(e.version):r.longs===Number?new x.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber():e.version),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.OperatorSetIdProto"},t}(),i.OperatorStatus=function(){var t={},o=Object.create(t);return o[t[0]="EXPERIMENTAL"]=0,o[t[1]="STABLE"]=1,o}(),i.FunctionProto=function(){function t(o){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],o)for(var e=Object.keys(o),r=0;r<e.length;++r)o[e[r]]!=null&&(this[e[r]]=o[e[r]])}return t.prototype.name="",t.prototype.input=x.emptyArray,t.prototype.output=x.emptyArray,t.prototype.attribute=x.emptyArray,t.prototype.attributeProto=x.emptyArray,t.prototype.node=x.emptyArray,t.prototype.docString="",t.prototype.opsetImport=x.emptyArray,t.prototype.domain="",t.create=function(e){return new t(e)},t.encode=function(e,r){if(r||(r=Ne.create()),e.name!=null&&Object.hasOwnProperty.call(e,"name")&&r.uint32(10).string(e.name),e.input!=null&&e.input.length)for(var n=0;n<e.input.length;++n)r.uint32(34).string(e.input[n]);if(e.output!=null&&e.output.length)for(var n=0;n<e.output.length;++n)r.uint32(42).string(e.output[n]);if(e.attribute!=null&&e.attribute.length)for(var n=0;n<e.attribute.length;++n)r.uint32(50).string(e.attribute[n]);if(e.node!=null&&e.node.length)for(var n=0;n<e.node.length;++n)g.onnx.NodeProto.encode(e.node[n],r.uint32(58).fork()).ldelim();if(e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&r.uint32(66).string(e.docString),e.opsetImport!=null&&e.opsetImport.length)for(var n=0;n<e.opsetImport.length;++n)g.onnx.OperatorSetIdProto.encode(e.opsetImport[n],r.uint32(74).fork()).ldelim();if(e.domain!=null&&Object.hasOwnProperty.call(e,"domain")&&r.uint32(82).string(e.domain),e.attributeProto!=null&&e.attributeProto.length)for(var n=0;n<e.attributeProto.length;++n)g.onnx.AttributeProto.encode(e.attributeProto[n],r.uint32(90).fork()).ldelim();return r},t.encodeDelimited=function(e,r){return this.encode(e,r).ldelim()},t.decode=function(e,r){e instanceof G||(e=G.create(e));for(var n=r===void 0?e.len:e.pos+r,s=new g.onnx.FunctionProto;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:{s.name=e.string();break}case 4:{s.input&&s.input.length||(s.input=[]),s.input.push(e.string());break}case 5:{s.output&&s.output.length||(s.output=[]),s.output.push(e.string());break}case 6:{s.attribute&&s.attribute.length||(s.attribute=[]),s.attribute.push(e.string());break}case 11:{s.attributeProto&&s.attributeProto.length||(s.attributeProto=[]),s.attributeProto.push(g.onnx.AttributeProto.decode(e,e.uint32()));break}case 7:{s.node&&s.node.length||(s.node=[]),s.node.push(g.onnx.NodeProto.decode(e,e.uint32()));break}case 8:{s.docString=e.string();break}case 9:{s.opsetImport&&s.opsetImport.length||(s.opsetImport=[]),s.opsetImport.push(g.onnx.OperatorSetIdProto.decode(e,e.uint32()));break}case 10:{s.domain=e.string();break}default:e.skipType(a&7);break}}return s},t.decodeDelimited=function(e){return e instanceof G||(e=new G(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.name!=null&&e.hasOwnProperty("name")&&!x.isString(e.name))return"name: string expected";if(e.input!=null&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var r=0;r<e.input.length;++r)if(!x.isString(e.input[r]))return"input: string[] expected"}if(e.output!=null&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(var r=0;r<e.output.length;++r)if(!x.isString(e.output[r]))return"output: string[] expected"}if(e.attribute!=null&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(var r=0;r<e.attribute.length;++r)if(!x.isString(e.attribute[r]))return"attribute: string[] expected"}if(e.attributeProto!=null&&e.hasOwnProperty("attributeProto")){if(!Array.isArray(e.attributeProto))return"attributeProto: array expected";for(var r=0;r<e.attributeProto.length;++r){var n=g.onnx.AttributeProto.verify(e.attributeProto[r]);if(n)return"attributeProto."+n}}if(e.node!=null&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(var r=0;r<e.node.length;++r){var n=g.onnx.NodeProto.verify(e.node[r]);if(n)return"node."+n}}if(e.docString!=null&&e.hasOwnProperty("docString")&&!x.isString(e.docString))return"docString: string expected";if(e.opsetImport!=null&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(var r=0;r<e.opsetImport.length;++r){var n=g.onnx.OperatorSetIdProto.verify(e.opsetImport[r]);if(n)return"opsetImport."+n}}return e.domain!=null&&e.hasOwnProperty("domain")&&!x.isString(e.domain)?"domain: string expected":null},t.fromObject=function(e){if(e instanceof g.onnx.FunctionProto)return e;var r=new g.onnx.FunctionProto;if(e.name!=null&&(r.name=String(e.name)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.FunctionProto.input: array expected");r.input=[];for(var n=0;n<e.input.length;++n)r.input[n]=String(e.input[n])}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.FunctionProto.output: array expected");r.output=[];for(var n=0;n<e.output.length;++n)r.output[n]=String(e.output[n])}if(e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");r.attribute=[];for(var n=0;n<e.attribute.length;++n)r.attribute[n]=String(e.attribute[n])}if(e.attributeProto){if(!Array.isArray(e.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");r.attributeProto=[];for(var n=0;n<e.attributeProto.length;++n){if(typeof e.attributeProto[n]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");r.attributeProto[n]=g.onnx.AttributeProto.fromObject(e.attributeProto[n])}}if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.FunctionProto.node: array expected");r.node=[];for(var n=0;n<e.node.length;++n){if(typeof e.node[n]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");r.node[n]=g.onnx.NodeProto.fromObject(e.node[n])}}if(e.docString!=null&&(r.docString=String(e.docString)),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");r.opsetImport=[];for(var n=0;n<e.opsetImport.length;++n){if(typeof e.opsetImport[n]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");r.opsetImport[n]=g.onnx.OperatorSetIdProto.fromObject(e.opsetImport[n])}}return e.domain!=null&&(r.domain=String(e.domain)),r},t.toObject=function(e,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.input=[],n.output=[],n.attribute=[],n.node=[],n.opsetImport=[],n.attributeProto=[]),r.defaults&&(n.name="",n.docString="",n.domain=""),e.name!=null&&e.hasOwnProperty("name")&&(n.name=e.name),e.input&&e.input.length){n.input=[];for(var s=0;s<e.input.length;++s)n.input[s]=e.input[s]}if(e.output&&e.output.length){n.output=[];for(var s=0;s<e.output.length;++s)n.output[s]=e.output[s]}if(e.attribute&&e.attribute.length){n.attribute=[];for(var s=0;s<e.attribute.length;++s)n.attribute[s]=e.attribute[s]}if(e.node&&e.node.length){n.node=[];for(var s=0;s<e.node.length;++s)n.node[s]=g.onnx.NodeProto.toObject(e.node[s],r)}if(e.docString!=null&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.opsetImport&&e.opsetImport.length){n.opsetImport=[];for(var s=0;s<e.opsetImport.length;++s)n.opsetImport[s]=g.onnx.OperatorSetIdProto.toObject(e.opsetImport[s],r)}if(e.domain!=null&&e.hasOwnProperty("domain")&&(n.domain=e.domain),e.attributeProto&&e.attributeProto.length){n.attributeProto=[];for(var s=0;s<e.attributeProto.length;++s)n.attributeProto[s]=g.onnx.AttributeProto.toObject(e.attributeProto[s],r)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Pe.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.FunctionProto"},t}(),i}();bl.exports=g});function ln(i,t){if(!i)throw new Error(typeof t=="string"?t:t())}function Un(i){return new TextDecoder().decode(i)}var Ee,Fr,ra,st,No,Ze,dt,H,Gn,$r,kr,Br,ge=$(()=>{"use strict";Co();Wi();Ee=nn(un());Nr();Fr=class{static arraysEqual(t,o){if(t.length!==o.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==o[e])return!1;return!0}},ra=class{static preprocessInputShapes(t,o){let e=t.length===1?[1,t[0]]:t,r=o.length===1?[o[0],1]:o;return[e,r]}static postprocessOutputShape(t,o,e){o===1&&t.splice(t.length-2,1),e===1&&t.pop()}static calcMatMulShape(t,o){return t[1]!==o[0]?void 0:[t[0],o[1]]}},st=class i{static calcShape(t,o,e=!1){let r=t.length,n=o.length;if(r===0)return o;if(n===0)return t;let s=Math.max(t.length,o.length),a=new Array(s);if(e){if(r<2||n<2)return;let u=ra.calcMatMulShape([t[r-2],t[r-1]],[o[n-2],o[n-1]]);if(u===void 0)return;[a[s-2],a[s-1]]=u}for(let u=e?3:1;u<=s;u++){let l=r-u<0?1:t[r-u],c=n-u<0?1:o[n-u];if(l!==c&&l>1&&c>1)return;a[s-u]=Math.max(l,c)}return a}static index(t,o){let e=new Array(o.length);return i.fillIndex(t,o,e),e}static fillIndex(t,o,e){let r=t.length-o.length;for(let n=0;n<o.length;n++)e[n]=t[r+n]%o[n]}static calc(t,o,e,r,n){let s=i.calcShape(t.dims,o.dims);if(s){if(r&&!H.areEqual(s,t.dims))return;let a=H.size(s),u=r?t:new We(s,n||t.type);if(s.length===0)u.set([],e(t.get([]),o.get([])));else{let l=new Array(s.length),c=new Array(t.dims.length),b=new Array(o.dims.length),y=0,w=0,S=!1,I=!1;t.dims.length===0&&(y=t.get([]),S=!0),o.dims.length===0&&(w=o.get([]),I=!0);let F;for(let k=0;k<a;k++){F=k;for(let L=s.length-1;L>=0;L--)l[L]=F%s[L],F=Math.floor(F/s[L]);S||(i.fillIndex(l,t.dims,c),y=t.get(c)),I||(i.fillIndex(l,o.dims,b),w=o.get(b)),u.set(l,e(y,w))}}return u}}static isValidBroadcast(t,o){let e=t.length,r=o.length;if(e>r)return!1;for(let n=1;n<=e;n++)if(t[e-n]!==1&&t[e-n]!==o[r-n])return!1;return!0}static getBroadcastDims(t,o){let e=t.length,r=[];for(let n=0;n<e;n++){let s=e-1-n,a=t[s]||1;(o[o.length-1-n]||1)>1&&a===1&&r.unshift(s)}return r}},No=class{static getShapeOfGemmResult(t,o,e,r,n){if(t.length!==2||e.length!==2)throw new Error("shape need to be of size 2");let s,a,u;o?(s=t[1],a=t[0]):(s=t[0],a=t[1]);let l=-1;if(r?(u=e[0],l=1):(u=e[1],l=0),e[l]!==a)throw new Error("dimension mismatch");if(s<=0||u<=0||a<=0)throw new Error("invalid shape specified");if(n&&!st.isValidBroadcast(n,[s,u]))throw new Error("gemm: invalid bias shape for broadcast");return[s,u,a]}},Ze=class i{static tensorDataTypeFromProto(t){switch(t){case Ee.onnx.TensorProto.DataType.INT8:return"int8";case Ee.onnx.TensorProto.DataType.UINT8:return"uint8";case Ee.onnx.TensorProto.DataType.BOOL:return"bool";case Ee.onnx.TensorProto.DataType.INT16:return"int16";case Ee.onnx.TensorProto.DataType.UINT16:return"uint16";case Ee.onnx.TensorProto.DataType.INT32:return"int32";case Ee.onnx.TensorProto.DataType.UINT32:return"uint32";case Ee.onnx.TensorProto.DataType.FLOAT:return"float32";case Ee.onnx.TensorProto.DataType.DOUBLE:return"float64";case Ee.onnx.TensorProto.DataType.STRING:return"string";case Ee.onnx.TensorProto.DataType.INT64:return"int32";case Ee.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${Ee.onnx.TensorProto.DataType[t]}`)}}static tensorDataTypeStringToEnum(t){switch(t){case"int8":return Ee.onnx.TensorProto.DataType.INT8;case"uint8":return Ee.onnx.TensorProto.DataType.UINT8;case"bool":return Ee.onnx.TensorProto.DataType.BOOL;case"int16":return Ee.onnx.TensorProto.DataType.INT16;case"uint16":return Ee.onnx.TensorProto.DataType.UINT16;case"int32":return Ee.onnx.TensorProto.DataType.INT32;case"uint32":return Ee.onnx.TensorProto.DataType.UINT32;case"float32":return Ee.onnx.TensorProto.DataType.FLOAT;case"float64":return Ee.onnx.TensorProto.DataType.DOUBLE;case"string":return Ee.onnx.TensorProto.DataType.STRING;case"int64":return Ee.onnx.TensorProto.DataType.INT64;case"uint64":return Ee.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${t}`)}}static tensorDimsFromProto(t){return t.map(o=>Qt.isLong(o)?o.toNumber():o)}static tensorValueTypeFromProto(t){return{tensorType:i.tensorDataTypeFromProto(t.elemType),shape:{dims:i.tensorDimsFromProto(t.shape.dim.map(o=>o.dimValue))}}}static tensorDimsFromORTFormat(t){let o=[];for(let e=0;e<t.dimsLength();e++)o.push(dt.longToNumber(t.dims(e)));return o}static tensorAttributesFromORTFormat(t){let o=[];for(let e=0;e<t.attributesLength();e++)o.push(t.attributes(e));return o}},dt=class{static longToNumber(t,o){return Qt.isLong(t)?t.toNumber():t instanceof O.Long?Qt.fromValue({low:t.low,high:t.high,unsigned:o??!1}).toNumber():t}static isLong(t){return Qt.isLong(t)||t instanceof O.Long}},H=class i{static size(t){return i.getSizeFromDimensionRange(t,0,t.length)}static sizeFromDimension(t,o){if(o<0||o>t.length)throw new Error(`invalid dimension of ${o} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return i.getSizeFromDimensionRange(t,o,t.length)}static sizeToDimension(t,o){if(o<0||o>t.length)throw new Error(`invalid dimension of ${o} for sizeToDimension as Tensor has ${t.length} dimensions.`);return i.getSizeFromDimensionRange(t,0,o)}static getSizeFromDimensionRange(t,o,e){let r=1;for(let n=o;n<e;n++){if(t[n]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");r*=t[n]}return r}static computeStrides(t){let o=t.length;if(o===0)return[];if(o===1)return[1];let e=new Array(o);e[o-1]=1,e[o-2]=t[o-1];for(let r=o-3;r>=0;--r)e[r]=e[r+1]*t[r+1];return e}static transpose(t){return t.slice().reverse()}static indicesToOffset(t,o,e){e===void 0&&(e=t.length);let r=0;for(let n=0;n<e;++n)r+=o[n]*t[n];return r}static offsetToIndices(t,o){let e=o.length;if(e===0)return[];if(e===1)return[t*o[0]];let r=new Array(o.length);for(let n=0;n<r.length-1;++n)r[n]=Math.floor(t/o[n]),t-=r[n]*o[n];return r[r.length-1]=t,r}static normalizeAxis(t,o){if(t<-o&&t>=o)throw new Error("unsupported axis for this operation.");return t<0?t+o:t}static normalizeAxes(t,o){return t.map(e=>this.normalizeAxis(e,o))}static incrementIndex(t,o,e){if(o.length===0||t.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(e===void 0)e=o.length;else if(e<=0||e>o.length)throw new Error("Incorrect axis to increment on");for(let r=e-1;r>=0&&(t[r]++,!(t[r]<o[r]));--r)t[r]=0}static calculateReshapedDims(t,o){if(o.length===0){if(t.length===0||i.size(t)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let e=o.length,r=new Array(e),n=-1,s=1;for(let u=0;u<e;u++){if(o[u]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(o[u]===-1){if(n!==-1)throw new Error("at most one dimension in shape hints can be -1");n=u}else{if(o[u]===0){if(u>=t.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");r[u]=t[u]}else r[u]=o[u];s*=r[u]}}let a=i.size(t);if(n!==-1){if(a%s!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${t}] Output shape: [${o}]`);r[n]=a/s}else if(s!==a)throw new Error("reshapedDims and originalDims don't have matching sizes");return r}static sortBasedOnPerm(t,o){return o?o.map(e=>t[e]):t.slice().reverse()}static padShape(t,o){let e=t.length;return t.map((r,n)=>r+o[n]+o[n+e])}static areEqual(t,o){return t.length!==o.length?!1:t.every((e,r)=>e===o[r])}static validateDimsAndCalcSize(t){if(t.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let o=1;for(let e of t){if(!Number.isInteger(e))throw new TypeError(`Invalid shape: ${e} is not an integer`);if(e<0||e>2147483647)throw new TypeError(`Invalid shape: length ${e} is not allowed`);o*=e}return o}static flattenShape(t,o){o<0&&(o+=t.length);let e=t.reduce((s,a)=>s*a,1),r=t.slice(o).reduce((s,a)=>s*a,1);return[e/r,r]}static squeezeShape(t,o){let e=new Array;o=i.normalizeAxes(o,t.length);for(let r=0;r<t.length;r++){let n=o.indexOf(r)>=0;if(n&&t[r]!==1)throw new Error("squeeze an axis of size different than 1");(o.length===0&&t[r]>1||o.length>0&&!n)&&e.push(t[r])}return e}static unsqueezeShape(t,o){let e=new Array(t.length+o.length);e.fill(0);for(let n=0;n<o.length;n++){let s=i.normalizeAxis(o[n],e.length);if(s>=e.length)throw new Error("'axes' has an out of range axis");if(e[s]!==0)throw new Error("'axes' has a duplicate axis");e[s]=1}let r=0;for(let n=0;n<e.length;n++)e[n]===0&&(e[n]=t[r++]);if(r!==t.length)throw new Error("the unsqueezed dimension could not be established");return e}},Gn=class i{static splitShape(t,o,e,r){if(e.length===0){if(!r)throw new Error("need to know number of outputs when the 'split' attribute is not specified");i.determineSplit(t[o],r,e)}let n=[],s=[0];for(let a=0;a<e.length;++a){a!==0&&s.push(s[a-1]+e[a-1]);let u=t.slice();u[o]=e[a],n.push(u)}return[n,s]}static determineSplit(t,o,e){if(t%o!==0)throw new Error("cannot split tensor to equal sized parts");for(let r=0;r<o;++r)e.push(t/o)}},$r=class i{static adjustPoolAttributes(t,o,e,r,n,s){if(!t&&e.length!==o.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let a=0;a<o.length-2;a++)a>=e.length?e.push(o[a+2]):e[a]=o[a+2];for(let a=0;a<e.length;a++)if(a<r.length){if(r[a]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(let a=0;a<e.length;a++)if(a<n.length){if(n[a]<0)throw new Error("dilations should be greater than or equal to 1")}else n.push(1);for(let a=0;a<e.length*2;a++)if(a<s.length){if(s[a]<0)throw new Error("pad should be greater than or equal to 1")}else s.push(0);for(let a=0;a<e.length;a++){if(e[a]<=0)throw new Error("kernel shapes need to be greater than 0");if(s[a]>=e[a]||s[a+e.length]>=e[a])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,o,e,r,n,s){if(s){if(n.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(o.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let a=0;a<t.length-2;a++)i.adjustPadAndReturnShape(t[a+2],o[a],e[a],r[a],n,a,a+t.length-2,s)}}static computePoolOutputShape(t,o,e,r,n,s,a){if(o.length<=0)throw new Error("input shape must be of size greater than 0");let u=[o[0],o[1]];return i.computeShapeHelper(t,o,u,e,r,n,s,a),u}static computeConvOutputShape(t,o,e,r,n,s,a){if(t.length<=0||o.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let u=[t[0],o[0]];return i.computeShapeHelper(!1,t,u,e,r,n,s,a),u}static computeShapeHelper(t,o,e,r,n,s,a,u){if(t)for(let l=0;l<o.length-2;l++)e.push(1);else for(let l=0;l<o.length-2;l++)e.push(i.adjustPadAndReturnShape(o[l+2],r[l],n[l],s[l],a,l,l+o.length-2,u))}static adjustPadAndReturnShape(t,o,e,r,n,s,a,u){let l=e*(r-1)+1;if(u&&u!=="NOTSET")switch(u){case"VALID":return n[s]=0,n[a]=0,Math.floor((t-l)/o+1);case"SAME_LOWER":case"SAME_UPPER":if(e!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let b=((t+o-1)/o-1)*o+r-t;return n[s]=Math.floor(u==="SAME_LOWER"?(b+1)/2:b/2),n[a]=b-n[s],Math.floor((t+b-r)/o+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+n[s]+n[a]-l)/o+1)}},kr=-34028234663852886e22,Br=34028234663852886e22});function Ch(i){switch(i){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${i}`)}}function gl(i){switch(i){case ue.onnx.TensorProto.DataType.UINT8:case ue.onnx.TensorProto.DataType.INT8:case ue.onnx.TensorProto.DataType.BOOL:return 1;case ue.onnx.TensorProto.DataType.UINT16:case ue.onnx.TensorProto.DataType.INT16:return 2;case ue.onnx.TensorProto.DataType.FLOAT:case ue.onnx.TensorProto.DataType.INT32:case ue.onnx.TensorProto.DataType.UINT32:return 4;case ue.onnx.TensorProto.DataType.INT64:case ue.onnx.TensorProto.DataType.DOUBLE:case ue.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${ue.onnx.TensorProto.DataType[i]}`)}}function Fh(i,t){return new(vl(t))(i)}function vl(i){switch(i){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function oa(i,t){if(t===ue.onnx.TensorProto.DataType.INT64||t===na.TensorDataType.INT64){if(i.greaterThanOrEqual(2147483648)||i.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else if(t===ue.onnx.TensorProto.DataType.UINT32||t===na.TensorDataType.UINT32||t===ue.onnx.TensorProto.DataType.UINT64||t===na.TensorDataType.UINT64){if(i.greaterThanOrEqual(4294967296)||i.lessThan(0))throw new TypeError("uint64 is not supported")}else throw new TypeError(`not a LONG type: ${ue.onnx.TensorProto.DataType[t]}`);return i.toNumber()}function yl(i,t,o){switch(t){case ue.onnx.TensorProto.DataType.BOOL:case ue.onnx.TensorProto.DataType.UINT8:return i.getUint8(o);case ue.onnx.TensorProto.DataType.INT8:return i.getInt8(o);case ue.onnx.TensorProto.DataType.UINT16:return i.getUint16(o,!0);case ue.onnx.TensorProto.DataType.INT16:return i.getInt16(o,!0);case ue.onnx.TensorProto.DataType.FLOAT:return i.getFloat32(o,!0);case ue.onnx.TensorProto.DataType.INT32:return i.getInt32(o,!0);case ue.onnx.TensorProto.DataType.UINT32:return i.getUint32(o,!0);case ue.onnx.TensorProto.DataType.INT64:return oa(Qt.fromBits(i.getUint32(o,!0),i.getUint32(o+4,!0),!1),t);case ue.onnx.TensorProto.DataType.DOUBLE:return i.getFloat64(o,!0);case ue.onnx.TensorProto.DataType.UINT64:return oa(Qt.fromBits(i.getUint32(o,!0),i.getUint32(o+4,!0),!0),t);default:throw new Error(`cannot read from DataView for type ${ue.onnx.TensorProto.DataType[t]}`)}}var Tl,ue,na,We,Nr=$(()=>{"use strict";Tl=nn(uu());Wi();Bn();ue=nn(un());ge();na=Y.experimental.fbs,We=class i{constructor(t,o,e,r,n,s=Tl.Guid.create()){this.dims=t;this.type=o;this.dataProvider=e;this.asyncDataProvider=r;this.cache=n;this.dataId=s;this.size=H.validateDimsAndCalcSize(t);let a=this.size,u=e===void 0&&r===void 0&&n===void 0;if(n!==void 0&&n.length!==a)throw new RangeError("Input dims doesn't match data length.");if(o==="string"){if(n!==void 0&&(!Array.isArray(n)||!n.every(l=>typeof l=="string")))throw new TypeError("cache should be a string array");u&&(this.cache=new Array(a))}else{if(n!==void 0){let l=vl(o);if(!(n instanceof l))throw new TypeError(`cache should be type ${l.name}`)}if(u){let l=new ArrayBuffer(a*Ch(o));this.cache=Fh(l,o)}}}get data(){if(this.cache===void 0){let t=this.dataProvider(this.dataId);if(t.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=t}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(t){return this.data[H.indicesToOffset(t,this.strides)]}set(t,o){this.data[H.indicesToOffset(t,this.strides)]=o}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=H.computeStrides(this.dims)),this._strides}static fromProto(t){if(!t)throw new Error("cannot construct Value from an empty tensor");let o=Ze.tensorDataTypeFromProto(t.dataType),e=Ze.tensorDimsFromProto(t.dims),r=new i(e,o);if(o==="string")t.stringData.forEach((n,s)=>{r.data[s]=Un(n)});else if(t.rawData&&typeof t.rawData.byteLength=="number"&&t.rawData.byteLength>0){let n=r.data,s=new DataView(t.rawData.buffer,t.rawData.byteOffset,t.rawData.byteLength),a=gl(t.dataType),u=t.rawData.byteLength/a;if(t.rawData.byteLength%a!==0)throw new Error("invalid buffer length");if(n.length!==u)throw new Error("buffer length mismatch");for(let l=0;l<u;l++){let c=yl(s,t.dataType,l*a);n[l]=c}}else{let n;switch(t.dataType){case ue.onnx.TensorProto.DataType.FLOAT:n=t.floatData;break;case ue.onnx.TensorProto.DataType.INT32:case ue.onnx.TensorProto.DataType.INT16:case ue.onnx.TensorProto.DataType.UINT16:case ue.onnx.TensorProto.DataType.INT8:case ue.onnx.TensorProto.DataType.UINT8:case ue.onnx.TensorProto.DataType.BOOL:n=t.int32Data;break;case ue.onnx.TensorProto.DataType.INT64:n=t.int64Data;break;case ue.onnx.TensorProto.DataType.DOUBLE:n=t.doubleData;break;case ue.onnx.TensorProto.DataType.UINT32:case ue.onnx.TensorProto.DataType.UINT64:n=t.uint64Data;break;default:throw new Error("unspecific error")}if(n==null)throw new Error("failed to populate data from a tensorproto value");let s=r.data;if(s.length!==n.length)throw new Error("array length mismatch");for(let a=0;a<n.length;a++){let u=n[a];Qt.isLong(u)?s[a]=oa(u,t.dataType):s[a]=u}}return r}static fromData(t,o,e){return new i(o,e,void 0,void 0,t)}static fromOrtTensor(t){if(!t)throw new Error("cannot construct Value from an empty tensor");let o=Ze.tensorDimsFromORTFormat(t),e=Ze.tensorDataTypeFromProto(t.dataType()),r=new i(o,e);if(e==="string")for(let n=0;n<t.stringDataLength();n++)r.data[n]=t.stringData(n);else if(t.rawDataArray()&&typeof t.rawDataLength()=="number"&&t.rawDataLength()>0){let n=r.data,s=new DataView(t.rawDataArray().buffer,t.rawDataArray().byteOffset,t.rawDataLength()),a=gl(t.dataType()),u=t.rawDataLength()/a;if(t.rawDataLength()%a!==0)throw new Error("invalid buffer length");if(n.length!==u)throw new Error("buffer length mismatch");for(let l=0;l<u;l++){let c=yl(s,t.dataType(),l*a);n[l]=c}}return r}}});function K(i){return i===1?$h:kh}function xl(i){let t=K(i);return`${t.version}
      precision highp float;
      ${t.attribute} vec3 position;
      ${t.attribute} vec2 textureCoord;

      ${t.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function wl(i){let t=K(i);return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFrag} vec2 TexCoords;
    ${t.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function _l(i,t){let o=K(i);return`
  void main() {
    int indices[${t}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${o.output} = result;
  }
  `}var $h,kh,De=$(()=>{"use strict";$h={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},kh={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}});var pe=$(()=>{"use strict"});async function ia(i,t=e=>0,o){return new Promise((e,r)=>{let n=0,s=()=>{if(i()){e();return}n++;let a=t(n);if(o!=null&&n>=o){r();return}setTimeout(s,a)};s()})}function Ro(i){return ln(typeof i<"u"&&i.length!==0,()=>"empty string found for sampler name"),"get"+i.charAt(0).toUpperCase()+i.slice(1)}function Ol(i){return ln(typeof i<"u"&&i.length!==0,()=>"empty string found for sampler name"),"get"+i.charAt(0).toUpperCase()+i.slice(1)+"AtOutCoords"}function fn(i,t){let o=JSON.parse(JSON.stringify(i));return o=t,o}function cn(i,t){return t.map(o=>i[o]).join(", ")}function ut(i){if(i<=1)return"int";if(i===2)return"ivec2";if(i===3)return"ivec3";if(i===4)return"ivec4";if(i===5)return"ivec5";if(i===6)return"ivec6";throw Error(`GPU for rank ${i} is not yet supported`)}function Bt(i=6){return["x","y","z","w","u","v"].slice(0,i)}var Ut=$(()=>{"use strict";ge()});function Bh(i,t){return Bt(t).map(o=>`${i}.${o}`)}function pn(i,t){return t===1?[i]:Bh(i,t)}function Wt(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var Rr=$(()=>{"use strict";Ut()});function Rh(i,t,o){if(i===0)return"false";if(i===1)return`rc > ${t[0]}`;let e="";for(let r=i-2;r<i;r++)e+=`${o[r]} >= ${t[r-i+2]}`,r<i-1&&(e+="||");return e}function Mh(i,t){let o=i.length;if(o===0)return"getA(), 0, 0, 0";if(o===1)return`getA(rc),
            rc + 1 >= ${i[0]} ? 0. : getA(rc + 1),
            0, 0`;let e="r, c",r="r, cp1",n="rp1, c",s="rp1, cp1",a="";if(o>2)for(let u=0;u<o-2;++u)a=a+`${t[u]},`;return`getA(${a}${e}),
          rEdge ? 0. : getA(${a}${n}),
          cEdge ? 0. : getA(${a}${r}),
          rEdge || cEdge ? 0. : getA(${a}${s})`}function Gh(i,t,o,e){return i===0||i===1?"":`
    int r = ${t[i-2]};
    int c = ${t[i-1]};
    int rp1 = ${t[i-2]} + 1;
    int cp1 = ${t[i-1]} + 1;
    bool rEdge = rp1 >= ${e};
    bool cEdge = cp1 >= ${o};
    `}var Al,Nh,Il,Sl=$(()=>{"use strict";De();pe();Ut();Rr();Al={name:"pack",inputNames:["A"],inputTypes:[1]},Nh=(i,t)=>{let o=K(i.session.backend.glContext.version),e=t.dims,r=e.length,n=t.dims.length,s=ut(n),a=pn("rc",n),u=Gh(n,a,e[e.length-2],e[e.length-1]),l;r===0?l=[1,1]:r===1?l=[e[0],1]:l=[e[n-1],e[n-2]];let c=Rh(n,l,a),b=Mh(e,a),y=`
        void main() {
          ${s} rc = getOutputCoords();

          if(${c}) {
            ${o.output} = vec4(0);
          } else {
            ${u}

            ${o.output} = vec4(${b});
          }
        }
      `;return{...Al,hasMain:!0,output:{dims:t.dims,type:t.type,textureType:2},shaderSource:y}},Il=(i,t)=>({...Al,get:()=>Nh(i,t)})});function aa(i){if(i.length===0)return[1,1,1];let t=1;for(let o=0;o<i.length-2;++o)t*=i[o];return[t,i.length>1?i[i.length-2]:1,i[i.length-1]]}function El(i,t){let o=!1;return i.length===0||t.length===0?o=!0:i.length<2||t.length<2?o=i[i.length-1]===t[t.length-1]:o=i[i.length-1]===t[t.length-1]&&i[i.length-2]===t[t.length-2],o}function Vh(i){let t=H.computeStrides(i),o=["b","r","c"],e="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t.map((n,s)=>{let a=`int ${o[s]} = ${e} / ${n}`,u=s===t.length-1?`int ${o[s+1]} = ${e} - ${o[s]} * ${n}`:`index -= ${o[s]} * ${n}`;return`${a}; ${u};`}).join("")}
      return ivec3(b, r, c);
    }
  `}function zh(i){let t=H.computeStrides(i);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${t[0]} + coords.z * ${t[1]} + coords.y;
  }
`}var Uh,Wh,Pl,Dl=$(()=>{"use strict";ge();De();pe();Rr();Uh=i=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${i}`}),Wh=(i,t,o,e)=>{let r=t.dims,n=e,s="";for(let l=0;l<4;l++){let c="";switch(l){case 0:c="outputCoords = rc;";break;case 1:c="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:c="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:c="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}s+=`
        ${c}
        ${l>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${l}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${l>0?"}":""}
      `}let a=K(i.session.backend.glContext.version),u=`
      ${Vh(r)}
      ${zh(n)}
      ${Wt()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${n[2]};
        int cols = ${n[1]};

        ${s}
        ${a.output} = result;
      }
    `;return{...o,output:{dims:n,type:t.type,textureType:2},shaderSource:u,hasMain:!0}},Pl=(i,t,o)=>{let e=Uh(o);return{...e,get:()=>Wh(i,t,e,o)}}});var sa,Ll=$(()=>{"use strict";De();pe();sa=(i,t)=>{let o=t.shape,e=K(i.session.backend.glContext.version),r=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${e.texture2D}(X,TexCoords).r;
      ${e.output} = encodeAsUint8(value);
    }`,n={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:o,type:t.tensor.type,textureType:3},shaderSource:r,hasMain:!0};return i.executeProgram(n,[t.tensor])}});function jh(i,t){if(i===1)return"rc";let o="";for(let e=0;e<i;e++)o+=t[e],e<i-1&&(o+=",");return o}var Cl,Hh,Fl,$l=$(()=>{"use strict";De();pe();Ut();Rr();Cl={name:"unpack",inputNames:["A"],inputTypes:[2]},Hh=(i,t)=>{let o=t.dims.length,e=pn("rc",o),r=e.slice(-2),n=ut(o),s=Wt(),u=t.dims.length===0?"":jh(o,e),l=o<=1?"rc":`vec2(${r.join(",")})`,c=K(i.session.backend.glContext.version),b=`
    ${s}
    void main() {
      ${n} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${u});

       ${c.output} = vec4(getChannel(packedInput, ${l}), 0, 0, 0);
     }
   `;return{...Cl,hasMain:!0,output:{dims:t.dims,type:t.type,textureType:0},shaderSource:b}},Fl=(i,t)=>({...Cl,get:()=>Hh(i,t)})});var Mo,Wn,Go,Vn=$(()=>{"use strict";gt();Mo=class{constructor(t,o=1){if(o===1)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=o;else if(o===4)this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=o;else throw new Error(`Invalid number of channels: ${o}`)}encode(t,o){let e,r;return t.constructor!==Float32Array&&(Te.warning("Encoder","data was not of type Float32; creating new Float32Array"),r=new Float32Array(t)),o*this.channelSize>t.length?(Te.warning("Encoder","Source data too small. Allocating larger array"),r=t,e=this.allocate(o*this.channelSize),r.forEach((n,s)=>e[s]=n)):(r=t,e=r),e}allocate(t){return new Float32Array(t*4)}decode(t,o){return this.channelSize===1?t.filter((r,n)=>n%4===0).subarray(0,o):t.subarray(0,o)}},Wn=class{constructor(t,o=1,e){if(o!==1&&o!==4)throw new Error(`Invalid number of channels: ${o}`);this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=o,this.textureType=e||t.FLOAT}encode(t,o){let e=t;return this.channelSize===1&&(Te.verbose("Encoder","Exploding into a larger array"),e=this.allocate(o),t.forEach((r,n)=>e[n*4]=r)),e}allocate(t){return new Float32Array(t*4)}decode(t,o){return this.channelSize===1?t.filter((r,n)=>n%4===0).subarray(0,o):t.subarray(0,o)}},Go=class{constructor(t,o=1){this.channelSize=4;if(o===1)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=o;else if(o===4)this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=o;else throw new Error(`Invalid number of channels: ${o}`)}encode(t,o){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}allocate(t){return new Uint8Array(t*this.channelSize)}decode(t,o){if(t instanceof Uint8Array)return t.subarray(0,o);throw new Error(`Invalid array type: ${t.constructor}`)}}});var zn,kl,ua,Bl=$(()=>{"use strict";ge();pe();zn=(i,t,o)=>{let e=o===0||o===1?1:4,r=o===2,n=o===1||o===2,s=o===4?t.length-1:void 0,a=o===4?t.map((u,l)=>l===t.length-1?u*4:u):void 0;return ua(i,t,e,a,{isPacked:r,reverseWH:n,breakAxis:s})},kl=(i,t,o)=>{let e=zn(i,t,o);return[e.width,e.height]},ua=(i,t,o=1,e,r)=>{let n=!!(r&&r.isPacked),[s,a]=i.computeTextureWH(n&&e||t,r),u=t.length,l=t.slice(0);if(u===0&&(l=[1]),o===1)e=t;else if(n){if(o!==4)throw new Error("a packed texture must be 4-channel");e=t,u>0&&(l[u-1]=Math.ceil(l[u-1]/2)),u>1&&(l[u-2]=Math.ceil(l[u-2]/2))}else if(!e)throw new Error("Unpacked shape is needed when using channels > 1");return{width:s,height:a,channels:o,isPacked:n,shape:l,strides:H.computeStrides(l),unpackedShape:e,reversedWH:r&&r.reverseWH}}});var Yh,Uo,Rl=$(()=>{"use strict";gt();Nr();ge();Sl();Dl();Ll();$l();Vn();Bl();pe();Yh=(i,t)=>{let o=t.map(r=>`${r.unpackedShape.join(",")};${r.width}x${r.height}`).join("_"),e=i.name;return i.cacheHint&&(e+="["+i.cacheHint+"]"),e+=":"+o,e},Uo=class{constructor(t){this.session=t;this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(t,o){return kl(this.session.layoutStrategy,t,o)}executeProgram(t,o){if(o.length<t.inputNames.length)throw new Error(`Input size mustn't be less than ${t.inputNames.length}.`);if(t.inputNames.length!==t.inputTypes.length)throw new Error("input names size does not match input types");let e=[];for(let l=0;l<t.inputNames.length;++l)e[l]=this.getOrCreateTextureData(o[l],t.inputTypes[l]);let r=Yh(t,e),n=this.session.programManager.getArtifact(r),s=n?n.programInfo:typeof t.get=="function"?t.get():t,a=zn(this.session.layoutStrategy,s.output.dims,s.output.textureType),u=this.createTextureData(a,s.output.type);return n||(n=this.session.programManager.build(s,e,u),this.session.programManager.setArtifact(r,n)),this.runProgram(n,e,u),u}run(t,o){return this.executeProgram(t,o).tensor}runProgram(t,o,e){for(let r=0;r<o.length;++r)if(!!o[r].isPacked!=(t.programInfo.inputTypes[r]===2))throw new Error(`input[${r}] property packed inconsistent`);if(!!e.isPacked!=(t.programInfo.output.textureType===2))throw new Error("output property packed inconsistent");this.session.programManager.run(t,o,e)}getOrCreateTextureData(t,o){let e=this.getTextureData(t.dataId,o===2);if(!e&&(e=this.getTextureData(t.dataId,o!==2),e))return o===2?this.pack(e):this.unpack(e);if(!e){let r=zn(this.session.layoutStrategy,t.dims,o);if(o===4){let a=t.dims;if(a.length===4){let u=[a[0],Math.ceil(a[1]*a[2]*a[3]/4)],l=zn(this.session.layoutStrategy,u,o),c=t.numberData;if(a[1]*a[2]*a[3]%4!==0){let b=a[0],y=a[1]*a[2]*a[3],w=Math.ceil(y*1/4)*4,S=b*w;c=new Float32Array(S);for(let I=0;I<b;++I){let F=I*y,k=I*w+I%1*y;c.set(t.numberData.subarray(F,F+y),k)}}return this.createTextureData(l,t.type,c,t,1)}}if(o===2){let n=ua(this.session.layoutStrategy,t.dims,1,[],{reverseWH:!0}),s=this.createTextureData(n,t.type,t.numberData,t,1);e=this.pack(s)}else e=this.createTextureData(r,t.type,t.numberData,t,1)}return e}createTextureDataFromLayoutBindTensor(t,o,e,r){return this.createTextureData(t,o,e,r,1)}createTextureData(t,o,e,r,n){Te.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(t)}]`);let s=this.session.textureManager.createTextureFromLayout(o,t,e,n);return this.createTextureDataFromTexture(t,o,s,r)}reshapeUnpacked(t,o){let e=this.getOrCreateTextureData(t,0),r={channels:e.channels,height:e.height,width:e.width,shape:o.length!==0?o:[1],strides:H.computeStrides(o),unpackedShape:o};return this.createTextureDataFromTexture(r,t.type,e.texture).tensor}reshapePacked(t,o){let e=this.getOrCreateTextureData(t,2);if(El(t.dims,o)){let l={channels:e.channels,height:e.height,width:e.width,shape:o.length!==0?o:[1],strides:H.computeStrides(o),unpackedShape:o,isPacked:!0};return this.createTextureDataFromTexture(l,t.type,e.texture).tensor}let r=aa(t.dims),n=aa(o),s=this.reshapePacked(t,r),a=this.run(Pl(this,s,n),[s]);return this.reshapePacked(a,o)}cast(t,o){let e=this.getOrCreateTextureData(t,0);return this.createTextureDataFromTexture(e,o,e.texture).tensor}createTextureDataFromTexture(t,o,e,r,n){let s={...t,tensor:r||new We(t.unpackedShape,o,a=>this.readTexture(s),async a=>this.readTextureAsync(s),void 0,n),texture:e};return this.setTextureData(s.tensor.dataId,s,t.isPacked),s}getTextureData(t,o=!1){return this.session.isInitializer(t)?this.session.getTextureData(t,o):o?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,o,e=!1){this.session.isInitializer(t)?this.session.setTextureData(t,o,e):(e?this.packedTextureDataCache:this.unpackedTextureDataCache).set(t,o)}isTextureLayoutCached(t,o=!1){return!!this.getTextureData(t.dataId,o)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.unpackedTextureDataCache=new Map}readTexture(t){return t.isPacked?this.readTexture(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(sa(this,t))}async readTextureAsync(t){return t.isPacked?this.readTextureAsync(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(sa(this,t))}pack(t){return this.executeProgram(Il(this,t.tensor),[t.tensor])}unpack(t){return this.executeProgram(Fl(this,t.tensor),[t.tensor])}}});var la,ae,Ye=$(()=>{"use strict";la=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this.key}},ae=i=>new la(i)});var Ml,Gl,Ul,Xh,Kh,Wl=$(()=>{"use strict";Ye();De();pe();Ml={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},Gl=(i,t,o)=>(Kh(t),[i.run({...Ml,cacheHint:o.cacheKey,get:()=>Xh(i,t,o)},t)]),Ul=i=>{let t=i.attributes.getFloat("epsilon",1e-5),o=i.attributes.getFloat("momentum",.9),e=i.attributes.getInt("spatial",1);return ae({epsilon:t,momentum:o,spatial:e})},Xh=(i,t,o)=>{let e=K(i.session.backend.glContext.version),r=t[0].dims.length,[n,s]=i.calculateTextureWidthAndHeight(t[1].dims,0),a=`
  float process(int[${r}] indices) {
    vec2 position = offsetToCoords(indices[1], ${n}, ${s});
    float scale = getColorAsFloat(${e.texture2D}(Scale, position));
    float mean = getColorAsFloat(${e.texture2D}(Mean, position));
    float variance = getColorAsFloat(${e.texture2D}(Variance, position));
    float b = getColorAsFloat(${e.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${o.epsilon})) ) + b;
  }`;return{...Ml,output:{dims:t[0].dims,type:t[0].type,textureType:0},shaderSource:a}},Kh=i=>{if(!i||i.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let t=i[0],o=i[1],e=i[2],r=i[3],n=i[4];if(t.dims.length<3||o.dims.length!==1||e.dims.length!==1||r.dims.length!==1||n.dims.length!==1)throw new Error("invalid input shape.");if(o.dims[0]!==t.dims[1]||e.dims[0]!==t.dims[1]||r.dims[0]!==t.dims[1]||n.dims[0]!==t.dims[1])throw new Error("invalid input shape.");if(t.type!=="float32"&&t.type!=="float64"||o.type!=="float32"&&o.type!=="float64"||e.type!=="float32"&&e.type!=="float64"||r.type!=="float32"&&r.type!=="float64"||n.type!=="float32"&&n.type!=="float64")throw new Error("invalid input tensor types.")}});var Wo,xt,W,Hn,Vo,er=$(()=>{"use strict";Wo=class{constructor(t,o,e,r){this.glContext=t;this.programInfo=o;this.inputTextureLayouts=e;this.outputTextureLayout=r}},xt=class{constructor(t){this.context=t}},W=class{constructor(t,o){this.routineBody=t;this.dependencies=o}},Hn=class{constructor(t,o,e){this.name=t;e?this.dependencies=e:this.dependencies=[],o&&(this.routineBody=o)}addDependency(t){t&&this.dependencies.push(t)}},Vo=class{static returnOrderedNodes(t){if(!t||t.length===0)return[];if(t.length===1)return t;let o=new Set,e=new Set,r=new Array;return this.createOrderedNodes(t,o,e,r),r}static createOrderedNodes(t,o,e,r){for(let n=0;n<t.length;++n)this.dfsTraverse(t[n],o,e,r)}static dfsTraverse(t,o,e,r){if(!t||e.has(t.name))return;if(o.has(t.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");o.add(t.name);let n=t.dependencies;if(n&&n.length>0)for(let s=0;s<n.length;++s)this.dfsTraverse(n[s],o,e,r);r.push(t),e.add(t.name),o.delete(t.name)}}});function Zh(){let i="add_";return{body:`
  float ${i}(float a, float b) {
    return a + b;
  }
  vec4 ${i}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:i,type:0}}function Qh(){let i="div_";return{body:`
  float ${i}(float a, float b) {
    return a / b;
  }
  vec4 ${i}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:i,type:0}}function em(){let i="mul_";return{body:`
  float ${i}(float a, float b) {
    return a * b;
  }
  vec4 ${i}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:i,type:0}}function tm(){let i="sub_";return{body:`
  float ${i}(float a, float b) {
    return a - b;
  }
  vec4 ${i}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:i,type:0}}function rm(){let i="equal_";return{body:`
  float ${i}(float a, float b) {
    return float(a == b);
  }
  vec4 ${i}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:i,type:0}}function nm(){let i="greater_";return{body:`
  float ${i}(float a, float b) {
    return float(a > b);
  }
  vec4 ${i}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:i,type:0}}function om(){let i="less_";return{body:`
  float ${i}(float a, float b) {
    return float(a < b);
  }
  vec4 ${i}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:i,type:0}}function im(){let i="and_";return{body:`
  float ${i}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${i}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:i,type:0}}function am(){let i="or_";return{body:`
  float ${i}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${i}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:i,type:0}}function sm(){let i="xor_";return{body:`
  float ${i}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${i}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:i,type:0}}function um(){return fm("pow")}function lm(){let i="prelu_";return{body:`
  float ${i}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${i}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:i,type:0}}function fm(i){let t=`${i}_`;return{body:`
  float ${t}(float a, float b) {
    return ${i}(a, b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return ${i}(v1, v2);
  }
  `,name:t,type:0}}var wt,cm,Vl,zl,Hl,jl,ql,Yl,Xl,Kl,Jl,Zl,Ql,ef,tf=$(()=>{"use strict";ge();er();De();pe();wt=(i,t,o,e=t[0].type,r)=>{let n=i.session.pack?2:0;return{name:o.name,inputNames:["A","B"],inputTypes:[n,n],cacheHint:r,get:()=>cm(i,t,o,e)}},cm=(i,t,o,e=t[0].type)=>{let r=i.session.pack?2:0,n=!H.areEqual(t[0].dims,t[1].dims),s=t[0].dims,a=i.session.pack;if(n){let c=st.calcShape(t[0].dims,t[1].dims,!1);if(!c)throw new Error("Can't perform binary op on the given tensors");s=c;let b=s.length,y=t[0].dims.length!==0?t[0].dims.length:1,w=t[1].dims.length!==0?t[1].dims.length:1,S=t[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",I=t[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",F=K(i.session.backend.glContext.version),k=a?`
      ${o.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${o.name}(a, b);
        ${F.output} = result;
      }`:`
      ${o.body}
      float process(int indices[${b}]) {
        int aindices[${y}];
        int bindices[${w}];
        ${S}
        ${I}
        return ${o.name}(_A(aindices), _B(bindices));
      }`;return{name:o.name,inputNames:["A","B"],inputTypes:[r,r],output:{dims:s,type:e,textureType:r},shaderSource:k,hasMain:a}}let u=K(i.session.backend.glContext.version),l=`
    ${o.body}
    void main() {
      vec4 v1 = ${u.texture2D}(A, TexCoords);
      vec4 v2 = ${u.texture2D}(B, TexCoords);
      vec4 result = ${o.name}(v1, v2);
      ${u.output} = result;
    }
    `;return{name:o.name,inputNames:["A","B"],inputTypes:[r,r],output:{dims:t[0].dims,type:e,textureType:r},shaderSource:l,hasMain:!0}},Vl=(i,t)=>[i.run(wt(i,t,Zh()),t)],zl=(i,t)=>[i.run(wt(i,t,im(),"bool"),t)],Hl=(i,t)=>[i.run(wt(i,t,Qh()),t)],jl=(i,t)=>[i.run(wt(i,t,rm(),"bool"),t)],ql=(i,t)=>[i.run(wt(i,t,nm(),"bool"),t)],Yl=(i,t)=>[i.run(wt(i,t,om(),"bool"),t)],Xl=(i,t)=>[i.run(wt(i,t,em()),t)],Kl=(i,t)=>[i.run(wt(i,t,am(),"bool"),t)],Jl=(i,t)=>[i.run(wt(i,t,um()),t)],Zl=(i,t)=>[i.run(wt(i,t,lm()),t)],Ql=(i,t)=>[i.run(wt(i,t,tm()),t)],ef=(i,t)=>[i.run(wt(i,t,sm(),"bool"),t)]});var rf,nf,dm,of=$(()=>{"use strict";ge();rf=(i,t,o)=>(dm(t),[i.cast(t[0],o)]),nf=i=>Ze.tensorDataTypeFromProto(i.attributes.getInt("to")),dm=i=>{if(!i||i.length!==1)throw new Error("Cast requires 1 input.");if(i[0].type==="string")throw new Error("Invalid input type.")}});var hm,mm,af,zo,sf=$(()=>{"use strict";De();pe();Ut();Rr();hm=(i,t)=>({name:"Concat (packed)",inputNames:Array.from({length:i},(o,e)=>`X${e}`),inputTypes:Array(i).fill(2),cacheHint:t}),mm=(i,t,o,e)=>{let r=o[0].dims.slice();if(e>=r.length||e<-1*r.length)throw new Error("axis specified for concat doesn't match input dimensionality");e<0&&(e=r.length+e);let n=r.slice(0);for(let q=1;q<o.length;q++){let ve=o[q].dims.slice();for(let Le=0;Le<r.length;Le++)if(Le===e)n[e]+=ve[Le];else if(r[Le]!==ve[Le])throw new Error("non concat dimensions must match")}let s=n.length,a=pn("coords",s),u=ut(s),l=Wt(),c=o.map(q=>q.dims),b=Bt(s),y=new Array(c.length-1);y[0]=c[0][e];for(let q=1;q<y.length;q++)y[q]=y[q-1]+c[q][e];let w=b[e],S=b.slice(-2),I=b.join(),F=`if (${w} < ${y[0]}) {
        return getChannel(
            getX0(${I}), vec2(${S.join()}));
        }`;for(let q=1;q<y.length;q++){let ve=y[q-1];F+=`
            if (${w} < ${y[q]}  && ${w} >= ${y[q-1]}) {
              return getChannel(
                getX${q}(${zo(b,w,ve)}),
                vec2(${zo(S,w,ve)}));
            }`}let k=y.length,L=y[y.length-1];F+=`
            return getChannel(
              getX${k}(${zo(b,w,L)}),
              vec2(${zo(S,w,L)}));`;let N=K(i.session.backend.glContext.version),te=`
          ${l}
          float getValue(${b.map(q=>"int "+q)}) {
            ${F}
          }

          void main() {
            ${u} coords = getOutputCoords();
            int lastDim = coords.${b[s-1]};
            coords.${b[s-1]} = coords.${b[s-2]};
            coords.${b[s-2]} = lastDim;

            vec4 result = vec4(getValue(${a}), 0., 0., 0.);

            ${a[s-1]} = ${a[s-1]} + 1;
            if (${a[s-1]} < ${n[s-1]}) {
              result.g = getValue(${a});
            }

            ${a[s-2]} = ${a[s-2]} + 1;
            if (${a[s-2]} < ${n[s-2]}) {
              result.a = getValue(${a});
            }

            ${a[s-1]} = ${a[s-1]} - 1;
            if (${a[s-2]} < ${n[s-2]} &&
                ${a[s-1]} < ${n[s-1]}) {
              result.b = getValue(${a});
            }
            ${N.output} = result;
          }
        `;return{...t,output:{dims:n,type:o[0].type,textureType:2},shaderSource:te,hasMain:!0}},af=(i,t,o)=>{let e=hm(t.length,o.cacheKey);return{...e,get:()=>mm(i,e,t,o.axis)}},zo=(i,t,o)=>{let e=i.indexOf(t);return i.map((n,s)=>s===e?`${n} - ${o}`:n).join()}});var uf,bm,gm,ym,lf,Tm,vm,xm,ff,wm,cf=$(()=>{"use strict";Ye();pe();sf();uf=(i,t,o)=>(wm(t),i.session.pack&&t[0].dims.length>1?[i.run(af(i,t,o),t)]:[i.run(ym(i,t,o),t)]),bm=(i,t)=>({name:"Concat",inputNames:Array.from({length:i},(o,e)=>`X${e}`),inputTypes:Array(i).fill(0),cacheHint:t}),gm=(i,t,o,e)=>{let r=o[0].dims.slice();if(e>=r.length||e<-1*r.length)throw new Error("axis specified for concat doesn't match input dimensionality");e<0&&(e=r.length+e);let n=r.slice(0);for(let w=1;w<o.length;w++){let S=o[w].dims.slice();for(let I=0;I<r.length;I++)if(I===e)n[e]+=S[I];else if(r[I]!==S[I])throw new Error("non concat dimensions must match")}let s=n.length,a=new Array(o.length),u=0;for(let w=0;w<a.length;++w)u+=o[w].dims[e],a[w]=u;let l="";o.length<5?l=lf(a):l=Tm(a);let c=vm(o.length,s),b=xm(a),y=`
        ${c}
        ${b}
        ${l}
        float process(int indices[${s}]) {
          int textureIndex = getTextureWhereDataResides (indices[${e}]);

          if(textureIndex != 0) {
            indices[${e}] = indices[${e}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return{...t,output:{dims:n,type:o[0].type,textureType:0},shaderSource:y}},ym=(i,t,o)=>{let e=bm(t.length,o.cacheKey);return{...e,get:()=>gm(i,e,t,o.axis)}},lf=i=>`int getTextureWhereDataResides(int index) {
      ${i.map((o,e)=>`if(index<${o}) {return ${e};}
`).join("")}
    }`,Tm=i=>lf(i),vm=(i,t)=>{let o=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${t}]) {`];for(let e=0;e<i;++e)e===0?o.push(`	if (textureIndex == ${e}) { return _X${e}(indices); }`):e===i-1?o.push(`	else { return _X${e}(indices); }`):o.push(`	else if (textureIndex == ${e}) { return _X${e}(indices); }`);return o.push("	}"),o.join(`
`)},xm=i=>{let t=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let o=0;o<i.length;++o)o===0?t.push(`	if (index == ${o}) { return ${i[o]}; }`):o===i.length-1?t.push(`	else { return ${i[o]}; }`):t.push(`	else if (index == ${o}) { return ${i[o]}; }`);return t.push("	}"),t.join(`
`)},ff=i=>ae({axis:i.attributes.getInt("axis")}),wm=i=>{if(!i||i.length<1)throw new Error("too few inputs");let t=i[0].type,o=i[0].dims.length;if(t==="string")throw new Error("string tensor is not supported yet");for(let e of i){if(e.type!==t)throw new Error("input tensors should be one type");if(e.dims.length!==o)throw new Error("input tensors should have the same shape")}}});function _m(){return _t("abs")}function Om(){return _t("acos")}function Am(){return _t("asin")}function Im(){return _t("atan")}function Sm(){return _t("ceil")}function Pm(){return _t("cos")}function Em(i){let t="elu";return{body:`
  const float alpha = float(${i});

  float ${t}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(${t}_(v.x), ${t}_(v.y), ${t}_(v.z), ${t}_(v.w));
  }
  `,name:t,type:0}}function Dm(){return _t("exp")}function Lm(){return _t("floor")}function fa(i,t){let o="clip";return{body:`
  const float min = float(${i});
  const float max = float(${t});

  float ${o}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${o}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:o,type:0}}function Cm(){let i="indentity";return{body:`
  float ${i}_(float a) {
    return a;
  }
  vec4 ${i}_(vec4 v) {
    return v;
  }
  `,name:i,type:0}}function Fm(i){let t="leakyRelu";return{body:`
  const float alpha = float(${i});

  float ${t}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(${t}_(v.x), ${t}_(v.y), ${t}_(v.z), ${t}_(v.w));
  }
  `,name:t,type:0}}function $m(){return _t("log")}function km(){let i="neg";return{body:`
  float ${i}_(float a) {
    return -a;
  }
  vec4 ${i}_(vec4 v) {
    return -v;
  }
  `,name:i,type:0}}function Bm(){let i="not";return{body:`
  float ${i}_(float a) {
    return float( ! bool(a) );
  }
  bool ${i}_(bool a) {
    return !a;
  }
  vec4 ${i}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${i}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:i,type:0}}function Nm(){return _t("sin")}function ca(){let i="relu";return{body:`
  float ${i}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${i}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:i,type:0}}function pa(){let i="sigmoid";return{body:`
  float ${i}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${i}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:i,type:0}}function Rm(){return _t("sqrt")}function Mm(){return _t("tan")}function Gm(){let i="tanh";return{body:`
  float ${i}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${i}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:i,type:0}}function _t(i){return{body:`
  float ${i}_(float a) {
    return ${i}(a);
  }
  vec4 ${i}_(vec4 v) {
    return ${i}(v);
  }
  `,name:i,type:0}}var Um,Re,pf,df,hf,mf,da,bf,gf,Wm,yf,Tf,vf,xf,wf,_f,ha,Of,Af,If,Sf,Pf,Ef,Df,Lf,Cf,Ff,$f,ma=$(()=>{"use strict";Ye();ge();er();De();pe();Um=(i,t,o,e)=>{let r=i.session.pack?2:0,n=K(i.session.backend.glContext.version);return{...t,output:{dims:o.dims,type:o.type,textureType:r},shaderSource:`
     ${e.body}
     void main() {
       vec4 v = ${n.texture2D}(A, TexCoords);
       v = ${e.name}_(v);
       ${n.output} = v;
     }
     `,hasMain:!0}},Re=(i,t,o,e)=>{let r=i.session.pack?2:0,n={name:o.name,inputTypes:[r],inputNames:["A"],cacheHint:e};return{...n,get:()=>Um(i,n,t,o)}},pf=(i,t)=>[i.run(Re(i,t[0],_m()),t)],df=(i,t)=>[i.run(Re(i,t[0],Om()),t)],hf=(i,t)=>[i.run(Re(i,t[0],Am()),t)],mf=(i,t)=>[i.run(Re(i,t[0],Im()),t)],da=(i,t,o)=>[i.run(Re(i,t[0],fa(o.min,o.max),o.cacheKey),t)],bf=i=>ae({min:i.attributes.getFloat("min",kr),max:i.attributes.getFloat("max",Br)}),gf=(i,t)=>{let o=Wm(i,t);return da(i,[t[0]],o)},Wm=(i,t)=>{if(t.length>=3&&(!i.session.isInitializer(t[1].dataId)||!i.session.isInitializer(t[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let o=t.length>=3?t[1].numberData[0]:kr,e=t.length>=3?t[2].numberData[0]:Br;return ae({min:o,max:e})},yf=(i,t)=>[i.run(Re(i,t[0],Sm()),t)],Tf=(i,t)=>[i.run(Re(i,t[0],Pm()),t)],vf=(i,t,o)=>[i.run(Re(i,t[0],Em(o.alpha),o.cacheKey),t)],xf=i=>ae({alpha:i.attributes.getFloat("alpha",1)}),wf=(i,t)=>[i.run(Re(i,t[0],Dm()),t)],_f=(i,t)=>[i.run(Re(i,t[0],Lm()),t)],ha=(i,t)=>[i.run(Re(i,t[0],Cm()),t)],Of=(i,t,o)=>[i.run(Re(i,t[0],Fm(o.alpha),o.cacheKey),t)],Af=i=>ae({alpha:i.attributes.getFloat("alpha",.01)}),If=(i,t)=>[i.run(Re(i,t[0],$m()),t)],Sf=(i,t)=>[i.run(Re(i,t[0],km()),t)],Pf=(i,t)=>[i.run(Re(i,t[0],Bm()),t)],Ef=(i,t)=>[i.run(Re(i,t[0],ca()),t)],Df=(i,t)=>[i.run(Re(i,t[0],pa()),t)],Lf=(i,t)=>[i.run(Re(i,t[0],Nm()),t)],Cf=(i,t)=>[i.run(Re(i,t[0],Rm()),t)],Ff=(i,t)=>[i.run(Re(i,t[0],Mm()),t)],$f=(i,t)=>[i.run(Re(i,t[0],Gm()),t)]});function Vt(i){let t;switch(i.activation){case"Relu":t=ca();break;case"Sigmoid":t=pa();break;case"Clip":t=fa(i.clipMin,i.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let o=t.name,e=t.body,r=`value = ${o}_(value);`;return{activationFunction:e,applyActivation:r}}var dn,Mr=$(()=>{"use strict";ge();ma();dn=i=>{let t=i.getString("activation","");if(t==="Clip"){let[o,e]=i.getFloats("activation_params",[kr,Br]);return{activation:t,clipMax:e,clipMin:o,activationCacheKey:`${t}:${o},${e}`}}return{activation:t,activationCacheKey:t}}});var zm,Hm,kf,Bf=$(()=>{"use strict";gt();De();pe();Ho();Mr();zm=(i,t)=>({name:"GroupedConv",inputNames:i?["X","W","Bias"]:["X","W"],inputTypes:i?[0,0,0]:[0,0],cacheHint:t}),Hm=(i,t,o,e)=>{let n=t.length>2?"value += getBias(output_channel);":"",s=t[0].dims.slice(),a=t[1].dims.slice(),u=a[0]/e.group;Te.verbose("GroupedConv",`autpPad:${e.autoPad}, dilations:${e.dilations}, group:${e.group}, kernelShape:${e.kernelShape}, pads:${e.pads}, strides:${e.strides}`);let l=hn(s,a,e.dilations,e.pads,e.strides),c=K(i.session.backend.glContext.version),{activationFunction:b,applyActivation:y}=Vt(e),w=`
  const ivec2 strides = ivec2(${e.strides[0]}, ${e.strides[1]});
  const ivec2 pads = ivec2(${e.pads[0]}, ${e.pads[1]});
  ${b}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${u};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${a[1]}; wInChannel++) {
      int input_channel = group_id * ${a[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${a[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${e.dilations[0]};

        if (xHeight < 0 || xHeight >= ${s[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${a[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${e.dilations[1]};
          if (xWidth < 0 || xWidth >= ${s[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${n}
    ${y}
    ${c.output} = vec4(value, .0, .0, .0);
  }
`;return{...o,output:{dims:l,type:t[0].type,textureType:0},shaderSource:w,hasMain:!0}},kf=(i,t,o)=>{let e=zm(t.length>2,o.cacheKey);return{...e,get:()=>Hm(i,t,e,o)}}});var jm,qm,Nf,Rf=$(()=>{"use strict";De();pe();Rr();jm=i=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:i}),qm=(i,t,o,e,r,n)=>{let s=o.dims,a=e.dims,u=2,l=3,c=r.length,b=[a[1]*a[2]*a[3],r[2]*r[3]],y=a[2]*a[3],w=Wt(),S=K(i.session.backend.glContext.version),I="";for(let k=0;k<=1;k++)for(let L=0;L<=1;L++)I+=`
            blockIndex = rc.x + ${L};
            pos = rc.y + ${k};

            if(blockIndex < ${b[1]} && pos < ${b[0]}) {
              offsetY = int(blockIndex / (${r[c-1]})) * ${n.strides[0]} -
                ${n.pads[0]};
              d0 = offsetY + ${n.dilations[0]} * (imod(pos, ${y}) / ${a[2]});

              if(d0 < ${s[u]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${r[c-1]}) * ${n.strides[1]} -
                  ${n.pads[1]};
                d1 = offsetX + ${n.dilations[1]} * imod(imod(pos, ${y}), ${a[2]});

                if(d1 < ${s[l]} && d1 >= 0) {

                  ch = int(float(pos)/ ${y}.);
                    innerDims = vec2(d0, d1);
                    result[${k*2+L}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let F=`
      ${w}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${I}
          ${S.output} = result;
      }
            `;return{...t,output:{dims:b,type:o.type,textureType:2},shaderSource:F,hasMain:!0}},Nf=(i,t,o,e,r)=>{let n=jm(r.cacheKey);return{...n,get:()=>qm(i,n,t,o,e,r)}}});function Xm(i,t,o){let e=t[0].dims,r=t[1].dims,n=st.calcShape(e,r,!0);if(!n)throw new Error("Can't use matmul on the given tensors");let s=ut(n.length),a=Bt(),{activationFunction:u,applyActivation:l}=Vt(o),c=t.length>2,b=c?"value += getBiasForMatmul();":"",y=c?`${ga(s,a,t[2].dims,n,!1)}`:"",w=n.length,S=e.length,I=r.length,F=e[e.length-1],k=`
    ${u}
    ${y}
    float process(int indices[${w}]) {
        int a[${S}];
        int b[${I}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${F}; ++k) {
            a[${S-1}] = k;
            b[${I-2}] = k;
            value += _A(a) * _B(b);
        }
        ${b}
        ${l}
        return value;
    }`;return{...i,output:{dims:n,type:t[0].type,textureType:0},shaderSource:k}}function ba(i,t){let o=Ym(i.length>2,t.activationCacheKey);return{...o,get:()=>Xm(o,i,t)}}function ga(i,t,o,e,r){let n="",s=o.length,a=e.length,u=a-s;a<2&&s>0?n="coords":n=o.map((I,F)=>`coords.${t[F+u]}`).join(", ");let c=st.getBroadcastDims(o,e).map(I=>`coords.${t[I+u]} = 0;`).join(`
`),y=H.size(o)===1,w="vec4(outputValue.xx, outputValue.yy)";return y&&(w="vec4(outputValue.x)"),r?`
vec4 getBiasForMatmul() {
  ${i} coords = getOutputCoords();
  ${c}
  vec4 outputValue = getBias(${n});
  return ${w};
}`:`
float getBiasForMatmul() {
  ${i} coords = getOutputCoords();
  ${c}
  return getBias(coords.x);
}`}var Mf,Gf,Ym,Km,jo=$(()=>{"use strict";ge();pe();Ut();Mr();ya();Mf=(i,t,o)=>(Km(t),i.session.pack?[i.run(qo(i,t,o),t)]:[i.run(ba(t,o),t)]),Gf=i=>dn(i.attributes),Ym=(i,t)=>({name:"MatMul",inputNames:i?["A","B","Bias"]:["A","B"],inputTypes:i?[0,0,0]:[0,0],cacheHint:t});Km=i=>{if(!i||i.length!==2)throw new Error("MatMul requires 2 inputs.");if(i[0].dims[i[0].dims.length-1]!==i[1].dims[i[1].dims.length-2])throw new Error("shared dimension does not match.");if(i[0].type!=="float32"&&i[0].type!=="float64"||i[1].type!=="float32"&&i[1].type!=="float64")throw new Error("inputs should be float type");if(i[0].type!==i[1].type)throw new Error("inputs types should match")}});function Qm(i,t,o,e){let r=[],n=[],s=o[0].dims,a=o[1].dims,u=s.length,l=a.length,c=e.length,b=c-u,y=c-l;r=s.map((N,te)=>`coords.${t[te+b]}`),r[u-1]="i*2",r.join(", "),n=a.map((N,te)=>`coords.${t[te+y]}`),n[l-2]="i*2",n.join(", ");let w=st.getBroadcastDims(s,e),S=st.getBroadcastDims(a,e),I=w.map(N=>`coords.${t[N+b]} = 0;`).join(`
`),F=S.map(N=>`coords.${t[N+y]} = 0;`).join(`
`),k=`int lastDim = coords.${t[c-1]};
  coords.${t[c-1]} = coords.${t[c-2]};
  coords.${t[c-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${i} coords = getOutputCoords();
  ${k}
  ${I}
  vec4 outputValue = getA(${r});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${i} coords = getOutputCoords();
  ${k}
  ${F}
  vec4 outputValue = getB(${n});
  return outputValue;
}`}function eb(i,t){let o="";for(let e=0;e<t-2;e++)o+=`rc.${i[e]}, `;return o+=`rc.${i[t-2]}, i*2`,o}function tb(i,t){let o="";for(let e=0;e<t-2;e++)o+=`rc.${i[e]}, `;return o+=`i*2, rc.${i[t-1]}`,o}var Jm,Zm,qo,ya=$(()=>{"use strict";ge();De();pe();Ut();Mr();jo();Jm=(i,t)=>({name:"MatMul (packed)",inputNames:i?["A","B","Bias"]:["A","B"],inputTypes:i?[2,2,2]:[2,2],cacheHint:t}),Zm=(i,t,o,e)=>{let r=o.length>2,n=r?"value += getBiasForMatmul();":"",s=o[0].dims,a=o[1].dims,u=st.calcShape(s,a,!0),l=!H.areEqual(o[0].dims,o[1].dims);if(!u)throw new Error("Can't use matmul on the given tensors");let c=s[s.length-1],b=Math.ceil(c/2),y=s.length,w=a.length,S=K(i.session.backend.glContext.version),I=ut(u.length),F=u.length,k=Bt(),{activationFunction:L,applyActivation:N}=Vt(e),te=r?`${ga(I,k,o[2].dims,u,!0)}`:"",q=l?`${Qm(I,k,o,u)}`:"",ve=l?"getAAtOutCoordsMatmul(i)":`getA(${eb(k,y)})`,Le=l?"getBAtOutCoordsMatmul(i)":`getB(${tb(k,w)})`,V=l?"":`${I} rc =
          getOutputCoords(); int lastDim = rc.${k[F-1]}; rc.${k[F-1]} =
          rc.${k[F-2]}; rc.${k[F-2]} = lastDim;
      `,ne=`
            ${q}
            ${te}
            ${L}
            void main() {
              ${V}

              vec4 value = vec4(0);
              for (int i = 0; i < ${b}; i++) {
                vec4 a = ${ve};
                vec4 b = ${Le};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${n}
              ${N}
              ${S.output} = value;
            }`;return{...t,output:{dims:u,type:o[0].type,textureType:2},shaderSource:ne,hasMain:!0}},qo=(i,t,o)=>{let e=Jm(t.length>2,o.activationCacheKey);return{...e,get:()=>Zm(i,e,t,o)}}});var Uf,Wf=$(()=>{"use strict";Ho();Rf();ya();Uf=(i,t,o)=>{let e=t[0].dims,r=t[1].dims,n=hn(e,r,o.dilations,o.pads,o.strides),s=i.run(Nf(i,t[0],t[1],n,o),[t[0]]),a=i.reshapePacked(t[1],[r[0],r[1]*r[2]*r[3]]),u=t.length===3?[a,s,t[2]]:[a,s],l=i.run(qo(i,u,o),u);return i.reshapePacked(l,n)}});var rb,nb,Vf,Ta,va=$(()=>{"use strict";pe();rb=i=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:i}),nb=(i,t,o,e,r,n)=>{let s=o.dims,a=e.dims,u=r.length,l=Ta(s,a,r,4),c=`
        const int XC = ${s[1]};
        const int XH = ${s[2]};
        const int XW = ${s[3]};
        const int KH = ${n.kernelShape[0]};
        const int KW = ${n.kernelShape[1]};
        const int dilationH = ${n.dilations[0]};
        const int dilationW = ${n.dilations[1]};
        const int strideH = ${n.strides[0]};
        const int strideW = ${n.strides[1]};
        const int padH = ${n.pads[0]};
        const int padW = ${n.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${u}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${s.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return{...t,output:{dims:l,type:o.type,textureType:4},shaderSource:c}},Vf=(i,t,o,e,r)=>{let n=rb(r.cacheKey);return{...n,get:()=>nb(i,n,t,o,e,r)}},Ta=(i,t,o,e=4)=>[o[0],o[2],o[3],Math.ceil(i[1]*t[2]*t[3]/e)]});var ob,ib,zf,Hf=$(()=>{"use strict";ge();De();pe();Mr();va();ob=(i,t)=>({name:"ConvDotProduct",inputNames:i?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:i?[0,4,0]:[0,4],cacheKey:t.activationCacheKey}),ib=(i,t,o,e,r)=>{let n=o[0].dims,s=o[1].dims,a=[s[0],Math.ceil(n[1]*s[2]*s[3]/4)],u=Ta(n,s,e),[l,c]=i.calculateTextureWidthAndHeight(a,4),b=H.computeStrides(u),[y,w]=i.calculateTextureWidthAndHeight(u,4),S=e.length,I=o.length<3?"0.0":"_B(b)",F=Math.ceil(n[1]*s[2]*s[3]/4),{activationFunction:k,applyActivation:L}=Vt(r),N=K(i.session.backend.glContext.version),te=`
${k}
float process(int indices[${S}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${b[0]} + im2col[1] * ${b[1]} + im2col[2] * ${b[2]};
  int kernelOffset = indices[1] * ${a[1]};
  float value = ${I};
  for (int i = 0; i < ${F}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${y}, ${w});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${l}, ${c});
    value += dot(${N.texture2D}(Im2Col, im2colCoords), ${N.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${L}
  return value;
}`;return{...t,output:{dims:e,type:o[0].type,textureType:0},shaderSource:te}},zf=(i,t,o,e)=>{let r=ob(t.length>2,e);return{...r,get:()=>ib(i,r,t,o,e)}}});var hn,xa,ab,sb,ub,lb,wa,fb,Ho=$(()=>{"use strict";Ye();ge();Bf();Wf();Hf();Mr();va();jo();hn=(i,t,o,e,r)=>{let n=i[0],s=i.slice(2),a=s.length,u=t[0],c=t.slice(2).map((S,I)=>S+(S-1)*(o[I]-1)),y=s.map((S,I)=>S+e[I]+e[I+a]).map((S,I)=>Math.floor((S-c[I]+r[I])/r[I]));return[n,u].concat(...y)},xa=(i,t,o)=>(fb(t,o),ab(i,t,o)),ab=(i,t,o)=>{let e=lb(o,t),r=i.session.pack,n=e.kernelShape[0]===1&&e.kernelShape[1]===1;return e.group>1?[i.run(kf(i,t,e),t)]:n&&r?[sb(i,t,e)]:r&&t[0].dims.length===4&&t[0].dims[0]===1&&!n?[Uf(i,t,e)]:[ub(i,t,e)]},sb=(i,t,o)=>{let e=t[0].dims,r=t[1].dims,n=hn(e,r,o.dilations,o.pads,o.strides),s=i.reshapeUnpacked(t[0],[e[1],e[2]*e[3]]),a=i.reshapeUnpacked(t[1],[r[0],r[1]]),u=t.length>2?[a,s,t[2]]:[a,s],l=i.run(ba(u,o),u);return i.reshapeUnpacked(l,n)},ub=(i,t,o)=>{let e=t[0].dims,r=t[1].dims,n=hn(e,r,o.dilations,o.pads,o.strides),s=i.run(Vf(i,t[0],t[1],n,o),[t[0]]),a=t.length===3?[s,t[1],t[2]]:[s,t[1]];return i.run(zf(i,t,n,o),a)},lb=(i,t)=>{let o=i.kernelShape.slice();if(i.kernelShape.length===0)for(let n=2;n<t[1].dims.length;++n)o.push(t[1].dims[n]);let e=i.pads.slice();$r.adjustPadsBasedOnAutoPad(t[0].dims,i.strides,i.dilations,o,e,i.autoPad);let r=Object.assign({},i);return Object.assign(r,{kernelShape:o,pads:e,cacheKey:i.cacheKey}),r},wa=i=>{let t=i.attributes,o=dn(t),e=t.getString("auto_pad","NOTSET"),r=t.getInts("dilations",[1,1]),n=t.getInt("group",1),s=t.getInts("kernel_shape",[]),a=t.getInts("pads",[0,0,0,0]),u=t.getInts("strides",[1,1]);return ae({autoPad:e,dilations:r,group:n,kernelShape:s,pads:a,strides:u,...o})},fb=(i,t)=>{if(!i||i.length!==2&&i.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(i[0].dims.length!==4||i[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let o=i[0].dims[1],e=i[1].dims[1]*t.group;if(o!==e)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(i.length===3&&(i[2].dims.length!==1||i[1].dims[0]!==i[2].dims[0]))throw new Error("invalid bias");let r=i[0].dims.length-2;if(t.dilations.length!==r)throw new Error(`dilations should be ${r}D`);if(t.strides.length!==r)throw new Error(`strides should be ${r}D`);if(t.pads.length!==r*2)throw new Error(`pads should be ${r*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==i[1].dims.length-2)throw new Error("invalid kernel shape");if(i[0].type!=="float32"||i[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(i.length===3&&i[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}});var cb,pb,db,jf,hb,mb,bb,gb,yb,Tb,qf,vb,Yf=$(()=>{"use strict";Ye();De();pe();Mr();cb=(i,t,o,e,r,n)=>(i-1)*t+o+(e-1)*r+1-n,pb=(i,t,o,e,r)=>{let n=Math.floor(i/2);t==="SAME_UPPER"?(o[e]=n,o[r]=i-n):t==="SAME_LOWER"&&(o[e]=i-n,o[r]=n)},db=(i,t,o,e,r,n,s,a)=>{let u=i.length-2,l=a.length===0;for(let c=0;c<u;++c){let b=l?i[c+2]*n[c]:a[c],y=cb(i[c+2],n[c],r[c],t[c],o[c],b);pb(y,e,r,c,c+u),l&&a.push(n[c]*(i[c+2]-1)+s[c]+(t[c]-1)*o[c]+1-r[c]-r[c+u])}},jf=(i,t,o)=>(vb(t,o),hb(i,t,o)),hb=(i,t,o)=>{let e=Tb(o,t);return[yb(i,t,e)]},mb=(i,t)=>({name:"ConvTranspose",inputNames:i?["X","W","B"]:["X","W"],inputTypes:i?[0,0,0]:[0,0],cacheHint:t}),bb=(i,t,o,e)=>{let n=t.length>2?"getB(output_channel)":"0.0",s=t[0].dims,a=t[1].dims,u=a[1],l=a[0]/e.group,c=[t[0].dims[0],t[1].dims[1]*e.group,...e.outputShape],b=K(i.session.backend.glContext.version),{activationFunction:y,applyActivation:w}=Vt(e),S=`
  const ivec2 strides = ivec2(${e.strides[0]}, ${e.strides[1]});
  const ivec2 pads = ivec2(${e.pads[0]}, ${e.pads[1]});
  ${y}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${u};
    int wOutChannel = output_channel - group_id * ${u};

    float value = ${n};
    for (int inChannelOffset = 0; inChannelOffset < ${l}; inChannelOffset++) {
      int input_channel = group_id * ${l} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${a[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${a[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${e.dilations[0]}, wHOff * ${e.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${s[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${s[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${w}
    ${b.output} = vec4(value, .0, .0, .0);
  }
`;return{...o,output:{dims:c,type:t[0].type,textureType:0},shaderSource:S,hasMain:!0}},gb=(i,t,o)=>{let e=mb(t.length>2,o.cacheKey);return{...e,get:()=>bb(i,t,e,o)}},yb=(i,t,o)=>i.run(gb(i,t,o),t),Tb=(i,t)=>{let o=i.kernelShape.slice();if(i.kernelShape.length===0)for(let a=2;a<t[1].dims.length;++a)o.push(t[1].dims[a]);let e=i.pads.slice(),r=i.outputShape.slice(),n=t[0].dims;db(n,o,i.dilations,i.autoPad,e,i.strides,i.outputPadding,r);let s=Object.assign({},i);return Object.assign(s,{kernelShape:o,pads:e,outputShape:r,cacheKey:i.cacheKey}),s},qf=i=>{let t=i.attributes,o=dn(t),e=t.getString("auto_pad","NOTSET"),r=t.getInts("dilations",[1,1]),n=t.getInt("group",1),s=t.getInts("kernel_shape",[]),a=t.getInts("output_padding",[0,0]),u=t.getInts("output_shape",[]),l=t.getInts("pads",[0,0,0,0]),c=t.getInts("strides",[1,1]);return ae({autoPad:e,dilations:r,group:n,kernelShape:s,outputPadding:a,outputShape:u,pads:l,strides:c,...o})},vb=(i,t)=>{if(!i||i.length!==2&&i.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(i[0].dims.length!==4||i[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let o=i[0].dims[1],e=i[1].dims[0];if(o!==e)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let r=i[1].dims[1]*t.group;if(i.length===3&&(i[2].dims.length!==1||i[2].dims[0]!==r))throw new Error("invalid bias");let n=i[0].dims.length-2;if(t.dilations.length!==n)throw new Error(`dilations should be ${n}D`);if(t.strides.length!==n)throw new Error(`strides should be ${n}D`);if(t.pads.length!==n*2)throw new Error(`pads should be ${n*2}D`);if(t.outputPadding.length!==n)throw new Error(`output_padding should be ${n}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==i[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==i[0].dims.length-2)throw new Error("invalid output shape");if(i[0].type!=="float32"||i[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(i.length===3&&i[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}});var Xf,Gr,Kf,xb,Jf,wb,_b,Ob,Yo=$(()=>{"use strict";Ye();ge();pe();Xf={name:"Transpose",inputNames:["A"],inputTypes:[0]},Gr=(i,t,o)=>(Ob(t),[i.run({...Xf,cacheHint:o.cacheKey,get:()=>xb(i,t[0],o.perm)},t)]),Kf=i=>ae({perm:i.attributes.getInts("perm",[])}),xb=(i,t,o)=>{let e=t.dims;o=Jf(e,o);let r=wb(e,o),n=e.length,s=`
      ${_b("perm",o,n)}
      float process(int indices[${n}]) {
        int a[${n}];
        perm(a, indices);
        return _A(a);
      }`;return{...Xf,output:{dims:r,type:t.type,textureType:0},shaderSource:s}},Jf=(i,t)=>(t&&t.length!==i.length&&(t=[...i.keys()].reverse()),t),wb=(i,t)=>(t=Jf(i,t),H.sortBasedOnPerm(i,t)),_b=(i,t,o)=>{let e=[];e.push(`void ${i}(out int a[${o}], int src[${o}]) {`);for(let r=0;r<o;++r)e.push(`	a[${t[r]}]=src[${r}];`);return e.push("	}"),e.join(`
`)},Ob=i=>{if(!i||i.length!==1)throw new Error("Transpose requires 1 input.");if(i[0].type!=="float32"&&i[0].type!=="float64")throw new Error("input should be float tensor")}});var Zf,Qf,Ab,ec=$(()=>{"use strict";Yo();Zf=(i,t,o)=>{Ab(t);let e=o.blocksize,r=e*e,n=o.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],s=o.mode==="DCR"?[t[0].dims[0],e,e,t[0].dims[1]/r,t[0].dims[2],t[0].dims[3]]:[t[0].dims[0],t[0].dims[1]/r,e,e,t[0].dims[2],t[0].dims[3]],a=i.reshapeUnpacked(t[0],s),u={perm:n,cacheKey:`${n}`},[l]=Gr(i,[a],u),c=[t[0].dims[0],t[0].dims[1]/r,t[0].dims[2]*e,t[0].dims[3]*e];return[i.reshapeUnpacked(l,c)]},Qf=i=>{let t=i.attributes.getInt("blocksize");if(t<1)throw new Error(`blocksize must be >= 1, but got : ${t} for DepthToSpace`);let o=i.attributes.getString("mode","DCR");if(o!=="DCR"&&o!=="CRD")throw new Error(`unrecognized mode: ${o} for DepthToSpace`);return{mode:o,blocksize:t}},Ab=i=>{if(i.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${i.length}`);if(i[0].type==="string"||i[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}});var tc,rc,Ib,nc=$(()=>{"use strict";ge();tc=(i,t,o)=>{Ib(t,o);let e=H.flattenShape(t[0].dims,o);return[i.reshapeUnpacked(t[0],e)]},rc=i=>i.attributes.getInt("axis",1),Ib=(i,t)=>{if(!i||i.length!==1)throw new Error("Flatten requires 1 input.");let o=i[0].dims.length;if(o===0)throw new Error("scalar tensor is not supported.");if(t<-o||t>o)throw new Error("Invalid axis");if(i[0].type==="string")throw new Error("string tensor is not supported.")}});var fr,jn=$(()=>{"use strict";fr=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]});var oc,ic,Sb,Pb,Eb,Db,ac=$(()=>{"use strict";Ye();jn();ge();pe();oc=(i,t,o)=>(Db(t,o.axis),[i.run(Eb(i,t,o),t)]),ic=i=>ae({axis:i.attributes.getInt("axis",0)}),Sb={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},Pb=(i,t,o,e)=>{let r=o[0].dims.slice(),n=o[1].dims.slice(),s=new Array(r.length+n.length-1);e=H.normalizeAxis(e,r.length);let a=[];for(let y=0;y<s.length;y++)y<e?(s[y]=r[y],a.push(`inputIdx[${y}] = outputIdx[${y}];`)):y<e+n.length?(s[y]=n[y-e],a.push(`indexDataIdx[${y-e}] = outputIdx[${y}];`)):(s[y]=r[y-n.length+1],a.push(`inputIdx[${y-n.length+1}] = outputIdx[${y}];`));let u=s.length||1,l=r.length,c=n.length||1,b=`
      float process(int outputIdx[${u}]) {
        int inputIdx[${l}];
        int indexDataIdx[${c}];
        indexDataIdx[0] = 0;
        ${a.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${e}] = idx < 0 ? idx + ${r[e]} : idx;
        return _A(inputIdx);
      }`;return{...t,output:{dims:s,type:o[0].type,textureType:0},shaderSource:b}},Eb=(i,t,o)=>{let e={...Sb,cacheHint:o.cacheKey};return{...e,get:()=>Pb(i,e,t,o.axis)}},Db=(i,t)=>{if(!i||i.length!==2)throw new Error("Gather requires 2 inputs.");let o=i[0].dims.length;if(o<1)throw new Error("Invalid input shape.");if(t<-o||t>o-1)throw new Error("Invalid axis.");if(fr.indexOf(i[0].type)===-1)throw new Error("Invaid input type.");if(i[1].type!=="int32"&&i[1].type!=="int16")throw new Error("Invaid input type.")}});var _a,sc,uc,lc,Lb,Cb,Fb,fc=$(()=>{"use strict";Ye();ge();pe();_a=(i,t,o)=>(Fb(t,o),[i.run(Lb(t,o),t)]),sc=(i,t)=>{let o=i.attributes.getInt("transA",0)!==0,e=i.attributes.getInt("transB",0)!==0,r=i.attributes.getFloat("alpha",1),n=i.attributes.getFloat("beta",1);return ae({transA:o,transB:e,alpha:r,beta:n,isOptionalC:t})},uc=i=>sc(i,!1),lc=i=>sc(i,!0),Lb=(i,t)=>{let o={name:"Gemm",inputNames:i.length===3?["A","B","C"]:["A","B"],inputTypes:i.length===3?[0,0,0]:[0,0],key:t.cacheKey};return{...o,get:()=>Cb(o,i,t)}},Cb=(i,t,o)=>{let e=t[0].dims.slice(),r=t[1].dims.slice(),[n,s]=No.getShapeOfGemmResult(e,o.transA,r,o.transB,t.length===3?t[2].dims:void 0),a=[n,s];if(!a)throw new Error("Can't use gemm on the given tensors");let u=e[e.length-1],l="";o.transA&&(u=e[0]),o.transA&&o.transB?l="value += _A_T(a) * _B_T(b);":o.transA&&!o.transB?l="value += _A_T(a) * _B(b);":!o.transA&&o.transB?l="value += _A(a) * _B_T(b);":!o.transA&&!o.transB&&(l="value += _A(a) * _B(b);");let c=a.length,b=t.length===3?`int c[${t[2].dims.length}];`:"",y=t.length===3?"bcastIndices_C(indices, c);":"",w=t.length===3?"value += beta * _C(c);":"",S=`
      float process(int indices[${c}]) {
          int a[${c}];
          int b[${c}];
          ${b}

          copyVec(indices, a);
          copyVec(indices, b);
          ${y}

          float value = 0.0;
          for (int k=0; k<${u}; ++k) {
              a[${c-1}] = k;
              b[${c-2}] = k;
              ${l}
          }

          value = value * alpha;
          ${w}
          return value;
      }`;return{...i,output:{dims:a,type:t[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:o.alpha},{name:"beta",type:"float",data:o.beta}],shaderSource:S}},Fb=(i,t)=>{if(!i)throw new Error("Input is missing");if(t.isOptionalC&&(i.length<2||i.length>3))throw new Error("Invaid input shape.");if(!t.isOptionalC&&i.length!==3)throw new Error("Gemm requires 3 inputs");if(i.length===3&&i[2].dims.length!==1&&i[2].dims.length!==2)throw new Error("Invalid input shape of C");if(i[0].type!=="float32"&&i[0].type!=="float64"||i[1].type!=="float32"&&i[1].type!=="float64"||i.length===3&&i[2].type!=="float32"&&i[2].type!=="float64")throw new Error("Invalid input type.");if(i[0].type!==i[1].type||i.length===3&&i[0].type!==i[2].type)throw new Error("Input types are mismatched")}});var cc,pc,$b,kb,Bb,Nb,Rb,dc=$(()=>{"use strict";Ye();pe();cc=(i,t,o)=>(Rb(t),[i.run(Bb(i,t,o),t)]),pc=i=>{let t=i.attributes.getFloat("scale"),o=i.attributes.getFloats("bias");return ae({scale:t,bias:o})},$b={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},kb=(i,t,o,e)=>{let r=o[0].dims.slice(),n=r.length,a=`
      ${Nb(e.bias.length)}
      float process(int indices[${n}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return{...t,output:{dims:r,type:o[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:e.bias.length,data:e.bias},{name:"scale",type:"float",data:e.scale}],shaderSource:a}},Bb=(i,t,o)=>{let e={...$b,cacheHint:o.cacheKey};return{...e,get:()=>kb(i,e,t,o)}},Nb=i=>{let t=[`float getBias(float bias[${i}], int channel) {`];for(let o=0;o<i;++o)o===0?t.push(`	if (channel == ${o}) { return bias[${o}]; }`):o===i-1?t.push(`	else { return bias[${o}]; }`):t.push(`	else if (channel == ${o}) { return bias[${o}]; }`);return t.push("	}"),t.join(`
`)},Rb=i=>{if(!i||i.length!==1)throw new Error("ImageScaler requires 1 input.");if(i[0].dims.length!==4)throw new Error("Invalid input shape.");if(i[0].type!=="float32"&&i[0].type!=="float64")throw new Error("Invalid input type.")}});var mc,bc,hc,Mb,Gb,Ub,Wb,Vb,zb,gc=$(()=>{"use strict";De();pe();mc=(i,t,o)=>{zb(t);let e=i.run(Gb(t[0]),t);return[i.run(Vb(i,t[0],o,e.dims),[t[0],e,t[1],t[2]])]},bc=i=>i.attributes.getFloat("epsilon",1e-5),hc={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},Mb=(i,t)=>{let o=t.dims.slice(),e=o[1],r=o[2]*o[3],n=[o[0],e],s=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${o[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${o[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${r});
        temp = 0.0;
        for(int a2=0; a2<${o[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${o[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${r});

        return v;
      }`;return{...i,output:{dims:n,type:t.type,textureType:4},shaderSource:s}},Gb=i=>({...hc,get:()=>Mb(hc,i)}),Ub={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},Wb=(i,t,o,e,r)=>{let n=K(i.session.backend.glContext.version),[s,a]=i.calculateTextureWidthAndHeight(r,4),[u,l]=[s/4,a],c=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${u}, ${l});
        return ${n.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return{...t,output:{dims:o.dims,type:o.type,textureType:0},variables:[{name:"epsilon",type:"float",data:e}],shaderSource:c}},Vb=(i,t,o,e)=>{let r={...Ub,cacheHint:`${o}`};return{...r,get:()=>Wb(i,r,t,o,e)}},zb=i=>{if(!i||i.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let t=i[0],o=i[1],e=i[2];if(t.dims.length<3||o.dims.length!==1||e.dims.length!==1)throw new Error("Invalid input shape.");if(o.dims[0]!==t.dims[1]||e.dims[0]!==t.dims[1])throw new Error("Input shapes are mismatched.");if(t.type!=="float32"&&t.type!=="float64"||o.type!=="float32"&&o.type!=="float64"||e.type!=="float32"&&e.type!=="float64")throw new Error("Invalid input type.");if(i[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}});function Hb(i,t){let o=i[0].dims[1],e=i[0].dims.length,r=-Math.floor((t.size-1)/2),n=Math.ceil((t.size-1)/2),s=`float(${t.alpha}) / float(${t.size})`,a=`float(${t.bias})`,u=`float(${t.beta})`,l=`
    float process(int indices[${e}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${r}; i <= ${n}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${o}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${a} + ${s} * square_sum, ${u});
    }`;return{...vc,cacheHint:t.cacheKey,output:{dims:i[0].dims,type:i[0].type,textureType:0},shaderSource:l}}function jb(i,t){return{...vc,cacheHint:t.cacheKey,get:()=>Hb(i,t)}}var yc,Tc,vc,qb,xc=$(()=>{"use strict";Ye();pe();yc=(i,t,o)=>(qb(t),[i.run(jb(t,o),t)]),Tc=i=>{let t=i.attributes.getFloat("alpha",1e-4),o=i.attributes.getFloat("beta",.75),e=i.attributes.getFloat("bias",1),r=i.attributes.getInt("size");return ae({alpha:t,beta:o,bias:e,size:r})},vc={name:"LRN",inputNames:["X"],inputTypes:[0]};qb=i=>{if(!i||i.length!==1)throw new Error("LRN requires 1 input.");if(i[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(i[0].type!=="float32")throw new Error("input should be float type")}});var Yb,Oa,wc,_c,Oc,Xb,Kb,Jb,Zb,Qb,eg,tg,rg,Ac=$(()=>{"use strict";Ye();ge();De();pe();Yb={name:"Pad",inputNames:["A"],inputTypes:[0]},Oa=(i,t,o)=>(Jb(t),[i.run({...Yb,cacheHint:o.cacheKey,get:()=>Kb(i,t[0],o)},t)]),wc=i=>{let t=i.attributes.getString("mode","constant"),o=i.attributes.getFloat("value",0),e=i.attributes.getInts("pads");return ae({mode:t,value:o,pads:e})},_c=(i,t,o)=>{Zb(t);let e=Xb(i,t,o);return Oa(i,[t[0]],e)},Oc=i=>i.attributes.getString("mode","constant"),Xb=(i,t,o)=>{if(!i.session.isInitializer(t[1].dataId)||t.length>=3&&!i.session.isInitializer(t[2].dataId))throw new Error("dynamic pad attributes are not allowed");let e=Array.from(t[1].integerData),r=t.length>=3?t[2].floatData[0]:0;return ae({mode:o,pads:e,value:r})},Kb=(i,t,o)=>{let e=H.padShape(t.dims.slice(),o.pads),r=e.length,s=`
      ${Qb(i,t,o)}
      float process(int[${r}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:e,type:t.type,textureType:0},shaderSource:s}},Jb=i=>{if(!i||i.length!==1)throw new Error("Pad requires 1 input");if(i[0].type!=="float32"&&i[0].type!=="float64")throw new Error("Invalid input type.")},Zb=i=>{if(!i||i.length!==2&&i.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(i[1].type!=="int32")throw new Error("Invalid input type.");if(i.length>=3&&i[2].type==="string")throw new Error("Invalid input type.")},Qb=(i,t,o)=>{let e=K(i.session.backend.glContext.version),[r,n]=i.calculateTextureWidthAndHeight(t.dims,0),s=H.computeStrides(t.dims);switch(o.mode){case"constant":return eg(e,t.dims,s,r,n,o.pads,o.value);case"reflect":return tg(e,t.dims,s,r,n,o.pads);case"edge":return rg(e,t.dims,s,r,n,o.pads);default:throw new Error("Invalid mode")}},eg=(i,t,o,e,r,n,s)=>{let a=t.length,u="";for(let l=a-1;l>=0;--l)u+=`
        k = m[${l}] - ${n[l]};
        if (k < 0)  return constant;
        if (k >= ${t[l]}) return constant;
        offset += k * ${o[l]};
        `;return`
      float padA(int m[${a}]) {
        const float constant = float(${s});
        int offset = 0;
        int k = 0;
        ${u}
        vec2 coords = offsetToCoords(offset, ${e}, ${r});
        float value = getColorAsFloat(${i.texture2D}(A, coords));
        return value;
      }
      `},tg=(i,t,o,e,r,n)=>{let s=t.length,a="";for(let u=s-1;u>=0;--u)a+=`
        k = m[${u}] - ${n[u]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(t[u]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${t[u]}) { k = _2n_1 - k; }
        }
        offset += k * ${o[u]};
        `;return`
      float padA(int m[${s}]) {
        int offset = 0;
        int k = 0;
        ${a}
        vec2 coords = offsetToCoords(offset, ${e}, ${r});
        float value = getColorAsFloat(${i.texture2D}(A, coords));
        return value;
      }
      `},rg=(i,t,o,e,r,n)=>{let s=t.length,a="";for(let u=s-1;u>=0;--u)a+=`
        k = m[${u}] - ${n[u]};
        if (k < 0)  k = 0;
        if (k >= ${t[u]}) k = ${t[u]-1};
        offset += k * ${o[u]};
      `;return`
      float padA(int m[${s}]) {
        int offset = 0;
        int k = 0;
        ${a}
        vec2 coords = offsetToCoords(offset, ${e}, ${r});
        float value = getColorAsFloat(${i.texture2D}(A, coords));
        return value;
      }
      `}});var Sc,Pc,Ec,Dc,Lc,Cc,Fc,$c,kc,ng,Ic,Bc,Ko,Nc,Xo,og,Rc=$(()=>{"use strict";Ye();ge();pe();Sc=(i,t,o)=>{Ko(t);let e={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:o.cacheKey};return[i.run({...e,get:()=>Ec(t,e,!1,o)},t)]},Pc=i=>{let t=i.attributes.getString("auto_pad","NOTSET"),o=i.attributes.getInt("ceil_mode",0),e=i.attributes.getInt("count_include_pad",0)!==0,r=i.attributes.getInts("kernel_shape"),n=i.attributes.getInts("strides",[]),s=i.attributes.getInts("pads",[]);if(o!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return ae({autoPad:t,ceilMode:o,countIncludePad:e,kernelShape:r,strides:n,pads:s})},Ec=(i,t,o,e)=>{let[r,n]=kc(i,e,o),s=H.size(r.kernelShape),a="value += _X(x);",u="";r.countIncludePad?u+=`value /= float(${s});`:u+=`value /= float(${s} - pad);`;let c=`
        ${Nc(i[0].dims,r,a,u,"0.0")}
      `;return{...t,output:{dims:n,type:i[0].type,textureType:0},shaderSource:c}},Dc=(i,t,o)=>{Ko(t);let e={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${o.countIncludePad}`};return[i.run({...e,get:()=>Ec(t,e,!0,o)},t)]},Lc=i=>{let t=i.attributes.getInt("count_include_pad",0)!==0;return ae({autoPad:"",ceilMode:0,countIncludePad:t,kernelShape:[],strides:[],pads:[]})},Cc=(i,t,o)=>{Ko(t);let e={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:o.cacheKey};return[i.run({...e,get:()=>$c(t,e,!1,o)},t)]},Fc=i=>{let t=i.attributes.getString("auto_pad","NOTSET"),o=i.attributes.getInt("ceil_mode",0),e=i.attributes.getInts("kernel_shape"),r=i.attributes.getInts("strides",[]),n=i.attributes.getInts("pads",[]),s=i.attributes.getInt("storage_order",0),a=i.attributes.getInts("dilations",[]);if(s!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(o!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return ae({autoPad:t,ceilMode:o,countIncludePad:!1,kernelShape:e,strides:r,pads:n,storageOrder:s,dilations:a})},$c=(i,t,o,e)=>{let[r,n]=kc(i,e,o),s=`
      value = max(_X(x), value);
    `,a="",l=`
      ${Nc(i[0].dims,r,s,a,"-1e5")}
    `;return{...t,output:{dims:n,type:i[0].type,textureType:0},shaderSource:l}},kc=(i,t,o)=>{let e=i[0].dims.slice(),r=Object.hasOwnProperty.call(t,"dilations"),n=t.kernelShape.slice(),s=t.strides.slice(),a=r?t.dilations.slice():[],u=t.pads.slice();$r.adjustPoolAttributes(o,e,n,s,a,u);let l=$r.computePoolOutputShape(o,e,s,a,n,u,t.autoPad),c=Object.assign({},t);return r?Object.assign(c,{kernelShape:n,strides:s,pads:u,dilations:a,cacheKey:t.cacheKey}):Object.assign(c,{kernelShape:n,strides:s,pads:u,cacheKey:t.cacheKey}),[c,l]},ng={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},Ic={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},Bc=(i,t)=>(Ko(t),[i.run({...Ic,get:()=>$c(t,Ic,!0,ng)},t)]),Ko=i=>{if(!i||i.length!==1)throw new Error("Pool ops requires 1 input.");if(i[0].type!=="float32"&&i[0].type!=="float64")throw new Error("Invalid input type.")},Nc=(i,t,o,e,r)=>{let n=i.length;if(t.kernelShape.length<=2){let s=t.kernelShape[t.kernelShape.length-1],a=t.strides[t.strides.length-1],u=t.pads[t.pads.length/2-1],l=t.pads[t.pads.length-1],c=i[n-1],b="",y="",w="";if(u+l!==0?b=`
          for (int i = 0; i < ${s}; i++) {
            x[${n} - 1] = indices[${n} - 1] * ${a} - ${u} + i;
            if (x[${n} - 1] < 0 || x[${n} - 1] >= ${c}) {
              pad++;
              continue;
            }
            ${o}
          }`:b=`
          for (int i = 0; i < ${s}; i++) {
            x[${n} - 1] = indices[${n} - 1] * ${a} - ${u} + i;
            ${o}
          }`,t.kernelShape.length===2){let I=t.kernelShape[t.kernelShape.length-2],F=t.strides[t.strides.length-2],k=t.pads[t.pads.length/2-2],L=t.pads[t.pads.length-2],N=i[n-2];k+L!==0?y=`
            for (int j = 0; j < ${I}; j++) {
              x[${n} - 2] = indices[${n} - 2] * ${F} - ${k} + j;
              if (x[${n} - 2] < 0 || x[${n} - 2] >= ${N}) {
                pad+= ${s};
                continue;
              }
          `:y=`
            for (int j = 0; j < ${I}; j++) {
              x[${n} - 2] = indices[${n} - 2] * ${F} - ${k} + j;
            `,w=`
          }
        `}return`
        float process(int indices[${n}]) {
          int x[${n}];
          copyVec(indices, x);

          float value = ${r};
          int pad = 0;
          ${y}
          ${b}
          ${w}
          ${e}
          return value;
        }
      `}else{let s=H.size(t.kernelShape),a=H.computeStrides(t.kernelShape),u=a.length,l=t.pads.length,c=og(u),b=Xo(i,"inputDims"),y=Xo(t.pads,"pads"),w=Xo(a,"kernelStrides"),S=Xo(t.strides,"strides"),I=t.pads.reduce((L,N)=>L+N),F="";return I?F=`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${o}
          }`:F=`
          }
          ${o}
        `,`
        ${c}
        float process(int indices[${n}]) {
          int x[${n}];
          copyVec(indices, x);
          int offset[${u}];
          int pads[${l}];
          int inputDims[${n}];
          int kernelStrides[${u}];
          int strides[${u}];
          ${y}
          ${b}
          ${S}
          ${w}

          float value = ${r};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${s}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${n} - ${u}; j < ${n}; j++) {
              x[j] = indices[j] * strides[j - ${n} + ${u}]
                + offset[j - ${n} + ${u}] - pads[j - 2];
              ${F}
          }
          ${e}

          return value;
        }
      `}},Xo=(i,t)=>{let o="";for(let e=0;e<i.length;e++)o+=`
      ${t}[${e}] = ${i[e]};
    `;return o},og=i=>`
  void offsetToIndices(int offset, int[${i}] strides, out int[${i}] indices) {
    if (${i} == 0) {
      return;
    }
    for (int i = 0; i < ${i} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${i} - 1] = offset;
  }`});var Ur,cr,ig,ag,Mc,Gc,Uc,Wc,Vc,zc,Hc,jc=$(()=>{"use strict";Ye();jn();ge();pe();Ur=(i,t,o,e,r)=>{ag(t);let n={name:e,inputNames:["A"],inputTypes:[0]};return[i.run({...n,cacheHint:o.cacheKey,get:()=>ig(i,t,o,e,r,n)},t)]},cr=i=>{let t=i.attributes.getInts("axes",[]),o=i.attributes.getInt("keepdims",1)===1;return ae({axes:t,keepDims:o})},ig=(i,t,o,e,r,n)=>{let s=[],a=t[0].dims.length||1,u=[],l=H.normalizeAxes(o.axes,t[0].dims.length),c=r(t,l),b=c[1];for(let S=0;S<t[0].dims.length;S++)l.indexOf(S)>=0||l.length===0?(o.keepDims&&s.push(1),b=`
          for(int j${S} = 0; j${S} < ${t[0].dims[S]}; j${S}++) {
            inputIdx[${S}] = j${S};
            ${b}
          }`):(u.push(`inputIdx[${S}] = outputIdx[${s.length}];`),s.push(t[0].dims[S]));let w=`
      float process(int outputIdx[${s.length||1}]) {
        float value;                 // final result
        int inputIdx[${a}];      // addressing input data
        ${u.join(`
`)}
        ${c[0]}       // init ops for reduce max/min
        ${b}
        ${c[2]}       // final computation for reduce mean
        return value;
      }`;return{...n,output:{dims:s,type:t[0].type,textureType:0},shaderSource:w}},ag=i=>{if(!i||i.length!==1)throw new Error("Reduce op requires 1 input.");if(fr.indexOf(i[0].type)===-1)throw new Error("Invalid input type.")},Mc=(i,t,o)=>Ur(i,t,o,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),Gc=(i,t,o)=>Ur(i,t,o,"ReduceMean",(r,n)=>{let s=1;for(let a=0;a<r[0].dims.length;a++)(n.indexOf(a)>=0||n.length===0)&&(s*=r[0].dims[a]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${s}.;`]}),Uc=(i,t,o)=>Ur(i,t,o,"ReduceMax",(r,n)=>{let s=[];for(let a=0;a<r[0].dims.length;a++)(n.indexOf(a)>=0||n.length===0)&&s.push(`inputIdx[${a}] = 0;`);return[`${s.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),Wc=(i,t,o)=>Ur(i,t,o,"ReduceMin",(r,n)=>{let s=[];for(let a=0;a<r[0].dims.length;a++)(n.indexOf(a)>=0||n.length===0)&&s.push(`inputIdx[${a}] = 0;`);return[`${s.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),Vc=(i,t,o)=>Ur(i,t,o,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),zc=(i,t,o)=>Ur(i,t,o,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),Hc=(i,t,o)=>Ur(i,t,o,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])});var qc,Yc=$(()=>{"use strict";ge();qc=(i,t)=>{let o=H.calculateReshapedDims(t[0].dims,t[1].integerData);return i.session.pack?[i.reshapePacked(t[0],o)]:[i.reshapeUnpacked(t[0],o)]}});var Xc,Aa,Kc,Jc,qn,sg,Ia,Jo,Sa=$(()=>{"use strict";Ye();De();pe();Xc={name:"Upsample",inputNames:["X"],inputTypes:[0]},Aa=(i,t,o)=>(Ia(t,o),[i.run({...Xc,cacheHint:o.cacheKey,get:()=>sg(i,t,o)},t)]),Kc=i=>qn(i,7),Jc=i=>qn(i,9),qn=(i,t)=>{let o=t>=10,e=i.attributes.getString("mode","nearest");if(e!=="nearest"&&e!=="linear"&&(t<11||e!=="cubic"))throw new Error(`unrecognized mode: ${e}`);let r=[];t<9&&(r=i.attributes.getFloats("scales"),Jo(r,e,o));let n=i.attributes.getFloat("extrapolation_value",0),s=t>10?i.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(s)===-1)throw new Error(`coordinate_transform_mode '${s}' is not supported`);let a=s==="tf_crop_and_resize",u=a,l=e==="nearest"&&t>=11?i.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(l)===-1)throw new Error(`nearest_mode '${l}' is not supported`);let c=i.attributes.getFloat("cubic_coeff_a",-.75),b=i.attributes.getInt("exclude_outside",0)!==0;if(b&&e!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let y=t<11?!0:e==="nearest"&&s==="asymmetric"&&l==="floor",w=0,S=0,I=0;return t>10?i.inputs.length>2?(w=1,S=2,I=3):(S=1,I=2):t===9&&(S=1),ae({opset:t,isResize:o,mode:e,scales:r,extrapolationValue:n,coordinateTransformMode:s,useExtrapolation:u,needRoiInput:a,nearestMode:l,cubicCoefficientA:c,excludeOutside:b,useNearest2xOptimization:y,roiInputIdx:w,scalesInputIdx:S,sizesInputIdx:I})},sg=(i,t,o)=>{let e=K(i.session.backend.glContext.version),[r,n]=i.calculateTextureWidthAndHeight(t[0].dims,0),s=t[0].dims.map((I,F)=>Math.floor(I*o.scales[F])),[a,u]=i.calculateTextureWidthAndHeight(s,0),l=s.length,c=new Array(l),b=new Array(l),y=`
      int output_pitches[${l}];
      int input_pitches[${l}];
      `;for(let I=l-1;I>=0;I--)c[I]=I===l-1?1:c[I+1]*s[I+1],b[I]=I===l-1?1:b[I+1]*t[0].dims[I+1],y+=`
        output_pitches[${I}] = ${c[I]};
        input_pitches[${I}] = ${b[I]};
        `;let w=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${r}, ${n});
        float value = getColorAsFloat(${e.texture2D}(X, coords));
        return value;
      }
      `,S=o.mode==="nearest"?`
    ${w}
    float process(int indices[${l}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${a}, ${u});

      ${y}

      int d, m;
      for (int dim = 0; dim < ${l}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:l===4?`
    ${w}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${a}, ${u});

      ${y}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${t[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${w}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${a}, ${u});

      ${y}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${t[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return{...Xc,output:{dims:s,type:t[0].type,textureType:0},shaderSource:S,variables:[{name:"scales",type:"int",arrayLength:o.scales.length,data:o.scales.map(I=>Math.ceil(I))}]}},Ia=(i,t)=>{if(!i||t.opset<9&&i.length!==1||t.opset>=9&&t.opset<11&&i.length!==2||t.opset>=11&&i.length<2)throw new Error("invalid inputs.");if(t.scales.length>0&&i[0].dims.length!==t.scales.length)throw new Error("Invalid input shape.");if(i[0].type==="string")throw new Error("Invalid input tensor types.")},Jo=(i,t,o)=>{if(o){for(let e of i)if(e<=0)throw new Error("Scale value should be greater than 0.")}else for(let e of i)if(e<1)throw new Error("Scale value should be greater than or equal to 1.");if((t==="linear"||t==="cubic")&&i.length!==2&&(i.length!==4||i[0]!==1||i[1]!==1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${o?"Resize":"Upsample"} opeartor.`)}});var Pa,Ea,Zc,Qc,ug,lg,fg,cg,ep=$(()=>{"use strict";De();pe();Ut();Rr();Sa();Pa={name:"Resize",inputNames:["A"],inputTypes:[2]},Ea=(i,t,o)=>(Ia(t,o),[i.run({...Pa,cacheHint:o.cacheKey,get:()=>ug(i,t,o)},t)]),Zc=i=>qn(i,10),Qc=i=>qn(i,11),ug=(i,t,o)=>{let e=K(i.session.backend.glContext.version),[r,n]=lg(t,o);if(r.every(N=>N===1)&&o.coordinateTransformMode!=="tf_crop_and_resize")return{...Pa,output:{dims:n,type:t[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${e.texture2D}(X, TexCoords);
                    ${e.output} = v;
                }`};let a=n.length;if(a<2)throw new Error(`output dimension should be at least 2, but got ${a}`);let u=n[a-2],l=n[a-1],c=t[0].dims;if(a!==c.length)throw new Error(`output dimension should match input ${c.length}, but got ${a}`);let b=c[a-2],y=c[a-1],w=r[a-2],S=r[a-1],I="";if(o.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${o.mode}'`);switch(o.coordinateTransformMode){case"asymmetric":I=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":I=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":I=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${l}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${u}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${l}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${u}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":I=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${l}.0 - 1.0, ${u}.0 - 1.0, ${l}.0 - 1.0,
                            ${u}.0 - 1.0);
                        vec4 original = vec4(${y}.0 - 1.0, ${b}.0 - 1.0, ${y}.0 - 1.0,
                            ${b}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${o.coordinateTransformMode}'`)}let F=ut(a),k=Wt(),L=`
            const vec2 inputWH = vec2(${b}.0, ${y}.0);
            const vec4 scaleWHWH = vec4(float(${w}), float(${S}), float(${w}), float(${S}));
            ${k}
            ${I}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${F} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${u-1};
                bool hasNextCol = rc.z < ${l-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${e.output} = vec4(newValue);
            }
        `;return{...Pa,output:{dims:n,type:t[0].type,textureType:2},hasMain:!0,shaderSource:L}},lg=(i,t)=>{let e=i[0].dims,r=t.scales,n;if(r.length===0){let a=i[t.scalesInputIdx];if(a&&a.size!==0){if(i[t.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");r=fg(a,t.mode,t.isResize)}else{let u=i[t.sizesInputIdx];if(!u||u.size===0)throw new Error("Either scales or sizes MUST be provided as input.");n=Array.from(u.integerData),r=cg(n,e,t.mode,t.isResize)}}else if(i[t.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let s=n||e.map((a,u)=>Math.floor(a*r[u]));return[r,s]},fg=(i,t,o)=>{let e=Array.from(i.floatData);return Jo(e,t,o),e},cg=(i,t,o,e)=>{let r=t.length,n=new Array(r);for(let s=0,a=r;s<a;s++)if(t[s]===0){if(i[s]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");n[s]=1}else n[s]=i[s]/t[s];return Jo(n,o,e),n}});var tp,pg,rp=$(()=>{"use strict";Nr();tp=(i,t)=>(pg(t),[new We([t[0].dims.length],"int32",void 0,void 0,new Int32Array(t[0].dims))]),pg=i=>{if(!i||i.length!==1)throw new Error("Shape requires 1 input.")}});var Da,np,op,ip,dg,ap,hg,mg,sp=$(()=>{"use strict";Ye();jn();ge();pe();Da={name:"Slice",inputNames:["A"],inputTypes:[0]},np=(i,t,o)=>(dg(t),[i.run({...Da,cacheHint:o.cacheKey,get:()=>ip(i,t[0],o)},t)]),op=i=>{let t=i.attributes.getInts("starts"),o=i.attributes.getInts("ends"),e=i.attributes.getInts("axes",[]);return ae({starts:t,ends:o,axes:e})},ip=(i,t,o)=>{let e=o.axes.length===0?t.dims.slice(0).map((b,y)=>y):o.axes,r=H.normalizeAxes(e,t.dims.length),n=o.starts.map((b,y)=>b>t.dims[r[y]]-1?t.dims[r[y]]:H.normalizeAxis(b,t.dims[r[y]])),s=o.ends.map((b,y)=>b>t.dims[r[y]]-1?t.dims[r[y]]:H.normalizeAxis(b,t.dims[r[y]])),a=t.dims.slice(),u=[];for(let b=0;b<r.length;b++)a[r[b]]=s[b]-n[b],n[b]>0&&u.push(`outputIdx[${r[b]}] += ${n[b]};`);let c=`
      float process(int outputIdx[${a.length}]) {
        ${u.join(`
      `)}
        return _A(outputIdx);
      }`;return{...Da,output:{dims:a,type:t.type,textureType:0},shaderSource:c}},dg=i=>{if(!i||i.length!==1)throw new Error("Slice requires 1 input.");if(fr.indexOf(i[0].type)===-1)throw new Error("Invalid input type.")},ap=(i,t)=>{mg(t);let o=hg(i,t);return[i.run({...Da,cacheHint:o.cacheKey,get:()=>ip(i,t[0],o)},[t[0]])]},hg=(i,t)=>{if(!i.session.isInitializer(t[1].dataId)||!i.session.isInitializer(t[2].dataId)||t.length>=4&&!i.session.isInitializer(t[3].dataId)||t.length>=5&&!i.session.isInitializer(t[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(t.length>=5&&t[4].integerData.some(s=>s!==1))throw new Error("currently non-1 steps is not supported for Slice");let o=Array.from(t[1].integerData),e=Array.from(t[2].integerData),r=t.length>=4?Array.from(t[3].integerData):[],n=`${r};${o};${e}`;return{starts:o,ends:e,axes:r,cacheKey:n}},mg=i=>{if(!i||i.length<3||i.length>5)throw new Error("Invalid input number.");if(i[1].type!=="int32"||i[1].dims.length!==1)throw new Error("Invalid input type.");if(i[2].type!=="int32"||i[2].dims.length!==1)throw new Error("Invalid input type.");if(i.length>=4&&(i[3].type!=="int32"||i[3].dims.length!==1))throw new Error("Invalid input type.");if(i.length>=5&&(i[4].type!=="int32"||i[4].dims.length!==1))throw new Error("Invalid input type.")}});var up,lp,fp,cp,pp,dp,hp,mp,bg,gg,yg,bp,gp=$(()=>{"use strict";Ye();ge();De();pe();Yo();up={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},lp={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},fp={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},cp=(i,t,o)=>{bp(t);let e=t[0].dims.slice(),r=H.normalizeAxis(o.axis,e.length),n=H.sizeToDimension(e,r),s=H.sizeFromDimension(e,r);return mp(i,t,o,n,s)},pp=i=>ae({axis:i.attributes.getInt("axis",1)}),dp=i=>ae({axis:i.attributes.getInt("axis",-1)}),hp=(i,t,o)=>{bp(t);let e=t[0].dims.slice(),r=H.normalizeAxis(o.axis,e.length),n=e.length,s=r!==n-1,a=[],u=[],l=[],c;s&&(u=Array.from({length:n}).map((S,I)=>I),u[r]=n-1,u[n-1]=r,u.map(S=>a.push(e[S])),c=ae({perm:u}),l=Gr(i,t,c));let b=s?H.sizeToDimension(a,n-1):H.sizeToDimension(e,n-1),y=s?H.sizeFromDimension(a,n-1):H.sizeFromDimension(e,n-1),w=mp(i,s?l:t,o,b,y);return s?Gr(i,w,c):w},mp=(i,t,o,e,r)=>{let n=bg(i,t[0],e,r,[e]),s=i.run({...up,cacheHint:o.cacheKey,get:()=>n},t),a=gg(i,t[0],e,r,n.output.dims,[e]),u=i.run({...lp,cacheHint:o.cacheKey,get:()=>a},[t[0],s]),l=yg(i,t[0],e,r,n.output.dims,a.output.dims);return[i.run({...fp,cacheHint:o.cacheKey,get:()=>l},[t[0],s,u])]},bg=(i,t,o,e,r)=>{let[n,s]=i.calculateTextureWidthAndHeight(t.dims,0),a=r.length;if(o<1||e<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(r.length!==1)throw new Error("Dimensionality of the output should be 1");if(r[0]!==o)throw new Error("Shape of the output should be equal to logical row count");let u=K(i.session.backend.glContext.version),l=`
      float process(int[${a}] indices) {
        int logical_row_start_offset = indices[0] * ${e};

        float max = getColorAsFloat(${u.texture2D}(A, offsetToCoords(logical_row_start_offset, ${n},
        ${s} )));
        for(int i=1; i<${e}; ++i)
        {
          float current = getColorAsFloat(${u.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${n}, ${s})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return{...up,output:{dims:r,type:t.type,textureType:0},shaderSource:l}},gg=(i,t,o,e,r,n)=>{let[s,a]=i.calculateTextureWidthAndHeight(t.dims,0),u=n.length;if(o<1||e<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(n.length!==1)throw new Error("Dimensionality of the output should be 1");if(n[0]!==o)throw new Error("Shape of the output should be equal to logical row count");if(r.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(r[0]!==o)throw new Error("Shape of the intermediate results should be equal to logical row count");let l=K(i.session.backend.glContext.version),c=`
      float process(int[${u}] indices) {
        int logical_row_start_offset = indices[0] * ${e};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${e}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${l.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${s}, ${a}))) - max);
        }

        return norm_factor;
      }`;return{...lp,output:{dims:n,type:t.type,textureType:0},shaderSource:c}},yg=(i,t,o,e,r,n)=>{let[s,a]=i.calculateTextureWidthAndHeight(t.dims,0),u=t.dims.length;if(o<1||e<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(r.length!==1||n.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(r[0]!==o||n[0]!==o)throw new Error("Shape of the intermediate results should be equal to logical row count");let l=`
      float process(int[${u}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${s}, ${a});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${e};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return{...fp,output:{dims:t.dims,type:t.type,textureType:0},shaderSource:l}},bp=i=>{if(!i||i.length!==1)throw new Error("Softmax requires 1 input.");if(i[0].type!=="float32"&&i[0].type!=="float64")throw new Error("Invalid input type")}});var yp,Tp,vp,Tg,vg,xg,xp=$(()=>{"use strict";Ye();ge();pe();yp={name:"Split",inputNames:["A"],inputTypes:[0]},Tp=(i,t,o)=>{xg(t);let e=H.normalizeAxis(o.axis,t[0].dims.length),r=Tg(i,t,e,o),n=[];for(let s=0;s<r;++s)n.push(i.run({...yp,cacheHint:`${o.cacheKey};${s}`,get:()=>vg(i,t[0],o,e,s)},t));return n},vp=i=>{let t=i.attributes.getInt("axis",0),o=i.attributes.getInts("split",[]),e=i.outputs.length;return ae({axis:t,split:o,numOutputs:e})},Tg=(i,t,o,e)=>{let[,r]=Gn.splitShape(t[0].dims,o,e.split,e.numOutputs);return r.length},vg=(i,t,o,e,r)=>{let[n,s]=Gn.splitShape(t.dims,e,o.split,o.numOutputs),a=s[r],u=n[r],c=`
      float process(int indices[${u.length}]) {
        indices[${e}] += ${a};
        return _A(indices);
      }
    `;return{...yp,cacheHint:`${o.cacheKey}:${r}`,output:{dims:u,type:t.type,textureType:0},shaderSource:c}},xg=i=>{if(!i||i.length!==1)throw new Error("Split requires one input.");if(i[0].type!=="int8"&&i[0].type!=="uint8"&&i[0].type!=="int16"&&i[0].type!=="uint16"&&i[0].type!=="int32"&&i[0].type!=="uint32"&&i[0].type!=="float32"&&i[0].type!=="float64"&&i[0].type!=="bool")throw new Error("Invalid input type.")}});var La,wp,_p,wg,_g,Op=$(()=>{"use strict";ge();La=(i,t,o)=>{wg(t);let e=H.squeezeShape(t[0].dims,o);return[i.reshapeUnpacked(t[0],e)]},wp=(i,t)=>(_g(t),La(i,[t[0]],Array.from(t[1].integerData))),_p=i=>i.attributes.getInts("axes"),wg=i=>{if(!i||i.length!==1)throw new Error("Squeeze requires 1 input.");if(i[0].type==="string")throw new Error("invalid input tensor types.")},_g=i=>{if(!i||i.length!==2)throw new Error("Squeeze requires 2 inputs.");if(i[1].type!=="int32")throw new Error("Invalid input type.")}});var Ap,Og,Ag,Ip=$(()=>{"use strict";De();pe();Ap=(i,t)=>{Ag(t);let o={name:"Sum",inputNames:t.map((r,n)=>`X${n}`),inputTypes:new Array(t.length).fill(0)};return[i.run({...o,get:()=>Og(i,t,o)},t)]},Og=(i,t,o)=>{let e=K(i.session.backend.glContext.version),r=t[0].dims.slice(),s=`
      void main() {
        vec4 result = ${t.map((a,u)=>`${e.texture2D}(X${u},TexCoords)`).join(" + ")};
        ${e.output} = result;
      }
    `;return{...o,output:{dims:r,type:t[0].type,textureType:0},hasMain:!0,shaderSource:s}},Ag=i=>{if(!i||i.length===0)throw new Error("Sum requires inputs.");let t=i[0].dims.length;for(let o=1;o<i.length;o++){if(t!==i[o].dims.length)throw new Error("Input shapes are mismatched.");for(let e=0;e<t;e++)if(i[0].dims[e]!==i[o].dims[e])throw new Error("Input shapes are not matched.")}if(i[0].type!=="float32"&&i[0].type!=="float64")throw new Error("Invalid input type.");for(let o=1;o<i.length;o++)if(i[0].type!==i[o].type)throw new Error("Input types are not matched.")}});var Sp,Ig,Sg,Pp=$(()=>{"use strict";jn();pe();Sp=(i,t)=>{Sg(t);let o={name:"Tile",inputNames:["A"],inputTypes:[0]};return[i.run({...o,get:()=>Ig(i,t,o)},t)]},Ig=(i,t,o)=>{let e=t[0].dims.slice(),r=new Array(e.length),n=[];for(let u=0;u<e.length;u++)r[u]=e[u]*t[1].numberData[u],n.push(`inputIdx[${u}] = int(mod(float(outputIdx[${u}]), ${e[u]}.));`);let s=r.length,a=`
      float process(int outputIdx[${s}]) {
        int inputIdx[${s}];
        ${n.join(`
`)}
        return _A(inputIdx);
      }
    `;return{...o,output:{dims:r,type:t[0].type,textureType:0},shaderSource:a}},Sg=i=>{if(!i||i.length!==2)throw new Error("Tile requires 2 input.");if(i[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(i[1].dims[0]!==i[0].dims.length)throw new Error("Invalid input shape.");if(fr.indexOf(i[0].type)===-1)throw new Error("Invalid input type.");if(i[1].type!=="int32"&&i[1].type!=="int16")throw new Error("Invalid repeat type.")}});var Ca,Ep,Dp,Pg,Eg,Lp=$(()=>{"use strict";ge();Ca=(i,t,o)=>{Pg(t);let e=H.unsqueezeShape(t[0].dims,o);return[i.reshapeUnpacked(t[0],e)]},Ep=(i,t)=>(Eg(t),Ca(i,[t[0]],Array.from(t[1].integerData))),Dp=i=>i.attributes.getInts("axes"),Pg=i=>{if(!i||i.length!==1)throw new Error("Unsqueeze requires 1 input.");if(i[0].type==="string")throw new Error("invalid input tensor types.")},Eg=i=>{if(!i||i.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(i[1].type!=="int32")throw new Error("Invalid input type.")}});var Cp,Fp=$(()=>{"use strict";Wl();tf();of();cf();Ho();Yf();ec();nc();ac();fc();dc();gc();xc();jo();Ac();Rc();jc();Yc();ep();rp();sp();gp();xp();Op();Ip();Pp();Yo();ma();Lp();Sa();Cp=[["Abs","","6+",pf],["Acos","","7+",df],["Add","","7+",Vl],["And","","7+",zl],["Asin","","7+",hf],["Atan","","7+",mf],["AveragePool","","7+",Sc,Pc],["BatchNormalization","","7+",Gl,Ul],["Cast","","6+",rf,nf],["Ceil","","6+",yf],["Clip","","6-10",da,bf],["Clip","","11+",gf],["Concat","","4+",uf,ff],["Conv","","1+",xa,wa],["ConvTranspose","","1+",jf,qf],["Cos","","7+",Tf],["Div","","7+",Hl],["Dropout","","7+",ha],["DepthToSpace","","1+",Zf,Qf],["Equal","","7+",jl],["Elu","","6+",vf,xf],["Exp","","6+",wf],["Flatten","","1+",tc,rc],["Floor","","6+",_f],["FusedConv","com.microsoft","1+",xa,wa],["Gather","","1+",oc,ic],["Gemm","","7-10",_a,uc],["Gemm","","11+",_a,lc],["GlobalAveragePool","","1+",Dc,Lc],["GlobalMaxPool","","1+",Bc],["Greater","","7+",ql],["Identity","","1+",ha],["ImageScaler","","1+",cc,pc],["InstanceNormalization","","6+",mc,bc],["LeakyRelu","","6+",Of,Af],["Less","","7+",Yl],["LRN","","1+",yc,Tc],["Log","","6+",If],["MatMul","","1+",Mf,Gf],["MaxPool","","1+",Cc,Fc],["Mul","","7+",Xl],["Neg","","6+",Sf],["Not","","1+",Pf],["Or","","7+",Kl],["Pad","","2-10",Oa,wc],["Pad","","11+",_c,Oc],["Pow","","7+",Jl],["PRelu","","7+",Zl],["ReduceLogSum","","1+",zc,cr],["ReduceMax","","1+",Uc,cr],["ReduceMean","","1+",Gc,cr],["ReduceMin","","1+",Wc,cr],["ReduceProd","","1+",Vc,cr],["ReduceSum","","1-12",Mc,cr],["ReduceSumSquare","","1+",Hc,cr],["Relu","","6+",Ef],["Reshape","","5+",qc],["Resize","","10",Ea,Zc],["Resize","","11+",Ea,Qc],["Shape","","1+",tp],["Sigmoid","","6+",Df],["Sin","","7+",Lf],["Slice","","10+",ap],["Slice","","1-9",np,op],["Softmax","","1-12",cp,pp],["Softmax","","13+",hp,dp],["Split","","2-12",Tp,vp],["Sqrt","","6+",Cf],["Squeeze","","1-12",La,_p],["Squeeze","","13+",wp],["Sub","","7+",Ql],["Sum","","6+",Ap],["Tan","","7+",Ff],["Tanh","","6+",$f],["Tile","","6+",Sp],["Transpose","","1+",Gr,Kf],["Upsample","","7-8",Aa,Kc],["Upsample","","9",Aa,Jc],["Unsqueeze","","1-12",Ca,Dp],["Unsqueeze","","13+",Ep],["Xor","","7+",ef]]});function kp(i){let t={},o;for(;(o=$p.exec(i))!==null;){let e=o[3].split(",").map(r=>{let n=r.trim().split(" ");return n&&n.length===2?{type:n[0],name:n[1]}:null}).filter(r=>r!==null);t[o[2]]={params:e,body:o[4]}}for(let e in t){let r=Dg.replace("__FUNC__",e),n=new RegExp(r,"gm");for(;(o=n.exec(i))!==null;){let s=o[1],a=o[2],u=o[3].split(","),l=s?`${s} ${a};`:"",c=t[e].body,b="";t[e].params.forEach((w,S)=>{w&&(b+=`${w.type} ${w.name} = ${u[S]};
`)}),c=`${b}
 ${c}`,c=c.replace("return",`${a} = `);let y=`
      ${l}
      {
        ${c}
      }
      `;i=i.replace(o[0],y)}}return i=i.replace($p,""),i}var $p,Dg,Bp=$(()=>{"use strict";$p=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,Dg="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function mn(i,t){let o=[],e=[],r=t!=null&&Array.isArray(t)&&t.length===0,n=t==null||r?null:Lg(t,i).sort(),s=0;for(let a=0;a<i.length;++a){if(n!=null){if(n[s]===a&&i[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${i[a]}' is not 1`);(n[s]==null||n[s]>a)&&i[a]===1&&(o.push(i[a]),e.push(a)),n[s]<=a&&s++}i[a]!==1&&(o.push(i[a]),e.push(a))}return{newShape:o,keptDims:e}}function Lg(i,t){let o=t.length;return i=i==null?t.map((e,r)=>r):[].concat(i),ln(i.every(e=>e>=-o&&e<o),()=>`All values in axis param must be in range [-${o}, ${o}) but got axis ${i}`),ln(i.every(Cg),()=>`All values in axis param must be integers but got axis ${i}`),i.map(e=>e<0?o+e:e)}function Cg(i){return i%1===0}function Fg(i){if(i.length===0)return 1;let t=i[0];for(let o=1;o<i.length;o++)t*=i[o];return t}function Np(i){let t=Math.ceil(Math.sqrt(i));return[t,Math.ceil(i/t)]}var Zo,Fa=$(()=>{"use strict";gt();ge();Zo=class{constructor(t){this.maxTextureSize=t}computeTextureWH(t,o){let e=this.computeTexture(t,o);return o&&o.isPacked&&(e[0]/=2,e[1]/=2),o&&o.reverseWH?[e[1],e[0]]:e}computeTexture(t,o){let e=o&&o.isPacked;if(t.length===0)return e?[2,2]:[1,1];let r=this.maxTextureSize;if(o&&o.breakAxis!==void 0){let a=o.breakAxis>=t.length?1:t.slice(o.breakAxis).reduce((l,c)=>l*c),u=o.breakAxis<=0?1:t.slice(0,o.breakAxis).reduce((l,c)=>l*c);if(a>r||u>r)Te.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${t}, breakAxis:${o.breakAxis}`);else return[a,u]}let n=t.slice(0);e&&(r=r*2,n=n.map((a,u)=>u>=n.length-2?n[u]%2===0?n[u]:n[u]+1:n[u]),n.length===1&&(n=[2,n[0]])),n.length!==2&&(n=mn(n).newShape);let s=Fg(n);return n.length<=1&&s<=r?[1,s]:n.length===2&&n[0]<=r&&n[1]<=r?n:n.length===3&&n[0]*n[1]<=r&&n[2]<=r?[n[0]*n[1],n[2]]:n.length===3&&n[0]<=r&&n[1]*n[2]<=r?[n[0],n[1]*n[2]]:n.length===4&&n[0]*n[1]*n[2]<=r&&n[3]<=r?[n[0]*n[1]*n[2],n[3]]:n.length===4&&n[0]<=r&&n[1]*n[2]*n[3]<=r?[n[0],n[1]*n[2]*n[3]]:e?Np(s/4).map(a=>a*2):Np(s)}}});var Qo,Rp=$(()=>{"use strict";ge();er();De();Fa();Ut();Qo=class extends xt{constructor(o){super(o)}getFunctions(){return{...this.offsetToCoords(),...this.coordsToOffset(),...this.toVec(),...this.valueFrom(),...this.getCommonUtilFuncs(),...this.getInputsSamplingSnippets(),...this.getOutputSamplingSnippet()}}getCustomTypes(){return{}}offsetToCoords(){let o="offsetToCoords";return{offsetToCoords:new W(`
      vec2 ${o}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let o="coordsToOffset";return{coordsToOffset:new W(`
      int ${o}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let o=this.context.outputTextureLayout;return o.isPacked?this.getPackedOutputSamplingSnippet(o):this.getUnpackedOutputSamplingSnippet(o)}getPackedOutputSamplingSnippet(o){let e=o.unpackedShape,r=[o.width,o.height],n={},s="getOutputCoords";switch(e.length){case 0:n[s]=this.getOutputScalarCoords();break;case 1:n[s]=this.getOutputPacked1DCoords(e,r);break;case 2:n[s]=this.getOutputPacked2DCoords(e,r);break;case 3:n[s]=this.getOutputPacked3DCoords(e,r);break;default:n[s]=this.getOutputPackedNDCoords(e,r)}let u=`
      void setOutput(vec4 val) {
        ${K(this.context.glContext.version).output} = val;
      }
    `,l="floatTextureSetRGBA";return n[l]=new W(u),n}getUnpackedOutputSamplingSnippet(o){let e=o.unpackedShape,r=[o.width,o.height],n={},s="getOutputCoords";switch(e.length){case 0:n[s]=this.getOutputScalarCoords();break;case 1:n[s]=this.getOutputUnpacked1DCoords(e,r);break;case 2:n[s]=this.getOutputUnpacked2DCoords(e,r);break;case 3:n[s]=this.getOutputUnpacked3DCoords(e,r);break;case 4:n[s]=this.getOutputUnpacked4DCoords(e,r);break;case 5:n[s]=this.getOutputUnpacked5DCoords(e,r);break;case 6:n[s]=this.getOutputUnpacked6DCoords(e,r);break;default:throw new Error(`Unsupported output dimensionality: ${e.length}`)}let u=`
        void setOutput(float val) {
          ${K(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `,l="floatTextureSetR";return n[l]=new W(u),n}getOutputScalarCoords(){return new W(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(o,e){let r=e,n="";return r[0]===1?(n=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${r[1]}.0);
          }
        `,new W(n)):r[1]===1?(n=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${r[0]}.0);
          }
        `,new W(n)):(n=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${r[0]}, ${r[1]}));
          return 2 * (resTexRC.y * ${r[0]} + resTexRC.x);
        }
      `,new W(n))}getOutputPacked2DCoords(o,e){let r="";if(Fr.arraysEqual(o,e))return r=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${e[0]}, ${e[1]}));
        }
      `,new W(r);let n=e,s=Math.ceil(o[1]/2);return r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${n[0]}, ${n[1]}));

          int index = resTexRC.y * ${n[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${s}) * 2;
          int c = 2 * (index / ${s});

          return ivec2(r, c);
        }
      `,new W(r)}getOutputPacked3DCoords(o,e){let r=[e[0],e[1]],n=Math.ceil(o[2]/2),s=n*Math.ceil(o[1]/2),a=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${r[0]}, ${r[1]}));
          int index = resTexRC.y * ${r[0]} + resTexRC.x;

          int b = index / ${s};
          index -= b * ${s};

          // reverse r and c order for packed texture
          int r = imod(index, ${n}) * 2;
          int c = 2 * (index / ${n});

          return ivec3(b, r, c);
        }
      `;return new W(a)}getOutputPackedNDCoords(o,e){let r=[e[0],e[1]],n=Math.ceil(o[o.length-1]/2),s=n*Math.ceil(o[o.length-2]/2),a=s,u="",l="b, r, c";for(let b=2;b<o.length-1;b++)a*=o[o.length-b-1],u=`
      int b${b} = index / ${a};
      index -= b${b} * ${a};
    `+u,l=`b${b}, `+l;let c=`
      ivec${o.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.y * ${r[0]} + resTexRC.x;

        ${u}

        int b = index / ${s};
        index -= b * ${s};

        // reverse r and c order for packed texture
        int r = imod(index, ${n}) * 2;
        int c = 2 * (index / ${n});

        return ivec${o.length}(${l});
      }
    `;return new W(c)}getOutputUnpacked1DCoords(o,e){let r=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          return resTexRC.y * ${e[0]} + resTexRC.x;
        }
      `;return new W(r)}getOutputUnpacked2DCoords(o,e){let r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          int r = index / ${o[1]};
          int c = index - r * ${o[1]};
          return ivec2(r, c);
        }
      `;return new W(r)}getOutputUnpacked3DCoords(o,e){let r="",n=o.length,s=null;n<2&&(s=[]),s=new Array(n-1),s[n-2]=o[n-1];for(let l=n-3;l>=0;--l)s[l]=s[l+1]*o[l+1];let a=["r","c","d"],u=s.map((l,c)=>{let b=`int ${a[c]} = index / ${l}`,y=c===s.length-1?`int ${a[c+1]} = index - ${a[c]} * ${l}`:`index -= ${a[c]} * ${l}`;return`${b}; ${y};`}).join("");return r=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec3(r, c, d);
        }
      `,new W(r)}getOutputUnpacked4DCoords(o,e){let r="",n=o.length,s=null;n<2&&(s=[]),s=new Array(n-1),s[n-2]=o[n-1];for(let l=n-3;l>=0;--l)s[l]=s[l+1]*o[l+1];let a=["r","c","d","d2"],u=s.map((l,c)=>{let b=`int ${a[c]} = index / ${l}`,y=c===s.length-1?`int ${a[c+1]} = index - ${a[c]} * ${l}`:`index -= ${a[c]} * ${l}`;return`${b}; ${y};`}).join("");return r=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec4(r, c, d, d2);
        }
      `,new W(r)}getOutputUnpacked5DCoords(o,e){let r="",n=o.length,s=null;n<2&&(s=[]),s=new Array(n-1),s[n-2]=o[n-1];for(let l=n-3;l>=0;--l)s[l]=s[l+1]*o[l+1];let a=["r","c","d","d2","d3"],u=s.map((l,c)=>{let b=`int ${a[c]} = index / ${l}`,y=c===s.length-1?`int ${a[c+1]} = index - ${a[c]} * ${l}`:`index -= ${a[c]} * ${l}`;return`${b}; ${y};`}).join("");return r=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec5(r, c, d, d2, d3);
        }
      `,new W(r)}getOutputUnpacked6DCoords(o,e){let r="",n=o.length,s=null;n<2&&(s=[]),s=new Array(n-1),s[n-2]=o[n-1];for(let l=n-3;l>=0;--l)s[l]=s[l+1]*o[l+1];let a=["r","c","d","d2","d3","d4"],u=s.map((l,c)=>{let b=`int ${a[c]} = index / ${l}`,y=c===s.length-1?`int ${a[c+1]} = index - ${a[c]} * ${l}`:`index -= ${a[c]} * ${l}`;return`${b}; ${y};`}).join("");return r=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${e[0]}, ${e[1]}));
         int index = resTexRC.y * ${e[0]} + resTexRC.x;
         ${u}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new W(r)}getCommonUtilFuncs(){let o={},e="uvFromFlat";o[e]=new W(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),e="packedUVfrom1D",o[e]=new W(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom2D",o[e]=new W(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom3D",o[e]=new W(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="sampleTexture";let r=K(this.context.glContext.version);return o[e]=new W(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${r.texture2D}(textureSampler, uv).r;
        }`),o}getInputsSamplingSnippets(){let o={},e=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((r,n)=>{let s=this.context.inputTextureLayouts[n],a=Ro(r);s.isPacked?o[a]=this.getPackedSamplerFromInput(a,r,s):o[a]=this.getUnpackedSamplerFromInput(a,r,s);let u=Ol(r);s.unpackedShape.length<=e.unpackedShape.length&&(s.isPacked?o[u]=this.getPackedSamplerAtOutputCoords(u,s,e,r):o[u]=this.getUnpackedSamplerAtOutputCoords(u,s,e,r))}),o}getPackedSamplerAtOutputCoords(o,e,r,n){let s=e.unpackedShape,a=r.unpackedShape,l=Ro(n),c=s.length,b=a.length,y=st.getBroadcastDims(s,a),w=ut(b),S=b-c,I,F=Bt();c===0?I="":b<2&&y.length>=1?I="coords = 0;":I=y.map(ne=>`coords.${F[ne+S]} = 0;`).join(`
`);let k="";b<2&&c>0?k="coords":k=s.map((ne,mt)=>`coords.${F[mt+S]}`).join(", ");let L="return outputValue;",te=H.size(s)===1,ve=H.size(a)===1;if(c===1&&!te&&!ve)L=`
        return vec4(outputValue.xy, outputValue.xy);
      `;else if(te&&!ve)b===1?L=`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:L=`
          return vec4(outputValue.x);
        `;else if(y.length){let ne=c-2,mt=c-1;y.indexOf(ne)>-1&&y.indexOf(mt)>-1?L="return vec4(outputValue.x);":y.indexOf(ne)>-1?L="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":y.indexOf(mt)>-1&&(L="return vec4(outputValue.xx, outputValue.zz);")}let Le=`
        int lastDim = coords.${F[b-1]};
        coords.${F[b-1]} = coords.${F[b-2]};
        coords.${F[b-2]} = lastDim;
      `,V=`
      vec4 ${o}() {
        ${w} coords = getOutputCoords();
        ${Le}
        ${I}
        vec4 outputValue = ${l}(${k});
        ${L}
      }
    `;return new W(V,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(o,e,r,n){let s=[r.width,r.height],a=[e.width,e.height],u=e.unpackedShape.length,l=r.unpackedShape.length,c=e.unpackedShape,b=r.unpackedShape,y=Ro(n);if(u===l&&Fr.arraysEqual(a,s)){let te=`
          float ${o}() {
            return sampleTexture(${n}, TexCoords);
          }
        `;return new W(te,["coordinates.sampleTexture"])}let w=ut(l),S=st.getBroadcastDims(c,b),I=l-u,F,k=Bt();u===0?F="":l<2&&S.length>=1?F="coords = 0;":F=S.map(te=>`coords.${k[te+I]} = 0;`).join(`
`);let L="";l<2&&u>0?L="coords":L=e.unpackedShape.map((te,q)=>`coords.${k[q+I]}`).join(", ");let N=`
        float ${o}() {
          ${w} coords = getOutputCoords();
          ${F}
          return ${y}(${L});
        }
      `;return new W(N,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(o,e,r){switch(r.unpackedShape.length){case 0:return this.getPackedSamplerScalar(o,e);case 1:return this.getPackedSampler1D(o,e,r);case 2:return this.getPackedSampler2D(o,e,r);case 3:return this.getPackedSampler3D(o,e,r);default:return this.getPackedSamplerND(o,e,r)}}getUnpackedSamplerFromInput(o,e,r){let n=r.unpackedShape;switch(n.length){case 0:return this.getUnpackedSamplerScalar(o,e,r);case 1:return this.getUnpackedSampler1D(o,e,r);case 2:return this.getUnpackedSampler2D(o,e,r);case 3:return this.getUnpackedSampler3D(o,e,r);case 4:return this.getUnpackedSampler4D(o,e,r);case 5:return this.getUnpackedSampler5D(o,e,r);case 6:return this.getUnpackedSampler6D(o,e,r);default:throw new Error(`Unsupported dimension ${n.length}-D`)}}getPackedSamplerScalar(o,e){let r=K(this.context.glContext.version),n=`
          vec4 ${o}() {
            return ${r.texture2D}(${e}, halfCR);
          }
        `;return new W(n)}getPackedSampler1D(o,e,r){let n=[r.width,r.height],s=[n[1],n[0]],a=K(this.context.glContext.version),l=`vec4 ${o}(int index) {
      vec2 uv = packedUVfrom1D(
      ${s[0]}, ${s[1]}, index);
      return ${a.texture2D}(${e}, uv);
    }`;return new W(l,["coordinates.packedUVfrom1D"])}getPackedSampler2D(o,e,r){let n=r.unpackedShape,s=[r.width,r.height],a=K(this.context.glContext.version),u=s[0],l=s[1];if(s!=null&&Fr.arraysEqual(n,s)){let S=`vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${u}.0);
        return ${a.texture2D}(${e}, uv);
      }`;return new W(S)}let c=s,b=Math.ceil(n[1]/2),w=`vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c[1]}, ${c[0]}, ${b}, row, col);
      return ${a.texture2D}(${e}, uv);
    }`;return new W(w,["coordinates.packedUVfrom2D"])}getPackedSampler3D(o,e,r){let n=r.unpackedShape,s=[r.width,r.height],a=[s[0],s[1]],u=K(this.context.glContext.version);if(n[0]===1){let I=n.slice(1),F=[1,2],k=fn(n,I),L=["b","row","col"],N=JSON.parse(JSON.stringify(r));N.unpackedShape=k;let te=this.getPackedSamplerFromInput(o,e,N),ve=`${te.routineBody}
      vec4 ${o}(int b, int row, int col) {
        return ${o}(${cn(L,F)});
      } `;return new W(ve,te.dependencies)}let l=a[0],c=a[1],b=Math.ceil(n[2]/2),y=b*Math.ceil(n[1]/2),S=`vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${c}, ${l}, ${y}, ${b}, b, row, col);
      return ${u.texture2D}(${e}, uv);}`;return new W(S,["coordinates.packedUVfrom3D"])}getPackedSamplerND(o,e,r){let n=r.unpackedShape,s=n.length,a=[r.width,r.height],u=K(this.context.glContext.version),l=[a[0],a[1]],c=l[1],b=l[0],y=Math.ceil(n[s-1]/2),w=y*Math.ceil(n[s-2]/2),S="int b, int row, int col",I=`b * ${w} + (row / 2) * ${y} + (col / 2)`;for(let L=2;L<s-1;L++)S=`int b${L}, `+S,w*=n[s-L-1],I=`b${L} * ${w} + `+I;let k=`vec4 ${o}(${S}) {
      int index = ${I};
      int texR = index / ${b};
      int texC = index - texR * ${b};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${b}, ${c});
      return ${u.texture2D}(${e}, uv);
    }`;return new W(k)}getUnpackedSamplerScalar(o,e,r){let[n,s]=[r.width,r.height];if(n===1&&s===1){let u=`
          float ${o}() {
            return sampleTexture(${e}, halfCR);
          }
        `;return new W(u,["coordinates.sampleTexture"])}let a=`
        float ${o}() {
          int offset_${e} = coordsToOffset(TexCoords, ${n}, ${s});
          vec2 uv = uvFromFlat(${n}, ${s}, offset_${e});
          return sampleTexture(${e}, uv);
        }
      `;return new W(a,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(o,e,r){let n=r.width,s=r.height;if(s===1&&n===1){let u=`
        float ${o}(int index) {
          return sampleTexture(${e}, halfCR);
        }
      `;return new W(u,["coordinates.sampleTexture"])}if(s===1){let u=`
          float ${o}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${n}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new W(u,["coordinates.sampleTexture"])}if(n===1){let u=`
          float ${o}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${s}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new W(u,["coordinates.sampleTexture"])}let a=`
        float ${o}(int index) {
          vec2 uv = uvFromFlat(${n}, ${s}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new W(a,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(o,e,r){let n=r.unpackedShape,s=[r.height,r.width];if(s!=null&&Fr.arraysEqual(n,s)){let w=s[1],S=s[0],I=`
          float ${o}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${w}.0, ${S}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new W(I,["coordinates.sampleTexture"])}let{newShape:a,keptDims:u}=mn(n),l=a;if(l.length<n.length){let w=fn(n,l),S=JSON.parse(JSON.stringify(r));S.unpackedShape=w;let I=["col","row"],F=`
          ${this.getUnpackedSamplerFromInput(o,e,S).routineBody}
          float ${o}(int row, int col) {
            return ${o}(${cn(I,u)});
          }
        `;return new W(F,["coordinates.sampleTexture"])}let c=s[1],b=s[0];if(b===1){let w=`
          float ${o}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${c}, ${b});
            float index = dot(vec3(row, col, offset_${e}), vec3(${n[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new W(w,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(c===1){let w=`
          float ${o}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${c}, ${b});
            float index = dot(vec3(row, col, offset_${e}), vec3(${n[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${b}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new W(w,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let y=`
        float ${o}(int row, int col) {
          int index = col * ${n[1]} + row;
          vec2 uv = uvFromFlat(${c}, ${b}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new W(y,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(o,e,r){let n=r.unpackedShape,s=n[1]*n[2],a=n[2],{newShape:u,keptDims:l}=mn(n),c=u;if(c.length<n.length){let S=fn(n,c),I=["batch","col","row"],F=JSON.parse(JSON.stringify(r));F.unpackedShape=S;let k=this.getUnpackedSamplerFromInput(o,e,F),L=l.reverse(),N=`
          ${k.routineBody}
          float ${o}(int batch, int row, int col) {
            return ${o}(${cn(I,L)});
          }
        `;return new W(N,k.dependencies)}let b=r.width,y=r.height,w=`
          float ${o}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${s} + col * ${a} + row;
            vec2 uv = uvFromFlat(${b}, ${y}, index);
            return sampleTexture(${e}, uv);
          }
      `;return new W(w,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(o,e,r){let n=r.unpackedShape,s=n[3],a=n[2]*s,u=n[1]*a,l=r.width,c=r.height,b=`
        float ${o}(int row, int col, int depth, int depth2) {
          int index = row * ${u} + col * ${a} +
              depth2 * ${s} + depth;
          vec2 uv = uvFromFlat(${l}, ${c}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new W(b,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(o,e,r){let n=r.unpackedShape,s=n[4],a=n[3]*s,u=n[2]*a,l=n[1]*u,{newShape:c,keptDims:b}=mn(n);if(c.length<n.length){let I=fn(n,c),F=["row","col","depth","depth2","depth3"],k=JSON.parse(JSON.stringify(r));k.unpackedShape=I;let L=`
          ${this.getUnpackedSamplerFromInput(o,e,k).routineBody}
          float ${o}(int row, int col, int depth, int depth2, int depth3) {
            return ${o}(${cn(F,b)});
          }
        `;return new W(L,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let y=r.width,w=r.height,S=`
        float ${o}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${l} + col * ${u} + depth * ${a} +
          depth3 * ${s} + depth2;
          vec2 uv = uvFromFlat(${y}, ${w}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new W(S,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(o,e,r){let n=r.unpackedShape,s=n[5],a=n[4]*s,u=n[3]*a,l=n[2]*u,c=n[1]*l,{newShape:b,keptDims:y}=mn(n);if(b.length<n.length){let F=fn(n,b),k=["row","col","depth","depth2","depth3","depth4"],L=JSON.parse(JSON.stringify(r));L.unpackedShape=F;let N=`
            ${this.getUnpackedSamplerFromInput(o,e,L).routineBody}
            float ${o}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${o}(${cn(k,y)});
            }
          `;return new W(N,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let w=r.width,S=r.height,I=`
          float ${o}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${c} + col * ${l} + depth * ${u} +
            depth2 * ${a} + depth3 * ${s} + depth4;
            vec2 uv = uvFromFlat(${w}, ${S}, index);
            return sampleTexture(${e}, uv);
          }
        `;return new W(I,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let o=this.context.outputTextureLayout,e=o.shape.length,r=o.strides,n=o.width,s=o.height,a=[];for(let l=0;l<e-1;++l)a.push(`
        c[${l}] = offset / ${r[l]};`),a.push(`
        offset -= c[${l}] * ${r[l]};`);a.push(`
        c[${e-1}] = offset;`);let u=`
      void toVec(vec2 texCoords, out int c[${e}]) {
        int offset = coordsToOffset(texCoords, ${n}, ${s});
        ${a.join("")}
      }
      void toVec(int offset, out int c[${e}]) {
        ${a.join("")}
      }
    `;return{toVec:new W(u,["coordinates.coordsToOffset"])}}valueFrom(){let o={};return this.context.programInfo.inputNames.forEach((e,r)=>{let n=this.context.inputTextureLayouts[r],a=(n.unpackedShape.length>0?n.unpackedShape:n.shape).length,u=`_${e}`;o[u]=new W(this.getValueFromSingle(e,a,n.width,n.height,!1),[`shapeUtils.indicesToOffset${u}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),u=u+"_T",o[u]=new W(this.getValueFromSingle(e,a,n.width,n.height,!0),[`shapeUtils.indicesToOffset${u}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),o}getValueFromSingle(o,e,r,n,s){let a=`_${o}`;s&&(a=a+"_T");let u=K(this.context.glContext.version);return`
        float ${a}(int m[${e}]) {
          int offset = indicesToOffset${a}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${n});
          float value = getColorAsFloat(${u.texture2D}(${o}, coords));
          return value;
        }
        `}getPackedValueFrom(o,e,r,n,s){let a=`_${o}_Pack`;s&&(a=a+"_T");let u=K(this.context.glContext.version);return`
        vec4 ${a}(int m[${e}]) {
          int offset = indicesToOffset_${o}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${n});
          return ${u.texture2D}(${o}, coords);
        }
        `}}});var ei,Mp=$(()=>{"use strict";er();ei=class i extends xt{constructor(t){super(t)}getFunctions(){return{...this.encodeFloat32(),...this.decodeFloat32()}}getCustomTypes(){return{}}encodeFloat32(){return{encode:new W(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new W(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let t=i.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new W(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${t}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let t=i.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new W(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${t}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let t=new ArrayBuffer(4),o=new Uint32Array(t),e=new Uint8Array(t);if(o[0]=3735928559,e[0]===239)return!0;if(e[0]===222)return!1;throw new Error("unknown endianness")}}});var ti,Gp=$(()=>{"use strict";er();De();ti=class extends xt{constructor(t){super(t)}getFunctions(){return{...this.setFragColor(),...this.getColorAsFloat()}}getCustomTypes(){return{}}setFragColor(){let t=K(this.context.glContext.version);return{setFragColor:new W(`
        void setFragColor(float value) {
            ${t.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new W(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}});var ri,Up=$(()=>{"use strict";er();ri=class i extends xt{constructor(t){super(t)}getFunctions(){return{...this.bcastIndex(),...this.bcastMatmulIndex(),...this.offsetToIndices(),...this.indicesToOffset(),...this.incrementIndices()}}getCustomTypes(){return{}}bcastIndex(){let t=this.context.outputTextureLayout.shape.length,o={};return this.context.programInfo.inputNames.forEach((e,r)=>{let n=this.context.inputTextureLayouts[r].unpackedShape;if(n.length<=t){let s=n.length,a=t-s,u=`bcastIndices_${e}`,l="";for(let b=0;b<s;++b)l+=`
          realIndices[${b}] = int( mod(float(bcastedIndices[${a+b}]), ${n[b]}.0) );
          `;let c=`
        void ${u} (int bcastedIndices[${t}], out int realIndices[${s}]) {
          ${l}
        }
        `;o[u]=new W(c)}}),o}bcastMatmulIndex(){let t=this.context.outputTextureLayout.shape.length,o={};return this.context.programInfo.inputNames.forEach((e,r)=>{let n=this.context.inputTextureLayouts[r].shape;if(!(n.length<2||n.length>t)){let s=n.length,a=t-s,u=`bcastMatmulIndices_${e}`,l="";for(let b=0;b<s-2;++b)l+=`
          realIndices[${b}] = int( mod(float(bcastedIndices[${a+b}]), ${n[b]}.0) );
          `;let c=`
        void ${u}(int bcastedIndices[${t}], out int realIndices[${s}]) {
          ${l}
          realIndices[${s-1}] = bcastedIndices[${t-1}];
          realIndices[${s-2}] = bcastedIndices[${t-2}];
        }
        `;o[u]=new W(c)}}),o}indicesToOffset(){let t={};return this.context.programInfo.inputNames.forEach((o,e)=>{let r=this.context.inputTextureLayouts[e].shape,n=this.context.inputTextureLayouts[e].strides,s=r.length,a=`indicesToOffset_${o}`;t[a]=new W(i.indexToOffsetSingle(a,s,n)),a=`indicesToOffset_${o}_T`,t[a]=new W(i.indexToOffsetSingle(a,s,n.slice().reverse()))}),t}static indexToOffsetSingle(t,o,e){let r="";for(let n=o-1;n>=0;--n)r+=`
        offset += indices[${n}] * ${e[n]};
        `;return`
      int ${t}(int indices[${o}]) {
        int offset = 0;
        ${r}
        return offset;
      }
      `}offsetToIndices(){let t={};return this.context.programInfo.inputNames.forEach((o,e)=>{let r=this.context.inputTextureLayouts[e].shape,n=this.context.inputTextureLayouts[e].strides,s=r.length,a=`offsetToIndices_${o}`;t[a]=new W(i.offsetToIndicesSingle(a,s,n)),a=`offsetToIndices_${o}_T`,t[a]=new W(i.offsetToIndicesSingle(a,s,n.slice().reverse()))}),t}static offsetToIndicesSingle(t,o,e){let r=[];for(let n=0;n<o-1;++n)r.push(`
      indices[${n}] = offset / ${e[n]};`),r.push(`
        offset -= indices[${n}] * ${e[n]};`);return r.push(`
      indices[${o-1}] = offset;`),`
      void ${t}(int offset, out int indices[${o}]) {
        ${r.join("")}
      }
      `}incrementIndices(){let t={};return this.context.programInfo.inputNames.forEach((o,e)=>{let r=this.context.inputTextureLayouts[e].shape,n=r.length,s=`incrementIndices_${o}`,a="";for(let l=0;l<n;++l)a+=`
        shape[${l}] = ${r[l]};`;let u=`
        void ${s}(int axis, out int indices[${n}]) {
          int shape[${n}];
          ${a};
          for(int i = ${n} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;t[s]=new W(u)}),t}}});var ni,Wp=$(()=>{"use strict";er();ni=class extends xt{constructor(t){super(t)}getCustomTypes(){return{}}getFunctions(){return{...this.binaryVecFunctions(),...this.copyVec(),...this.setVecItem(),...this.getVecItem()}}binaryVecFunctions(){let o=this.context.outputTextureLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},r={};for(let n in e){let s=`${n}Vec`,a="";for(let l=0;l<o;++l)a+=`
          dest[${l}] ${e[n]} src[${l}];
          `;let u=`
        void ${s}(int src[${o}], out int dest[${o}]) {
          ${a}
        }
        `;r[s]=new W(u)}return r}copyVec(){let o=this.context.outputTextureLayout.shape.length,e="";for(let n=0;n<o;++n)e+=`
        dest[${n}] = src[${n}];
        `;let r=`
      void copyVec(int src[${o}], out int dest[${o}]) {
        ${e}
      }
      `;return{copyVec:new W(r)}}setVecItem(){let o=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index =${o} + index;
        if (index == 0)
            m[0] = value;
        `;for(let n=1;n<o-1;++n)e+=`
        else if (index == ${n})
            m[${n}] = value;
            `;e+=`
        else
            m[${o-1}] = value;
        `;let r=`
      void setVecItem(out int m[${o}], int index, int value) {
        ${e}
      }
        `;return{setVecItem:new W(r)}}getVecItem(){let o=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index = ${o} + index;
        if (index == 0)
            return m[0];
      `;for(let n=1;n<o-1;++n)e+=`
        else if (index == ${n})
            return m[${n}];
      `;e+=`
        else
            return m[${o-1}];
        `;let r=`
      int getVecItem(int m[${o}], int index) {
        ${e}
      }
    `;return{getVecItem:new W(r)}}}});var $a,Vp=$(()=>{"use strict";Rp();Mp();Gp();Up();Wp();$a={encoding:ei,fragcolor:ti,vec:ni,shapeUtils:ri,coordinates:Qo}});var oi,zp=$(()=>{"use strict";er();Bp();Vp();De();oi=class{constructor(t,o,e,r){this.libs={};this.glslLibRoutineDependencyGraph={};this.context=new Wo(t,o,e,r),Object.keys($a).forEach(s=>{let a=new $a[s](this.context);this.libs[s]=a});let n=this.glslLibRoutineDependencyGraph;for(let s in this.libs){let u=this.libs[s].getFunctions();for(let l in u){let c=s+"."+l,b;n[c]?(b=n[c],b.routineBody=u[l].routineBody):(b=new Hn(c,u[l].routineBody),n[c]=b);let y=u[l].dependencies;if(y)for(let w=0;w<y.length;++w)if(n[y[w]])b.addDependency(n[y[w]]);else{let S=new Hn(y[w]);n[y[w]]=S,b.addDependency(S)}}}}preprocess(){let t=this.context.programInfo,o=t.shaderSource;return this.context.programInfo.hasMain||(o=`${o}
      ${_l(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),o=kp(o),`${wl(this.context.glContext.version)}
    ${this.getUniforms(t.inputNames,t.variables)}
    ${this.getImports(o)}
    ${o}`}getImports(t){let o=this.selectGlslLibRoutinesToBeIncluded(t);if(o.length===0)return"";let e="";for(let r=0;r<o.length;++r)if(o[r].routineBody)e+=o[r].routineBody+`
`;else throw new Error(`Missing body for the Glsl Library routine: ${o[r].name}`);return e}selectGlslLibRoutinesToBeIncluded(t){let o=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(e=>{let r=e.split(".")[1];t.indexOf(r)!==-1&&o.push(this.glslLibRoutineDependencyGraph[e])}),Vo.returnOrderedNodes(o)}getUniforms(t,o){let e=[];if(t)for(let r of t)e.push(`uniform sampler2D ${r};`);if(o)for(let r of o)e.push(`uniform ${r.type} ${r.name}${r.arrayLength?`[${r.arrayLength}]`:""};`);return e.join(`
`)}}});var ii,Hp=$(()=>{"use strict";Lt();gt();zp();De();ii=class{constructor(t,o,e){this.profiler=t;this.glContext=o;this.textureLayoutStrategy=e;this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,o){this.repo.set(t,o)}run(t,o,e){this.profiler.event("op",`ProgramManager.run ${t.programInfo.name??"unknown kernel"}`,()=>{let r=this.glContext.gl,n=t.program;r.useProgram(n);try{this.bindOutput(e),this.attributesBound||this.bindAttributes(t.attribLocations),this.bindUniforms(t.uniformLocations,t.programInfo.variables??[],o)}catch(s){throw Te.error("ProgramManager",t.programInfo.shaderSource),s}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(t=>this.glContext.deleteProgram(t.program))}build(t,o,e){return this.profiler.event("backend","ProgramManager.build",()=>{let r=new oi(this.glContext,t,o,e),n=r.preprocess(),s=this.compile(n);return{programInfo:t,program:s,uniformLocations:this.getUniformLocations(s,r.context.programInfo.inputNames,r.context.programInfo.variables),attribLocations:this.getAttribLocations(s)}})}compile(t){if(!this.vertexShader){Te.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let r=xl(this.glContext.version);this.vertexShader=this.glContext.compileShader(r,this.glContext.gl.VERTEX_SHADER)}re.debug&&Te.verbose("ProrgramManager",`FragShader:
${t}
`);let o=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),e=this.glContext.createProgram(this.vertexShader,o);return this.glContext.deleteShader(o),e}bindOutput(t){let o=t.width,e=t.height;Te.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${o}/${e}, shape=${t.shape}, type=${t.tensor.type}`),this.glContext.attachFramebuffer(t.texture,o,e)}bindAttributes(t){let o=t.position,e=t.textureCoord;this.glContext.setVertexAttributes(o,e),this.attributesBound=!0}bindUniforms(t,o,e){let r=this.glContext.gl,n=0;for(let{name:s,type:a,location:u,arrayLength:l}of t){let c=o.find(b=>b.name===s)?.data;if(a!=="sampler2D"&&!c)throw new Error(`variable '${s}' does not have data defined in program info`);switch(a){case"sampler2D":this.bindTexture(e[n],u,n),n++;break;case"float":l?r.uniform1fv(u,c):r.uniform1f(u,c);break;case"int":l?r.uniform1iv(u,c):r.uniform1i(u,c);break;default:throw new Error(`Uniform not implemented: ${a}`)}}}bindTexture(t,o,e){this.glContext.bindTextureToUniform(t.texture,e,o)}getAttribLocations(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}}getUniformLocations(t,o,e){let r=[];if(o)for(let n of o)r.push({name:n,type:"sampler2D",location:this.getUniformLocation(t,n)});if(e)for(let n of e)r.push({...n,location:this.getUniformLocation(t,n.name)});return r}getUniformLocation(t,o){let r=this.glContext.gl.getUniformLocation(t,o);if(r===null)throw new Error(`Uniform ${o} not found.`);return r}getAttribLocation(t,o){return this.glContext.gl.getAttribLocation(t,o)}}});var ai,jp=$(()=>{"use strict";gt();Vn();ai=class{constructor(t,o,e,r){this.glContext=t;this.layoutStrategy=o;this.profiler=e;this.config=r;this.pendingRead=new Map;r.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(t,o,e,r){let n=this.toEncoderType(t),s=this.glContext.getEncoder(n,o.channels||1,r);if(o.isPacked&&r===1)throw new Error("not implemented");let a=o.width,u=o.height,l,c;if(this.config.reuseTextures){l=`${a}x${u}_${s.format}_${s.internalFormat}_${s.textureType}`,c=this.inUseTextures.get(l),c||(c=[],this.inUseTextures.set(l,c));let y=this.idleTextures.get(l);if(y&&y.length>0){let w=y.pop();return c.push(w),r===1&&this.glContext.updateTexture(w,a,u,s,this.toTextureData(t,e)),w}}Te.verbose("TextureManager",`Creating new texture of size ${o.width}x${o.height}`);let b=this.glContext.allocateTexture(a,u,s,this.toTextureData(t,e));return this.config.reuseTextures&&(c.push(b),this.textureLookup.set(b,l)),b}readTexture(t,o,e){return e||(e=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let r=t.shape.reduce((s,a)=>s*a)*e,n=this.glContext.readTexture(t.texture,t.width,t.height,r,this.toEncoderType(o),e);return this.toTensorData(o,n)})}async readTextureAsync(t,o,e){let r=t.tensor.dataId;if(e||(e=1),this.pendingRead.has(r)){let n=this.pendingRead.get(r);return new Promise(s=>n?.push(s))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(r,[]);let n=t.shape.reduce((l,c)=>l*c)*e;await this.glContext.createAndWaitForFence();let s=this.glContext.readTexture(t.texture,t.width,t.height,n,this.toEncoderType(o),e),a=this.toTensorData(o,s),u=this.pendingRead.get(r);return this.pendingRead.delete(r),u?.forEach(l=>l(a)),a})}readUint8TextureAsFloat(t){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let o=t.shape.reduce((r,n)=>r*n),e=this.glContext.readTexture(t.texture,t.width,t.height,o*4,"byte",4);return new Float32Array(e.buffer,e.byteOffset,o)})}releaseTexture(t,o){let e;if(this.config.reuseTextures&&(e=this.textureLookup.get(t.texture),e)){o&&this.textureLookup.delete(e);let r=this.inUseTextures.get(e);if(r){let n=r.indexOf(t.texture);if(n!==-1){r.splice(n,1);let s=this.idleTextures.get(e);s||(s=[],this.idleTextures.set(e,s)),s.push(t.texture)}}}(!e||o)&&(Te.verbose("TextureManager",`Deleting texture of size ${t.width}x${t.height}`),this.glContext.deleteTexture(t.texture))}toTensorData(t,o){switch(t){case"int16":return o instanceof Int16Array?o:Int16Array.from(o);case"int32":return o instanceof Int32Array?o:Int32Array.from(o);case"int8":return o instanceof Int8Array?o:Int8Array.from(o);case"uint16":return o instanceof Uint16Array?o:Uint16Array.from(o);case"uint32":return o instanceof Uint32Array?o:Uint32Array.from(o);case"uint8":case"bool":return o instanceof Uint8Array?o:Uint8Array.from(o);case"float32":return o instanceof Float32Array?o:Float32Array.from(o);case"float64":return o instanceof Float64Array?o:Float64Array.from(o);default:throw new Error(`TensorData type ${t} is not supported`)}}toTextureData(t,o){if(o)return o instanceof Float32Array?o:new Float32Array(o)}toEncoderType(t){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}});var si,qp=$(()=>{"use strict";gt();su();Rl();Fp();Hp();Fa();jp();si=class{constructor(t,o){this.backend=t;this.context=o;this.layoutStrategy=new Zo(t.glContext.maxTextureSize),this.programManager=new ii(this.context.profiler,t.glContext,this.layoutStrategy),this.textureManager=new ai(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:t.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=t.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Uo(this)}onGraphInitialized(t){let o=t.getValues().filter(e=>e.from===-1&&e.tensor).map(e=>e.tensor.dataId);this.initializers=new Set(o)}isInitializer(t){return this.initializers?this.initializers.has(t):!1}addInitializer(t){this.initializers.add(t)}getTextureData(t,o){return o?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,o,e=!1){Te.verbose("WebGLSessionHandler","Storing Texture data in cache"),e?this.packedTextureDataCache.set(t,o):this.unpackedTextureDataCache.set(t,o)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.unpackedTextureDataCache=new Map}resolve(t,o,e){let r=au(t,o,Cp);return{impl:r.opImpl,context:r.opInit?r.opInit(t,e):t}}}});function $g(i){let t=0;for(;t<i.length&&i[t]();++t);return t-1}var Yn,Yp=$(()=>{"use strict";Lt();Vn();Vn();Ut();Yn=class{constructor(t,o){this.frameBufferBound=!1;this.itemsToPoll=[];this.gl=t,this.version=o,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(t,o,e,r){let n=this.gl,s=n.createTexture();n.bindTexture(n.TEXTURE_2D,s),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);let a=r?e.encode(r,t*o):null;return n.texImage2D(n.TEXTURE_2D,0,e.internalFormat,t,o,0,e.format,e.textureType,a),this.checkError(),s}updateTexture(t,o,e,r,n){let s=this.gl;s.bindTexture(s.TEXTURE_2D,t);let a=r.encode(n,o*e);s.texSubImage2D(s.TEXTURE_2D,0,0,0,o,e,r.format,r.textureType,a),this.checkError()}attachFramebuffer(t,o,e){let r=this.gl;r.bindTexture(r.TEXTURE_2D,t),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),this.checkError(),r.viewport(0,0,o,e),r.scissor(0,0,o,e)}readTexture(t,o,e,r,n,s){let a=this.gl;s||(s=1),this.frameBufferBound||this.attachFramebuffer(t,o,e);let u=this.getEncoder(n,s),l=u.allocate(o*e);return a.bindTexture(a.TEXTURE_2D,t),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,t,0),a.readPixels(0,0,o,e,a.RGBA,u.textureType,l),this.checkError(),u.decode(l,r)}isFramebufferReady(){return!0}getActiveTexture(){let t=this.gl;return`TEXTURE${t.getParameter(this.gl.ACTIVE_TEXTURE)-t.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(t,o){let e=this.gl;e.vertexAttribPointer(t,3,e.FLOAT,!1,20,0),e.enableVertexAttribArray(t),o!==-1&&(e.vertexAttribPointer(o,2,e.FLOAT,!1,20,12),e.enableVertexAttribArray(o)),this.checkError()}createProgram(t,o){let e=this.gl,r=e.createProgram();return e.attachShader(r,t),e.attachShader(r,o),e.linkProgram(r),r}compileShader(t,o){let e=this.gl,r=e.createShader(o);if(!r)throw new Error(`createShader() returned null with type ${o}`);if(e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${e.getShaderInfoLog(r)}
Shader source:
${t}`);return r}deleteShader(t){this.gl.deleteShader(t)}bindTextureToUniform(t,o,e){let r=this.gl;r.activeTexture(r.TEXTURE0+o),this.checkError(),r.bindTexture(r.TEXTURE_2D,t),this.checkError(),r.uniform1i(e,o),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(re.debug){let t=this.gl,o=t.getError(),e="";switch(o){case t.NO_ERROR:return;case t.INVALID_ENUM:e="INVALID_ENUM";break;case t.INVALID_VALUE:e="INVALID_VALUE";break;case t.INVALID_OPERATION:e="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:e="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:e="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:e="CONTEXT_LOST_WEBGL";break;default:e=`Unknown WebGL Error: ${o.toString(16)}`}throw new Error(e)}}deleteTexture(t){this.gl.deleteTexture(t)}deleteProgram(t){this.gl.deleteProgram(t)}getEncoder(t,o,e=0){if(this.version===2)return new Mo(this.gl,o);switch(t){case"float":return e===1||this.isRenderFloat32Supported?new Wn(this.gl,o):new Wn(this.gl,o,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Go(this.gl,o);default:throw new Error(`Invalid dataType: ${t}`)}}clearActiveTextures(){let t=this.gl;for(let o=0;o<this.maxTextureImageUnits;++o)t.activeTexture(t.TEXTURE0+o),t.bindTexture(t.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let t=this.gl,o=t.createBuffer();if(!o)throw new Error("createBuffer() returned null");let e=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),this.checkError(),o}createFramebuffer(){let t=this.gl.createFramebuffer();if(!t)throw new Error("createFramebuffer returned null");return t}queryVitalParameters(){let t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let t=this.gl,o=t.createTexture();t.bindTexture(t.TEXTURE_2D,o);let e=this.version===2?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,e,1,1,0,t.RGBA,t.FLOAT,null);let r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0);let n=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(o),t.deleteFramebuffer(r),n}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let t=this.gl,o,e,r,n,s;try{o=t.createTexture(),e=t.createFramebuffer(),t.bindTexture(t.TEXTURE_2D,o);let a=this.version===2?t.RGBA32F:t.RGBA;return t.texImage2D(t.TEXTURE_2D,0,a,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0),t.enable(t.BLEND),r=t.createShader(t.VERTEX_SHADER),!r||(t.shaderSource(r,"void main(){}"),t.compileShader(r),n=t.createShader(t.FRAGMENT_SHADER),!n)||(t.shaderSource(n,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),t.compileShader(n),s=t.createProgram(),!s)?!1:(t.attachShader(s,r),t.attachShader(s,n),t.linkProgram(s),t.useProgram(s),t.drawArrays(t.POINTS,0,1),t.getError()===t.NO_ERROR)}finally{t.disable(t.BLEND),s&&t.deleteProgram(s),r&&t.deleteShader(r),n&&t.deleteShader(n),e&&(t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(e)),o&&(t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(o))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,o=this.disjointTimerQueryWebgl2Extension,e=t.createQuery();return t.beginQuery(o.TIME_ELAPSED_EXT,e),e}else throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,o=this.disjointTimerQueryWebgl2Extension;t.endQuery(o.TIME_ELAPSED_EXT);return}else throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(t){let o=!1,e=!1;if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let r=this.gl,n=this.disjointTimerQueryWebgl2Extension;o=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE),e=r.getParameter(n.GPU_DISJOINT_EXT)}else throw new Error("WebGL1 profiling currently not supported");return o&&!e}getTimerResult(t){let o=0;if(this.version===2){let e=this.gl;o=e.getQueryParameter(t,e.QUERY_RESULT),e.deleteQuery(t)}else throw new Error("WebGL1 profiling currently not supported");return o/1e6}async waitForQueryAndGetTime(t){return await ia(()=>this.isTimerResultAvailable(t)),this.getTimerResult(t)}async createAndWaitForFence(){let t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let o,e=t,r=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),r===null?o=()=>!0:o=()=>{let n=e.clientWaitSync(r,0,0);return n===e.ALREADY_SIGNALED||n===e.CONDITION_SATISFIED},{query:r,isFencePassed:o}}async pollFence(t){return new Promise(o=>{this.addItemToPoll(()=>t.isFencePassed(),()=>o())})}pollItems(){let t=$g(this.itemsToPoll.map(o=>o.isDoneFn));for(let o=0;o<=t;++o){let{resolveFn:e}=this.itemsToPoll[o];e()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}async addItemToPoll(t,o){this.itemsToPoll.push({isDoneFn:t,resolveFn:o}),!(this.itemsToPoll.length>1)&&await ia(()=>(this.pollItems(),this.itemsToPoll.length===0))}}});function ka(i){let t;if((!i||i==="webgl2")&&"webgl2"in bn?t=bn.webgl2:(!i||i==="webgl")&&"webgl"in bn&&(t=bn.webgl),!t)try{let e=Bg();t=Xp(e,i)}catch{let r=kg();t=Xp(r,i)}i=i||t.version===1?"webgl":"webgl2";let o=t.gl;return bn[i]=t,o.isContextLost()?(delete bn[i],ka(i)):(o.disable(o.DEPTH_TEST),o.disable(o.STENCIL_TEST),o.disable(o.BLEND),o.disable(o.DITHER),o.disable(o.POLYGON_OFFSET_FILL),o.disable(o.SAMPLE_COVERAGE),o.enable(o.SCISSOR_TEST),o.enable(o.CULL_FACE),o.cullFace(o.BACK),t)}function Xp(i,t){let o={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1},e,r=o;if((!t||t==="webgl2")&&(e=i.getContext("webgl2",r),e))try{return new Yn(e,2)}catch(n){Te.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${n}`)}if((!t||t==="webgl")&&(e=i.getContext("webgl",r)||i.getContext("experimental-webgl",r),e))try{return new Yn(e,1)}catch(n){Te.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${n}`)}throw new Error("WebGL is not supported")}function kg(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let i=document.createElement("canvas");return i.width=1,i.height=1,i}function Bg(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var bn,Kp=$(()=>{"use strict";gt();Yp();bn={}});var ui,Jp=$(()=>{"use strict";Lt();gt();qp();Kp();ui=class{get contextId(){return re.webgl.contextId}set contextId(t){re.webgl.contextId=t}get matmulMaxBatchSize(){return re.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(t){re.webgl.matmulMaxBatchSize=t}get textureCacheMode(){return re.webgl.textureCacheMode}set textureCacheMode(t){re.webgl.textureCacheMode=t}get pack(){return re.webgl.pack}set pack(t){re.webgl.pack=t}get async(){return re.webgl.async}set async(t){re.webgl.async=t}initialize(){try{return this.glContext=ka(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),Te.setWithEnv(re),re.webgl.context||Object.defineProperty(re.webgl,"context",{value:this.glContext.gl}),Te.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(t){return Te.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${t}`),!1}}createSessionHandler(t){return new si(this,t)}dispose(){this.glContext.dispose()}}});async function Ba(i){if(i){let t=typeof i=="string"?[i]:i;for(let o of t){let e=Zp.get(o);if(e)return e;let r=await Rg(o);if(r)return r}}else return Ba(["webgl"]);throw new Error("no available backend to use")}async function Rg(i){let t=Ng;if(typeof t[i]<"u"&&Mg(t[i])){let o=t[i],e=o.initialize();if(typeof e=="object"&&"then"in e&&(e=await e),e)return Zp.set(i,o),o}}function Mg(i){let t=i;return"initialize"in t&&typeof t.initialize=="function"&&"createSessionHandler"in t&&typeof t.createSessionHandler=="function"&&"dispose"in t&&typeof t.dispose=="function"}var Zp,Ng,Qp=$(()=>{"use strict";Jp();Zp=new Map,Ng={webgl:new ui}});var Na,li,ed=$(()=>{"use strict";gt();Na=class{constructor(t,o){this.op=t;this.node=o}},li=class{constructor(t,o,e){this.graph=t;this.profiler=e;this.initialize(o)}initialize(t){this.profiler.event("session","ExecutionPlan.initialize",()=>{let o=this.graph.getNodes();if(o.length!==t.length)throw new Error("The size of nodes and OPs do not match.");this._ops=t.map((e,r)=>new Na(e,o[r])),this.reset(),this._starter=[],this._ops.forEach((e,r)=>{let n=!0;for(let s of e.node.inputs)if(!this._values[s]&&this.graph.getInputIndices().indexOf(s)===-1){n=!1;break}n&&this._starter.push(r)})})}reset(){this._values=this.graph.getValues().map(t=>t.tensor)}async execute(t,o){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();let e=t.createInferenceHandler(),r=this.graph.getInputIndices();if(o.length!==r.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${o.length} expected: ${r.length}`);o.forEach((c,b)=>{let y=r[b];this._values[y]=c});let n=this._starter.slice(0),s=this.graph.getValues(),a=this.graph.getNodes(),u=0;for(;u<n.length;){let c=n[u++],b=this._ops[c],y=b.node.inputs.map(F=>this._values[F]);if(y.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${b.node}`);let w=y;Te.verbose("ExecPlan",`Runing op:${b.node.name} (${w.map((F,k)=>`'${b.node.inputs[k]}': ${F.type}[${F.dims.join(",")}]`).join(", ")})`);let S=await this.profiler.event("node",b.node.name,async()=>b.op.impl(e,w,b.op.context));if(S.length!==b.node.outputs.length)throw new Error("the size of output does not match model definition.");S.forEach((F,k)=>{let L=b.node.outputs[k];if(this._values[L])throw new Error(`output [${L}] already has value: op:${b.node.name}`);this._values[L]=F});let I=new Set;S.forEach((F,k)=>{let L=b.node.outputs[k];for(let N of s[L].to){let te=a[N],q=!0;for(let ve of te.inputs)if(!this._values[ve]){q=!1;break}q&&I.add(N)}}),n.push(...I)}let l=[];for(let c=0;c<this.graph.getOutputIndices().length;c++){let b=this.graph.getOutputIndices()[c],y=this._values[b];if(y===void 0)throw new Error(`required output [${b}] does not have value`);b===0?await y.getData():y.data,l.push(y)}return Te.verbose("ExecPlan","disposing of inferenceHandler"),e.dispose(),l})}}});var fe,Ot,Xn,td=$(()=>{"use strict";Bn();fe=nn(un());Nr();ge();Ot=Y.experimental.fbs,Xn=class i{constructor(t){if(this._attributes=new Map,t!=null){for(let o of t)o instanceof fe.onnx.AttributeProto?this._attributes.set(o.name,[i.getValue(o),i.getType(o)]):o instanceof Ot.Attribute&&this._attributes.set(o.name(),[i.getValue(o),i.getType(o)]);if(this._attributes.size<t.length)throw new Error("duplicated attribute names")}}set(t,o,e){this._attributes.set(t,[e,o])}delete(t){this._attributes.delete(t)}getFloat(t,o){return this.get(t,"float",o)}getInt(t,o){return this.get(t,"int",o)}getString(t,o){return this.get(t,"string",o)}getTensor(t,o){return this.get(t,"tensor",o)}getFloats(t,o){return this.get(t,"floats",o)}getInts(t,o){return this.get(t,"ints",o)}getStrings(t,o){return this.get(t,"strings",o)}getTensors(t,o){return this.get(t,"tensors",o)}get(t,o,e){let r=this._attributes.get(t);if(r===void 0){if(e!==void 0)return e;throw new Error(`required attribute not found: ${t}`)}if(r[1]!==o)throw new Error(`type mismatch: expected ${o} but got ${r[1]}`);return r[0]}static getType(t){let o=t instanceof fe.onnx.AttributeProto?t.type:t.type();switch(o){case fe.onnx.AttributeProto.AttributeType.FLOAT:return"float";case fe.onnx.AttributeProto.AttributeType.INT:return"int";case fe.onnx.AttributeProto.AttributeType.STRING:return"string";case fe.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case fe.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case fe.onnx.AttributeProto.AttributeType.INTS:return"ints";case fe.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case fe.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${fe.onnx.AttributeProto.AttributeType[o]}`)}}static getValue(t){let o=t instanceof fe.onnx.AttributeProto?t.type:t.type();if(o===fe.onnx.AttributeProto.AttributeType.GRAPH||o===fe.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let e=this.getValueNoCheck(t);if(o===fe.onnx.AttributeProto.AttributeType.INT&&dt.isLong(e))return dt.longToNumber(e);if(o===fe.onnx.AttributeProto.AttributeType.INTS){let r=e,n=new Array(r.length);for(let s=0;s<r.length;s++){let a=r[s];n[s]=dt.longToNumber(a)}return n}if(o===fe.onnx.AttributeProto.AttributeType.TENSOR)return t instanceof fe.onnx.AttributeProto?We.fromProto(e):We.fromOrtTensor(e);if(o===fe.onnx.AttributeProto.AttributeType.TENSORS){if(t instanceof fe.onnx.AttributeProto)return e.map(n=>We.fromProto(n));if(t instanceof Ot.Attribute)return e.map(n=>We.fromOrtTensor(n))}return o===fe.onnx.AttributeProto.AttributeType.STRING&&t instanceof fe.onnx.AttributeProto?Un(e):o===fe.onnx.AttributeProto.AttributeType.STRINGS&&t instanceof fe.onnx.AttributeProto?e.map(Un):e}static getValueNoCheck(t){return t instanceof fe.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(t):this.getValueNoCheckFromOrtFormat(t)}static getValueNoCheckFromOnnxFormat(t){switch(t.type){case fe.onnx.AttributeProto.AttributeType.FLOAT:return t.f;case fe.onnx.AttributeProto.AttributeType.INT:return t.i;case fe.onnx.AttributeProto.AttributeType.STRING:return t.s;case fe.onnx.AttributeProto.AttributeType.TENSOR:return t.t;case fe.onnx.AttributeProto.AttributeType.GRAPH:return t.g;case fe.onnx.AttributeProto.AttributeType.FLOATS:return t.floats;case fe.onnx.AttributeProto.AttributeType.INTS:return t.ints;case fe.onnx.AttributeProto.AttributeType.STRINGS:return t.strings;case fe.onnx.AttributeProto.AttributeType.TENSORS:return t.tensors;case fe.onnx.AttributeProto.AttributeType.GRAPHS:return t.graphs;default:throw new Error(`unsupported attribute type: ${fe.onnx.AttributeProto.AttributeType[t.type]}`)}}static getValueNoCheckFromOrtFormat(t){switch(t.type()){case Ot.AttributeType.FLOAT:return t.f();case Ot.AttributeType.INT:return t.i();case Ot.AttributeType.STRING:return t.s();case Ot.AttributeType.TENSOR:return t.t();case Ot.AttributeType.GRAPH:return t.g();case Ot.AttributeType.FLOATS:return t.floatsArray();case Ot.AttributeType.INTS:{let o=[];for(let e=0;e<t.intsLength();e++)o.push(t.ints(e));return o}case Ot.AttributeType.STRINGS:{let o=[];for(let e=0;e<t.stringsLength();e++)o.push(t.strings(e));return o}case Ot.AttributeType.TENSORS:{let o=[];for(let e=0;e<t.tensorsLength();e++)o.push(t.tensors(e));return o}default:throw new Error(`unsupported attribute type: ${Ot.AttributeType[t.type()]}`)}}}});var Ma,fi,Ga,zt,ci,Ra,rd=$(()=>{"use strict";td();Bn();Ma=nn(un());Nr();ge();fi=Y.experimental.fbs,Ga={from:(i,t)=>new Ra(i,t)},zt=class{constructor(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=Ze.tensorValueTypeFromProto(t.type.tensorType))}get from(){return this._from}get to(){return this._to}},ci=class{constructor(t,o){t instanceof Ma.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new Xn(t.attribute)):t instanceof fi.Node&&(this.name=o??t.name(),this.opType=t.opType(),this.attributes=new Xn(Ze.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0}},Ra=class{constructor(t,o){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(o),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(t){if(t instanceof Ma.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else if(t instanceof fi.Graph)this.buildGraphFromOrtFormat(t);else throw new TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(t){let o=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let e=new Map;if(!t.input)throw new Error("missing information in graph: input");let r=[];for(let n of t.input){if(o.has(n.name))throw new Error(`duplicated input name: ${n.name}`);let s=this._allData.push(new zt(n))-1;o.set(n.name,s),r.push(n.name)}if(!t.initializer)throw new Error("missing information in graph: initializer");for(let n of t.initializer){let s=o.get(n.name);if(s===void 0){let a=new zt;a.type={shape:{dims:Ze.tensorDimsFromProto(n.dims)},tensorType:Ze.tensorDataTypeFromProto(n.dataType)},s=this._allData.push(a)-1,o.set(n.name,s)}this._allData[s]._from=-1,this._allData[s].tensor=We.fromProto(n)}for(let n=0;n<this._allData.length;n++)this._allData[n].tensor||(this._allInputIndices.push(n),this._allInputNames.push(r[n]));if(!t.output)throw new Error("missing information in graph: output");for(let n of t.output){if(o.has(n.name))throw new Error(`duplicated output name: ${n.name}`);let s=this._allData.push(new zt(n))-1;o.set(n.name,s),this._allOutputIndices.push(s),this._allOutputNames.push(n.name)}if(!t.node)throw new Error("missing information in graph: node");for(let n of t.node){if(!n.name)for(let a=0;;a++){let u=`unnamed_${n.opType}_${a}`;if(!e.has(u)){n.name=u;break}}if(e.has(n.name))throw new Error(`duplicated node name: ${n.name}`);let s=this._nodes.push(new ci(n))-1;e.set(n.name,s)}for(let n=0;n<this._nodes.length;n++){let s=this._nodes[n],a=t.node[n];if(!a.output)throw new Error(`missing output for node: ${a.name}`);for(let u of a.output){let l=o.get(u);if(typeof l>"u"&&(l=this._allData.push(new zt)-1,o.set(u,l)),s.outputs.push(l),this._allData[l]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${l}`);if(this._allData[l]._from=n,a.opType==="Constant"){if(!a.attribute||a.attribute.length!==1||!a.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!a.output||a.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");s.outputs.pop(),s.executeNode=!1,this._allData[l]._from=-1,this._allData[l].tensor=We.fromProto(a.attribute[0].t)}}}for(let n=0;n<this._nodes.length;n++){let s=this._nodes[n],a=t.node[n];if(!a.input)throw new Error(`missing input for node: ${a.name}`);for(let u of a.input){let l=o.get(u);if(typeof l>"u"){if(u===""&&(a.input.length===3||a.input.length===4)&&a.opType==="Resize")continue;throw new Error(`unrecognized input '${u}' for node: ${a.name}`)}s.inputs.push(l),this._allData[l]._to.push(n)}}return!0}buildGraphFromOrtFormat(t){let o=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let e=new Map,r=[];for(let n=0;n<t.inputsLength();n++){let s=t.inputs(n);if(o.has(s))throw new Error(`duplicated input name: ${s}`);for(let a=0;a<t.nodeArgsLength();a++)if(t.nodeArgs(a)?.name()===s){let u=new zt;if(t.nodeArgs(a)?.type()?.valueType()!==fi.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let c=t.nodeArgs(a).type().value(new fi.TensorTypeAndShape),b=Ze.tensorDataTypeFromProto(c.elemType()),y=c.shape(),w=[];for(let I=0;I<y.dimLength();I++)w.push(dt.longToNumber(y.dim(I).value().dimValue()));u.type={shape:{dims:w},tensorType:b};let S=this._allData.push(u)-1;o.set(s,S),r.push(s)}}for(let n=0;n<t.initializersLength();n++){let s=t.initializers(n),a=o.get(s.name());if(a===void 0){let u=new zt,l=Ze.tensorDimsFromORTFormat(s),c=Ze.tensorDataTypeFromProto(s.dataType());u.type={shape:{dims:l},tensorType:c},a=this._allData.push(u)-1,o.set(s.name(),a)}this._allData[a]._from=-1,this._allData[a].tensor=We.fromOrtTensor(s)}for(let n=0;n<this._allData.length;n++)this._allData[n].tensor||(this._allInputIndices.push(n),this._allInputNames.push(r[n]));for(let n=0;n<t.outputsLength();n++){let s=t.outputs(n);if(o.has(s))throw new Error(`duplicated output name: ${s}`);let a=this._allData.push(new zt)-1;o.set(s,a),this._allOutputIndices.push(a),this._allOutputNames.push(s)}if(!t.nodes)throw new Error("missing information in graph: node");for(let n=0;n<t.nodesLength();n++){let s=t.nodes(n),a=s.name();if(!a)for(let l=0;a=`unnamed_${s.opType()}_${l}`,!!e.has(a);l++);if(e.has(a))throw new Error(`duplicated node name: ${a}`);let u=this._nodes.push(new ci(s,a))-1;e.set(a,u)}for(let n=0;n<this._nodes.length;n++){let s=this._nodes[n],a=t.nodes(n);if(a==null)throw new Error(`No node exists at index ${n}`);if(a?.outputsLength()===0)throw new Error(`missing output for node: ${a.name}`);for(let u=0;u<a?.outputsLength();u++){let l=a?.outputs(u),c=o.get(l);if(typeof c>"u"&&(c=this._allData.push(new zt)-1,o.set(l,c)),s.outputs.push(c),this._allData[c]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${c}`);if(this._allData[c]._from=n,a.opType()==="Constant"){if(a.attributesLength()!==1||!a.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(a.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");s.outputs.pop(),s.executeNode=!1,this._allData[c]._from=-1,this._allData[c].tensor=We.fromOrtTensor(a.attributes(0).t())}}}for(let n=0;n<this._nodes.length;n++){let s=this._nodes[n],a=t.nodes(n);if(a.inputsLength()===0)throw new Error(`missing input for node: ${a.name}`);for(let u=0;u<a.inputsLength();u++){let l=a.inputs(u),c=o.get(l);if(typeof c>"u")throw new Error(`unrecognized input '${l}' for node: ${a.name()}`);s.inputs.push(c),this._allData[c]._to.push(n)}}}checkIsAcyclic(){let t=new Set;this._allInputIndices.forEach(r=>{this._allData[r]._to.forEach(s=>{t.add(s)})});let o=Array.from(t),e=new Array(this._nodes.length).fill("white");for(;o.length>0;){let r=o.pop();e[r]==="gray"?e[r]="black":(o.push(r),e[r]="gray",this._nodes[r].outputs.forEach(n=>{let s=this._allData[n];if(typeof s.tensor<"u")throw new Error("node outputs should not be initialized");if(s._from!==r)throw new Error("from property of the Value object doesn't match index of Node being processed");s._to.forEach(a=>{if(e[a]==="gray")throw new Error("model graph is cyclic");e[a]==="white"&&o.push(a)})}))}}transformGraph(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let t=0,o=new Array(this._nodes.length,0),e=0;for(let r=0;r<this._nodes.length;r++)o[r]=e,this._nodes[r].executeNode?(e!==r&&(this._nodes[e]=this._nodes[r]),e++):this._nodes[r].outputs.forEach(n=>{this._allData[n]._from=-2});this._nodes.splice(e,this._nodes.length-e);for(let r=0;r<this._allData.length;r++){let n=this._allData[r];n._from!==void 0&&n._from!==-1&&n._from!==-2&&(n._from=o[n._from]);for(let s=0;s<n._to.length;s++)if(n._to[s]>=0)n._to[s]=o[n._to[s]];else throw new Error("Trying to update a removed node")}t=0;for(let r=0;r<this._allData.length;r++){if(this._allData[r].from===-2&&this._allOutputIndices.indexOf(r+t)===-1){t++,this._allData.splice(r,1),r--;continue}if(t>0){let n=-1;this._allData[r].from!==void 0&&this._allData[r].from!==-1?(n=this._nodes[this._allData[r].from].outputs.indexOf(r+t),n!==-1&&(this._nodes[this._allData[r].from].outputs[n]=r)):(n=this._allInputIndices.indexOf(r+t),n!==-1&&(this._allInputIndices[n]=r)),this._allData[r].to.forEach(s=>{n=this._nodes[s].inputs.indexOf(r+t),n!==-1&&(this._nodes[s].inputs[n]=r)}),this._allData[r].to.length===0&&(n=this._allOutputIndices.indexOf(r+t),n!==-1&&(this._allOutputIndices[n]=r))}}}deleteNode(t){let o=this._nodes[t];if(o.outputs.length>1){for(let a=1;a<o.outputs.length;a++)if(this._allData[o.outputs[a]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}o.executeNode=!1;let e=o.inputs[0],r=o.outputs[0],n=this._allData[r].to;for(let a=0;a<o.inputs.length;a++){let u=this._allData[o.inputs[a]].to.indexOf(t);if(u===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[o.inputs[a]].to.splice(u,1)}this._allData[r]._to=[];let s=this._allOutputIndices.indexOf(r);if(s!==-1&&(this._allOutputIndices[s]=e),n&&n.length>0)for(let a of n){let u=this._nodes[a].inputs.indexOf(r);if(u===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[a].inputs[u]=e,this._allData[e].to.push(a)}}removeAllDropoutNodes(){let t=0;for(let o of this._nodes){if(o.opType==="Dropout"){if(o.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(o.outputs.length!==1&&o.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(o.outputs.length===2&&this._allData[o.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(t)}t++}}removeAllIdentityNodes(){let t=0;for(let o of this._nodes)o.opType==="Identity"&&this.deleteNode(t),t++}isActivation(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let t of this._nodes)if(t.opType==="Conv"){let o=this._allData[t.outputs[0]]._to;if(o.length===1&&this.isActivation(this._nodes[o[0]])){let e=this._nodes[o[0]];if(e.opType==="Clip")if(e.inputs.length===1)try{t.attributes.set("activation_params","floats",[e.attributes.getFloat("min"),e.attributes.getFloat("max")])}catch{t.attributes.set("activation_params","floats",[kr,Br])}else if(e.inputs.length>=3&&this._allData[e.inputs[1]].tensor!==void 0&&this._allData[e.inputs[2]].tensor!==void 0)t.attributes.set("activation_params","floats",[this._allData[e.inputs[1]].tensor.floatData[0],this._allData[e.inputs[2]].tensor.floatData[0]]);else continue;t.attributes.set("activation","string",e.opType),this.deleteNode(o[0])}}}}});var nd,Gg,pi,od=$(()=>{"use strict";Co();rd();Bn();nd=nn(un());ge();Gg=Y.experimental.fbs,pi=class{constructor(){}load(t,o,e){if(!e)try{this.loadFromOnnxFormat(t,o);return}catch(r){if(e!==void 0)throw r}this.loadFromOrtFormat(t,o)}loadFromOnnxFormat(t,o){let e=nd.onnx.ModelProto.decode(t);if(dt.longToNumber(e.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=e.opsetImport.map(n=>({domain:n.domain,version:dt.longToNumber(n.version)})),this._graph=Ga.from(e.graph,o)}loadFromOrtFormat(t,o){let e=new O.ByteBuffer(t),r=Gg.InferenceSession.getRootAsInferenceSession(e).model();if(dt.longToNumber(r.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let s=0;s<r.opsetImportLength();s++){let a=r.opsetImport(s);this._opsets.push({domain:a?.domain(),version:dt.longToNumber(a.version())})}this._graph=Ga.from(r.graph(),o)}get graph(){return this._graph}get opsets(){return this._opsets}}});var di,id=$(()=>{"use strict";Qp();ed();gt();od();di=class{constructor(t={}){this._initialized=!1,this.backendHint=t.backendHint,this.profiler=Do.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(t,o,e){await this.profiler.event("session","Session.loadModel",async()=>{let r=await Ba(this.backendHint);if(this.sessionHandler=r.createSessionHandler(this.context),this._model=new pi,typeof t=="string"){let n=t.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let s=await(void 0)(t);this.initialize(s,n)}else{let a=await(await fetch(t)).arrayBuffer();this.initialize(new Uint8Array(a),n)}}else if(ArrayBuffer.isView(t))this.initialize(t);else{let n=new Uint8Array(t,o||0,e||t.byteLength);this.initialize(n)}})}initialize(t,o){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let e=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(t,e,o),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new li(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(t){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{let o=this.normalizeAndValidateInputs(t),e=await this._executionPlan.execute(this.sessionHandler,o);return this.createOutput(e)})}normalizeAndValidateInputs(t){let o=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==o.length)throw new Error(`incorrect input array length: expected ${o.length} but got ${t.length}`)}else{if(t.size!==o.length)throw new Error(`incorrect input map size: expected ${o.length} but got ${t.size}`);let e=new Array(t.size),r=0;for(let n=0;n<o.length;++n){let s=t.get(o[n]);if(!s)throw new Error(`missing input tensor for: '${name}'`);e[r++]=s}t=e}if(!this.context.graphInputTypes||this.context.graphInputTypes.length===0||!this.context.graphInputDims||this.context.graphInputDims.length===0){let e=this._model.graph.getInputIndices(),r=this._model.graph.getValues(),n=new Array(e.length);for(let s=0;s<e.length;++s){let a=r[e[s]];n[s]=a.type.shape.dims,this.context.graphInputTypes.push(a.type.tensorType),this.context.graphInputDims.push(t[s].dims)}this.validateInputTensorDims(n,t,!0)}else this.validateInputTensorDims(this.context.graphInputDims,t,!1);return this.validateInputTensorTypes(this.context.graphInputTypes,t),t}validateInputTensorTypes(t,o){for(let e=0;e<o.length;e++){let r=t[e],n=o[e].type;if(r!==n)throw new Error(`input tensor[${e}] check failed: expected type '${r}' but got ${n}`)}}validateInputTensorDims(t,o,e){for(let r=0;r<o.length;r++){let n=t[r],s=o[r].dims;if(!this.compareTensorDims(n,s,e))throw new Error(`input tensor[${r}] check failed: expected shape '[${n.join(",")}]' but got [${s.join(",")}]`)}}compareTensorDims(t,o,e){if(t.length!==o.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==o[r]&&(!e||t[r]!==0)&&t[r]!==null)return!1;return!0}createOutput(t){let o=this._model.graph.getOutputNames();if(t.length!==o.length)throw new Error("expected number of outputs do not match number of generated outputs");let e=new Map;for(let r=0;r<o.length;++r)e.set(o[r],t[r]);return e}initializeOps(t){let o=t.getNodes();this._ops=new Array(o.length);for(let e=0;e<o.length;e++)this._ops[e]=this.sessionHandler.resolve(o[e],this._model.opsets,t)}}});var hi,ad=$(()=>{"use strict";Lt();Nr();hi=class{constructor(t){this.session=t;this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(t,o,e){let r=new Map;for(let a in t)if(Object.hasOwnProperty.call(t,a)){let u=t[a];r.set(a,new We(u.dims,u.type,void 0,void 0,u.data))}let n=await this.session.run(r),s={};return n.forEach((a,u)=>{s[u]=new je(a.type,a.data,a.dims)}),s}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}});var sd={};rn(sd,{onnxjsBackend:()=>Wg});var Ua,Wg,ud=$(()=>{"use strict";id();ad();Ua=class{async init(){}async createInferenceSessionHandler(t,o){let e=new di(o);return typeof t=="string"?await e.loadModel(t):await e.loadModel(t),new hi(e)}},Wg=new Ua});var Wa={};rn(Wa,{readFile:()=>Vg});var Vg,Va=$(()=>{Vg=void 0});var za={};rn(za,{join:()=>zg});var zg,Ha=$(()=>{zg=void 0});var cd=Ie((fd,ja)=>{"use strict";var ld=(()=>{var i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(i=i||__filename),function(t={}){var o=t,e,r;o.ready=new Promise((d,h)=>{e=d,r=h});var n=Object.assign({},o),s="./this.program",a=typeof window=="object",u=typeof importScripts=="function",l=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",c="",b,y,w;if(l){var S=(Va(),Ar(Wa)),I=(Ha(),Ar(za));c=u?I.dirname(c)+"/":__dirname+"/",b=(d,h)=>(d=d.startsWith("file://")?new URL(d):I.normalize(d),S.readFileSync(d,h?void 0:"utf8")),w=d=>(d=b(d,!0),d.buffer||(d=new Uint8Array(d)),d),y=(d,h,T,_=!0)=>{d=d.startsWith("file://")?new URL(d):I.normalize(d),S.readFile(d,_?void 0:"utf8",(E,B)=>{E?T(E):h(_?B.buffer:B)})},!o.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),o.inspect=()=>"[Emscripten Module object]"}else(a||u)&&(u?c=self.location.href:typeof document<"u"&&document.currentScript&&(c=document.currentScript.src),i&&(c=i),c.indexOf("blob:")!==0?c=c.substr(0,c.replace(/[?#].*/,"").lastIndexOf("/")+1):c="",b=d=>{var h=new XMLHttpRequest;return h.open("GET",d,!1),h.send(null),h.responseText},u&&(w=d=>{var h=new XMLHttpRequest;return h.open("GET",d,!1),h.responseType="arraybuffer",h.send(null),new Uint8Array(h.response)}),y=(d,h,T)=>{var _=new XMLHttpRequest;_.open("GET",d,!0),_.responseType="arraybuffer",_.onload=()=>{_.status==200||_.status==0&&_.response?h(_.response):T()},_.onerror=T,_.send(null)});var F=console.log.bind(console),k=console.error.bind(console);Object.assign(o,n),n=null,typeof WebAssembly!="object"&&dr("no native wasm support detected");var L,N=!1,te,q,ve,Le,V,ne,mt,J,pr,Ue;function de(){var d=L.buffer;o.HEAP8=te=new Int8Array(d),o.HEAP16=ve=new Int16Array(d),o.HEAPU8=q=new Uint8Array(d),o.HEAPU16=Le=new Uint16Array(d),o.HEAP32=V=new Int32Array(d),o.HEAPU32=ne=new Uint32Array(d),o.HEAPF32=mt=new Float32Array(d),o.HEAPF64=Ue=new Float64Array(d),o.HEAP64=J=new BigInt64Array(d),o.HEAPU64=pr=new BigUint64Array(d)}var xe=[],Ht=[],rt=[],Xe=0,we=null,ze=null;function dr(d){throw d="Aborted("+d+")",k(d),N=!0,d=new WebAssembly.RuntimeError(d+". Build with -sASSERTIONS for more info."),r(d),d}function Nt(d){return d.startsWith("data:application/octet-stream;base64,")}var It;if(It="ort-wasm.wasm",!Nt(It)){var tr=It;It=o.locateFile?o.locateFile(tr,c):c+tr}function hr(d){if(w)return w(d);throw"both async and sync fetching of the wasm failed"}function nt(d){if(a||u){if(typeof fetch=="function"&&!d.startsWith("file://"))return fetch(d,{credentials:"same-origin"}).then(h=>{if(!h.ok)throw"failed to load wasm binary file at '"+d+"'";return h.arrayBuffer()}).catch(()=>hr(d));if(y)return new Promise((h,T)=>{y(d,_=>h(new Uint8Array(_)),T)})}return Promise.resolve().then(()=>hr(d))}function St(d,h,T){return nt(d).then(_=>WebAssembly.instantiate(_,h)).then(_=>_).then(T,_=>{k(`failed to asynchronously prepare wasm: ${_}`),dr(_)})}function mr(d,h){var T=It;return typeof WebAssembly.instantiateStreaming!="function"||Nt(T)||T.startsWith("file://")||l||typeof fetch!="function"?St(T,d,h):fetch(T,{credentials:"same-origin"}).then(_=>WebAssembly.instantiateStreaming(_,d).then(h,function(E){return k(`wasm streaming compile failed: ${E}`),k("falling back to ArrayBuffer instantiation"),St(T,d,h)}))}function Oe(d){this.Va=d-24,this.fb=function(h){ne[this.Va+4>>>2>>>0]=h},this.eb=function(h){ne[this.Va+8>>>2>>>0]=h},this.Za=function(h,T){this.$a(),this.fb(h),this.eb(T)},this.$a=function(){ne[this.Va+16>>>2>>>0]=0}}var ke=0,rr=0,jt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Vr=(d,h,T)=>{h>>>=0;var _=h+T;for(T=h;d[T]&&!(T>=_);)++T;if(16<T-h&&d.buffer&&jt)return jt.decode(d.subarray(h,T));for(_="";h<T;){var E=d[h++];if(E&128){var B=d[h++]&63;if((E&224)==192)_+=String.fromCharCode((E&31)<<6|B);else{var j=d[h++]&63;E=(E&240)==224?(E&15)<<12|B<<6|j:(E&7)<<18|B<<12|j<<6|d[h++]&63,65536>E?_+=String.fromCharCode(E):(E-=65536,_+=String.fromCharCode(55296|E>>10,56320|E&1023))}}else _+=String.fromCharCode(E)}return _},br=(d,h)=>(d>>>=0)?Vr(q,d,h):"",qt=d=>{for(var h=0,T=0;T<d.length;++T){var _=d.charCodeAt(T);127>=_?h++:2047>=_?h+=2:55296<=_&&57343>=_?(h+=4,++T):h+=3}return h},Pt=(d,h,T,_)=>{if(T>>>=0,!(0<_))return 0;var E=T;_=T+_-1;for(var B=0;B<d.length;++B){var j=d.charCodeAt(B);if(55296<=j&&57343>=j){var z=d.charCodeAt(++B);j=65536+((j&1023)<<10)|z&1023}if(127>=j){if(T>=_)break;h[T++>>>0]=j}else{if(2047>=j){if(T+1>=_)break;h[T++>>>0]=192|j>>6}else{if(65535>=j){if(T+2>=_)break;h[T++>>>0]=224|j>>12}else{if(T+3>=_)break;h[T++>>>0]=240|j>>18,h[T++>>>0]=128|j>>12&63}h[T++>>>0]=128|j>>6&63}h[T++>>>0]=128|j&63}}return h[T>>>0]=0,T-E},zr=d=>{if(d===null)return"null";var h=typeof d;return h==="object"||h==="array"||h==="function"?d.toString():""+d},nr,lt=d=>{for(var h="";q[d>>>0];)h+=nr[q[d++>>>0]];return h},Rt={},Hr={},gr={},Et;function _i(d,h,T={}){var _=h.name;if(!d)throw new Et(`type "${_}" must have a positive integer typeid pointer`);if(Hr.hasOwnProperty(d)){if(T.gb)return;throw new Et(`Cannot register type '${_}' twice`)}Hr[d]=h,delete gr[d],Rt.hasOwnProperty(d)&&(h=Rt[d],delete Rt[d],h.forEach(E=>E()))}function bt(d,h,T={}){if(!("argPackAdvance"in h))throw new TypeError("registerType registeredInstance requires argPackAdvance");_i(d,h,T)}var Qn=(d,h,T)=>{switch(h){case 1:return T?_=>te[_>>>0>>>0]:_=>q[_>>>0>>>0];case 2:return T?_=>ve[_>>>1>>>0]:_=>Le[_>>>1>>>0];case 4:return T?_=>V[_>>>2>>>0]:_=>ne[_>>>2>>>0];case 8:return T?_=>J[_>>>3]:_=>pr[_>>>3];default:throw new TypeError(`invalid integer width (${h}): ${d}`)}};function yr(){this.Sa=[void 0],this.bb=[]}var Qe=new yr;function jr(d){d>>>=0,d>=Qe.Va&&--Qe.get(d).cb===0&&Qe.$a(d)}var Ke=d=>{if(!d)throw new Et("Cannot use deleted val. handle = "+d);return Qe.get(d).value},ot=d=>{switch(d){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Qe.Za({cb:1,value:d})}};function Tr(d){return this.fromWireType(V[d>>>2>>>0])}var eo=(d,h)=>{switch(h){case 4:return function(T){return this.fromWireType(mt[T>>>2>>>0])};case 8:return function(T){return this.fromWireType(Ue[T>>>3>>>0])};default:throw new TypeError(`invalid float width (${h}): ${d}`)}};function vn(d){return this.fromWireType(ne[d>>>2>>>0])}var to=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,ro=(d,h)=>{for(var T=d>>1,_=T+h/2;!(T>=_)&&Le[T>>>0];)++T;if(T<<=1,32<T-d&&to)return to.decode(q.subarray(d>>>0,T>>>0));for(T="",_=0;!(_>=h/2);++_){var E=ve[d+2*_>>>1>>>0];if(E==0)break;T+=String.fromCharCode(E)}return T},Oi=(d,h,T)=>{if(T===void 0&&(T=2147483647),2>T)return 0;T-=2;var _=h;T=T<2*d.length?T/2:d.length;for(var E=0;E<T;++E)ve[h>>>1>>>0]=d.charCodeAt(E),h+=2;return ve[h>>>1>>>0]=0,h-_},Q=d=>2*d.length,qr=(d,h)=>{for(var T=0,_="";!(T>=h/4);){var E=V[d+4*T>>>2>>>0];if(E==0)break;++T,65536<=E?(E-=65536,_+=String.fromCharCode(55296|E>>10,56320|E&1023)):_+=String.fromCharCode(E)}return _},no=(d,h,T)=>{if(h>>>=0,T===void 0&&(T=2147483647),4>T)return 0;var _=h;T=_+T-4;for(var E=0;E<d.length;++E){var B=d.charCodeAt(E);if(55296<=B&&57343>=B){var j=d.charCodeAt(++E);B=65536+((B&1023)<<10)|j&1023}if(V[h>>>2>>>0]=B,h+=4,h+4>T)break}return V[h>>>2>>>0]=0,h-_},Yr=d=>{for(var h=0,T=0;T<d.length;++T){var _=d.charCodeAt(T);55296<=_&&57343>=_&&++T,h+=4}return h},vr=(d,h)=>{var T=Hr[d];if(T===void 0)throw d=Ln(d),T=lt(d),Ve(d),new Et(h+" has unknown type "+T);return T},Ai={},xr=d=>{var h=Ai[d];return h===void 0?lt(d):h},Xr=[],xn=()=>typeof globalThis=="object"?globalThis:Function("return this")(),oo=d=>{var h=Xr.length;return Xr.push(d),h},io=(d,h)=>{for(var T=Array(d),_=0;_<d;++_)T[_]=vr(ne[h+4*_>>>2>>>0],"parameter "+_);return T},wn=d=>{if(d===void 0)return"_unknown";d=d.replace(/[^a-zA-Z0-9_]/g,"$");var h=d.charCodeAt(0);return 48<=h&&57>=h?`_${d}`:d},wr={};function ao(d,h){return d=wn(d),{[d]:function(){return h.apply(this,arguments)}}[d]}function _n(d){var h=Function;if(!(h instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof h} which is not a function`);var T=ao(h.name||"unknownFunctionName",function(){});return T.prototype=h.prototype,T=new T,d=h.apply(T,d),d instanceof Object?d:T}var so=d=>{for(var h="",T=0;T<d;++T)h+=(T!==0?", ":"")+"arg"+T;var _="return function emval_allocator_"+d+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`;for(T=0;T<d;++T)_+="var argType"+T+" = requireRegisteredType(HEAPU32[((argTypes)>>>2)], 'parameter "+T+`');
var arg`+T+" = argType"+T+`.readValueFromPointer(args);
args += argType`+T+`['argPackAdvance'];
argTypes += 4;
`;return new Function("requireRegisteredType","Module","valueToHandle","getMemory",_+("var obj = new constructor("+h+`);
return valueToHandle(obj);
}
`))(vr,o,ot,()=>ne)},On={},Yt=d=>d%4===0&&(d%100!==0||d%400===0),An=[0,31,60,91,121,152,182,213,244,274,305,335],In=[0,31,59,90,120,151,181,212,243,273,304,334],Sn=d=>{var h=qt(d)+1,T=Qr(h);return T&&Pt(d,q,T,h),T},Kr={},Pn=()=>{if(!Jr){var d={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"},h;for(h in Kr)Kr[h]===void 0?delete d[h]:d[h]=Kr[h];var T=[];for(h in d)T.push(`${h}=${d[h]}`);Jr=T}return Jr},Jr,uo=[null,[],[]],En=[31,29,31,30,31,30,31,31,30,31,30,31],Dn=[31,28,31,30,31,30,31,31,30,31,30,31];function lo(d){var h=Array(qt(d)+1);return Pt(d,h,0,h.length),h}function ft(d,h,T,_){function E(P,ce,_e){for(P=typeof P=="number"?P.toString():P||"";P.length<ce;)P=_e[0]+P;return P}function B(P,ce){return E(P,ce,"0")}function j(P,ce){function _e(_r){return 0>_r?-1:0<_r?1:0}var Xt;return(Xt=_e(P.getFullYear()-ce.getFullYear()))===0&&(Xt=_e(P.getMonth()-ce.getMonth()))===0&&(Xt=_e(P.getDate()-ce.getDate())),Xt}function z(P){switch(P.getDay()){case 0:return new Date(P.getFullYear()-1,11,29);case 1:return P;case 2:return new Date(P.getFullYear(),0,3);case 3:return new Date(P.getFullYear(),0,2);case 4:return new Date(P.getFullYear(),0,1);case 5:return new Date(P.getFullYear()-1,11,31);case 6:return new Date(P.getFullYear()-1,11,30)}}function oe(P){var ce=P.Ta;for(P=new Date(new Date(P.Ua+1900,0,1).getTime());0<ce;){var _e=P.getMonth(),Xt=(Yt(P.getFullYear())?En:Dn)[_e];if(ce>Xt-P.getDate())ce-=Xt-P.getDate()+1,P.setDate(1),11>_e?P.setMonth(_e+1):(P.setMonth(0),P.setFullYear(P.getFullYear()+1));else{P.setDate(P.getDate()+ce);break}}return _e=new Date(P.getFullYear()+1,0,4),ce=z(new Date(P.getFullYear(),0,4)),_e=z(_e),0>=j(ce,P)?0>=j(_e,P)?P.getFullYear()+1:P.getFullYear():P.getFullYear()-1}d>>>=0,h>>>=0,T>>>=0,_>>>=0;var le=ne[_+40>>>2>>>0];_={kb:V[_>>>2>>>0],jb:V[_+4>>>2>>>0],Xa:V[_+8>>>2>>>0],ab:V[_+12>>>2>>>0],Ya:V[_+16>>>2>>>0],Ua:V[_+20>>>2>>>0],Oa:V[_+24>>>2>>>0],Ta:V[_+28>>>2>>>0],mb:V[_+32>>>2>>>0],ib:V[_+36>>>2>>>0],lb:le?br(le):""},T=br(T),le={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Ae in le)T=T.replace(new RegExp(Ae,"g"),le[Ae]);var He="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Dt="January February March April May June July August September October November December".split(" ");le={"%a":P=>He[P.Oa].substring(0,3),"%A":P=>He[P.Oa],"%b":P=>Dt[P.Ya].substring(0,3),"%B":P=>Dt[P.Ya],"%C":P=>B((P.Ua+1900)/100|0,2),"%d":P=>B(P.ab,2),"%e":P=>E(P.ab,2," "),"%g":P=>oe(P).toString().substring(2),"%G":P=>oe(P),"%H":P=>B(P.Xa,2),"%I":P=>(P=P.Xa,P==0?P=12:12<P&&(P-=12),B(P,2)),"%j":P=>{for(var ce=0,_e=0;_e<=P.Ya-1;ce+=(Yt(P.Ua+1900)?En:Dn)[_e++]);return B(P.ab+ce,3)},"%m":P=>B(P.Ya+1,2),"%M":P=>B(P.jb,2),"%n":()=>`
`,"%p":P=>0<=P.Xa&&12>P.Xa?"AM":"PM","%S":P=>B(P.kb,2),"%t":()=>"	","%u":P=>P.Oa||7,"%U":P=>B(Math.floor((P.Ta+7-P.Oa)/7),2),"%V":P=>{var ce=Math.floor((P.Ta+7-(P.Oa+6)%7)/7);if(2>=(P.Oa+371-P.Ta-2)%7&&ce++,ce)ce==53&&(_e=(P.Oa+371-P.Ta)%7,_e==4||_e==3&&Yt(P.Ua)||(ce=1));else{ce=52;var _e=(P.Oa+7-P.Ta-1)%7;(_e==4||_e==5&&Yt(P.Ua%400-1))&&ce++}return B(ce,2)},"%w":P=>P.Oa,"%W":P=>B(Math.floor((P.Ta+7-(P.Oa+6)%7)/7),2),"%y":P=>(P.Ua+1900).toString().substring(2),"%Y":P=>P.Ua+1900,"%z":P=>{P=P.ib;var ce=0<=P;return P=Math.abs(P)/60,(ce?"+":"-")+("0000"+(P/60*100+P%60)).slice(-4)},"%Z":P=>P.lb,"%%":()=>"%"},T=T.replace(/%%/g,"\0\0");for(Ae in le)T.includes(Ae)&&(T=T.replace(new RegExp(Ae,"g"),le[Ae](_)));return T=T.replace(/\0\0/g,"%"),Ae=lo(T),Ae.length>h?0:(te.set(Ae,d>>>0),Ae.length-1)}for(var Zr=Array(256),or=0;256>or;++or)Zr[or]=String.fromCharCode(or);nr=Zr,Et=o.BindingError=class extends Error{constructor(d){super(d),this.name="BindingError"}},o.InternalError=class extends Error{constructor(d){super(d),this.name="InternalError"}},Object.assign(yr.prototype,{get(d){return this.Sa[d]},has(d){return this.Sa[d]!==void 0},Za(d){var h=this.bb.pop()||this.Sa.length;return this.Sa[h]=d,h},$a(d){this.Sa[d]=void 0,this.bb.push(d)}}),Qe.Sa.push({value:void 0},{value:null},{value:!0},{value:!1}),Qe.Va=Qe.Sa.length,o.count_emval_handles=()=>{for(var d=0,h=Qe.Va;h<Qe.Sa.length;++h)Qe.Sa[h]!==void 0&&++d;return d};var Ii={a:function(d,h,T){throw d>>>=0,new Oe(d).Za(h>>>0,T>>>0),ke=d,rr++,ke},v:function(){return 0},ba:function(){},N:function(){},P:function(){},H:function(){return 0},$:function(){},V:function(){},_:function(){},B:function(){},O:function(){},L:function(){},aa:function(){},M:function(){},E:function(d,h,T,_,E){h>>>=0,h=lt(h);var B=h.indexOf("u")!=-1;B&&(E=(1n<<64n)-1n),bt(d>>>0,{name:h,fromWireType:j=>j,toWireType:function(j,z){if(typeof z!="bigint"&&typeof z!="number")throw new TypeError(`Cannot convert "${zr(z)}" to ${this.name}`);if(z<_||z>E)throw new TypeError(`Passing a number "${zr(z)}" from JS side to C/C++ side to an argument of type "${h}", which is outside the valid range [${_}, ${E}]!`);return z},argPackAdvance:8,readValueFromPointer:Qn(h,T>>>0,!B),Wa:null})},ea:function(d,h,T,_){h=lt(h>>>0),bt(d>>>0,{name:h,fromWireType:function(E){return!!E},toWireType:function(E,B){return B?T:_},argPackAdvance:8,readValueFromPointer:function(E){return this.fromWireType(q[E>>>0])},Wa:null})},da:function(d,h){h=lt(h>>>0),bt(d>>>0,{name:h,fromWireType:T=>{var _=Ke(T);return jr(T),_},toWireType:(T,_)=>ot(_),argPackAdvance:8,readValueFromPointer:Tr,Wa:null})},D:function(d,h,T){h=lt(h>>>0),bt(d>>>0,{name:h,fromWireType:_=>_,toWireType:(_,E)=>E,argPackAdvance:8,readValueFromPointer:eo(h,T>>>0),Wa:null})},p:function(d,h,T,_,E){if(d>>>=0,T>>>=0,h=lt(h>>>0),E===-1&&(E=4294967295),E=z=>z,_===0){var B=32-8*T;E=z=>z<<B>>>B}var j=h.includes("unsigned")?function(z,oe){return oe>>>0}:function(z,oe){return oe};bt(d,{name:h,fromWireType:E,toWireType:j,argPackAdvance:8,readValueFromPointer:Qn(h,T,_!==0),Wa:null})},l:function(d,h,T){function _(B){return new E(te.buffer,ne[B+4>>>2>>>0],ne[B>>>2>>>0])}var E=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][h];T=lt(T>>>0),bt(d>>>0,{name:T,fromWireType:_,argPackAdvance:8,readValueFromPointer:_},{gb:!0})},F:function(d,h){h=lt(h>>>0);var T=h==="std::string";bt(d>>>0,{name:h,fromWireType:function(_){var E=ne[_>>>2>>>0],B=_+4;if(T)for(var j=B,z=0;z<=E;++z){var oe=B+z;if(z==E||q[oe>>>0]==0){if(j=br(j,oe-j),le===void 0)var le=j;else le+=String.fromCharCode(0),le+=j;j=oe+1}}else{for(le=Array(E),z=0;z<E;++z)le[z]=String.fromCharCode(q[B+z>>>0]);le=le.join("")}return Ve(_),le},toWireType:function(_,E){E instanceof ArrayBuffer&&(E=new Uint8Array(E));var B=typeof E=="string";if(!(B||E instanceof Uint8Array||E instanceof Uint8ClampedArray||E instanceof Int8Array))throw new Et("Cannot pass non-string to std::string");var j=T&&B?qt(E):E.length,z=Qr(4+j+1),oe=z+4;if(ne[z>>>2>>>0]=j,T&&B)Pt(E,q,oe,j+1);else if(B)for(B=0;B<j;++B){var le=E.charCodeAt(B);if(255<le)throw Ve(oe),new Et("String has UTF-16 code units that do not fit in 8 bits");q[oe+B>>>0]=le}else for(B=0;B<j;++B)q[oe+B>>>0]=E[B];return _!==null&&_.push(Ve,z),z},argPackAdvance:8,readValueFromPointer:vn,Wa(_){Ve(_)}})},x:function(d,h,T){if(h>>>=0,T>>>=0,T=lt(T),h===2)var _=ro,E=Oi,B=Q,j=()=>Le,z=1;else h===4&&(_=qr,E=no,B=Yr,j=()=>ne,z=2);bt(d>>>0,{name:T,fromWireType:oe=>{for(var le=ne[oe>>>2>>>0],Ae=j(),He,Dt=oe+4,P=0;P<=le;++P){var ce=oe+4+P*h;(P==le||Ae[ce>>>z]==0)&&(Dt=_(Dt,ce-Dt),He===void 0?He=Dt:(He+=String.fromCharCode(0),He+=Dt),Dt=ce+h)}return Ve(oe),He},toWireType:(oe,le)=>{if(typeof le!="string")throw new Et(`Cannot pass non-string to C++ string type ${T}`);var Ae=B(le),He=Qr(4+Ae+h);return ne[He>>>2]=Ae>>z,E(le,He+4,Ae+h),oe!==null&&oe.push(Ve,He),He},argPackAdvance:8,readValueFromPointer:Tr,Wa(oe){Ve(oe)}})},fa:function(d,h){h=lt(h>>>0),bt(d>>>0,{hb:!0,name:h,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ca:()=>!0,o:function(d,h,T){h>>>=0,T>>>=0,d=Ke(d>>>0),h=vr(h,"emval::as");var _=[],E=ot(_);return ne[T>>>2>>>0]=E,h.toWireType(_,d)},h:function(d,h,T,_,E){T>>>=0,_>>>=0,E>>>=0,d=Xr[d>>>0],h=Ke(h>>>0),T=xr(T);var B=[];return ne[_>>>2>>>0]=ot(B),d(h,T,B,E)},r:function(d,h,T,_){T>>>=0,_>>>=0,d=Xr[d>>>0],h=Ke(h>>>0),T=xr(T),d(h,T,null,_)},b:jr,y:function(d,h){return h>>>=0,d=Ke(d>>>0),h=Ke(h),d==h},u:function(d){return d>>>=0,d===0?ot(xn()):(d=xr(d),ot(xn()[d]))},g:function(d,h){var T=io(d,h>>>0),_=T[0];h=_.name+"_$"+T.slice(1).map(function(Ae){return Ae.name}).join("_")+"$";var E=wr[h];if(E!==void 0)return E;E=["retType"];for(var B=[_],j="",z=0;z<d-1;++z)j+=(z!==0?", ":"")+"arg"+z,E.push("argType"+z),B.push(T[1+z]);var oe="return function "+wn("methodCaller_"+h)+`(handle, name, destructors, args) {
`,le=0;for(z=0;z<d-1;++z)oe+="    var arg"+z+" = argType"+z+".readValueFromPointer(args"+(le?"+"+le:"")+`);
`,le+=T[z+1].argPackAdvance;for(oe+="    var rv = handle[name]("+j+`);
`,z=0;z<d-1;++z)T[z+1].deleteObject&&(oe+="    argType"+z+".deleteObject(arg"+z+`);
`);return _.hb||(oe+=`    return retType.toWireType(destructors, rv);
`),E.push(oe+`};
`),d=_n(E).apply(null,B),E=oo(d),wr[h]=E},q:function(d,h){return h>>>=0,d=Ke(d>>>0),h=Ke(h),ot(d[h])},c:function(d){d>>>=0,4<d&&(Qe.get(d).cb+=1)},G:function(d,h,T,_){T>>>=0,_>>>=0,d=Ke(d>>>0);var E=On[h];return E||(E=so(h),On[h]=E),E(d,T,_)},s:function(){return ot([])},k:function(d){d=Ke(d>>>0);for(var h=Array(d.length),T=0;T<d.length;T++)h[T]=d[T];return ot(h)},d:function(d){return ot(xr(d>>>0))},j:function(){return ot({})},e:function(d){d>>>=0;for(var h=Ke(d);h.length;){var T=h.pop();h.pop()(T)}jr(d)},i:function(d,h,T){h>>>=0,T>>>=0,d=Ke(d>>>0),h=Ke(h),T=Ke(T),d[h]=T},f:function(d,h){return h>>>=0,d=vr(d>>>0,"_emval_take_value"),d=d.readValueFromPointer(h),ot(d)},S:function(d,h){d=-9007199254740992>d||9007199254740992<d?NaN:Number(d),h>>>=0,d=new Date(1e3*d),V[h>>>2>>>0]=d.getUTCSeconds(),V[h+4>>>2>>>0]=d.getUTCMinutes(),V[h+8>>>2>>>0]=d.getUTCHours(),V[h+12>>>2>>>0]=d.getUTCDate(),V[h+16>>>2>>>0]=d.getUTCMonth(),V[h+20>>>2>>>0]=d.getUTCFullYear()-1900,V[h+24>>>2>>>0]=d.getUTCDay(),V[h+28>>>2>>>0]=(d.getTime()-Date.UTC(d.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},T:function(d,h){d=-9007199254740992>d||9007199254740992<d?NaN:Number(d),h>>>=0,d=new Date(1e3*d),V[h>>>2>>>0]=d.getSeconds(),V[h+4>>>2>>>0]=d.getMinutes(),V[h+8>>>2>>>0]=d.getHours(),V[h+12>>>2>>>0]=d.getDate(),V[h+16>>>2>>>0]=d.getMonth(),V[h+20>>>2>>>0]=d.getFullYear()-1900,V[h+24>>>2>>>0]=d.getDay(),V[h+28>>>2>>>0]=(Yt(d.getFullYear())?An:In)[d.getMonth()]+d.getDate()-1|0,V[h+36>>>2>>>0]=-(60*d.getTimezoneOffset());var T=new Date(d.getFullYear(),6,1).getTimezoneOffset(),_=new Date(d.getFullYear(),0,1).getTimezoneOffset();V[h+32>>>2>>>0]=(T!=_&&d.getTimezoneOffset()==Math.min(_,T))|0},U:function(d){d>>>=0;var h=new Date(V[d+20>>>2>>>0]+1900,V[d+16>>>2>>>0],V[d+12>>>2>>>0],V[d+8>>>2>>>0],V[d+4>>>2>>>0],V[d>>>2>>>0],0),T=V[d+32>>>2>>>0],_=h.getTimezoneOffset(),E=new Date(h.getFullYear(),6,1).getTimezoneOffset(),B=new Date(h.getFullYear(),0,1).getTimezoneOffset(),j=Math.min(B,E);return 0>T?V[d+32>>>2>>>0]=+(E!=B&&j==_):0<T!=(j==_)&&(E=Math.max(B,E),h.setTime(h.getTime()+6e4*((0<T?j:E)-_))),V[d+24>>>2>>>0]=h.getDay(),V[d+28>>>2>>>0]=(Yt(h.getFullYear())?An:In)[h.getMonth()]+h.getDate()-1|0,V[d>>>2>>>0]=h.getSeconds(),V[d+4>>>2>>>0]=h.getMinutes(),V[d+8>>>2>>>0]=h.getHours(),V[d+12>>>2>>>0]=h.getDate(),V[d+16>>>2>>>0]=h.getMonth(),V[d+20>>>2>>>0]=h.getYear(),BigInt(h.getTime()/1e3)},Q:function(){return-52},R:function(){},J:function(d,h,T){function _(oe){return(oe=oe.toTimeString().match(/\(([A-Za-z ]+)\)$/))?oe[1]:"GMT"}T>>>=0;var E=new Date().getFullYear(),B=new Date(E,0,1),j=new Date(E,6,1);E=B.getTimezoneOffset();var z=j.getTimezoneOffset();ne[d>>>0>>>2>>>0]=60*Math.max(E,z),V[h>>>0>>>2>>>0]=+(E!=z),d=_(B),h=_(j),d=Sn(d),h=Sn(h),z<E?(ne[T>>>2>>>0]=d,ne[T+4>>>2>>>0]=h):(ne[T>>>2>>>0]=h,ne[T+4>>>2>>>0]=d)},t:()=>{dr("")},C:()=>Date.now(),K:function(){return 4294901760},n:()=>performance.now(),Z:function(d,h,T){return h>>>=0,q.copyWithin(d>>>0>>>0,h>>>0,h+(T>>>0)>>>0)},I:function(d){d>>>=0;var h=q.length;if(4294901760<d)return!1;for(var T=1;4>=T;T*=2){var _=h*(1+.2/T);_=Math.min(_,d+100663296);var E=Math;_=Math.max(d,_);e:{E=(E.min.call(E,4294901760,_+(65536-_%65536)%65536)-L.buffer.byteLength+65535)/65536;try{L.grow(E),de();var B=1;break e}catch{}B=void 0}if(B)return!0}return!1},X:function(d,h){d>>>=0,h>>>=0;var T=0;return Pn().forEach((_,E)=>{var B=h+T;for(E=ne[d+4*E>>>2>>>0]=B,B=0;B<_.length;++B)te[E++>>>0>>>0]=_.charCodeAt(B);te[E>>>0>>>0]=0,T+=_.length+1}),0},Y:function(d,h){d>>>=0,h>>>=0;var T=Pn();ne[d>>>2>>>0]=T.length;var _=0;return T.forEach(E=>_+=E.length+1),ne[h>>>2>>>0]=_,0},w:()=>52,A:function(){return 52},W:function(){return 70},z:function(d,h,T,_){h>>>=0,T>>>=0,_>>>=0;for(var E=0,B=0;B<T;B++){var j=ne[h>>>2>>>0],z=ne[h+4>>>2>>>0];h+=8;for(var oe=0;oe<z;oe++){var le=q[j+oe>>>0],Ae=uo[d];le===0||le===10?((d===1?F:k)(Vr(Ae,0)),Ae.length=0):Ae.push(le)}E+=z}return ne[_>>>2>>>0]=E,0},ga:ft,m:function(d,h,T,_){return ft(d>>>0,h>>>0,T>>>0,_>>>0)}},ee=function(){var d={a:Ii};return Xe++,mr(d,function(h){ee=h.instance.exports,ee=et(),L=ee.ha,de(),Ht.unshift(ee.ia),Xe--,Xe==0&&(we!==null&&(clearInterval(we),we=null),ze&&(h=ze,ze=null,h()))}).catch(r),{}}();o._OrtInit=(d,h)=>(o._OrtInit=ee.ja)(d,h),o._OrtGetLastError=(d,h)=>(o._OrtGetLastError=ee.ka)(d,h),o._OrtCreateSessionOptions=(d,h,T,_,E,B,j,z,oe,le)=>(o._OrtCreateSessionOptions=ee.la)(d,h,T,_,E,B,j,z,oe,le),o._OrtAppendExecutionProvider=(d,h)=>(o._OrtAppendExecutionProvider=ee.ma)(d,h),o._OrtAddFreeDimensionOverride=(d,h,T)=>(o._OrtAddFreeDimensionOverride=ee.na)(d,h,T),o._OrtAddSessionConfigEntry=(d,h,T)=>(o._OrtAddSessionConfigEntry=ee.oa)(d,h,T),o._OrtReleaseSessionOptions=d=>(o._OrtReleaseSessionOptions=ee.pa)(d),o._OrtCreateSession=(d,h,T)=>(o._OrtCreateSession=ee.qa)(d,h,T),o._OrtReleaseSession=d=>(o._OrtReleaseSession=ee.ra)(d),o._OrtGetInputOutputCount=(d,h,T)=>(o._OrtGetInputOutputCount=ee.sa)(d,h,T),o._OrtGetInputName=(d,h)=>(o._OrtGetInputName=ee.ta)(d,h),o._OrtGetOutputName=(d,h)=>(o._OrtGetOutputName=ee.ua)(d,h),o._OrtFree=d=>(o._OrtFree=ee.va)(d),o._OrtCreateTensor=(d,h,T,_,E,B)=>(o._OrtCreateTensor=ee.wa)(d,h,T,_,E,B),o._OrtGetTensorData=(d,h,T,_,E)=>(o._OrtGetTensorData=ee.xa)(d,h,T,_,E),o._OrtReleaseTensor=d=>(o._OrtReleaseTensor=ee.ya)(d),o._OrtCreateRunOptions=(d,h,T,_)=>(o._OrtCreateRunOptions=ee.za)(d,h,T,_),o._OrtAddRunConfigEntry=(d,h,T)=>(o._OrtAddRunConfigEntry=ee.Aa)(d,h,T),o._OrtReleaseRunOptions=d=>(o._OrtReleaseRunOptions=ee.Ba)(d),o._OrtCreateBinding=d=>(o._OrtCreateBinding=ee.Ca)(d),o._OrtBindInput=(d,h,T)=>(o._OrtBindInput=ee.Da)(d,h,T),o._OrtBindOutput=(d,h,T,_)=>(o._OrtBindOutput=ee.Ea)(d,h,T,_),o._OrtClearBoundOutputs=d=>(o._OrtClearBoundOutputs=ee.Fa)(d),o._OrtReleaseBinding=d=>(o._OrtReleaseBinding=ee.Ga)(d),o._OrtRunWithBinding=(d,h,T,_,E)=>(o._OrtRunWithBinding=ee.Ha)(d,h,T,_,E),o._OrtRun=(d,h,T,_,E,B,j,z)=>(o._OrtRun=ee.Ia)(d,h,T,_,E,B,j,z),o._OrtEndProfiling=d=>(o._OrtEndProfiling=ee.Ja)(d);var Qr=o._malloc=d=>(Qr=o._malloc=ee.Ka)(d),Ve=o._free=d=>(Ve=o._free=ee.La)(d),Ln=d=>(Ln=ee.Ma)(d);o.__embind_initialize_bindings=()=>(o.__embind_initialize_bindings=ee.Na)();var Cn=()=>(Cn=ee.Pa)(),it=d=>(it=ee.Qa)(d),en=d=>(en=ee.Ra)(d);function et(){var d=ee;d=Object.assign({},d);var h=_=>()=>_()>>>0,T=_=>E=>_(E)>>>0;return d.__errno_location=h(d.__errno_location),d.Ka=T(d.Ka),d.Ma=T(d.Ma),d.Pa=h(d.Pa),d.Ra=T(d.Ra),d}o.stackAlloc=en,o.stackSave=Cn,o.stackRestore=it,o.UTF8ToString=br,o.stringToUTF8=(d,h,T)=>Pt(d,q,h,T),o.lengthBytesUTF8=qt;var Je;ze=function d(){Je||Fn(),Je||(ze=d)};function Fn(){if(!(0<Xe)){for(;0<xe.length;)xe.shift()(o);if(!(0<Xe||Je||(Je=!0,o.calledRun=!0,N))){for(;0<Ht.length;)Ht.shift()(o);for(e(o);0<rt.length;)rt.shift()(o)}}}return Fn(),t.ready}})();typeof fd=="object"&&typeof ja=="object"?ja.exports=ld:typeof define=="function"&&define.amd&&define([],()=>ld)});var pd=Ie(()=>{});var dd=Ie(()=>{});var hd={};rn(hd,{cpus:()=>Hg});var Hg,md=$(()=>{Hg=void 0});var yd=Ie((gd,qa)=>{"use strict";var bd=(()=>{var i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(i=i||__filename),function(t={}){function o(){return xe.buffer!=we.buffer&&Oe(),we}function e(){return xe.buffer!=we.buffer&&Oe(),ze}function r(){return xe.buffer!=we.buffer&&Oe(),dr}function n(){return xe.buffer!=we.buffer&&Oe(),Nt}function s(){return xe.buffer!=we.buffer&&Oe(),It}function a(){return xe.buffer!=we.buffer&&Oe(),tr}function u(){return xe.buffer!=we.buffer&&Oe(),mr}var l=t,c,b;l.ready=new Promise((f,p)=>{c=f,b=p});var y=Object.assign({},l),w="./this.program",S=(f,p)=>{throw p},I=typeof window=="object",F=typeof importScripts=="function",k=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",L=l.ENVIRONMENT_IS_PTHREAD||!1,N="";function te(f){return l.locateFile?l.locateFile(f,N):N+f}var q,ve,Le;if(k){var V=(Va(),Ar(Wa)),ne=(Ha(),Ar(za));N=F?ne.dirname(N)+"/":__dirname+"/",q=(p,m)=>(p=p.startsWith("file://")?new URL(p):ne.normalize(p),V.readFileSync(p,m?void 0:"utf8")),Le=p=>(p=q(p,!0),p.buffer||(p=new Uint8Array(p)),p),ve=(p,m,v,A=!0)=>{p=p.startsWith("file://")?new URL(p):ne.normalize(p),V.readFile(p,A?void 0:"utf8",(D,M)=>{D?v(D):m(A?M.buffer:M)})},!l.thisProgram&&1<process.argv.length&&(w=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),S=(p,m)=>{throw process.exitCode=p,m},l.inspect=()=>"[Emscripten Module object]";let f;try{f=pd()}catch(p){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),p}global.Worker=f.Worker}else(I||F)&&(F?N=self.location.href:typeof document<"u"&&document.currentScript&&(N=document.currentScript.src),typeof i<"u"&&i&&(N=i),N.indexOf("blob:")!==0?N=N.substr(0,N.replace(/[?#].*/,"").lastIndexOf("/")+1):N="",k||(q=f=>{var p=new XMLHttpRequest;return p.open("GET",f,!1),p.send(null),p.responseText},F&&(Le=f=>{var p=new XMLHttpRequest;return p.open("GET",f,!1),p.responseType="arraybuffer",p.send(null),new Uint8Array(p.response)}),ve=(f,p,m)=>{var v=new XMLHttpRequest;v.open("GET",f,!0),v.responseType="arraybuffer",v.onload=()=>{v.status==200||v.status==0&&v.response?p(v.response):m()},v.onerror=m,v.send(null)}));k&&typeof performance>"u"&&(global.performance=dd().performance);var mt=console.log.bind(console),J=console.error.bind(console);k&&(mt=(...f)=>V.writeSync(1,f.join(" ")+`
`),J=(...f)=>V.writeSync(2,f.join(" ")+`
`));var pr=mt,Ue=J;Object.assign(l,y),y=null;var de=!0;typeof WebAssembly!="object"&&Rt("no native wasm support detected");var xe,Ht,rt=!1,Xe,we,ze,dr,Nt,It,tr,hr,nt,St,mr;function Oe(){var f=xe.buffer;l.HEAP8=we=new Int8Array(f),l.HEAP16=dr=new Int16Array(f),l.HEAPU8=ze=new Uint8Array(f),l.HEAPU16=Nt=new Uint16Array(f),l.HEAP32=It=new Int32Array(f),l.HEAPU32=tr=new Uint32Array(f),l.HEAPF32=hr=new Float32Array(f),l.HEAPF64=mr=new Float64Array(f),l.HEAP64=nt=new BigInt64Array(f),l.HEAPU64=St=new BigUint64Array(f)}var ke=16777216;if(5242880<=ke||Rt("INITIAL_MEMORY should be larger than STACK_SIZE, was "+ke+"! (STACK_SIZE=5242880)"),L)xe=l.wasmMemory;else if(xe=new WebAssembly.Memory({initial:ke/65536,maximum:65536,shared:!0}),!(xe.buffer instanceof SharedArrayBuffer))throw Ue("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),k&&Ue("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Oe(),ke=xe.buffer.byteLength;var rr=[],jt=[],Vr=[],br=0;function qt(){return de||0<br}var Pt=0,zr=null,nr=null;function lt(){if(Pt--,Pt==0&&(zr!==null&&(clearInterval(zr),zr=null),nr)){var f=nr;nr=null,f()}}function Rt(f){throw f="Aborted("+f+")",Ue(f),rt=!0,Xe=1,f=new WebAssembly.RuntimeError(f+". Build with -sASSERTIONS for more info."),b(f),f}function Hr(f){return f.startsWith("data:application/octet-stream;base64,")}var gr;gr="ort-wasm-threaded.wasm",Hr(gr)||(gr=te(gr));function Et(f){if(Le)return Le(f);throw"both async and sync fetching of the wasm failed"}function _i(f){if(I||F){if(typeof fetch=="function"&&!f.startsWith("file://"))return fetch(f,{credentials:"same-origin"}).then(p=>{if(!p.ok)throw"failed to load wasm binary file at '"+f+"'";return p.arrayBuffer()}).catch(()=>Et(f));if(ve)return new Promise((p,m)=>{ve(f,v=>p(new Uint8Array(v)),m)})}return Promise.resolve().then(()=>Et(f))}function bt(f,p,m){return _i(f).then(v=>WebAssembly.instantiate(v,p)).then(v=>v).then(m,v=>{Ue(`failed to asynchronously prepare wasm: ${v}`),Rt(v)})}function Qn(f,p){var m=gr;return typeof WebAssembly.instantiateStreaming!="function"||Hr(m)||m.startsWith("file://")||k||typeof fetch!="function"?bt(m,f,p):fetch(m,{credentials:"same-origin"}).then(v=>WebAssembly.instantiateStreaming(v,f).then(p,function(A){return Ue(`wasm streaming compile failed: ${A}`),Ue("falling back to ArrayBuffer instantiation"),bt(m,f,p)}))}function yr(f){this.name="ExitStatus",this.message=`Program terminated with exit(${f})`,this.status=f}var Qe=f=>{f.terminate(),f.onmessage=()=>{}},jr=f=>{Q.nb.length==0&&(ro(),Q.Ab(Q.nb[0]));var p=Q.nb.pop();if(!p)return 6;Q.ob.push(p),Q.jb[f.mb]=p,p.mb=f.mb;var m={cmd:"run",start_routine:f.Mb,arg:f.Gb,pthread_ptr:f.mb};return k&&p.unref(),p.postMessage(m,f.Sb),0},Ke=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ot=(f,p,m)=>{p>>>=0;var v=p+m;for(m=p;f[m]&&!(m>=v);)++m;if(16<m-p&&f.buffer&&Ke)return Ke.decode(f.buffer instanceof SharedArrayBuffer?f.slice(p,m):f.subarray(p,m));for(v="";p<m;){var A=f[p++];if(A&128){var D=f[p++]&63;if((A&224)==192)v+=String.fromCharCode((A&31)<<6|D);else{var M=f[p++]&63;A=(A&240)==224?(A&15)<<12|D<<6|M:(A&7)<<18|D<<12|M<<6|f[p++]&63,65536>A?v+=String.fromCharCode(A):(A-=65536,v+=String.fromCharCode(55296|A>>10,56320|A&1023))}}else v+=String.fromCharCode(A)}return v},Tr=(f,p)=>(f>>>=0)?ot(e(),f,p):"";function eo(f){if(L)return P(0,1,f);Xe=f,qt()||(Q.Nb(),rt=!0),S(f,new yr(f))}var vn=f=>{if(Xe=f,L)throw no(f),"unwind";eo(f)};function to(){for(var f=l.numThreads;f--;)ro();rr.unshift(()=>{Pt++,Oi(()=>lt())})}function ro(){var f=te("ort-wasm-threaded.worker.js");f=new Worker(f),Q.nb.push(f)}function Oi(f){L?f():Promise.all(Q.nb.map(Q.Ab)).then(f)}var Q={nb:[],ob:[],Fb:[],jb:{},vb(){L?(Q.receiveObjectTransfer=Q.Lb,Q.threadInitTLS=Q.Eb,Q.setExitStatus=Q.Db,de=!1):to()},Db:f=>{Xe=f},Vb:["$terminateWorker"],Nb:()=>{for(var f of Q.ob)Qe(f);for(f of Q.nb)Qe(f);Q.nb=[],Q.ob=[],Q.jb=[]},Cb:f=>{var p=f.mb;delete Q.jb[p],Q.nb.push(f),Q.ob.splice(Q.ob.indexOf(f),1),f.mb=0,Ei(p)},Lb(){},Eb(){Q.Fb.forEach(f=>f())},Ab:f=>new Promise(p=>{f.onmessage=D=>{D=D.data;var M=D.cmd;if(D.targetThread&&D.targetThread!=po()){var U=Q.jb[D.targetThread];U?U.postMessage(D,D.transferList):Ue(`Internal error! Worker sent a message "${M}" to target pthread ${D.targetThread}, but that thread no longer exists!`)}else M==="checkMailbox"?He():M==="spawnThread"?jr(D):M==="cleanupThread"?((D=Q.jb[D.thread])||Rt(),Q.Cb(D)):M==="killThread"?(D=D.thread,M=Q.jb[D],delete Q.jb[D],Qe(M),Ei(D),Q.ob.splice(Q.ob.indexOf(M),1),M.mb=0):M==="cancelThread"?Q.jb[D.thread].postMessage({cmd:"cancel"}):M==="loaded"?(f.loaded=!0,k&&!f.mb&&f.unref(),p(f)):M==="alert"?alert(`Thread ${D.threadId}: ${D.text}`):D.target==="setimmediate"?f.postMessage(D):M==="callHandler"?l[D.handler](...D.args):M&&Ue(`worker sent an unknown command ${M}`)},f.onerror=D=>{throw Ue(`worker sent an error! ${D.filename}:${D.lineno}: ${D.message}`),D},k&&(f.on("message",D=>f.onmessage({data:D})),f.on("error",D=>f.onerror(D)));var m=[],v=[],A;for(A of v)l.hasOwnProperty(A)&&m.push(A);f.postMessage({cmd:"load",handlers:m,urlOrBlob:l.mainScriptUrlOrBlob||i,wasmMemory:xe,wasmModule:Ht})})};l.PThread=Q;var qr=f=>{for(;0<f.length;)f.shift()(l)};l.establishStackSpace=()=>{var f=po(),p=a()[f+52>>>2>>>0];f=a()[f+56>>>2>>>0],Ss(p,p-f),mo(p)};function no(f){if(L)return P(1,0,f);vn(f)}var Yr=[],vr;l.invokeEntryPoint=(f,p)=>{var m=Yr[f];m||(f>=Yr.length&&(Yr.length=f+1),Yr[f]=m=vr.get(f)),f=m(p),qt()?Q.Db(f):Di(f)};function Ai(f){this.sb=f-24,this.Kb=function(p){a()[this.sb+4>>>2>>>0]=p},this.xb=function(p){a()[this.sb+8>>>2>>>0]=p},this.vb=function(p,m){this.wb(),this.Kb(p),this.xb(m)},this.wb=function(){a()[this.sb+16>>>2>>>0]=0}}var xr=0,Xr=0;function xn(f,p,m,v){return L?P(2,1,f,p,m,v):oo(f,p,m,v)}function oo(f,p,m,v){if(f>>>=0,p>>>=0,m>>>=0,v>>>=0,typeof SharedArrayBuffer>"u")return Ue("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var A=[];return L&&A.length===0?xn(f,p,m,v):(f={Mb:m,mb:f,Gb:v,Sb:A},L?(f.Ub="spawnThread",postMessage(f,A),0):jr(f))}function io(f,p,m){return L?P(3,1,f,p,m):0}function wn(f,p){if(L)return P(4,1,f,p)}var wr=f=>{for(var p=0,m=0;m<f.length;++m){var v=f.charCodeAt(m);127>=v?p++:2047>=v?p+=2:55296<=v&&57343>=v?(p+=4,++m):p+=3}return p},ao=(f,p,m,v)=>{if(m>>>=0,!(0<v))return 0;var A=m;v=m+v-1;for(var D=0;D<f.length;++D){var M=f.charCodeAt(D);if(55296<=M&&57343>=M){var U=f.charCodeAt(++D);M=65536+((M&1023)<<10)|U&1023}if(127>=M){if(m>=v)break;p[m++>>>0]=M}else{if(2047>=M){if(m+1>=v)break;p[m++>>>0]=192|M>>6}else{if(65535>=M){if(m+2>=v)break;p[m++>>>0]=224|M>>12}else{if(m+3>=v)break;p[m++>>>0]=240|M>>18,p[m++>>>0]=128|M>>12&63}p[m++>>>0]=128|M>>6&63}p[m++>>>0]=128|M&63}}return p[m>>>0]=0,m-A},_n=(f,p,m)=>ao(f,e(),p,m);function so(f,p){if(L)return P(5,1,f,p)}function On(f,p,m){if(L)return P(6,1,f,p,m)}function Yt(f,p,m){return L?P(7,1,f,p,m):0}function An(f,p){if(L)return P(8,1,f,p)}function In(f,p,m){if(L)return P(9,1,f,p,m)}function Sn(f,p,m,v){if(L)return P(10,1,f,p,m,v)}function Kr(f,p,m,v){if(L)return P(11,1,f,p,m,v)}function Pn(f,p,m,v){if(L)return P(12,1,f,p,m,v)}function Jr(f){if(L)return P(13,1,f)}function uo(f,p){if(L)return P(14,1,f,p)}function En(f,p,m){if(L)return P(15,1,f,p,m)}var Dn=f=>{if(f===null)return"null";var p=typeof f;return p==="object"||p==="array"||p==="function"?f.toString():""+f},lo,ft=f=>{for(var p="";e()[f>>>0];)p+=lo[e()[f++>>>0]];return p},Zr={},or={},Ii={},ee;function Qr(f,p,m={}){var v=p.name;if(!f)throw new ee(`type "${v}" must have a positive integer typeid pointer`);if(or.hasOwnProperty(f)){if(m.Ib)return;throw new ee(`Cannot register type '${v}' twice`)}or[f]=p,delete Ii[f],Zr.hasOwnProperty(f)&&(p=Zr[f],delete Zr[f],p.forEach(A=>A()))}function Ve(f,p,m={}){if(!("argPackAdvance"in p))throw new TypeError("registerType registeredInstance requires argPackAdvance");Qr(f,p,m)}var Ln=(f,p,m)=>{switch(p){case 1:return m?v=>o()[v>>>0>>>0]:v=>e()[v>>>0>>>0];case 2:return m?v=>r()[v>>>1>>>0]:v=>n()[v>>>1>>>0];case 4:return m?v=>s()[v>>>2>>>0]:v=>a()[v>>>2>>>0];case 8:return m?v=>nt[v>>>3]:v=>St[v>>>3];default:throw new TypeError(`invalid integer width (${p}): ${f}`)}};function Cn(){this.lb=[void 0],this.zb=[]}var it=new Cn;function en(f){f>>>=0,f>=it.sb&&--it.get(f).Bb===0&&it.xb(f)}var et=f=>{if(!f)throw new ee("Cannot use deleted val. handle = "+f);return it.get(f).value},Je=f=>{switch(f){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return it.wb({Bb:1,value:f})}};function Fn(f){return this.fromWireType(s()[f>>>2>>>0])}var d=(f,p)=>{switch(p){case 4:return function(m){var v=this.fromWireType;return xe.buffer!=we.buffer&&Oe(),v.call(this,hr[m>>>2>>>0])};case 8:return function(m){return this.fromWireType(u()[m>>>3>>>0])};default:throw new TypeError(`invalid float width (${p}): ${f}`)}};function h(f){return this.fromWireType(a()[f>>>2>>>0])}var T=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,_=(f,p)=>{for(var m=f>>1,v=m+p/2;!(m>=v)&&n()[m>>>0];)++m;if(m<<=1,32<m-f&&T)return T.decode(e().slice(f,m));for(m="",v=0;!(v>=p/2);++v){var A=r()[f+2*v>>>1>>>0];if(A==0)break;m+=String.fromCharCode(A)}return m},E=(f,p,m)=>{if(m===void 0&&(m=2147483647),2>m)return 0;m-=2;var v=p;m=m<2*f.length?m/2:f.length;for(var A=0;A<m;++A){var D=f.charCodeAt(A);r()[p>>>1>>>0]=D,p+=2}return r()[p>>>1>>>0]=0,p-v},B=f=>2*f.length,j=(f,p)=>{for(var m=0,v="";!(m>=p/4);){var A=s()[f+4*m>>>2>>>0];if(A==0)break;++m,65536<=A?(A-=65536,v+=String.fromCharCode(55296|A>>10,56320|A&1023)):v+=String.fromCharCode(A)}return v},z=(f,p,m)=>{if(p>>>=0,m===void 0&&(m=2147483647),4>m)return 0;var v=p;m=v+m-4;for(var A=0;A<f.length;++A){var D=f.charCodeAt(A);if(55296<=D&&57343>=D){var M=f.charCodeAt(++A);D=65536+((D&1023)<<10)|M&1023}if(s()[p>>>2>>>0]=D,p+=4,p+4>m)break}return s()[p>>>2>>>0]=0,p-v},oe=f=>{for(var p=0,m=0;m<f.length;++m){var v=f.charCodeAt(m);55296<=v&&57343>=v&&++m,p+=4}return p},le=f=>{if(!rt)try{if(f(),!qt())try{L?Di(Xe):vn(Xe)}catch(p){p instanceof yr||p=="unwind"||S(1,p)}}catch(p){p instanceof yr||p=="unwind"||S(1,p)}};function Ae(f){f>>>=0,typeof Atomics.Tb=="function"&&(Atomics.Tb(s(),f>>>2,f).value.then(He),f+=128,Atomics.store(s(),f>>>2,1))}l.__emscripten_thread_mailbox_await=Ae;var He=()=>{var f=po();f&&(Ae(f),le(()=>Is()))};l.checkMailbox=He;var Dt=f=>{var p=Li();return f=f(),mo(p),f};function P(f,p){var m=arguments.length-2,v=arguments;return Dt(()=>{for(var A=2*m,D=Ci(8*A),M=D>>>3,U=0;U<m;U++){var ie=v[2+U];typeof ie=="bigint"?(nt[M+2*U]=1n,nt[M+2*U+1]=ie):(nt[M+2*U]=0n,u()[M+2*U+1>>>0]=ie)}return As(f,A,D,p)})}var ce=[],_e=(f,p)=>{var m=or[f];if(m===void 0)throw f=_s(f),m=ft(f),Kt(f),new ee(p+" has unknown type "+m);return m},Xt={},_r=f=>{var p=Xt[f];return p===void 0?ft(f):p},fo=[],ns=()=>typeof globalThis=="object"?globalThis:Function("return this")(),Qd=f=>{var p=fo.length;return fo.push(f),p},eh=(f,p)=>{for(var m=Array(f),v=0;v<f;++v)m[v]=_e(a()[p+4*v>>>2>>>0],"parameter "+v);return m},os=f=>{if(f===void 0)return"_unknown";f=f.replace(/[^a-zA-Z0-9_]/g,"$");var p=f.charCodeAt(0);return 48<=p&&57>=p?`_${f}`:f},is={};function th(f,p){return f=os(f),{[f]:function(){return p.apply(this,arguments)}}[f]}function rh(f){var p=Function;if(!(p instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof p} which is not a function`);var m=th(p.name||"unknownFunctionName",function(){});return m.prototype=p.prototype,m=new m,f=p.apply(m,f),f instanceof Object?f:m}var nh=f=>{for(var p="",m=0;m<f;++m)p+=(m!==0?", ":"")+"arg"+m;var v="return function emval_allocator_"+f+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`;for(m=0;m<f;++m)v+="var argType"+m+" = requireRegisteredType(HEAPU32[((argTypes)>>>2)], 'parameter "+m+`');
var arg`+m+" = argType"+m+`.readValueFromPointer(args);
args += argType`+m+`['argPackAdvance'];
argTypes += 4;
`;return new Function("requireRegisteredType","Module","valueToHandle","getMemory",v+("var obj = new constructor("+p+`);
return valueToHandle(obj);
}
`))(_e,l,Je,()=>a())},as={},tn=f=>f%4===0&&(f%100!==0||f%400===0),ss=[0,31,60,91,121,152,182,213,244,274,305,335],us=[0,31,59,90,120,151,181,212,243,273,304,334];function ls(f,p,m,v,A,D,M){return L?P(16,1,f,p,m,v,A,D,M):-52}function fs(f,p,m,v,A,D){if(L)return P(17,1,f,p,m,v,A,D)}var cs=f=>{var p=wr(f)+1,m=ho(p);return m&&_n(f,m,p),m},Si={},ps=()=>{if(!Pi){var f={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:w||"./this.program"},p;for(p in Si)Si[p]===void 0?delete f[p]:f[p]=Si[p];var m=[];for(p in f)m.push(`${p}=${f[p]}`);Pi=m}return Pi},Pi;function ds(f,p){if(L)return P(18,1,f,p);f>>>=0,p>>>=0;var m=0;return ps().forEach((v,A)=>{var D=p+m;for(A=a()[f+4*A>>>2>>>0]=D,D=0;D<v.length;++D)o()[A++>>>0>>>0]=v.charCodeAt(D);o()[A>>>0>>>0]=0,m+=v.length+1}),0}function hs(f,p){if(L)return P(19,1,f,p);f>>>=0,p>>>=0;var m=ps();a()[f>>>2>>>0]=m.length;var v=0;return m.forEach(A=>v+=A.length+1),a()[p>>>2>>>0]=v,0}function ms(f){return L?P(20,1,f):52}function bs(f,p,m,v){return L?P(21,1,f,p,m,v):52}function gs(f,p,m,v){return L?P(22,1,f,p,m,v):70}var oh=[null,[],[]];function ys(f,p,m,v){if(L)return P(23,1,f,p,m,v);p>>>=0,m>>>=0,v>>>=0;for(var A=0,D=0;D<m;D++){var M=a()[p>>>2>>>0],U=a()[p+4>>>2>>>0];p+=8;for(var ie=0;ie<U;ie++){var se=e()[M+ie>>>0],Ce=oh[f];se===0||se===10?((f===1?pr:Ue)(ot(Ce,0)),Ce.length=0):Ce.push(se)}A+=U}return a()[v>>>2>>>0]=A,0}var Ts=[31,29,31,30,31,30,31,31,30,31,30,31],vs=[31,28,31,30,31,30,31,31,30,31,30,31];function ih(f){var p=Array(wr(f)+1);return ao(f,p,0,p.length),p}var ah=(f,p)=>{o().set(f,p>>>0)};function xs(f,p,m,v){function A(C,ye,Fe){for(C=typeof C=="number"?C.toString():C||"";C.length<ye;)C=Fe[0]+C;return C}function D(C,ye){return A(C,ye,"0")}function M(C,ye){function Fe(Es){return 0>Es?-1:0<Es?1:0}var Or;return(Or=Fe(C.getFullYear()-ye.getFullYear()))===0&&(Or=Fe(C.getMonth()-ye.getMonth()))===0&&(Or=Fe(C.getDate()-ye.getDate())),Or}function U(C){switch(C.getDay()){case 0:return new Date(C.getFullYear()-1,11,29);case 1:return C;case 2:return new Date(C.getFullYear(),0,3);case 3:return new Date(C.getFullYear(),0,2);case 4:return new Date(C.getFullYear(),0,1);case 5:return new Date(C.getFullYear()-1,11,31);case 6:return new Date(C.getFullYear()-1,11,30)}}function ie(C){var ye=C.pb;for(C=new Date(new Date(C.qb+1900,0,1).getTime());0<ye;){var Fe=C.getMonth(),Or=(tn(C.getFullYear())?Ts:vs)[Fe];if(ye>Or-C.getDate())ye-=Or-C.getDate()+1,C.setDate(1),11>Fe?C.setMonth(Fe+1):(C.setMonth(0),C.setFullYear(C.getFullYear()+1));else{C.setDate(C.getDate()+ye);break}}return Fe=new Date(C.getFullYear()+1,0,4),ye=U(new Date(C.getFullYear(),0,4)),Fe=U(Fe),0>=M(ye,C)?0>=M(Fe,C)?C.getFullYear()+1:C.getFullYear():C.getFullYear()-1}f>>>=0,p>>>=0,m>>>=0,v>>>=0;var se=a()[v+40>>>2>>>0];v={Qb:s()[v>>>2>>>0],Pb:s()[v+4>>>2>>>0],tb:s()[v+8>>>2>>>0],yb:s()[v+12>>>2>>>0],ub:s()[v+16>>>2>>>0],qb:s()[v+20>>>2>>>0],kb:s()[v+24>>>2>>>0],pb:s()[v+28>>>2>>>0],Wb:s()[v+32>>>2>>>0],Ob:s()[v+36>>>2>>>0],Rb:se?Tr(se):""},m=Tr(m),se={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Ce in se)m=m.replace(new RegExp(Ce,"g"),se[Ce]);var ht="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Jt="January February March April May June July August September October November December".split(" ");se={"%a":C=>ht[C.kb].substring(0,3),"%A":C=>ht[C.kb],"%b":C=>Jt[C.ub].substring(0,3),"%B":C=>Jt[C.ub],"%C":C=>D((C.qb+1900)/100|0,2),"%d":C=>D(C.yb,2),"%e":C=>A(C.yb,2," "),"%g":C=>ie(C).toString().substring(2),"%G":C=>ie(C),"%H":C=>D(C.tb,2),"%I":C=>(C=C.tb,C==0?C=12:12<C&&(C-=12),D(C,2)),"%j":C=>{for(var ye=0,Fe=0;Fe<=C.ub-1;ye+=(tn(C.qb+1900)?Ts:vs)[Fe++]);return D(C.yb+ye,3)},"%m":C=>D(C.ub+1,2),"%M":C=>D(C.Pb,2),"%n":()=>`
`,"%p":C=>0<=C.tb&&12>C.tb?"AM":"PM","%S":C=>D(C.Qb,2),"%t":()=>"	","%u":C=>C.kb||7,"%U":C=>D(Math.floor((C.pb+7-C.kb)/7),2),"%V":C=>{var ye=Math.floor((C.pb+7-(C.kb+6)%7)/7);if(2>=(C.kb+371-C.pb-2)%7&&ye++,ye)ye==53&&(Fe=(C.kb+371-C.pb)%7,Fe==4||Fe==3&&tn(C.qb)||(ye=1));else{ye=52;var Fe=(C.kb+7-C.pb-1)%7;(Fe==4||Fe==5&&tn(C.qb%400-1))&&ye++}return D(ye,2)},"%w":C=>C.kb,"%W":C=>D(Math.floor((C.pb+7-(C.kb+6)%7)/7),2),"%y":C=>(C.qb+1900).toString().substring(2),"%Y":C=>C.qb+1900,"%z":C=>{C=C.Ob;var ye=0<=C;return C=Math.abs(C)/60,(ye?"+":"-")+("0000"+(C/60*100+C%60)).slice(-4)},"%Z":C=>C.Rb,"%%":()=>"%"},m=m.replace(/%%/g,"\0\0");for(Ce in se)m.includes(Ce)&&(m=m.replace(new RegExp(Ce,"g"),se[Ce](v)));return m=m.replace(/\0\0/g,"%"),Ce=ih(m),Ce.length>p?0:(ah(Ce,f),Ce.length-1)}Q.vb();for(var ws=Array(256),co=0;256>co;++co)ws[co]=String.fromCharCode(co);lo=ws,ee=l.BindingError=class extends Error{constructor(f){super(f),this.name="BindingError"}},l.InternalError=class extends Error{constructor(f){super(f),this.name="InternalError"}},Object.assign(Cn.prototype,{get(f){return this.lb[f]},has(f){return this.lb[f]!==void 0},wb(f){var p=this.zb.pop()||this.lb.length;return this.lb[p]=f,p},xb(f){this.lb[f]=void 0,this.zb.push(f)}}),it.lb.push({value:void 0},{value:null},{value:!0},{value:!1}),it.sb=it.lb.length,l.count_emval_handles=()=>{for(var f=0,p=it.sb;p<it.lb.length;++p)it.lb[p]!==void 0&&++f;return f};var sh=[eo,no,xn,io,wn,so,On,Yt,An,In,Sn,Kr,Pn,Jr,uo,En,ls,fs,ds,hs,ms,bs,gs,ys],uh={b:function(f,p,m){throw f>>>=0,new Ai(f).vb(p>>>0,m>>>0),xr=f,Xr++,xr},ea:function(f){Os(f>>>0,!F,1,!I,131072,!1),Q.Eb()},E:function(f){f>>>=0,L?postMessage({cmd:"cleanupThread",thread:f}):((f=Q.jb[f])||Rt(),Q.Cb(f))},W:oo,y:io,ka:wn,S:so,U:On,L:Yt,ia:An,ba:In,ha:Sn,G:Kr,T:Pn,Q:Jr,ja:uo,R:En,J:function(f,p,m,v,A){f>>>=0,p>>>=0,m>>>=0,p=ft(p);var D=p.indexOf("u")!=-1;D&&(A=(1n<<64n)-1n),Ve(f,{name:p,fromWireType:M=>M,toWireType:function(M,U){if(typeof U!="bigint"&&typeof U!="number")throw new TypeError(`Cannot convert "${Dn(U)}" to ${this.name}`);if(U<v||U>A)throw new TypeError(`Passing a number "${Dn(U)}" from JS side to C/C++ side to an argument of type "${p}", which is outside the valid range [${v}, ${A}]!`);return U},argPackAdvance:8,readValueFromPointer:Ln(p,m,!D),rb:null})},qa:function(f,p,m,v){f>>>=0,p=ft(p>>>0),Ve(f,{name:p,fromWireType:function(A){return!!A},toWireType:function(A,D){return D?m:v},argPackAdvance:8,readValueFromPointer:function(A){return this.fromWireType(e()[A>>>0])},rb:null})},pa:function(f,p){f>>>=0,p=ft(p>>>0),Ve(f,{name:p,fromWireType:m=>{var v=et(m);return en(m),v},toWireType:(m,v)=>Je(v),argPackAdvance:8,readValueFromPointer:Fn,rb:null})},I:function(f,p,m){f>>>=0,m>>>=0,p=ft(p>>>0),Ve(f,{name:p,fromWireType:v=>v,toWireType:(v,A)=>A,argPackAdvance:8,readValueFromPointer:d(p,m),rb:null})},u:function(f,p,m,v,A){if(f>>>=0,m>>>=0,p=ft(p>>>0),A===-1&&(A=4294967295),A=U=>U,v===0){var D=32-8*m;A=U=>U<<D>>>D}var M=p.includes("unsigned")?function(U,ie){return ie>>>0}:function(U,ie){return ie};Ve(f,{name:p,fromWireType:A,toWireType:M,argPackAdvance:8,readValueFromPointer:Ln(p,m,v!==0),rb:null})},m:function(f,p,m){function v(D){var M=a()[D>>>2>>>0];return D=a()[D+4>>>2>>>0],new A(o().buffer,D,M)}f>>>=0;var A=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][p];m=ft(m>>>0),Ve(f,{name:m,fromWireType:v,argPackAdvance:8,readValueFromPointer:v},{Ib:!0})},K:function(f,p){f>>>=0,p=ft(p>>>0);var m=p==="std::string";Ve(f,{name:p,fromWireType:function(v){var A=a()[v>>>2>>>0],D=v+4;if(m)for(var M=D,U=0;U<=A;++U){var ie=D+U;if(U==A||e()[ie>>>0]==0){if(M=Tr(M,ie-M),se===void 0)var se=M;else se+=String.fromCharCode(0),se+=M;M=ie+1}}else{for(se=Array(A),U=0;U<A;++U)se[U]=String.fromCharCode(e()[D+U>>>0]);se=se.join("")}return Kt(v),se},toWireType:function(v,A){A instanceof ArrayBuffer&&(A=new Uint8Array(A));var D=typeof A=="string";if(!(D||A instanceof Uint8Array||A instanceof Uint8ClampedArray||A instanceof Int8Array))throw new ee("Cannot pass non-string to std::string");var M=m&&D?wr(A):A.length,U=ho(4+M+1),ie=U+4;if(a()[U>>>2>>>0]=M,m&&D)_n(A,ie,M+1);else if(D)for(D=0;D<M;++D){var se=A.charCodeAt(D);if(255<se)throw Kt(ie),new ee("String has UTF-16 code units that do not fit in 8 bits");e()[ie+D>>>0]=se}else for(D=0;D<M;++D)e()[ie+D>>>0]=A[D];return v!==null&&v.push(Kt,U),U},argPackAdvance:8,readValueFromPointer:h,rb(v){Kt(v)}})},A:function(f,p,m){if(f>>>=0,p>>>=0,m>>>=0,m=ft(m),p===2)var v=_,A=E,D=B,M=()=>n(),U=1;else p===4&&(v=j,A=z,D=oe,M=()=>a(),U=2);Ve(f,{name:m,fromWireType:ie=>{for(var se=a()[ie>>>2>>>0],Ce=M(),ht,Jt=ie+4,C=0;C<=se;++C){var ye=ie+4+C*p;(C==se||Ce[ye>>>U]==0)&&(Jt=v(Jt,ye-Jt),ht===void 0?ht=Jt:(ht+=String.fromCharCode(0),ht+=Jt),Jt=ye+p)}return Kt(ie),ht},toWireType:(ie,se)=>{if(typeof se!="string")throw new ee(`Cannot pass non-string to C++ string type ${m}`);var Ce=D(se),ht=ho(4+Ce+p);return a()[ht>>>2]=Ce>>U,A(se,ht+4,Ce+p),ie!==null&&ie.push(Kt,ht),ht},argPackAdvance:8,readValueFromPointer:Fn,rb(ie){Kt(ie)}})},ra:function(f,p){f>>>=0,p=ft(p>>>0),Ve(f,{Jb:!0,name:p,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},na:()=>!0,O:function(f,p){f>>>=0,f==p>>>0?setTimeout(()=>He()):L?postMessage({targetThread:f,cmd:"checkMailbox"}):(f=Q.jb[f])&&f.postMessage({cmd:"checkMailbox"})},X:function(f,p,m,v){p>>>=0,m/=2,ce.length=m,v=v>>>0>>>3;for(var A=0;A<m;A++)ce[A]=nt[v+2*A]?nt[v+2*A+1]:u()[v+2*A+1>>>0];return f=sh[f],Q.Hb=p,p=f.apply(null,ce),Q.Hb=0,p},da:Ae,ma:function(f){k&&Q.jb[f>>>0].ref()},r:function(f,p,m){p>>>=0,m>>>=0,f=et(f>>>0),p=_e(p,"emval::as");var v=[],A=Je(v);return a()[m>>>2>>>0]=A,p.toWireType(v,f)},i:function(f,p,m,v,A){m>>>=0,v>>>=0,A>>>=0,f=fo[f>>>0],p=et(p>>>0),m=_r(m);var D=[];return a()[v>>>2>>>0]=Je(D),f(p,m,D,A)},s:function(f,p,m,v){m>>>=0,v>>>=0,f=fo[f>>>0],p=et(p>>>0),m=_r(m),f(p,m,null,v)},c:en,B:function(f,p){return p>>>=0,f=et(f>>>0),p=et(p),f==p},o:function(f){return f>>>=0,f===0?Je(ns()):(f=_r(f),Je(ns()[f]))},g:function(f,p){var m=eh(f,p>>>0),v=m[0];p=v.name+"_$"+m.slice(1).map(function(Ce){return Ce.name}).join("_")+"$";var A=is[p];if(A!==void 0)return A;A=["retType"];for(var D=[v],M="",U=0;U<f-1;++U)M+=(U!==0?", ":"")+"arg"+U,A.push("argType"+U),D.push(m[1+U]);var ie="return function "+os("methodCaller_"+p)+`(handle, name, destructors, args) {
`,se=0;for(U=0;U<f-1;++U)ie+="    var arg"+U+" = argType"+U+".readValueFromPointer(args"+(se?"+"+se:"")+`);
`,se+=m[U+1].argPackAdvance;for(ie+="    var rv = handle[name]("+M+`);
`,U=0;U<f-1;++U)m[U+1].deleteObject&&(ie+="    argType"+U+".deleteObject(arg"+U+`);
`);return v.Jb||(ie+=`    return retType.toWireType(destructors, rv);
`),A.push(ie+`};
`),f=rh(A).apply(null,D),A=Qd(f),is[p]=A},q:function(f,p){return p>>>=0,f=et(f>>>0),p=et(p),Je(f[p])},d:function(f){f>>>=0,4<f&&(it.get(f).Bb+=1)},x:function(f,p,m,v){m>>>=0,v>>>=0,f=et(f>>>0);var A=as[p];return A||(A=nh(p),as[p]=A),A(f,m,v)},v:function(){return Je([])},l:function(f){f=et(f>>>0);for(var p=Array(f.length),m=0;m<f.length;m++)p[m]=f[m];return Je(p)},e:function(f){return Je(_r(f>>>0))},k:function(){return Je({})},f:function(f){f>>>=0;for(var p=et(f);p.length;){var m=p.pop();p.pop()(m)}en(f)},j:function(f,p,m){p>>>=0,m>>>=0,f=et(f>>>0),p=et(p),m=et(m),f[p]=m},h:function(f,p){return p>>>=0,f=_e(f>>>0,"_emval_take_value"),f=f.readValueFromPointer(p),Je(f)},_:function(f,p){f=-9007199254740992>f||9007199254740992<f?NaN:Number(f),p>>>=0,f=new Date(1e3*f),s()[p>>>2>>>0]=f.getUTCSeconds(),s()[p+4>>>2>>>0]=f.getUTCMinutes(),s()[p+8>>>2>>>0]=f.getUTCHours(),s()[p+12>>>2>>>0]=f.getUTCDate(),s()[p+16>>>2>>>0]=f.getUTCMonth(),s()[p+20>>>2>>>0]=f.getUTCFullYear()-1900,s()[p+24>>>2>>>0]=f.getUTCDay(),f=(f.getTime()-Date.UTC(f.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,s()[p+28>>>2>>>0]=f},$:function(f,p){f=-9007199254740992>f||9007199254740992<f?NaN:Number(f),p>>>=0,f=new Date(1e3*f),s()[p>>>2>>>0]=f.getSeconds(),s()[p+4>>>2>>>0]=f.getMinutes(),s()[p+8>>>2>>>0]=f.getHours(),s()[p+12>>>2>>>0]=f.getDate(),s()[p+16>>>2>>>0]=f.getMonth(),s()[p+20>>>2>>>0]=f.getFullYear()-1900,s()[p+24>>>2>>>0]=f.getDay();var m=(tn(f.getFullYear())?ss:us)[f.getMonth()]+f.getDate()-1|0;s()[p+28>>>2>>>0]=m,s()[p+36>>>2>>>0]=-(60*f.getTimezoneOffset()),m=new Date(f.getFullYear(),6,1).getTimezoneOffset();var v=new Date(f.getFullYear(),0,1).getTimezoneOffset();f=(m!=v&&f.getTimezoneOffset()==Math.min(v,m))|0,s()[p+32>>>2>>>0]=f},aa:function(f){f>>>=0;var p=new Date(s()[f+20>>>2>>>0]+1900,s()[f+16>>>2>>>0],s()[f+12>>>2>>>0],s()[f+8>>>2>>>0],s()[f+4>>>2>>>0],s()[f>>>2>>>0],0),m=s()[f+32>>>2>>>0],v=p.getTimezoneOffset(),A=new Date(p.getFullYear(),6,1).getTimezoneOffset(),D=new Date(p.getFullYear(),0,1).getTimezoneOffset(),M=Math.min(D,A);return 0>m?s()[f+32>>>2>>>0]=+(A!=D&&M==v):0<m!=(M==v)&&(A=Math.max(D,A),p.setTime(p.getTime()+6e4*((0<m?M:A)-v))),s()[f+24>>>2>>>0]=p.getDay(),m=(tn(p.getFullYear())?ss:us)[p.getMonth()]+p.getDate()-1|0,s()[f+28>>>2>>>0]=m,s()[f>>>2>>>0]=p.getSeconds(),s()[f+4>>>2>>>0]=p.getMinutes(),s()[f+8>>>2>>>0]=p.getHours(),s()[f+12>>>2>>>0]=p.getDate(),s()[f+16>>>2>>>0]=p.getMonth(),s()[f+20>>>2>>>0]=p.getYear(),BigInt(p.getTime()/1e3)},Y:ls,Z:fs,N:function(f,p,m){function v(se){return(se=se.toTimeString().match(/\(([A-Za-z ]+)\)$/))?se[1]:"GMT"}f>>>=0,p>>>=0,m>>>=0;var A=new Date().getFullYear(),D=new Date(A,0,1),M=new Date(A,6,1);A=D.getTimezoneOffset();var U=M.getTimezoneOffset(),ie=Math.max(A,U);a()[f>>>2>>>0]=60*ie,s()[p>>>2>>>0]=+(A!=U),f=v(D),p=v(M),f=cs(f),p=cs(p),U<A?(a()[m>>>2>>>0]=f,a()[m+4>>>2>>>0]=p):(a()[m>>>2>>>0]=p,a()[m+4>>>2>>>0]=f)},n:()=>{Rt("")},F:()=>{},H:()=>Date.now(),la:()=>{throw br+=1,"unwind"},P:function(){return 4294901760},t:()=>performance.timeOrigin+performance.now(),w:()=>k?(md(),Ar(hd)).cpus().length:navigator.hardwareConcurrency,M:function(f){f>>>=0;var p=e().length;if(f<=p||4294901760<f)return!1;for(var m=1;4>=m;m*=2){var v=p*(1+.2/m);v=Math.min(v,f+100663296);var A=Math;v=Math.max(f,v);e:{A=(A.min.call(A,4294901760,v+(65536-v%65536)%65536)-xe.buffer.byteLength+65535)/65536;try{xe.grow(A),Oe();var D=1;break e}catch{}D=void 0}if(D)return!0}return!1},fa:ds,ga:hs,V:vn,z:ms,D:bs,ca:gs,C:ys,a:xe||l.wasmMemory,oa:xs,p:function(f,p,m,v){return xs(f>>>0,p>>>0,m>>>0,v>>>0)}},Z=function(){var f={a:uh};return Pt++,Qn(f,function(p){var m=p.module;Z=p.instance.exports,Z=lh(),Q.Fb.push(Z.Xa),vr=Z._a,jt.unshift(Z.sa),Ht=m,lt()}).catch(b),{}}();l._OrtInit=(f,p)=>(l._OrtInit=Z.ta)(f,p),l._OrtGetLastError=(f,p)=>(l._OrtGetLastError=Z.ua)(f,p),l._OrtCreateSessionOptions=(f,p,m,v,A,D,M,U,ie,se)=>(l._OrtCreateSessionOptions=Z.va)(f,p,m,v,A,D,M,U,ie,se),l._OrtAppendExecutionProvider=(f,p)=>(l._OrtAppendExecutionProvider=Z.wa)(f,p),l._OrtAddFreeDimensionOverride=(f,p,m)=>(l._OrtAddFreeDimensionOverride=Z.xa)(f,p,m),l._OrtAddSessionConfigEntry=(f,p,m)=>(l._OrtAddSessionConfigEntry=Z.ya)(f,p,m),l._OrtReleaseSessionOptions=f=>(l._OrtReleaseSessionOptions=Z.za)(f),l._OrtCreateSession=(f,p,m)=>(l._OrtCreateSession=Z.Aa)(f,p,m),l._OrtReleaseSession=f=>(l._OrtReleaseSession=Z.Ba)(f),l._OrtGetInputOutputCount=(f,p,m)=>(l._OrtGetInputOutputCount=Z.Ca)(f,p,m),l._OrtGetInputName=(f,p)=>(l._OrtGetInputName=Z.Da)(f,p),l._OrtGetOutputName=(f,p)=>(l._OrtGetOutputName=Z.Ea)(f,p),l._OrtFree=f=>(l._OrtFree=Z.Fa)(f),l._OrtCreateTensor=(f,p,m,v,A,D)=>(l._OrtCreateTensor=Z.Ga)(f,p,m,v,A,D),l._OrtGetTensorData=(f,p,m,v,A)=>(l._OrtGetTensorData=Z.Ha)(f,p,m,v,A),l._OrtReleaseTensor=f=>(l._OrtReleaseTensor=Z.Ia)(f),l._OrtCreateRunOptions=(f,p,m,v)=>(l._OrtCreateRunOptions=Z.Ja)(f,p,m,v),l._OrtAddRunConfigEntry=(f,p,m)=>(l._OrtAddRunConfigEntry=Z.Ka)(f,p,m),l._OrtReleaseRunOptions=f=>(l._OrtReleaseRunOptions=Z.La)(f),l._OrtCreateBinding=f=>(l._OrtCreateBinding=Z.Ma)(f),l._OrtBindInput=(f,p,m)=>(l._OrtBindInput=Z.Na)(f,p,m),l._OrtBindOutput=(f,p,m,v)=>(l._OrtBindOutput=Z.Oa)(f,p,m,v),l._OrtClearBoundOutputs=f=>(l._OrtClearBoundOutputs=Z.Pa)(f),l._OrtReleaseBinding=f=>(l._OrtReleaseBinding=Z.Qa)(f),l._OrtRunWithBinding=(f,p,m,v,A)=>(l._OrtRunWithBinding=Z.Ra)(f,p,m,v,A),l._OrtRun=(f,p,m,v,A,D,M,U)=>(l._OrtRun=Z.Sa)(f,p,m,v,A,D,M,U),l._OrtEndProfiling=f=>(l._OrtEndProfiling=Z.Ta)(f);var po=l._pthread_self=()=>(po=l._pthread_self=Z.Ua)(),ho=l._malloc=f=>(ho=l._malloc=Z.Va)(f),Kt=l._free=f=>(Kt=l._free=Z.Wa)(f);l.__emscripten_tls_init=()=>(l.__emscripten_tls_init=Z.Xa)();var _s=f=>(_s=Z.Ya)(f);l.__embind_initialize_bindings=()=>(l.__embind_initialize_bindings=Z.Za)();var Os=l.__emscripten_thread_init=(f,p,m,v,A,D)=>(Os=l.__emscripten_thread_init=Z.$a)(f,p,m,v,A,D);l.__emscripten_thread_crashed=()=>(l.__emscripten_thread_crashed=Z.ab)();var As=(f,p,m,v)=>(As=Z.bb)(f,p,m,v),Ei=f=>(Ei=Z.cb)(f),Di=l.__emscripten_thread_exit=f=>(Di=l.__emscripten_thread_exit=Z.db)(f),Is=l.__emscripten_check_mailbox=()=>(Is=l.__emscripten_check_mailbox=Z.eb)(),Ss=(f,p)=>(Ss=Z.fb)(f,p),Li=()=>(Li=Z.gb)(),mo=f=>(mo=Z.hb)(f),Ci=f=>(Ci=Z.ib)(f);function lh(){var f=Z;f=Object.assign({},f);var p=v=>()=>v()>>>0,m=v=>A=>v(A)>>>0;return f.__errno_location=p(f.__errno_location),f.Ua=p(f.Ua),f.Va=m(f.Va),f.Ya=m(f.Ya),f.gb=p(f.gb),f.ib=m(f.ib),f}l.keepRuntimeAlive=qt,l.wasmMemory=xe,l.stackAlloc=Ci,l.stackSave=Li,l.stackRestore=mo,l.UTF8ToString=Tr,l.stringToUTF8=_n,l.lengthBytesUTF8=wr,l.ExitStatus=yr,l.PThread=Q;var bo;nr=function f(){bo||Ps(),bo||(nr=f)};function Ps(){0<Pt||(L?(c(l),L||qr(jt),startWorker(l)):(qr(rr),0<Pt||bo||(bo=!0,l.calledRun=!0,rt||(L||qr(jt),c(l),L||qr(Vr)))))}return Ps(),t.ready}})();typeof gd=="object"&&typeof qa=="object"?qa.exports=bd:typeof define=="function"&&define.amd&&define([],()=>bd)});var Td=Ie((qO,jg)=>{jg.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>(0,eval)(fs.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(Module.__embind_initialize_bindings(),initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed&&Module.__emscripten_thread_crashed(),a}}self.onmessage=handleMessage;\n'});var xd,qg,Ya,Xa,mi,vd,Yg,Xg,Kg,wd,Me,gn=$(()=>{"use strict";xd=cd();qg=yd(),Xa=!1,mi=!1,vd=!1,Yg=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},Xg=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},Kg=(i,t)=>i?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm",wd=async i=>{if(Xa)return Promise.resolve();if(mi)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(vd)throw new Error("previous call to 'initializeWebAssembly()' failed.");mi=!0;let t=i.initTimeout,o=i.numThreads,e=i.simd,r=o>1&&Yg(),n=e&&Xg(),s=i.wasmPaths,a=typeof s=="string"?s:void 0,u=Kg(n,r),l=typeof s=="object"?s[u]:void 0,c=!1,b=[];if(t>0&&b.push(new Promise(y=>{setTimeout(()=>{c=!0,y()},t)})),b.push(new Promise((y,w)=>{let S=r?qg:xd,I={locateFile:(F,k)=>r&&F.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Td()],{type:"text/javascript"})):F.endsWith(".wasm")?l||(a??k)+u:k+F};if(r)if(I.numThreads=o,typeof Blob>"u")I.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let F=`var ortWasmThreaded=${S.toString()};`;I.mainScriptUrlOrBlob=new Blob([F],{type:"text/javascript"})}S(I).then(F=>{mi=!1,Xa=!0,Ya=F,y()},F=>{mi=!1,vd=!0,w(F)})})),await Promise.race(b),c)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},Me=()=>{if(Xa&&Ya)return Ya;throw new Error("WebAssembly is not initialized yet.")}});var Ge,Kn,$e,bi=$(()=>{"use strict";gn();Ge=(i,t)=>{let o=Me(),e=o.lengthBytesUTF8(i)+1,r=o._malloc(e);return o.stringToUTF8(i,r,e),t.push(r),r},Kn=(i,t,o,e)=>{if(typeof i=="object"&&i!==null){if(o.has(i))throw new Error("Circular reference in options");o.add(i)}Object.entries(i).forEach(([r,n])=>{let s=t?t+r:r;if(typeof n=="object")Kn(n,s+".",o,e);else if(typeof n=="string"||typeof n=="number")e(s,n.toString());else if(typeof n=="boolean")e(s,n?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof n}`)})},$e=i=>{let t=Me(),o=t.stackSave();try{let e=t.stackAlloc(8);t._OrtGetLastError(e,e+4);let r=t.HEAP32[e/4],n=t.HEAPU32[e/4+1],s=n?t.UTF8ToString(n):"";throw new Error(`${i} ERROR_CODE: ${r}, ERROR_MESSAGE: ${s}`)}finally{t.stackRestore(o)}}});var _d,Od=$(()=>{"use strict";gn();bi();_d=i=>{let t=Me(),o=0,e=[],r=i||{};try{if(i?.logSeverityLevel===void 0)r.logSeverityLevel=2;else if(typeof i.logSeverityLevel!="number"||!Number.isInteger(i.logSeverityLevel)||i.logSeverityLevel<0||i.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${i.logSeverityLevel}`);if(i?.logVerbosityLevel===void 0)r.logVerbosityLevel=0;else if(typeof i.logVerbosityLevel!="number"||!Number.isInteger(i.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${i.logVerbosityLevel}`);i?.terminate===void 0&&(r.terminate=!1);let n=0;return i?.tag!==void 0&&(n=Ge(i.tag,e)),o=t._OrtCreateRunOptions(r.logSeverityLevel,r.logVerbosityLevel,!!r.terminate,n),o===0&&$e("Can't create run options."),i?.extra!==void 0&&Kn(i.extra,"",new WeakSet,(s,a)=>{let u=Ge(s,e),l=Ge(a,e);t._OrtAddRunConfigEntry(o,u,l)!==0&&$e(`Can't set a run config entry: ${s} - ${a}.`)}),[o,e]}catch(n){throw o!==0&&t._OrtReleaseRunOptions(o),e.forEach(s=>t._free(s)),n}}});var Jg,Zg,Qg,ey,Ad,Id=$(()=>{"use strict";gn();bi();Jg=i=>{switch(i){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${i}`)}},Zg=i=>{switch(i){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${i}`)}},Qg=i=>{i.extra||(i.extra={}),i.extra.session||(i.extra.session={});let t=i.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),i.executionProviders&&i.executionProviders.some(o=>(typeof o=="string"?o:o.name)==="webgpu")&&(i.enableMemPattern=!1)},ey=(i,t,o)=>{for(let e of t){let r=typeof e=="string"?e:e.name;switch(r){case"xnnpack":r="XNNPACK";break;case"webnn":if(r="WEBNN",typeof e!="string"){let s=e;if(s?.deviceType){let a=Ge("deviceType",o),u=Ge(s.deviceType,o);Me()._OrtAddSessionConfigEntry(i,a,u)!==0&&$e(`Can't set a session config entry: 'deviceType' - ${s.deviceType}.`)}if(s?.numThreads){let a=s.numThreads;(typeof a!="number"||!Number.isInteger(a)||a<0)&&(a=0);let u=Ge("numThreads",o),l=Ge(a.toString(),o);Me()._OrtAddSessionConfigEntry(i,u,l)!==0&&$e(`Can't set a session config entry: 'numThreads' - ${s.numThreads}.`)}if(s?.powerPreference){let a=Ge("powerPreference",o),u=Ge(s.powerPreference,o);Me()._OrtAddSessionConfigEntry(i,a,u)!==0&&$e(`Can't set a session config entry: 'powerPreference' - ${s.powerPreference}.`)}}break;case"webgpu":if(r="JS",typeof e!="string"){let s=e;if(s?.preferredLayout){if(s.preferredLayout!=="NCHW"&&s.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${s.preferredLayout}`);let a=Ge("preferredLayout",o),u=Ge(s.preferredLayout,o);Me()._OrtAddSessionConfigEntry(i,a,u)!==0&&$e(`Can't set a session config entry: 'preferredLayout' - ${s.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${r}`)}let n=Ge(r,o);Me()._OrtAppendExecutionProvider(i,n)!==0&&$e(`Can't append execution provider: ${r}.`)}},Ad=i=>{let t=Me(),o=0,e=[],r=i||{};Qg(r);try{let n=Jg(r.graphOptimizationLevel??"all"),s=Zg(r.executionMode??"sequential"),a=typeof r.logId=="string"?Ge(r.logId,e):0,u=r.logSeverityLevel??2;if(!Number.isInteger(u)||u<0||u>4)throw new Error(`log serverity level is not valid: ${u}`);let l=r.logVerbosityLevel??0;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log verbosity level is not valid: ${l}`);let c=typeof r.optimizedModelFilePath=="string"?Ge(r.optimizedModelFilePath,e):0;if(o=t._OrtCreateSessionOptions(n,!!r.enableCpuMemArena,!!r.enableMemPattern,s,!!r.enableProfiling,0,a,u,l,c),o===0&&$e("Can't create session options."),r.executionProviders&&ey(o,r.executionProviders,e),r.freeDimensionOverrides)for(let[b,y]of Object.entries(r.freeDimensionOverrides)){if(typeof b!="string")throw new Error(`free dimension override name must be a string: ${b}`);if(typeof y!="number"||!Number.isInteger(y)||y<0)throw new Error(`free dimension override value must be a non-negative integer: ${y}`);let w=Ge(b,e);t._OrtAddFreeDimensionOverride(o,w,y)!==0&&$e(`Can't set a free dimension override: ${b} - ${y}.`)}return r.extra!==void 0&&Kn(r.extra,"",new WeakSet,(b,y)=>{let w=Ge(b,e),S=Ge(y,e);t._OrtAddSessionConfigEntry(o,w,S)!==0&&$e(`Can't set a session config entry: ${b} - ${y}.`)}),[o,e]}catch(n){throw o!==0&&t._OrtReleaseSessionOptions(o),e.forEach(s=>t._free(s)),n}}});var Ka,Sd,Ja,Pd,Ed,gi,Dd,Za=$(()=>{"use strict";Ka=i=>{switch(i){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${i}`)}},Sd=i=>{switch(i){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${i}`)}},Ja=i=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][i],Pd=i=>{switch(i){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${i}`)}},Ed=i=>{switch(i){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${i}`)}},gi=i=>i==="float32"||i==="int32"||i==="int64"||i==="bool"||i==="float16"||i==="uint32",Dd=i=>{switch(i){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${i}`)}}});var ty,Cd,Fd,Jn,ry,Qa,$d,kd,Ld,Bd,Nd,Rd,Md=$(()=>{"use strict";Od();Id();Za();gn();bi();ty=(i,t)=>{Me()._OrtInit(i,t)!==0&&$e("Can't initialize onnxruntime.")},Cd=async i=>{ty(i.wasm.numThreads,Ed(i.logLevel))},Fd=async(i,t)=>{},Jn=new Map,ry=i=>{let t=Me(),o=t.stackSave();try{let e=t.stackAlloc(8);return t._OrtGetInputOutputCount(i,e,e+4)!==0&&$e("Can't get session input/output count."),[t.HEAP32[e/4],t.HEAP32[e/4+1]]}finally{t.stackRestore(o)}},Qa=i=>{let t=Me(),o=t._malloc(i.byteLength);if(o===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${i.byteLength}.`);return t.HEAPU8.set(i,o),[o,i.byteLength]},$d=(i,t)=>{let o,e,r=Me();Array.isArray(i)?[o,e]=i:i.buffer===r.HEAPU8.buffer?[o,e]=[i.byteOffset,i.byteLength]:[o,e]=Qa(i);let n=0,s=0,a=0,u=[],l=[],c=[];try{[s,u]=Ad(t),n=r._OrtCreateSession(o,e,s),n===0&&$e("Can't create a session.");let[b,y]=ry(n),w=[],S=[],I=[];for(let k=0;k<b;k++){let L=r._OrtGetInputName(n,k);L===0&&$e("Can't get an input name."),l.push(L),w.push(r.UTF8ToString(L))}for(let k=0;k<y;k++){let L=r._OrtGetOutputName(n,k);L===0&&$e("Can't get an output name."),c.push(L);let N=r.UTF8ToString(L);S.push(N)}let F=null;return Jn.set(n,[n,l,c,F]),[n,w,S]}catch(b){throw l.forEach(y=>r._OrtFree(y)),c.forEach(y=>r._OrtFree(y)),a!==0&&r._OrtReleaseBinding(a),n!==0&&r._OrtReleaseSession(n),b}finally{r._free(o),s!==0&&r._OrtReleaseSessionOptions(s),u.forEach(b=>r._free(b))}},kd=i=>{let t=Me(),o=Jn.get(i);if(!o)throw new Error(`cannot release session. invalid session id: ${i}`);let[e,r,n,s]=o;s&&t._OrtReleaseBinding(s.handle),t.jsepUnregisterBuffers?.(i),r.forEach(a=>t._OrtFree(a)),n.forEach(a=>t._OrtFree(a)),t._OrtReleaseSession(e),Jn.delete(i)},Ld=(i,t,o,e,r)=>{if(!i){t.push(0);return}let n=Me(),s=i[0],a=i[1],u=i[3],l,c;if(s==="string"&&u==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(u==="gpu-buffer"){let w=i[2].gpuBuffer,S=Ja(Ka(s));c=a.reduce((I,F)=>I*F,1)*S,l=n.jsepRegisterBuffer(e,r,w,c)}else{let w=i[2];if(Array.isArray(w)){c=4*w.length,l=n._malloc(c),o.push(l);let S=l/4;for(let I=0;I<w.length;I++){if(typeof w[I]!="string")throw new TypeError(`tensor data at index ${I} is not a string`);n.HEAPU32[S++]=Ge(w[I],o)}}else c=w.byteLength,l=n._malloc(c),o.push(l),n.HEAPU8.set(new Uint8Array(w.buffer,w.byteOffset,c),l)}let b=n.stackSave(),y=n.stackAlloc(4*a.length);try{let w=y/4;a.forEach(I=>n.HEAP32[w++]=I);let S=n._OrtCreateTensor(Ka(s),l,c,y,a.length,Dd(u));S===0&&$e(`Can't create tensor for input/output. session=${e}, index=${r}.`),t.push(S)}finally{n.stackRestore(b)}},Bd=async(i,t,o,e,r,n)=>{let s=Me(),a=Jn.get(i);if(!a)throw new Error(`cannot run inference. invalid session id: ${i}`);let[u,l,c,b]=a,y=t.length,w=e.length,S=0,I=[],F=[],k=[],L=[],N=s.stackSave(),te=s.stackAlloc(y*4),q=s.stackAlloc(y*4),ve=s.stackAlloc(w*4),Le=s.stackAlloc(w*4);try{[S,I]=_d(n);for(let de=0;de<y;de++)Ld(o[de],F,L,i,t[de]);for(let de=0;de<w;de++)Ld(r[de],k,L,i,y+e[de]);let V=te/4,ne=q/4,mt=ve/4,J=Le/4;for(let de=0;de<y;de++)s.HEAPU32[V++]=F[de],s.HEAPU32[ne++]=l[t[de]];for(let de=0;de<w;de++)s.HEAPU32[mt++]=k[de],s.HEAPU32[J++]=c[e[de]];let pr;pr=await s._OrtRun(u,q,te,y,Le,w,ve,S),pr!==0&&$e("failed to call OrtRun().");let Ue=[];for(let de=0;de<w;de++){let xe=s.HEAPU32[ve/4+de];if(xe===k[de]){Ue.push(r[de]);continue}let Ht=s.stackSave(),rt=s.stackAlloc(4*4),Xe=!1,we,ze=0;try{s._OrtGetTensorData(xe,rt,rt+4,rt+8,rt+12)!==0&&$e(`Can't access output tensor data on index ${de}.`);let Nt=rt/4,It=s.HEAPU32[Nt++];ze=s.HEAPU32[Nt++];let tr=s.HEAPU32[Nt++],hr=s.HEAPU32[Nt++],nt=[];for(let Oe=0;Oe<hr;Oe++)nt.push(s.HEAPU32[tr/4+Oe]);s._OrtFree(tr);let St=nt.reduce((Oe,ke)=>Oe*ke,1);we=Sd(It);let mr=b?.outputPreferredLocations[e[de]];if(we==="string"){if(mr==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Oe=[],ke=ze/4;for(let rr=0;rr<St;rr++){let jt=s.HEAPU32[ke++],Vr=rr===St-1?void 0:s.HEAPU32[ke]-jt;Oe.push(s.UTF8ToString(jt,Vr))}Ue.push([we,nt,Oe,"cpu"])}else if(mr==="gpu-buffer"&&St>0){let Oe=s.jsepGetBuffer(ze),ke=Ja(It);if(ke===void 0||!gi(we))throw new Error(`Unsupported data type: ${we}`);Xe=!0,Ue.push([we,nt,{gpuBuffer:Oe,download:s.jsepCreateDownloader(Oe,St*ke,we),dispose:()=>{s._OrtReleaseTensor(xe)}},"gpu-buffer"])}else{let Oe=Pd(we),ke=new Oe(St);new Uint8Array(ke.buffer,ke.byteOffset,ke.byteLength).set(s.HEAPU8.subarray(ze,ze+ke.byteLength)),Ue.push([we,nt,ke,"cpu"])}}finally{s.stackRestore(Ht),we==="string"&&ze&&s._free(ze),Xe||s._OrtReleaseTensor(xe)}}return b&&s._OrtClearBoundOutputs(b.handle),Ue}finally{s.stackRestore(N),F.forEach(V=>s._OrtReleaseTensor(V)),k.forEach(V=>s._OrtReleaseTensor(V)),L.forEach(V=>s._free(V)),S!==0&&s._OrtReleaseRunOptions(S),I.forEach(V=>s._free(V))}},Nd=i=>{let t=Me(),o=Jn.get(i);if(!o)throw new Error("invalid session id");let e=o[0],r=t._OrtEndProfiling(e);r===0&&$e("Can't get an profile file name."),t._OrtFree(r)},Rd=i=>{let t=[];for(let o of i){let e=o[2];!Array.isArray(e)&&"buffer"in e&&t.push(e.buffer)}return t}});var Gd=Ie((fA,oy)=>{oy.exports='/*!\n * ONNX Runtime Web v1.17.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var dt=Object.defineProperty;var Hn=Object.getOwnPropertyDescriptor;var $n=Object.getOwnPropertyNames;var Nn=Object.prototype.hasOwnProperty;var pt=(c,v)=>()=>(c&&(v=c(c=0)),v);var Wr=(c,v)=>()=>(v||c((v={exports:{}}).exports,v),v.exports),mt=(c,v)=>{for(var u in v)dt(c,u,{get:v[u],enumerable:!0})},jn=(c,v,u,y)=>{if(v&&typeof v=="object"||typeof v=="function")for(let b of $n(v))!Nn.call(c,b)&&b!==u&&dt(c,b,{get:()=>v[b],enumerable:!(y=Hn(v,b))||y.enumerable});return c};var xr=c=>jn(dt({},"__esModule",{value:!0}),c);var gt={};mt(gt,{readFile:()=>Yn});var Yn,ht=pt(()=>{Yn=void 0});var vt={};mt(vt,{join:()=>zn});var zn,yt=pt(()=>{zn=void 0});var rn=Wr((en,bt)=>{"use strict";var Qt=(()=>{var c=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(c=c||__filename),function(v={}){var u=v,y,b;u.ready=new Promise((t,n)=>{y=t,b=n});var S=Object.assign({},u),p="./this.program",T=typeof window=="object",D=typeof importScripts=="function",l=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",L="",Y,R,k;if(l){var G=(ht(),xr(gt)),X=(yt(),xr(vt));L=D?X.dirname(L)+"/":__dirname+"/",Y=(t,n)=>(t=t.startsWith("file://")?new URL(t):X.normalize(t),G.readFileSync(t,n?void 0:"utf8")),k=t=>(t=Y(t,!0),t.buffer||(t=new Uint8Array(t)),t),R=(t,n,a,s=!0)=>{t=t.startsWith("file://")?new URL(t):X.normalize(t),G.readFile(t,s?void 0:"utf8",(m,w)=>{m?a(m):n(s?w.buffer:w)})},!u.thisProgram&&1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),u.inspect=()=>"[Emscripten Module object]"}else(T||D)&&(D?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),c&&(L=c),L.indexOf("blob:")!==0?L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1):L="",Y=t=>{var n=new XMLHttpRequest;return n.open("GET",t,!1),n.send(null),n.responseText},D&&(k=t=>{var n=new XMLHttpRequest;return n.open("GET",t,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),R=(t,n,a)=>{var s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer",s.onload=()=>{s.status==200||s.status==0&&s.response?n(s.response):a()},s.onerror=a,s.send(null)});var Z=console.log.bind(console),H=console.error.bind(console);Object.assign(u,S),S=null,typeof WebAssembly!="object"&&Je("no native wasm support detected");var M,ue=!1,Ae,ee,Oe,Se,E,$,Ge,Ve,qe,se;function j(){var t=M.buffer;u.HEAP8=Ae=new Int8Array(t),u.HEAP16=Oe=new Int16Array(t),u.HEAPU8=ee=new Uint8Array(t),u.HEAPU16=Se=new Uint16Array(t),u.HEAP32=E=new Int32Array(t),u.HEAPU32=$=new Uint32Array(t),u.HEAPF32=Ge=new Float32Array(t),u.HEAPF64=se=new Float64Array(t),u.HEAP64=Ve=new BigInt64Array(t),u.HEAPU64=qe=new BigUint64Array(t)}var V=[],xe=[],ve=[],de=0,q=null,le=null;function Je(t){throw t="Aborted("+t+")",H(t),ue=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),b(t),t}function Ie(t){return t.startsWith("data:application/octet-stream;base64,")}var Me;if(Me="ort-wasm.wasm",!Ie(Me)){var Ne=Me;Me=u.locateFile?u.locateFile(Ne,L):L+Ne}function Xe(t){if(k)return k(t);throw"both async and sync fetching of the wasm failed"}function ye(t){if(T||D){if(typeof fetch=="function"&&!t.startsWith("file://"))return fetch(t,{credentials:"same-origin"}).then(n=>{if(!n.ok)throw"failed to load wasm binary file at \'"+t+"\'";return n.arrayBuffer()}).catch(()=>Xe(t));if(R)return new Promise((n,a)=>{R(t,s=>n(new Uint8Array(s)),a)})}return Promise.resolve().then(()=>Xe(t))}function Pe(t,n,a){return ye(t).then(s=>WebAssembly.instantiate(s,n)).then(s=>s).then(a,s=>{H(`failed to asynchronously prepare wasm: ${s}`),Je(s)})}function Ze(t,n){var a=Me;return typeof WebAssembly.instantiateStreaming!="function"||Ie(a)||a.startsWith("file://")||l||typeof fetch!="function"?Pe(a,t,n):fetch(a,{credentials:"same-origin"}).then(s=>WebAssembly.instantiateStreaming(s,t).then(n,function(m){return H(`wasm streaming compile failed: ${m}`),H("falling back to ArrayBuffer instantiation"),Pe(a,t,n)}))}function K(t){this.Va=t-24,this.fb=function(n){$[this.Va+4>>>2>>>0]=n},this.eb=function(n){$[this.Va+8>>>2>>>0]=n},this.Za=function(n,a){this.$a(),this.fb(n),this.eb(a)},this.$a=function(){$[this.Va+16>>>2>>>0]=0}}var oe=0,je=0,Be=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,sr=(t,n,a)=>{n>>>=0;var s=n+a;for(a=n;t[a]&&!(a>=s);)++a;if(16<a-n&&t.buffer&&Be)return Be.decode(t.subarray(n,a));for(s="";n<a;){var m=t[n++];if(m&128){var w=t[n++]&63;if((m&224)==192)s+=String.fromCharCode((m&31)<<6|w);else{var C=t[n++]&63;m=(m&240)==224?(m&15)<<12|w<<6|C:(m&7)<<18|w<<12|C<<6|t[n++]&63,65536>m?s+=String.fromCharCode(m):(m-=65536,s+=String.fromCharCode(55296|m>>10,56320|m&1023))}}else s+=String.fromCharCode(m)}return s},Ke=(t,n)=>(t>>>=0)?sr(ee,t,n):"",Re=t=>{for(var n=0,a=0;a<t.length;++a){var s=t.charCodeAt(a);127>=s?n++:2047>=s?n+=2:55296<=s&&57343>=s?(n+=4,++a):n+=3}return n},Fe=(t,n,a,s)=>{if(a>>>=0,!(0<s))return 0;var m=a;s=a+s-1;for(var w=0;w<t.length;++w){var C=t.charCodeAt(w);if(55296<=C&&57343>=C){var A=t.charCodeAt(++w);C=65536+((C&1023)<<10)|A&1023}if(127>=C){if(a>=s)break;n[a++>>>0]=C}else{if(2047>=C){if(a+1>=s)break;n[a++>>>0]=192|C>>6}else{if(65535>=C){if(a+2>=s)break;n[a++>>>0]=224|C>>12}else{if(a+3>=s)break;n[a++>>>0]=240|C>>18,n[a++>>>0]=128|C>>12&63}n[a++>>>0]=128|C>>6&63}n[a++>>>0]=128|C&63}}return n[a>>>0]=0,a-m},ur=t=>{if(t===null)return"null";var n=typeof t;return n==="object"||n==="array"||n==="function"?t.toString():""+t},Ye,_e=t=>{for(var n="";ee[t>>>0];)n+=Ye[ee[t++>>>0]];return n},We={},fr={},Qe={},Ue;function tt(t,n,a={}){var s=n.name;if(!t)throw new Ue(`type "${s}" must have a positive integer typeid pointer`);if(fr.hasOwnProperty(t)){if(a.gb)return;throw new Ue(`Cannot register type \'${s}\' twice`)}fr[t]=n,delete Qe[t],We.hasOwnProperty(t)&&(n=We[t],delete We[t],n.forEach(m=>m()))}function Ce(t,n,a={}){if(!("argPackAdvance"in n))throw new TypeError("registerType registeredInstance requires argPackAdvance");tt(t,n,a)}var Lr=(t,n,a)=>{switch(n){case 1:return a?s=>Ae[s>>>0>>>0]:s=>ee[s>>>0>>>0];case 2:return a?s=>Oe[s>>>1>>>0]:s=>Se[s>>>1>>>0];case 4:return a?s=>E[s>>>2>>>0]:s=>$[s>>>2>>>0];case 8:return a?s=>Ve[s>>>3]:s=>qe[s>>>3];default:throw new TypeError(`invalid integer width (${n}): ${t}`)}};function er(){this.Sa=[void 0],this.bb=[]}var ge=new er;function lr(t){t>>>=0,t>=ge.Va&&--ge.get(t).cb===0&&ge.$a(t)}var pe=t=>{if(!t)throw new Ue("Cannot use deleted val. handle = "+t);return ge.get(t).value},be=t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return ge.Za({cb:1,value:t})}};function rr(t){return this.fromWireType(E[t>>>2>>>0])}var kr=(t,n)=>{switch(n){case 4:return function(a){return this.fromWireType(Ge[a>>>2>>>0])};case 8:return function(a){return this.fromWireType(se[a>>>3>>>0])};default:throw new TypeError(`invalid float width (${n}): ${t}`)}};function wr(t){return this.fromWireType($[t>>>2>>>0])}var Hr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,$r=(t,n)=>{for(var a=t>>1,s=a+n/2;!(a>=s)&&Se[a>>>0];)++a;if(a<<=1,32<a-t&&Hr)return Hr.decode(ee.subarray(t>>>0,a>>>0));for(a="",s=0;!(s>=n/2);++s){var m=Oe[t+2*s>>>1>>>0];if(m==0)break;a+=String.fromCharCode(m)}return a},nt=(t,n,a)=>{if(a===void 0&&(a=2147483647),2>a)return 0;a-=2;var s=n;a=a<2*t.length?a/2:t.length;for(var m=0;m<a;++m)Oe[n>>>1>>>0]=t.charCodeAt(m),n+=2;return Oe[n>>>1>>>0]=0,n-s},F=t=>2*t.length,cr=(t,n)=>{for(var a=0,s="";!(a>=n/4);){var m=E[t+4*a>>>2>>>0];if(m==0)break;++a,65536<=m?(m-=65536,s+=String.fromCharCode(55296|m>>10,56320|m&1023)):s+=String.fromCharCode(m)}return s},Nr=(t,n,a)=>{if(n>>>=0,a===void 0&&(a=2147483647),4>a)return 0;var s=n;a=s+a-4;for(var m=0;m<t.length;++m){var w=t.charCodeAt(m);if(55296<=w&&57343>=w){var C=t.charCodeAt(++m);w=65536+((w&1023)<<10)|C&1023}if(E[n>>>2>>>0]=w,n+=4,n+4>a)break}return E[n>>>2>>>0]=0,n-s},dr=t=>{for(var n=0,a=0;a<t.length;++a){var s=t.charCodeAt(a);55296<=s&&57343>=s&&++a,n+=4}return n},tr=(t,n)=>{var a=fr[t];if(a===void 0)throw t=Ur(t),a=_e(t),fe(t),new Ue(n+" has unknown type "+a);return a},ot={},nr=t=>{var n=ot[t];return n===void 0?_e(t):n},pr=[],Or=()=>typeof globalThis=="object"?globalThis:Function("return this")(),jr=t=>{var n=pr.length;return pr.push(t),n},Yr=(t,n)=>{for(var a=Array(t),s=0;s<t;++s)a[s]=tr($[n+4*s>>>2>>>0],"parameter "+s);return a},_r=t=>{if(t===void 0)return"_unknown";t=t.replace(/[^a-zA-Z0-9_]/g,"$");var n=t.charCodeAt(0);return 48<=n&&57>=n?`_${t}`:t},or={};function zr(t,n){return t=_r(t),{[t]:function(){return n.apply(this,arguments)}}[t]}function Tr(t){var n=Function;if(!(n instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof n} which is not a function`);var a=zr(n.name||"unknownFunctionName",function(){});return a.prototype=n.prototype,a=new a,t=n.apply(a,t),t instanceof Object?t:a}var Gr=t=>{for(var n="",a=0;a<t;++a)n+=(a!==0?", ":"")+"arg"+a;var s="return function emval_allocator_"+t+`(constructor, argTypes, args) {\n  var HEAPU32 = getMemory();\n`;for(a=0;a<t;++a)s+="var argType"+a+" = requireRegisteredType(HEAPU32[((argTypes)>>>2)], \'parameter "+a+`\');\nvar arg`+a+" = argType"+a+`.readValueFromPointer(args);\nargs += argType`+a+`[\'argPackAdvance\'];\nargTypes += 4;\n`;return new Function("requireRegisteredType","Module","valueToHandle","getMemory",s+("var obj = new constructor("+n+`);\nreturn valueToHandle(obj);\n}\n`))(tr,u,be,()=>$)},Ar={},Le=t=>t%4===0&&(t%100!==0||t%400===0),Er=[0,31,60,91,121,152,182,213,244,274,305,335],Sr=[0,31,59,90,120,151,181,212,243,273,304,334],Cr=t=>{var n=Re(t)+1,a=vr(n);return a&&Fe(t,ee,a,n),a},mr={},Mr=()=>{if(!gr){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"},n;for(n in mr)mr[n]===void 0?delete t[n]:t[n]=mr[n];var a=[];for(n in t)a.push(`${n}=${t[n]}`);gr=a}return gr},gr,Vr=[null,[],[]],Pr=[31,29,31,30,31,30,31,31,30,31,30,31],Fr=[31,28,31,30,31,30,31,31,30,31,30,31];function qr(t){var n=Array(Re(t)+1);return Fe(t,n,0,n.length),n}function Te(t,n,a,s){function m(d,N,J){for(d=typeof d=="number"?d.toString():d||"";d.length<N;)d=J[0]+d;return d}function w(d,N){return m(d,N,"0")}function C(d,N){function J(ar){return 0>ar?-1:0<ar?1:0}var ke;return(ke=J(d.getFullYear()-N.getFullYear()))===0&&(ke=J(d.getMonth()-N.getMonth()))===0&&(ke=J(d.getDate()-N.getDate())),ke}function A(d){switch(d.getDay()){case 0:return new Date(d.getFullYear()-1,11,29);case 1:return d;case 2:return new Date(d.getFullYear(),0,3);case 3:return new Date(d.getFullYear(),0,2);case 4:return new Date(d.getFullYear(),0,1);case 5:return new Date(d.getFullYear()-1,11,31);case 6:return new Date(d.getFullYear()-1,11,30)}}function I(d){var N=d.Ta;for(d=new Date(new Date(d.Ua+1900,0,1).getTime());0<N;){var J=d.getMonth(),ke=(Le(d.getFullYear())?Pr:Fr)[J];if(N>ke-d.getDate())N-=ke-d.getDate()+1,d.setDate(1),11>J?d.setMonth(J+1):(d.setMonth(0),d.setFullYear(d.getFullYear()+1));else{d.setDate(d.getDate()+N);break}}return J=new Date(d.getFullYear()+1,0,4),N=A(new Date(d.getFullYear(),0,4)),J=A(J),0>=C(N,d)?0>=C(J,d)?d.getFullYear()+1:d.getFullYear():d.getFullYear()-1}t>>>=0,n>>>=0,a>>>=0,s>>>=0;var B=$[s+40>>>2>>>0];s={kb:E[s>>>2>>>0],jb:E[s+4>>>2>>>0],Xa:E[s+8>>>2>>>0],ab:E[s+12>>>2>>>0],Ya:E[s+16>>>2>>>0],Ua:E[s+20>>>2>>>0],Oa:E[s+24>>>2>>>0],Ta:E[s+28>>>2>>>0],mb:E[s+32>>>2>>>0],ib:E[s+36>>>2>>>0],lb:B?Ke(B):""},a=Ke(a),B={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Q in B)a=a.replace(new RegExp(Q,"g"),B[Q]);var ce="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),De="January February March April May June July August September October November December".split(" ");B={"%a":d=>ce[d.Oa].substring(0,3),"%A":d=>ce[d.Oa],"%b":d=>De[d.Ya].substring(0,3),"%B":d=>De[d.Ya],"%C":d=>w((d.Ua+1900)/100|0,2),"%d":d=>w(d.ab,2),"%e":d=>m(d.ab,2," "),"%g":d=>I(d).toString().substring(2),"%G":d=>I(d),"%H":d=>w(d.Xa,2),"%I":d=>(d=d.Xa,d==0?d=12:12<d&&(d-=12),w(d,2)),"%j":d=>{for(var N=0,J=0;J<=d.Ya-1;N+=(Le(d.Ua+1900)?Pr:Fr)[J++]);return w(d.ab+N,3)},"%m":d=>w(d.Ya+1,2),"%M":d=>w(d.jb,2),"%n":()=>`\n`,"%p":d=>0<=d.Xa&&12>d.Xa?"AM":"PM","%S":d=>w(d.kb,2),"%t":()=>"	","%u":d=>d.Oa||7,"%U":d=>w(Math.floor((d.Ta+7-d.Oa)/7),2),"%V":d=>{var N=Math.floor((d.Ta+7-(d.Oa+6)%7)/7);if(2>=(d.Oa+371-d.Ta-2)%7&&N++,N)N==53&&(J=(d.Oa+371-d.Ta)%7,J==4||J==3&&Le(d.Ua)||(N=1));else{N=52;var J=(d.Oa+7-d.Ta-1)%7;(J==4||J==5&&Le(d.Ua%400-1))&&N++}return w(N,2)},"%w":d=>d.Oa,"%W":d=>w(Math.floor((d.Ta+7-(d.Oa+6)%7)/7),2),"%y":d=>(d.Ua+1900).toString().substring(2),"%Y":d=>d.Ua+1900,"%z":d=>{d=d.ib;var N=0<=d;return d=Math.abs(d)/60,(N?"+":"-")+("0000"+(d/60*100+d%60)).slice(-4)},"%Z":d=>d.lb,"%%":()=>"%"},a=a.replace(/%%/g,"\\0\\0");for(Q in B)a.includes(Q)&&(a=a.replace(new RegExp(Q,"g"),B[Q](s)));return a=a.replace(/\\0\\0/g,"%"),Q=qr(a),Q.length>n?0:(Ae.set(Q,t>>>0),Q.length-1)}for(var hr=Array(256),ze=0;256>ze;++ze)hr[ze]=String.fromCharCode(ze);Ye=hr,Ue=u.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},u.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},Object.assign(er.prototype,{get(t){return this.Sa[t]},has(t){return this.Sa[t]!==void 0},Za(t){var n=this.bb.pop()||this.Sa.length;return this.Sa[n]=t,n},$a(t){this.Sa[t]=void 0,this.bb.push(t)}}),ge.Sa.push({value:void 0},{value:null},{value:!0},{value:!1}),ge.Va=ge.Sa.length,u.count_emval_handles=()=>{for(var t=0,n=ge.Va;n<ge.Sa.length;++n)ge.Sa[n]!==void 0&&++t;return t};var at={a:function(t,n,a){throw t>>>=0,new K(t).Za(n>>>0,a>>>0),oe=t,je++,oe},v:function(){return 0},ba:function(){},N:function(){},P:function(){},H:function(){return 0},$:function(){},V:function(){},_:function(){},B:function(){},O:function(){},L:function(){},aa:function(){},M:function(){},E:function(t,n,a,s,m){n>>>=0,n=_e(n);var w=n.indexOf("u")!=-1;w&&(m=(1n<<64n)-1n),Ce(t>>>0,{name:n,fromWireType:C=>C,toWireType:function(C,A){if(typeof A!="bigint"&&typeof A!="number")throw new TypeError(`Cannot convert "${ur(A)}" to ${this.name}`);if(A<s||A>m)throw new TypeError(`Passing a number "${ur(A)}" from JS side to C/C++ side to an argument of type "${n}", which is outside the valid range [${s}, ${m}]!`);return A},argPackAdvance:8,readValueFromPointer:Lr(n,a>>>0,!w),Wa:null})},ea:function(t,n,a,s){n=_e(n>>>0),Ce(t>>>0,{name:n,fromWireType:function(m){return!!m},toWireType:function(m,w){return w?a:s},argPackAdvance:8,readValueFromPointer:function(m){return this.fromWireType(ee[m>>>0])},Wa:null})},da:function(t,n){n=_e(n>>>0),Ce(t>>>0,{name:n,fromWireType:a=>{var s=pe(a);return lr(a),s},toWireType:(a,s)=>be(s),argPackAdvance:8,readValueFromPointer:rr,Wa:null})},D:function(t,n,a){n=_e(n>>>0),Ce(t>>>0,{name:n,fromWireType:s=>s,toWireType:(s,m)=>m,argPackAdvance:8,readValueFromPointer:kr(n,a>>>0),Wa:null})},p:function(t,n,a,s,m){if(t>>>=0,a>>>=0,n=_e(n>>>0),m===-1&&(m=4294967295),m=A=>A,s===0){var w=32-8*a;m=A=>A<<w>>>w}var C=n.includes("unsigned")?function(A,I){return I>>>0}:function(A,I){return I};Ce(t,{name:n,fromWireType:m,toWireType:C,argPackAdvance:8,readValueFromPointer:Lr(n,a,s!==0),Wa:null})},l:function(t,n,a){function s(w){return new m(Ae.buffer,$[w+4>>>2>>>0],$[w>>>2>>>0])}var m=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][n];a=_e(a>>>0),Ce(t>>>0,{name:a,fromWireType:s,argPackAdvance:8,readValueFromPointer:s},{gb:!0})},F:function(t,n){n=_e(n>>>0);var a=n==="std::string";Ce(t>>>0,{name:n,fromWireType:function(s){var m=$[s>>>2>>>0],w=s+4;if(a)for(var C=w,A=0;A<=m;++A){var I=w+A;if(A==m||ee[I>>>0]==0){if(C=Ke(C,I-C),B===void 0)var B=C;else B+=String.fromCharCode(0),B+=C;C=I+1}}else{for(B=Array(m),A=0;A<m;++A)B[A]=String.fromCharCode(ee[w+A>>>0]);B=B.join("")}return fe(s),B},toWireType:function(s,m){m instanceof ArrayBuffer&&(m=new Uint8Array(m));var w=typeof m=="string";if(!(w||m instanceof Uint8Array||m instanceof Uint8ClampedArray||m instanceof Int8Array))throw new Ue("Cannot pass non-string to std::string");var C=a&&w?Re(m):m.length,A=vr(4+C+1),I=A+4;if($[A>>>2>>>0]=C,a&&w)Fe(m,ee,I,C+1);else if(w)for(w=0;w<C;++w){var B=m.charCodeAt(w);if(255<B)throw fe(I),new Ue("String has UTF-16 code units that do not fit in 8 bits");ee[I+w>>>0]=B}else for(w=0;w<C;++w)ee[I+w>>>0]=m[w];return s!==null&&s.push(fe,A),A},argPackAdvance:8,readValueFromPointer:wr,Wa(s){fe(s)}})},x:function(t,n,a){if(n>>>=0,a>>>=0,a=_e(a),n===2)var s=$r,m=nt,w=F,C=()=>Se,A=1;else n===4&&(s=cr,m=Nr,w=dr,C=()=>$,A=2);Ce(t>>>0,{name:a,fromWireType:I=>{for(var B=$[I>>>2>>>0],Q=C(),ce,De=I+4,d=0;d<=B;++d){var N=I+4+d*n;(d==B||Q[N>>>A]==0)&&(De=s(De,N-De),ce===void 0?ce=De:(ce+=String.fromCharCode(0),ce+=De),De=N+n)}return fe(I),ce},toWireType:(I,B)=>{if(typeof B!="string")throw new Ue(`Cannot pass non-string to C++ string type ${a}`);var Q=w(B),ce=vr(4+Q+n);return $[ce>>>2]=Q>>A,m(B,ce+4,Q+n),I!==null&&I.push(fe,ce),ce},argPackAdvance:8,readValueFromPointer:rr,Wa(I){fe(I)}})},fa:function(t,n){n=_e(n>>>0),Ce(t>>>0,{hb:!0,name:n,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ca:()=>!0,o:function(t,n,a){n>>>=0,a>>>=0,t=pe(t>>>0),n=tr(n,"emval::as");var s=[],m=be(s);return $[a>>>2>>>0]=m,n.toWireType(s,t)},h:function(t,n,a,s,m){a>>>=0,s>>>=0,m>>>=0,t=pr[t>>>0],n=pe(n>>>0),a=nr(a);var w=[];return $[s>>>2>>>0]=be(w),t(n,a,w,m)},r:function(t,n,a,s){a>>>=0,s>>>=0,t=pr[t>>>0],n=pe(n>>>0),a=nr(a),t(n,a,null,s)},b:lr,y:function(t,n){return n>>>=0,t=pe(t>>>0),n=pe(n),t==n},u:function(t){return t>>>=0,t===0?be(Or()):(t=nr(t),be(Or()[t]))},g:function(t,n){var a=Yr(t,n>>>0),s=a[0];n=s.name+"_$"+a.slice(1).map(function(Q){return Q.name}).join("_")+"$";var m=or[n];if(m!==void 0)return m;m=["retType"];for(var w=[s],C="",A=0;A<t-1;++A)C+=(A!==0?", ":"")+"arg"+A,m.push("argType"+A),w.push(a[1+A]);var I="return function "+_r("methodCaller_"+n)+`(handle, name, destructors, args) {\n`,B=0;for(A=0;A<t-1;++A)I+="    var arg"+A+" = argType"+A+".readValueFromPointer(args"+(B?"+"+B:"")+`);\n`,B+=a[A+1].argPackAdvance;for(I+="    var rv = handle[name]("+C+`);\n`,A=0;A<t-1;++A)a[A+1].deleteObject&&(I+="    argType"+A+".deleteObject(arg"+A+`);\n`);return s.hb||(I+=`    return retType.toWireType(destructors, rv);\n`),m.push(I+`};\n`),t=Tr(m).apply(null,w),m=jr(t),or[n]=m},q:function(t,n){return n>>>=0,t=pe(t>>>0),n=pe(n),be(t[n])},c:function(t){t>>>=0,4<t&&(ge.get(t).cb+=1)},G:function(t,n,a,s){a>>>=0,s>>>=0,t=pe(t>>>0);var m=Ar[n];return m||(m=Gr(n),Ar[n]=m),m(t,a,s)},s:function(){return be([])},k:function(t){t=pe(t>>>0);for(var n=Array(t.length),a=0;a<t.length;a++)n[a]=t[a];return be(n)},d:function(t){return be(nr(t>>>0))},j:function(){return be({})},e:function(t){t>>>=0;for(var n=pe(t);n.length;){var a=n.pop();n.pop()(a)}lr(t)},i:function(t,n,a){n>>>=0,a>>>=0,t=pe(t>>>0),n=pe(n),a=pe(a),t[n]=a},f:function(t,n){return n>>>=0,t=tr(t>>>0,"_emval_take_value"),t=t.readValueFromPointer(n),be(t)},S:function(t,n){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t),n>>>=0,t=new Date(1e3*t),E[n>>>2>>>0]=t.getUTCSeconds(),E[n+4>>>2>>>0]=t.getUTCMinutes(),E[n+8>>>2>>>0]=t.getUTCHours(),E[n+12>>>2>>>0]=t.getUTCDate(),E[n+16>>>2>>>0]=t.getUTCMonth(),E[n+20>>>2>>>0]=t.getUTCFullYear()-1900,E[n+24>>>2>>>0]=t.getUTCDay(),E[n+28>>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},T:function(t,n){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t),n>>>=0,t=new Date(1e3*t),E[n>>>2>>>0]=t.getSeconds(),E[n+4>>>2>>>0]=t.getMinutes(),E[n+8>>>2>>>0]=t.getHours(),E[n+12>>>2>>>0]=t.getDate(),E[n+16>>>2>>>0]=t.getMonth(),E[n+20>>>2>>>0]=t.getFullYear()-1900,E[n+24>>>2>>>0]=t.getDay(),E[n+28>>>2>>>0]=(Le(t.getFullYear())?Er:Sr)[t.getMonth()]+t.getDate()-1|0,E[n+36>>>2>>>0]=-(60*t.getTimezoneOffset());var a=new Date(t.getFullYear(),6,1).getTimezoneOffset(),s=new Date(t.getFullYear(),0,1).getTimezoneOffset();E[n+32>>>2>>>0]=(a!=s&&t.getTimezoneOffset()==Math.min(s,a))|0},U:function(t){t>>>=0;var n=new Date(E[t+20>>>2>>>0]+1900,E[t+16>>>2>>>0],E[t+12>>>2>>>0],E[t+8>>>2>>>0],E[t+4>>>2>>>0],E[t>>>2>>>0],0),a=E[t+32>>>2>>>0],s=n.getTimezoneOffset(),m=new Date(n.getFullYear(),6,1).getTimezoneOffset(),w=new Date(n.getFullYear(),0,1).getTimezoneOffset(),C=Math.min(w,m);return 0>a?E[t+32>>>2>>>0]=+(m!=w&&C==s):0<a!=(C==s)&&(m=Math.max(w,m),n.setTime(n.getTime()+6e4*((0<a?C:m)-s))),E[t+24>>>2>>>0]=n.getDay(),E[t+28>>>2>>>0]=(Le(n.getFullYear())?Er:Sr)[n.getMonth()]+n.getDate()-1|0,E[t>>>2>>>0]=n.getSeconds(),E[t+4>>>2>>>0]=n.getMinutes(),E[t+8>>>2>>>0]=n.getHours(),E[t+12>>>2>>>0]=n.getDate(),E[t+16>>>2>>>0]=n.getMonth(),E[t+20>>>2>>>0]=n.getYear(),BigInt(n.getTime()/1e3)},Q:function(){return-52},R:function(){},J:function(t,n,a){function s(I){return(I=I.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?I[1]:"GMT"}a>>>=0;var m=new Date().getFullYear(),w=new Date(m,0,1),C=new Date(m,6,1);m=w.getTimezoneOffset();var A=C.getTimezoneOffset();$[t>>>0>>>2>>>0]=60*Math.max(m,A),E[n>>>0>>>2>>>0]=+(m!=A),t=s(w),n=s(C),t=Cr(t),n=Cr(n),A<m?($[a>>>2>>>0]=t,$[a+4>>>2>>>0]=n):($[a>>>2>>>0]=n,$[a+4>>>2>>>0]=t)},t:()=>{Je("")},C:()=>Date.now(),K:function(){return 4294901760},n:()=>performance.now(),Z:function(t,n,a){return n>>>=0,ee.copyWithin(t>>>0>>>0,n>>>0,n+(a>>>0)>>>0)},I:function(t){t>>>=0;var n=ee.length;if(4294901760<t)return!1;for(var a=1;4>=a;a*=2){var s=n*(1+.2/a);s=Math.min(s,t+100663296);var m=Math;s=Math.max(t,s);e:{m=(m.min.call(m,4294901760,s+(65536-s%65536)%65536)-M.buffer.byteLength+65535)/65536;try{M.grow(m),j();var w=1;break e}catch{}w=void 0}if(w)return!0}return!1},X:function(t,n){t>>>=0,n>>>=0;var a=0;return Mr().forEach((s,m)=>{var w=n+a;for(m=$[t+4*m>>>2>>>0]=w,w=0;w<s.length;++w)Ae[m++>>>0>>>0]=s.charCodeAt(w);Ae[m>>>0>>>0]=0,a+=s.length+1}),0},Y:function(t,n){t>>>=0,n>>>=0;var a=Mr();$[t>>>2>>>0]=a.length;var s=0;return a.forEach(m=>s+=m.length+1),$[n>>>2>>>0]=s,0},w:()=>52,A:function(){return 52},W:function(){return 70},z:function(t,n,a,s){n>>>=0,a>>>=0,s>>>=0;for(var m=0,w=0;w<a;w++){var C=$[n>>>2>>>0],A=$[n+4>>>2>>>0];n+=8;for(var I=0;I<A;I++){var B=ee[C+I>>>0],Q=Vr[t];B===0||B===10?((t===1?Z:H)(sr(Q,0)),Q.length=0):Q.push(B)}m+=A}return $[s>>>2>>>0]=m,0},ga:Te,m:function(t,n,a,s){return Te(t>>>0,n>>>0,a>>>0,s>>>0)}},U=function(){var t={a:at};return de++,Ze(t,function(n){U=n.instance.exports,U=he(),M=U.ha,j(),xe.unshift(U.ia),de--,de==0&&(q!==null&&(clearInterval(q),q=null),le&&(n=le,le=null,n()))}).catch(b),{}}();u._OrtInit=(t,n)=>(u._OrtInit=U.ja)(t,n),u._OrtGetLastError=(t,n)=>(u._OrtGetLastError=U.ka)(t,n),u._OrtCreateSessionOptions=(t,n,a,s,m,w,C,A,I,B)=>(u._OrtCreateSessionOptions=U.la)(t,n,a,s,m,w,C,A,I,B),u._OrtAppendExecutionProvider=(t,n)=>(u._OrtAppendExecutionProvider=U.ma)(t,n),u._OrtAddFreeDimensionOverride=(t,n,a)=>(u._OrtAddFreeDimensionOverride=U.na)(t,n,a),u._OrtAddSessionConfigEntry=(t,n,a)=>(u._OrtAddSessionConfigEntry=U.oa)(t,n,a),u._OrtReleaseSessionOptions=t=>(u._OrtReleaseSessionOptions=U.pa)(t),u._OrtCreateSession=(t,n,a)=>(u._OrtCreateSession=U.qa)(t,n,a),u._OrtReleaseSession=t=>(u._OrtReleaseSession=U.ra)(t),u._OrtGetInputOutputCount=(t,n,a)=>(u._OrtGetInputOutputCount=U.sa)(t,n,a),u._OrtGetInputName=(t,n)=>(u._OrtGetInputName=U.ta)(t,n),u._OrtGetOutputName=(t,n)=>(u._OrtGetOutputName=U.ua)(t,n),u._OrtFree=t=>(u._OrtFree=U.va)(t),u._OrtCreateTensor=(t,n,a,s,m,w)=>(u._OrtCreateTensor=U.wa)(t,n,a,s,m,w),u._OrtGetTensorData=(t,n,a,s,m)=>(u._OrtGetTensorData=U.xa)(t,n,a,s,m),u._OrtReleaseTensor=t=>(u._OrtReleaseTensor=U.ya)(t),u._OrtCreateRunOptions=(t,n,a,s)=>(u._OrtCreateRunOptions=U.za)(t,n,a,s),u._OrtAddRunConfigEntry=(t,n,a)=>(u._OrtAddRunConfigEntry=U.Aa)(t,n,a),u._OrtReleaseRunOptions=t=>(u._OrtReleaseRunOptions=U.Ba)(t),u._OrtCreateBinding=t=>(u._OrtCreateBinding=U.Ca)(t),u._OrtBindInput=(t,n,a)=>(u._OrtBindInput=U.Da)(t,n,a),u._OrtBindOutput=(t,n,a,s)=>(u._OrtBindOutput=U.Ea)(t,n,a,s),u._OrtClearBoundOutputs=t=>(u._OrtClearBoundOutputs=U.Fa)(t),u._OrtReleaseBinding=t=>(u._OrtReleaseBinding=U.Ga)(t),u._OrtRunWithBinding=(t,n,a,s,m)=>(u._OrtRunWithBinding=U.Ha)(t,n,a,s,m),u._OrtRun=(t,n,a,s,m,w,C,A)=>(u._OrtRun=U.Ia)(t,n,a,s,m,w,C,A),u._OrtEndProfiling=t=>(u._OrtEndProfiling=U.Ja)(t);var vr=u._malloc=t=>(vr=u._malloc=U.Ka)(t),fe=u._free=t=>(fe=u._free=U.La)(t),Ur=t=>(Ur=U.Ma)(t);u.__embind_initialize_bindings=()=>(u.__embind_initialize_bindings=U.Na)();var Dr=()=>(Dr=U.Pa)(),we=t=>(we=U.Qa)(t),yr=t=>(yr=U.Ra)(t);function he(){var t=U;t=Object.assign({},t);var n=s=>()=>s()>>>0,a=s=>m=>s(m)>>>0;return t.__errno_location=n(t.__errno_location),t.Ka=a(t.Ka),t.Ma=a(t.Ma),t.Pa=n(t.Pa),t.Ra=a(t.Ra),t}u.stackAlloc=yr,u.stackSave=Dr,u.stackRestore=we,u.UTF8ToString=Ke,u.stringToUTF8=(t,n,a)=>Fe(t,ee,n,a),u.lengthBytesUTF8=Re;var me;le=function t(){me||Ir(),me||(le=t)};function Ir(){if(!(0<de)){for(;0<V.length;)V.shift()(u);if(!(0<de||me||(me=!0,u.calledRun=!0,ue))){for(;0<xe.length;)xe.shift()(u);for(y(u);0<ve.length;)ve.shift()(u)}}}return Ir(),v.ready}})();typeof en=="object"&&typeof bt=="object"?bt.exports=Qt:typeof define=="function"&&define.amd&&define([],()=>Qt)});var tn=Wr(()=>{});var nn=Wr(()=>{});var on={};mt(on,{cpus:()=>Gn});var Gn,an=pt(()=>{Gn=void 0});var fn=Wr((un,wt)=>{"use strict";var sn=(()=>{var c=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(c=c||__filename),function(v={}){function u(){return V.buffer!=q.buffer&&K(),q}function y(){return V.buffer!=q.buffer&&K(),le}function b(){return V.buffer!=q.buffer&&K(),Je}function S(){return V.buffer!=q.buffer&&K(),Ie}function p(){return V.buffer!=q.buffer&&K(),Me}function T(){return V.buffer!=q.buffer&&K(),Ne}function D(){return V.buffer!=q.buffer&&K(),Ze}var l=v,L,Y;l.ready=new Promise((e,r)=>{L=e,Y=r});var R=Object.assign({},l),k="./this.program",G=(e,r)=>{throw r},X=typeof window=="object",Z=typeof importScripts=="function",H=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",M=l.ENVIRONMENT_IS_PTHREAD||!1,ue="";function Ae(e){return l.locateFile?l.locateFile(e,ue):ue+e}var ee,Oe,Se;if(H){var E=(ht(),xr(gt)),$=(yt(),xr(vt));ue=Z?$.dirname(ue)+"/":__dirname+"/",ee=(r,o)=>(r=r.startsWith("file://")?new URL(r):$.normalize(r),E.readFileSync(r,o?void 0:"utf8")),Se=r=>(r=ee(r,!0),r.buffer||(r=new Uint8Array(r)),r),Oe=(r,o,i,f=!0)=>{r=r.startsWith("file://")?new URL(r):$.normalize(r),E.readFile(r,f?void 0:"utf8",(g,O)=>{g?i(g):o(f?O.buffer:O)})},!l.thisProgram&&1<process.argv.length&&(k=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),G=(r,o)=>{throw process.exitCode=r,o},l.inspect=()=>"[Emscripten Module object]";let e;try{e=tn()}catch(r){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),r}global.Worker=e.Worker}else(X||Z)&&(Z?ue=self.location.href:typeof document<"u"&&document.currentScript&&(ue=document.currentScript.src),typeof c<"u"&&c&&(ue=c),ue.indexOf("blob:")!==0?ue=ue.substr(0,ue.replace(/[?#].*/,"").lastIndexOf("/")+1):ue="",H||(ee=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},Z&&(Se=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),Oe=(e,r,o)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{i.status==200||i.status==0&&i.response?r(i.response):o()},i.onerror=o,i.send(null)}));H&&typeof performance>"u"&&(global.performance=nn().performance);var Ge=console.log.bind(console),Ve=console.error.bind(console);H&&(Ge=(...e)=>E.writeSync(1,e.join(" ")+`\n`),Ve=(...e)=>E.writeSync(2,e.join(" ")+`\n`));var qe=Ge,se=Ve;Object.assign(l,R),R=null;var j=!0;typeof WebAssembly!="object"&&We("no native wasm support detected");var V,xe,ve=!1,de,q,le,Je,Ie,Me,Ne,Xe,ye,Pe,Ze;function K(){var e=V.buffer;l.HEAP8=q=new Int8Array(e),l.HEAP16=Je=new Int16Array(e),l.HEAPU8=le=new Uint8Array(e),l.HEAPU16=Ie=new Uint16Array(e),l.HEAP32=Me=new Int32Array(e),l.HEAPU32=Ne=new Uint32Array(e),l.HEAPF32=Xe=new Float32Array(e),l.HEAPF64=Ze=new Float64Array(e),l.HEAP64=ye=new BigInt64Array(e),l.HEAPU64=Pe=new BigUint64Array(e)}var oe=16777216;if(5242880<=oe||We("INITIAL_MEMORY should be larger than STACK_SIZE, was "+oe+"! (STACK_SIZE=5242880)"),M)V=l.wasmMemory;else if(V=new WebAssembly.Memory({initial:oe/65536,maximum:65536,shared:!0}),!(V.buffer instanceof SharedArrayBuffer))throw se("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),H&&se("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");K(),oe=V.buffer.byteLength;var je=[],Be=[],sr=[],Ke=0;function Re(){return j||0<Ke}var Fe=0,ur=null,Ye=null;function _e(){if(Fe--,Fe==0&&(ur!==null&&(clearInterval(ur),ur=null),Ye)){var e=Ye;Ye=null,e()}}function We(e){throw e="Aborted("+e+")",se(e),ve=!0,de=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),Y(e),e}function fr(e){return e.startsWith("data:application/octet-stream;base64,")}var Qe;Qe="ort-wasm-threaded.wasm",fr(Qe)||(Qe=Ae(Qe));function Ue(e){if(Se)return Se(e);throw"both async and sync fetching of the wasm failed"}function tt(e){if(X||Z){if(typeof fetch=="function"&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at \'"+e+"\'";return r.arrayBuffer()}).catch(()=>Ue(e));if(Oe)return new Promise((r,o)=>{Oe(e,i=>r(new Uint8Array(i)),o)})}return Promise.resolve().then(()=>Ue(e))}function Ce(e,r,o){return tt(e).then(i=>WebAssembly.instantiate(i,r)).then(i=>i).then(o,i=>{se(`failed to asynchronously prepare wasm: ${i}`),We(i)})}function Lr(e,r){var o=Qe;return typeof WebAssembly.instantiateStreaming!="function"||fr(o)||o.startsWith("file://")||H||typeof fetch!="function"?Ce(o,e,r):fetch(o,{credentials:"same-origin"}).then(i=>WebAssembly.instantiateStreaming(i,e).then(r,function(f){return se(`wasm streaming compile failed: ${f}`),se("falling back to ArrayBuffer instantiation"),Ce(o,e,r)}))}function er(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var ge=e=>{e.terminate(),e.onmessage=()=>{}},lr=e=>{F.nb.length==0&&($r(),F.Ab(F.nb[0]));var r=F.nb.pop();if(!r)return 6;F.ob.push(r),F.jb[e.mb]=r,r.mb=e.mb;var o={cmd:"run",start_routine:e.Mb,arg:e.Gb,pthread_ptr:e.mb};return H&&r.unref(),r.postMessage(o,e.Sb),0},pe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,be=(e,r,o)=>{r>>>=0;var i=r+o;for(o=r;e[o]&&!(o>=i);)++o;if(16<o-r&&e.buffer&&pe)return pe.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,o):e.subarray(r,o));for(i="";r<o;){var f=e[r++];if(f&128){var g=e[r++]&63;if((f&224)==192)i+=String.fromCharCode((f&31)<<6|g);else{var O=e[r++]&63;f=(f&240)==224?(f&15)<<12|g<<6|O:(f&7)<<18|g<<12|O<<6|e[r++]&63,65536>f?i+=String.fromCharCode(f):(f-=65536,i+=String.fromCharCode(55296|f>>10,56320|f&1023))}}else i+=String.fromCharCode(f)}return i},rr=(e,r)=>(e>>>=0)?be(y(),e,r):"";function kr(e){if(M)return d(0,1,e);de=e,Re()||(F.Nb(),ve=!0),G(e,new er(e))}var wr=e=>{if(de=e,M)throw Nr(e),"unwind";kr(e)};function Hr(){for(var e=l.numThreads;e--;)$r();je.unshift(()=>{Fe++,nt(()=>_e())})}function $r(){var e=Ae("ort-wasm-threaded.worker.js");e=new Worker(e),F.nb.push(e)}function nt(e){M?e():Promise.all(F.nb.map(F.Ab)).then(e)}var F={nb:[],ob:[],Fb:[],jb:{},vb(){M?(F.receiveObjectTransfer=F.Lb,F.threadInitTLS=F.Eb,F.setExitStatus=F.Db,j=!1):Hr()},Db:e=>{de=e},Vb:["$terminateWorker"],Nb:()=>{for(var e of F.ob)ge(e);for(e of F.nb)ge(e);F.nb=[],F.ob=[],F.jb=[]},Cb:e=>{var r=e.mb;delete F.jb[r],F.nb.push(e),F.ob.splice(F.ob.indexOf(e),1),e.mb=0,ut(r)},Lb(){},Eb(){F.Fb.forEach(e=>e())},Ab:e=>new Promise(r=>{e.onmessage=g=>{g=g.data;var O=g.cmd;if(g.targetThread&&g.targetThread!=Zr()){var _=F.jb[g.targetThread];_?_.postMessage(g,g.transferList):se(`Internal error! Worker sent a message "${O}" to target pthread ${g.targetThread}, but that thread no longer exists!`)}else O==="checkMailbox"?ce():O==="spawnThread"?lr(g):O==="cleanupThread"?((g=F.jb[g.thread])||We(),F.Cb(g)):O==="killThread"?(g=g.thread,O=F.jb[g],delete F.jb[g],ge(O),ut(g),F.ob.splice(F.ob.indexOf(O),1),O.mb=0):O==="cancelThread"?F.jb[g.thread].postMessage({cmd:"cancel"}):O==="loaded"?(e.loaded=!0,H&&!e.mb&&e.unref(),r(e)):O==="alert"?alert(`Thread ${g.threadId}: ${g.text}`):g.target==="setimmediate"?e.postMessage(g):O==="callHandler"?l[g.handler](...g.args):O&&se(`worker sent an unknown command ${O}`)},e.onerror=g=>{throw se(`worker sent an error! ${g.filename}:${g.lineno}: ${g.message}`),g},H&&(e.on("message",g=>e.onmessage({data:g})),e.on("error",g=>e.onerror(g)));var o=[],i=[],f;for(f of i)l.hasOwnProperty(f)&&o.push(f);e.postMessage({cmd:"load",handlers:o,urlOrBlob:l.mainScriptUrlOrBlob||c,wasmMemory:V,wasmModule:xe})})};l.PThread=F;var cr=e=>{for(;0<e.length;)e.shift()(l)};l.establishStackSpace=()=>{var e=Zr(),r=T()[e+52>>>2>>>0];e=T()[e+56>>>2>>>0],Xt(r,r-e),Qr(r)};function Nr(e){if(M)return d(1,0,e);wr(e)}var dr=[],tr;l.invokeEntryPoint=(e,r)=>{var o=dr[e];o||(e>=dr.length&&(dr.length=e+1),dr[e]=o=tr.get(e)),e=o(r),Re()?F.Db(e):ft(e)};function ot(e){this.sb=e-24,this.Kb=function(r){T()[this.sb+4>>>2>>>0]=r},this.xb=function(r){T()[this.sb+8>>>2>>>0]=r},this.vb=function(r,o){this.wb(),this.Kb(r),this.xb(o)},this.wb=function(){T()[this.sb+16>>>2>>>0]=0}}var nr=0,pr=0;function Or(e,r,o,i){return M?d(2,1,e,r,o,i):jr(e,r,o,i)}function jr(e,r,o,i){if(e>>>=0,r>>>=0,o>>>=0,i>>>=0,typeof SharedArrayBuffer>"u")return se("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var f=[];return M&&f.length===0?Or(e,r,o,i):(e={Mb:o,mb:e,Gb:i,Sb:f},M?(e.Ub="spawnThread",postMessage(e,f),0):lr(e))}function Yr(e,r,o){return M?d(3,1,e,r,o):0}function _r(e,r){if(M)return d(4,1,e,r)}var or=e=>{for(var r=0,o=0;o<e.length;++o){var i=e.charCodeAt(o);127>=i?r++:2047>=i?r+=2:55296<=i&&57343>=i?(r+=4,++o):r+=3}return r},zr=(e,r,o,i)=>{if(o>>>=0,!(0<i))return 0;var f=o;i=o+i-1;for(var g=0;g<e.length;++g){var O=e.charCodeAt(g);if(55296<=O&&57343>=O){var _=e.charCodeAt(++g);O=65536+((O&1023)<<10)|_&1023}if(127>=O){if(o>=i)break;r[o++>>>0]=O}else{if(2047>=O){if(o+1>=i)break;r[o++>>>0]=192|O>>6}else{if(65535>=O){if(o+2>=i)break;r[o++>>>0]=224|O>>12}else{if(o+3>=i)break;r[o++>>>0]=240|O>>18,r[o++>>>0]=128|O>>12&63}r[o++>>>0]=128|O>>6&63}r[o++>>>0]=128|O&63}}return r[o>>>0]=0,o-f},Tr=(e,r,o)=>zr(e,y(),r,o);function Gr(e,r){if(M)return d(5,1,e,r)}function Ar(e,r,o){if(M)return d(6,1,e,r,o)}function Le(e,r,o){return M?d(7,1,e,r,o):0}function Er(e,r){if(M)return d(8,1,e,r)}function Sr(e,r,o){if(M)return d(9,1,e,r,o)}function Cr(e,r,o,i){if(M)return d(10,1,e,r,o,i)}function mr(e,r,o,i){if(M)return d(11,1,e,r,o,i)}function Mr(e,r,o,i){if(M)return d(12,1,e,r,o,i)}function gr(e){if(M)return d(13,1,e)}function Vr(e,r){if(M)return d(14,1,e,r)}function Pr(e,r,o){if(M)return d(15,1,e,r,o)}var Fr=e=>{if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e},qr,Te=e=>{for(var r="";y()[e>>>0];)r+=qr[y()[e++>>>0]];return r},hr={},ze={},at={},U;function vr(e,r,o={}){var i=r.name;if(!e)throw new U(`type "${i}" must have a positive integer typeid pointer`);if(ze.hasOwnProperty(e)){if(o.Ib)return;throw new U(`Cannot register type \'${i}\' twice`)}ze[e]=r,delete at[e],hr.hasOwnProperty(e)&&(r=hr[e],delete hr[e],r.forEach(f=>f()))}function fe(e,r,o={}){if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");vr(e,r,o)}var Ur=(e,r,o)=>{switch(r){case 1:return o?i=>u()[i>>>0>>>0]:i=>y()[i>>>0>>>0];case 2:return o?i=>b()[i>>>1>>>0]:i=>S()[i>>>1>>>0];case 4:return o?i=>p()[i>>>2>>>0]:i=>T()[i>>>2>>>0];case 8:return o?i=>ye[i>>>3]:i=>Pe[i>>>3];default:throw new TypeError(`invalid integer width (${r}): ${e}`)}};function Dr(){this.lb=[void 0],this.zb=[]}var we=new Dr;function yr(e){e>>>=0,e>=we.sb&&--we.get(e).Bb===0&&we.xb(e)}var he=e=>{if(!e)throw new U("Cannot use deleted val. handle = "+e);return we.get(e).value},me=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return we.wb({Bb:1,value:e})}};function Ir(e){return this.fromWireType(p()[e>>>2>>>0])}var t=(e,r)=>{switch(r){case 4:return function(o){var i=this.fromWireType;return V.buffer!=q.buffer&&K(),i.call(this,Xe[o>>>2>>>0])};case 8:return function(o){return this.fromWireType(D()[o>>>3>>>0])};default:throw new TypeError(`invalid float width (${r}): ${e}`)}};function n(e){return this.fromWireType(T()[e>>>2>>>0])}var a=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,s=(e,r)=>{for(var o=e>>1,i=o+r/2;!(o>=i)&&S()[o>>>0];)++o;if(o<<=1,32<o-e&&a)return a.decode(y().slice(e,o));for(o="",i=0;!(i>=r/2);++i){var f=b()[e+2*i>>>1>>>0];if(f==0)break;o+=String.fromCharCode(f)}return o},m=(e,r,o)=>{if(o===void 0&&(o=2147483647),2>o)return 0;o-=2;var i=r;o=o<2*e.length?o/2:e.length;for(var f=0;f<o;++f){var g=e.charCodeAt(f);b()[r>>>1>>>0]=g,r+=2}return b()[r>>>1>>>0]=0,r-i},w=e=>2*e.length,C=(e,r)=>{for(var o=0,i="";!(o>=r/4);){var f=p()[e+4*o>>>2>>>0];if(f==0)break;++o,65536<=f?(f-=65536,i+=String.fromCharCode(55296|f>>10,56320|f&1023)):i+=String.fromCharCode(f)}return i},A=(e,r,o)=>{if(r>>>=0,o===void 0&&(o=2147483647),4>o)return 0;var i=r;o=i+o-4;for(var f=0;f<e.length;++f){var g=e.charCodeAt(f);if(55296<=g&&57343>=g){var O=e.charCodeAt(++f);g=65536+((g&1023)<<10)|O&1023}if(p()[r>>>2>>>0]=g,r+=4,r+4>o)break}return p()[r>>>2>>>0]=0,r-i},I=e=>{for(var r=0,o=0;o<e.length;++o){var i=e.charCodeAt(o);55296<=i&&57343>=i&&++o,r+=4}return r},B=e=>{if(!ve)try{if(e(),!Re())try{M?ft(de):wr(de)}catch(r){r instanceof er||r=="unwind"||G(1,r)}}catch(r){r instanceof er||r=="unwind"||G(1,r)}};function Q(e){e>>>=0,typeof Atomics.Tb=="function"&&(Atomics.Tb(p(),e>>>2,e).value.then(ce),e+=128,Atomics.store(p(),e>>>2,1))}l.__emscripten_thread_mailbox_await=Q;var ce=()=>{var e=Zr();e&&(Q(e),B(()=>Jt()))};l.checkMailbox=ce;var De=e=>{var r=lt();return e=e(),Qr(r),e};function d(e,r){var o=arguments.length-2,i=arguments;return De(()=>{for(var f=2*o,g=ct(8*f),O=g>>>3,_=0;_<o;_++){var W=i[2+_];typeof W=="bigint"?(ye[O+2*_]=1n,ye[O+2*_+1]=W):(ye[O+2*_]=0n,D()[O+2*_+1>>>0]=W)}return qt(e,f,g,r)})}var N=[],J=(e,r)=>{var o=ze[e];if(o===void 0)throw e=Gt(e),o=Te(e),He(e),new U(r+" has unknown type "+o);return o},ke={},ar=e=>{var r=ke[e];return r===void 0?Te(e):r},Jr=[],St=()=>typeof globalThis=="object"?globalThis:Function("return this")(),Pn=e=>{var r=Jr.length;return Jr.push(e),r},Fn=(e,r)=>{for(var o=Array(e),i=0;i<e;++i)o[i]=J(T()[r+4*i>>>2>>>0],"parameter "+i);return o},Ct=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var r=e.charCodeAt(0);return 48<=r&&57>=r?`_${e}`:e},Mt={};function Un(e,r){return e=Ct(e),{[e]:function(){return r.apply(this,arguments)}}[e]}function Dn(e){var r=Function;if(!(r instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof r} which is not a function`);var o=Un(r.name||"unknownFunctionName",function(){});return o.prototype=r.prototype,o=new o,e=r.apply(o,e),e instanceof Object?e:o}var In=e=>{for(var r="",o=0;o<e;++o)r+=(o!==0?", ":"")+"arg"+o;var i="return function emval_allocator_"+e+`(constructor, argTypes, args) {\n  var HEAPU32 = getMemory();\n`;for(o=0;o<e;++o)i+="var argType"+o+" = requireRegisteredType(HEAPU32[((argTypes)>>>2)], \'parameter "+o+`\');\nvar arg`+o+" = argType"+o+`.readValueFromPointer(args);\nargs += argType`+o+`[\'argPackAdvance\'];\nargTypes += 4;\n`;return new Function("requireRegisteredType","Module","valueToHandle","getMemory",i+("var obj = new constructor("+r+`);\nreturn valueToHandle(obj);\n}\n`))(J,l,me,()=>T())},Pt={},br=e=>e%4===0&&(e%100!==0||e%400===0),Ft=[0,31,60,91,121,152,182,213,244,274,305,335],Ut=[0,31,59,90,120,151,181,212,243,273,304,334];function Dt(e,r,o,i,f,g,O){return M?d(16,1,e,r,o,i,f,g,O):-52}function It(e,r,o,i,f,g){if(M)return d(17,1,e,r,o,i,f,g)}var Wt=e=>{var r=or(e)+1,o=Kr(r);return o&&Tr(e,o,r),o},it={},xt=()=>{if(!st){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:k||"./this.program"},r;for(r in it)it[r]===void 0?delete e[r]:e[r]=it[r];var o=[];for(r in e)o.push(`${r}=${e[r]}`);st=o}return st},st;function Bt(e,r){if(M)return d(18,1,e,r);e>>>=0,r>>>=0;var o=0;return xt().forEach((i,f)=>{var g=r+o;for(f=T()[e+4*f>>>2>>>0]=g,g=0;g<i.length;++g)u()[f++>>>0>>>0]=i.charCodeAt(g);u()[f>>>0>>>0]=0,o+=i.length+1}),0}function Rt(e,r){if(M)return d(19,1,e,r);e>>>=0,r>>>=0;var o=xt();T()[e>>>2>>>0]=o.length;var i=0;return o.forEach(f=>i+=f.length+1),T()[r>>>2>>>0]=i,0}function Lt(e){return M?d(20,1,e):52}function kt(e,r,o,i){return M?d(21,1,e,r,o,i):52}function Ht(e,r,o,i){return M?d(22,1,e,r,o,i):70}var Wn=[null,[],[]];function $t(e,r,o,i){if(M)return d(23,1,e,r,o,i);r>>>=0,o>>>=0,i>>>=0;for(var f=0,g=0;g<o;g++){var O=T()[r>>>2>>>0],_=T()[r+4>>>2>>>0];r+=8;for(var W=0;W<_;W++){var x=y()[O+W>>>0],re=Wn[e];x===0||x===10?((e===1?qe:se)(be(re,0)),re.length=0):re.push(x)}f+=_}return T()[i>>>2>>>0]=f,0}var Nt=[31,29,31,30,31,30,31,31,30,31,30,31],jt=[31,28,31,30,31,30,31,31,30,31,30,31];function xn(e){var r=Array(or(e)+1);return zr(e,r,0,r.length),r}var Bn=(e,r)=>{u().set(e,r>>>0)};function Yt(e,r,o,i){function f(h,z,te){for(h=typeof h=="number"?h.toString():h||"";h.length<z;)h=te[0]+h;return h}function g(h,z){return f(h,z,"0")}function O(h,z){function te(Kt){return 0>Kt?-1:0<Kt?1:0}var ir;return(ir=te(h.getFullYear()-z.getFullYear()))===0&&(ir=te(h.getMonth()-z.getMonth()))===0&&(ir=te(h.getDate()-z.getDate())),ir}function _(h){switch(h.getDay()){case 0:return new Date(h.getFullYear()-1,11,29);case 1:return h;case 2:return new Date(h.getFullYear(),0,3);case 3:return new Date(h.getFullYear(),0,2);case 4:return new Date(h.getFullYear(),0,1);case 5:return new Date(h.getFullYear()-1,11,31);case 6:return new Date(h.getFullYear()-1,11,30)}}function W(h){var z=h.pb;for(h=new Date(new Date(h.qb+1900,0,1).getTime());0<z;){var te=h.getMonth(),ir=(br(h.getFullYear())?Nt:jt)[te];if(z>ir-h.getDate())z-=ir-h.getDate()+1,h.setDate(1),11>te?h.setMonth(te+1):(h.setMonth(0),h.setFullYear(h.getFullYear()+1));else{h.setDate(h.getDate()+z);break}}return te=new Date(h.getFullYear()+1,0,4),z=_(new Date(h.getFullYear(),0,4)),te=_(te),0>=O(z,h)?0>=O(te,h)?h.getFullYear()+1:h.getFullYear():h.getFullYear()-1}e>>>=0,r>>>=0,o>>>=0,i>>>=0;var x=T()[i+40>>>2>>>0];i={Qb:p()[i>>>2>>>0],Pb:p()[i+4>>>2>>>0],tb:p()[i+8>>>2>>>0],yb:p()[i+12>>>2>>>0],ub:p()[i+16>>>2>>>0],qb:p()[i+20>>>2>>>0],kb:p()[i+24>>>2>>>0],pb:p()[i+28>>>2>>>0],Wb:p()[i+32>>>2>>>0],Ob:p()[i+36>>>2>>>0],Rb:x?rr(x):""},o=rr(o),x={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var re in x)o=o.replace(new RegExp(re,"g"),x[re]);var Ee="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),$e="January February March April May June July August September October November December".split(" ");x={"%a":h=>Ee[h.kb].substring(0,3),"%A":h=>Ee[h.kb],"%b":h=>$e[h.ub].substring(0,3),"%B":h=>$e[h.ub],"%C":h=>g((h.qb+1900)/100|0,2),"%d":h=>g(h.yb,2),"%e":h=>f(h.yb,2," "),"%g":h=>W(h).toString().substring(2),"%G":h=>W(h),"%H":h=>g(h.tb,2),"%I":h=>(h=h.tb,h==0?h=12:12<h&&(h-=12),g(h,2)),"%j":h=>{for(var z=0,te=0;te<=h.ub-1;z+=(br(h.qb+1900)?Nt:jt)[te++]);return g(h.yb+z,3)},"%m":h=>g(h.ub+1,2),"%M":h=>g(h.Pb,2),"%n":()=>`\n`,"%p":h=>0<=h.tb&&12>h.tb?"AM":"PM","%S":h=>g(h.Qb,2),"%t":()=>"	","%u":h=>h.kb||7,"%U":h=>g(Math.floor((h.pb+7-h.kb)/7),2),"%V":h=>{var z=Math.floor((h.pb+7-(h.kb+6)%7)/7);if(2>=(h.kb+371-h.pb-2)%7&&z++,z)z==53&&(te=(h.kb+371-h.pb)%7,te==4||te==3&&br(h.qb)||(z=1));else{z=52;var te=(h.kb+7-h.pb-1)%7;(te==4||te==5&&br(h.qb%400-1))&&z++}return g(z,2)},"%w":h=>h.kb,"%W":h=>g(Math.floor((h.pb+7-(h.kb+6)%7)/7),2),"%y":h=>(h.qb+1900).toString().substring(2),"%Y":h=>h.qb+1900,"%z":h=>{h=h.Ob;var z=0<=h;return h=Math.abs(h)/60,(z?"+":"-")+("0000"+(h/60*100+h%60)).slice(-4)},"%Z":h=>h.Rb,"%%":()=>"%"},o=o.replace(/%%/g,"\\0\\0");for(re in x)o.includes(re)&&(o=o.replace(new RegExp(re,"g"),x[re](i)));return o=o.replace(/\\0\\0/g,"%"),re=xn(o),re.length>r?0:(Bn(re,e),re.length-1)}F.vb();for(var zt=Array(256),Xr=0;256>Xr;++Xr)zt[Xr]=String.fromCharCode(Xr);qr=zt,U=l.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},l.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Object.assign(Dr.prototype,{get(e){return this.lb[e]},has(e){return this.lb[e]!==void 0},wb(e){var r=this.zb.pop()||this.lb.length;return this.lb[r]=e,r},xb(e){this.lb[e]=void 0,this.zb.push(e)}}),we.lb.push({value:void 0},{value:null},{value:!0},{value:!1}),we.sb=we.lb.length,l.count_emval_handles=()=>{for(var e=0,r=we.sb;r<we.lb.length;++r)we.lb[r]!==void 0&&++e;return e};var Rn=[kr,Nr,Or,Yr,_r,Gr,Ar,Le,Er,Sr,Cr,mr,Mr,gr,Vr,Pr,Dt,It,Bt,Rt,Lt,kt,Ht,$t],Ln={b:function(e,r,o){throw e>>>=0,new ot(e).vb(r>>>0,o>>>0),nr=e,pr++,nr},ea:function(e){Vt(e>>>0,!Z,1,!X,131072,!1),F.Eb()},E:function(e){e>>>=0,M?postMessage({cmd:"cleanupThread",thread:e}):((e=F.jb[e])||We(),F.Cb(e))},W:jr,y:Yr,ka:_r,S:Gr,U:Ar,L:Le,ia:Er,ba:Sr,ha:Cr,G:mr,T:Mr,Q:gr,ja:Vr,R:Pr,J:function(e,r,o,i,f){e>>>=0,r>>>=0,o>>>=0,r=Te(r);var g=r.indexOf("u")!=-1;g&&(f=(1n<<64n)-1n),fe(e,{name:r,fromWireType:O=>O,toWireType:function(O,_){if(typeof _!="bigint"&&typeof _!="number")throw new TypeError(`Cannot convert "${Fr(_)}" to ${this.name}`);if(_<i||_>f)throw new TypeError(`Passing a number "${Fr(_)}" from JS side to C/C++ side to an argument of type "${r}", which is outside the valid range [${i}, ${f}]!`);return _},argPackAdvance:8,readValueFromPointer:Ur(r,o,!g),rb:null})},qa:function(e,r,o,i){e>>>=0,r=Te(r>>>0),fe(e,{name:r,fromWireType:function(f){return!!f},toWireType:function(f,g){return g?o:i},argPackAdvance:8,readValueFromPointer:function(f){return this.fromWireType(y()[f>>>0])},rb:null})},pa:function(e,r){e>>>=0,r=Te(r>>>0),fe(e,{name:r,fromWireType:o=>{var i=he(o);return yr(o),i},toWireType:(o,i)=>me(i),argPackAdvance:8,readValueFromPointer:Ir,rb:null})},I:function(e,r,o){e>>>=0,o>>>=0,r=Te(r>>>0),fe(e,{name:r,fromWireType:i=>i,toWireType:(i,f)=>f,argPackAdvance:8,readValueFromPointer:t(r,o),rb:null})},u:function(e,r,o,i,f){if(e>>>=0,o>>>=0,r=Te(r>>>0),f===-1&&(f=4294967295),f=_=>_,i===0){var g=32-8*o;f=_=>_<<g>>>g}var O=r.includes("unsigned")?function(_,W){return W>>>0}:function(_,W){return W};fe(e,{name:r,fromWireType:f,toWireType:O,argPackAdvance:8,readValueFromPointer:Ur(r,o,i!==0),rb:null})},m:function(e,r,o){function i(g){var O=T()[g>>>2>>>0];return g=T()[g+4>>>2>>>0],new f(u().buffer,g,O)}e>>>=0;var f=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][r];o=Te(o>>>0),fe(e,{name:o,fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{Ib:!0})},K:function(e,r){e>>>=0,r=Te(r>>>0);var o=r==="std::string";fe(e,{name:r,fromWireType:function(i){var f=T()[i>>>2>>>0],g=i+4;if(o)for(var O=g,_=0;_<=f;++_){var W=g+_;if(_==f||y()[W>>>0]==0){if(O=rr(O,W-O),x===void 0)var x=O;else x+=String.fromCharCode(0),x+=O;O=W+1}}else{for(x=Array(f),_=0;_<f;++_)x[_]=String.fromCharCode(y()[g+_>>>0]);x=x.join("")}return He(i),x},toWireType:function(i,f){f instanceof ArrayBuffer&&(f=new Uint8Array(f));var g=typeof f=="string";if(!(g||f instanceof Uint8Array||f instanceof Uint8ClampedArray||f instanceof Int8Array))throw new U("Cannot pass non-string to std::string");var O=o&&g?or(f):f.length,_=Kr(4+O+1),W=_+4;if(T()[_>>>2>>>0]=O,o&&g)Tr(f,W,O+1);else if(g)for(g=0;g<O;++g){var x=f.charCodeAt(g);if(255<x)throw He(W),new U("String has UTF-16 code units that do not fit in 8 bits");y()[W+g>>>0]=x}else for(g=0;g<O;++g)y()[W+g>>>0]=f[g];return i!==null&&i.push(He,_),_},argPackAdvance:8,readValueFromPointer:n,rb(i){He(i)}})},A:function(e,r,o){if(e>>>=0,r>>>=0,o>>>=0,o=Te(o),r===2)var i=s,f=m,g=w,O=()=>S(),_=1;else r===4&&(i=C,f=A,g=I,O=()=>T(),_=2);fe(e,{name:o,fromWireType:W=>{for(var x=T()[W>>>2>>>0],re=O(),Ee,$e=W+4,h=0;h<=x;++h){var z=W+4+h*r;(h==x||re[z>>>_]==0)&&($e=i($e,z-$e),Ee===void 0?Ee=$e:(Ee+=String.fromCharCode(0),Ee+=$e),$e=z+r)}return He(W),Ee},toWireType:(W,x)=>{if(typeof x!="string")throw new U(`Cannot pass non-string to C++ string type ${o}`);var re=g(x),Ee=Kr(4+re+r);return T()[Ee>>>2]=re>>_,f(x,Ee+4,re+r),W!==null&&W.push(He,Ee),Ee},argPackAdvance:8,readValueFromPointer:Ir,rb(W){He(W)}})},ra:function(e,r){e>>>=0,r=Te(r>>>0),fe(e,{Jb:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},na:()=>!0,O:function(e,r){e>>>=0,e==r>>>0?setTimeout(()=>ce()):M?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=F.jb[e])&&e.postMessage({cmd:"checkMailbox"})},X:function(e,r,o,i){r>>>=0,o/=2,N.length=o,i=i>>>0>>>3;for(var f=0;f<o;f++)N[f]=ye[i+2*f]?ye[i+2*f+1]:D()[i+2*f+1>>>0];return e=Rn[e],F.Hb=r,r=e.apply(null,N),F.Hb=0,r},da:Q,ma:function(e){H&&F.jb[e>>>0].ref()},r:function(e,r,o){r>>>=0,o>>>=0,e=he(e>>>0),r=J(r,"emval::as");var i=[],f=me(i);return T()[o>>>2>>>0]=f,r.toWireType(i,e)},i:function(e,r,o,i,f){o>>>=0,i>>>=0,f>>>=0,e=Jr[e>>>0],r=he(r>>>0),o=ar(o);var g=[];return T()[i>>>2>>>0]=me(g),e(r,o,g,f)},s:function(e,r,o,i){o>>>=0,i>>>=0,e=Jr[e>>>0],r=he(r>>>0),o=ar(o),e(r,o,null,i)},c:yr,B:function(e,r){return r>>>=0,e=he(e>>>0),r=he(r),e==r},o:function(e){return e>>>=0,e===0?me(St()):(e=ar(e),me(St()[e]))},g:function(e,r){var o=Fn(e,r>>>0),i=o[0];r=i.name+"_$"+o.slice(1).map(function(re){return re.name}).join("_")+"$";var f=Mt[r];if(f!==void 0)return f;f=["retType"];for(var g=[i],O="",_=0;_<e-1;++_)O+=(_!==0?", ":"")+"arg"+_,f.push("argType"+_),g.push(o[1+_]);var W="return function "+Ct("methodCaller_"+r)+`(handle, name, destructors, args) {\n`,x=0;for(_=0;_<e-1;++_)W+="    var arg"+_+" = argType"+_+".readValueFromPointer(args"+(x?"+"+x:"")+`);\n`,x+=o[_+1].argPackAdvance;for(W+="    var rv = handle[name]("+O+`);\n`,_=0;_<e-1;++_)o[_+1].deleteObject&&(W+="    argType"+_+".deleteObject(arg"+_+`);\n`);return i.Jb||(W+=`    return retType.toWireType(destructors, rv);\n`),f.push(W+`};\n`),e=Dn(f).apply(null,g),f=Pn(e),Mt[r]=f},q:function(e,r){return r>>>=0,e=he(e>>>0),r=he(r),me(e[r])},d:function(e){e>>>=0,4<e&&(we.get(e).Bb+=1)},x:function(e,r,o,i){o>>>=0,i>>>=0,e=he(e>>>0);var f=Pt[r];return f||(f=In(r),Pt[r]=f),f(e,o,i)},v:function(){return me([])},l:function(e){e=he(e>>>0);for(var r=Array(e.length),o=0;o<e.length;o++)r[o]=e[o];return me(r)},e:function(e){return me(ar(e>>>0))},k:function(){return me({})},f:function(e){e>>>=0;for(var r=he(e);r.length;){var o=r.pop();r.pop()(o)}yr(e)},j:function(e,r,o){r>>>=0,o>>>=0,e=he(e>>>0),r=he(r),o=he(o),e[r]=o},h:function(e,r){return r>>>=0,e=J(e>>>0,"_emval_take_value"),e=e.readValueFromPointer(r),me(e)},_:function(e,r){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),r>>>=0,e=new Date(1e3*e),p()[r>>>2>>>0]=e.getUTCSeconds(),p()[r+4>>>2>>>0]=e.getUTCMinutes(),p()[r+8>>>2>>>0]=e.getUTCHours(),p()[r+12>>>2>>>0]=e.getUTCDate(),p()[r+16>>>2>>>0]=e.getUTCMonth(),p()[r+20>>>2>>>0]=e.getUTCFullYear()-1900,p()[r+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,p()[r+28>>>2>>>0]=e},$:function(e,r){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),r>>>=0,e=new Date(1e3*e),p()[r>>>2>>>0]=e.getSeconds(),p()[r+4>>>2>>>0]=e.getMinutes(),p()[r+8>>>2>>>0]=e.getHours(),p()[r+12>>>2>>>0]=e.getDate(),p()[r+16>>>2>>>0]=e.getMonth(),p()[r+20>>>2>>>0]=e.getFullYear()-1900,p()[r+24>>>2>>>0]=e.getDay();var o=(br(e.getFullYear())?Ft:Ut)[e.getMonth()]+e.getDate()-1|0;p()[r+28>>>2>>>0]=o,p()[r+36>>>2>>>0]=-(60*e.getTimezoneOffset()),o=new Date(e.getFullYear(),6,1).getTimezoneOffset();var i=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(o!=i&&e.getTimezoneOffset()==Math.min(i,o))|0,p()[r+32>>>2>>>0]=e},aa:function(e){e>>>=0;var r=new Date(p()[e+20>>>2>>>0]+1900,p()[e+16>>>2>>>0],p()[e+12>>>2>>>0],p()[e+8>>>2>>>0],p()[e+4>>>2>>>0],p()[e>>>2>>>0],0),o=p()[e+32>>>2>>>0],i=r.getTimezoneOffset(),f=new Date(r.getFullYear(),6,1).getTimezoneOffset(),g=new Date(r.getFullYear(),0,1).getTimezoneOffset(),O=Math.min(g,f);return 0>o?p()[e+32>>>2>>>0]=+(f!=g&&O==i):0<o!=(O==i)&&(f=Math.max(g,f),r.setTime(r.getTime()+6e4*((0<o?O:f)-i))),p()[e+24>>>2>>>0]=r.getDay(),o=(br(r.getFullYear())?Ft:Ut)[r.getMonth()]+r.getDate()-1|0,p()[e+28>>>2>>>0]=o,p()[e>>>2>>>0]=r.getSeconds(),p()[e+4>>>2>>>0]=r.getMinutes(),p()[e+8>>>2>>>0]=r.getHours(),p()[e+12>>>2>>>0]=r.getDate(),p()[e+16>>>2>>>0]=r.getMonth(),p()[e+20>>>2>>>0]=r.getYear(),BigInt(r.getTime()/1e3)},Y:Dt,Z:It,N:function(e,r,o){function i(x){return(x=x.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?x[1]:"GMT"}e>>>=0,r>>>=0,o>>>=0;var f=new Date().getFullYear(),g=new Date(f,0,1),O=new Date(f,6,1);f=g.getTimezoneOffset();var _=O.getTimezoneOffset(),W=Math.max(f,_);T()[e>>>2>>>0]=60*W,p()[r>>>2>>>0]=+(f!=_),e=i(g),r=i(O),e=Wt(e),r=Wt(r),_<f?(T()[o>>>2>>>0]=e,T()[o+4>>>2>>>0]=r):(T()[o>>>2>>>0]=r,T()[o+4>>>2>>>0]=e)},n:()=>{We("")},F:()=>{},H:()=>Date.now(),la:()=>{throw Ke+=1,"unwind"},P:function(){return 4294901760},t:()=>performance.timeOrigin+performance.now(),w:()=>H?(an(),xr(on)).cpus().length:navigator.hardwareConcurrency,M:function(e){e>>>=0;var r=y().length;if(e<=r||4294901760<e)return!1;for(var o=1;4>=o;o*=2){var i=r*(1+.2/o);i=Math.min(i,e+100663296);var f=Math;i=Math.max(e,i);e:{f=(f.min.call(f,4294901760,i+(65536-i%65536)%65536)-V.buffer.byteLength+65535)/65536;try{V.grow(f),K();var g=1;break e}catch{}g=void 0}if(g)return!0}return!1},fa:Bt,ga:Rt,V:wr,z:Lt,D:kt,ca:Ht,C:$t,a:V||l.wasmMemory,oa:Yt,p:function(e,r,o,i){return Yt(e>>>0,r>>>0,o>>>0,i>>>0)}},P=function(){var e={a:Ln};return Fe++,Lr(e,function(r){var o=r.module;P=r.instance.exports,P=kn(),F.Fb.push(P.Xa),tr=P._a,Be.unshift(P.sa),xe=o,_e()}).catch(Y),{}}();l._OrtInit=(e,r)=>(l._OrtInit=P.ta)(e,r),l._OrtGetLastError=(e,r)=>(l._OrtGetLastError=P.ua)(e,r),l._OrtCreateSessionOptions=(e,r,o,i,f,g,O,_,W,x)=>(l._OrtCreateSessionOptions=P.va)(e,r,o,i,f,g,O,_,W,x),l._OrtAppendExecutionProvider=(e,r)=>(l._OrtAppendExecutionProvider=P.wa)(e,r),l._OrtAddFreeDimensionOverride=(e,r,o)=>(l._OrtAddFreeDimensionOverride=P.xa)(e,r,o),l._OrtAddSessionConfigEntry=(e,r,o)=>(l._OrtAddSessionConfigEntry=P.ya)(e,r,o),l._OrtReleaseSessionOptions=e=>(l._OrtReleaseSessionOptions=P.za)(e),l._OrtCreateSession=(e,r,o)=>(l._OrtCreateSession=P.Aa)(e,r,o),l._OrtReleaseSession=e=>(l._OrtReleaseSession=P.Ba)(e),l._OrtGetInputOutputCount=(e,r,o)=>(l._OrtGetInputOutputCount=P.Ca)(e,r,o),l._OrtGetInputName=(e,r)=>(l._OrtGetInputName=P.Da)(e,r),l._OrtGetOutputName=(e,r)=>(l._OrtGetOutputName=P.Ea)(e,r),l._OrtFree=e=>(l._OrtFree=P.Fa)(e),l._OrtCreateTensor=(e,r,o,i,f,g)=>(l._OrtCreateTensor=P.Ga)(e,r,o,i,f,g),l._OrtGetTensorData=(e,r,o,i,f)=>(l._OrtGetTensorData=P.Ha)(e,r,o,i,f),l._OrtReleaseTensor=e=>(l._OrtReleaseTensor=P.Ia)(e),l._OrtCreateRunOptions=(e,r,o,i)=>(l._OrtCreateRunOptions=P.Ja)(e,r,o,i),l._OrtAddRunConfigEntry=(e,r,o)=>(l._OrtAddRunConfigEntry=P.Ka)(e,r,o),l._OrtReleaseRunOptions=e=>(l._OrtReleaseRunOptions=P.La)(e),l._OrtCreateBinding=e=>(l._OrtCreateBinding=P.Ma)(e),l._OrtBindInput=(e,r,o)=>(l._OrtBindInput=P.Na)(e,r,o),l._OrtBindOutput=(e,r,o,i)=>(l._OrtBindOutput=P.Oa)(e,r,o,i),l._OrtClearBoundOutputs=e=>(l._OrtClearBoundOutputs=P.Pa)(e),l._OrtReleaseBinding=e=>(l._OrtReleaseBinding=P.Qa)(e),l._OrtRunWithBinding=(e,r,o,i,f)=>(l._OrtRunWithBinding=P.Ra)(e,r,o,i,f),l._OrtRun=(e,r,o,i,f,g,O,_)=>(l._OrtRun=P.Sa)(e,r,o,i,f,g,O,_),l._OrtEndProfiling=e=>(l._OrtEndProfiling=P.Ta)(e);var Zr=l._pthread_self=()=>(Zr=l._pthread_self=P.Ua)(),Kr=l._malloc=e=>(Kr=l._malloc=P.Va)(e),He=l._free=e=>(He=l._free=P.Wa)(e);l.__emscripten_tls_init=()=>(l.__emscripten_tls_init=P.Xa)();var Gt=e=>(Gt=P.Ya)(e);l.__embind_initialize_bindings=()=>(l.__embind_initialize_bindings=P.Za)();var Vt=l.__emscripten_thread_init=(e,r,o,i,f,g)=>(Vt=l.__emscripten_thread_init=P.$a)(e,r,o,i,f,g);l.__emscripten_thread_crashed=()=>(l.__emscripten_thread_crashed=P.ab)();var qt=(e,r,o,i)=>(qt=P.bb)(e,r,o,i),ut=e=>(ut=P.cb)(e),ft=l.__emscripten_thread_exit=e=>(ft=l.__emscripten_thread_exit=P.db)(e),Jt=l.__emscripten_check_mailbox=()=>(Jt=l.__emscripten_check_mailbox=P.eb)(),Xt=(e,r)=>(Xt=P.fb)(e,r),lt=()=>(lt=P.gb)(),Qr=e=>(Qr=P.hb)(e),ct=e=>(ct=P.ib)(e);function kn(){var e=P;e=Object.assign({},e);var r=i=>()=>i()>>>0,o=i=>f=>i(f)>>>0;return e.__errno_location=r(e.__errno_location),e.Ua=r(e.Ua),e.Va=o(e.Va),e.Ya=o(e.Ya),e.gb=r(e.gb),e.ib=o(e.ib),e}l.keepRuntimeAlive=Re,l.wasmMemory=V,l.stackAlloc=ct,l.stackSave=lt,l.stackRestore=Qr,l.UTF8ToString=rr,l.stringToUTF8=Tr,l.lengthBytesUTF8=or,l.ExitStatus=er,l.PThread=F;var et;Ye=function e(){et||Zt(),et||(Ye=e)};function Zt(){0<Fe||(M?(L(l),M||cr(Be),startWorker(l)):(cr(je),0<Fe||et||(et=!0,l.calledRun=!0,ve||(M||cr(Be),L(l),M||cr(sr)))))}return Zt(),v.ready}})();typeof un=="object"&&typeof wt=="object"?wt.exports=sn:typeof define=="function"&&define.amd&&define([],()=>sn)});var ln=Wr((mo,Vn)=>{Vn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>(0,eval)(fs.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(Module.__embind_initialize_bindings(),initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed&&Module.__emscripten_thread_crashed(),a}}self.onmessage=handleMessage;\\n\'});var dn;dn=rn();var qn=fn(),Ot,_t=!1,rt=!1,cn=!1,Jn=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},Xn=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},Zn=(c,v)=>c?v?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":v?"ort-wasm-threaded.wasm":"ort-wasm.wasm",pn=async c=>{if(_t)return Promise.resolve();if(rt)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(cn)throw new Error("previous call to \'initializeWebAssembly()\' failed.");rt=!0;let v=c.initTimeout,u=c.numThreads,y=c.simd,b=u>1&&Jn(),S=y&&Xn(),p=c.wasmPaths,T=typeof p=="string"?p:void 0,D=Zn(S,b),l=typeof p=="object"?p[D]:void 0,L=!1,Y=[];if(v>0&&Y.push(new Promise(R=>{setTimeout(()=>{L=!0,R()},v)})),Y.push(new Promise((R,k)=>{let G=b?qn:dn,X={locateFile:(Z,H)=>b&&Z.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([ln()],{type:"text/javascript"})):Z.endsWith(".wasm")?l||(T??H)+D:H+Z};if(b)if(X.numThreads=u,typeof Blob>"u")X.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let Z=`var ortWasmThreaded=${G.toString()};`;X.mainScriptUrlOrBlob=new Blob([Z],{type:"text/javascript"})}G(X).then(Z=>{rt=!1,_t=!0,Ot=Z,R()},Z=>{rt=!1,cn=!0,k(Z)})})),await Promise.race(Y),L)throw new Error(`WebAssembly backend initializing failed due to timeout: ${v}ms`)},ae=()=>{if(_t&&Ot)return Ot;throw new Error("WebAssembly is not initialized yet.")};var ie=(c,v)=>{let u=ae(),y=u.lengthBytesUTF8(c)+1,b=u._malloc(y);return u.stringToUTF8(c,b,y),v.push(b),b},Br=(c,v,u,y)=>{if(typeof c=="object"&&c!==null){if(u.has(c))throw new Error("Circular reference in options");u.add(c)}Object.entries(c).forEach(([b,S])=>{let p=v?v+b:b;if(typeof S=="object")Br(S,p+".",u,y);else if(typeof S=="string"||typeof S=="number")y(p,S.toString());else if(typeof S=="boolean")y(p,S?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof S}`)})},ne=c=>{let v=ae(),u=v.stackSave();try{let y=v.stackAlloc(8);v._OrtGetLastError(y,y+4);let b=v.HEAP32[y/4],S=v.HEAPU32[y/4+1],p=S?v.UTF8ToString(S):"";throw new Error(`${c} ERROR_CODE: ${b}, ERROR_MESSAGE: ${p}`)}finally{v.stackRestore(u)}};var mn=c=>{let v=ae(),u=0,y=[],b=c||{};try{if(c?.logSeverityLevel===void 0)b.logSeverityLevel=2;else if(typeof c.logSeverityLevel!="number"||!Number.isInteger(c.logSeverityLevel)||c.logSeverityLevel<0||c.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${c.logSeverityLevel}`);if(c?.logVerbosityLevel===void 0)b.logVerbosityLevel=0;else if(typeof c.logVerbosityLevel!="number"||!Number.isInteger(c.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${c.logVerbosityLevel}`);c?.terminate===void 0&&(b.terminate=!1);let S=0;return c?.tag!==void 0&&(S=ie(c.tag,y)),u=v._OrtCreateRunOptions(b.logSeverityLevel,b.logVerbosityLevel,!!b.terminate,S),u===0&&ne("Can\'t create run options."),c?.extra!==void 0&&Br(c.extra,"",new WeakSet,(p,T)=>{let D=ie(p,y),l=ie(T,y);v._OrtAddRunConfigEntry(u,D,l)!==0&&ne(`Can\'t set a run config entry: ${p} - ${T}.`)}),[u,y]}catch(S){throw u!==0&&v._OrtReleaseRunOptions(u),y.forEach(p=>v._free(p)),S}};var Kn=c=>{switch(c){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${c}`)}},Qn=c=>{switch(c){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${c}`)}},eo=c=>{c.extra||(c.extra={}),c.extra.session||(c.extra.session={});let v=c.extra.session;v.use_ort_model_bytes_directly||(v.use_ort_model_bytes_directly="1"),c.executionProviders&&c.executionProviders.some(u=>(typeof u=="string"?u:u.name)==="webgpu")&&(c.enableMemPattern=!1)},ro=(c,v,u)=>{for(let y of v){let b=typeof y=="string"?y:y.name;switch(b){case"xnnpack":b="XNNPACK";break;case"webnn":if(b="WEBNN",typeof y!="string"){let p=y;if(p?.deviceType){let T=ie("deviceType",u),D=ie(p.deviceType,u);ae()._OrtAddSessionConfigEntry(c,T,D)!==0&&ne(`Can\'t set a session config entry: \'deviceType\' - ${p.deviceType}.`)}if(p?.numThreads){let T=p.numThreads;(typeof T!="number"||!Number.isInteger(T)||T<0)&&(T=0);let D=ie("numThreads",u),l=ie(T.toString(),u);ae()._OrtAddSessionConfigEntry(c,D,l)!==0&&ne(`Can\'t set a session config entry: \'numThreads\' - ${p.numThreads}.`)}if(p?.powerPreference){let T=ie("powerPreference",u),D=ie(p.powerPreference,u);ae()._OrtAddSessionConfigEntry(c,T,D)!==0&&ne(`Can\'t set a session config entry: \'powerPreference\' - ${p.powerPreference}.`)}}break;case"webgpu":if(b="JS",typeof y!="string"){let p=y;if(p?.preferredLayout){if(p.preferredLayout!=="NCHW"&&p.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${p.preferredLayout}`);let T=ie("preferredLayout",u),D=ie(p.preferredLayout,u);ae()._OrtAddSessionConfigEntry(c,T,D)!==0&&ne(`Can\'t set a session config entry: \'preferredLayout\' - ${p.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${b}`)}let S=ie(b,u);ae()._OrtAppendExecutionProvider(c,S)!==0&&ne(`Can\'t append execution provider: ${b}.`)}},gn=c=>{let v=ae(),u=0,y=[],b=c||{};eo(b);try{let S=Kn(b.graphOptimizationLevel??"all"),p=Qn(b.executionMode??"sequential"),T=typeof b.logId=="string"?ie(b.logId,y):0,D=b.logSeverityLevel??2;if(!Number.isInteger(D)||D<0||D>4)throw new Error(`log serverity level is not valid: ${D}`);let l=b.logVerbosityLevel??0;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log verbosity level is not valid: ${l}`);let L=typeof b.optimizedModelFilePath=="string"?ie(b.optimizedModelFilePath,y):0;if(u=v._OrtCreateSessionOptions(S,!!b.enableCpuMemArena,!!b.enableMemPattern,p,!!b.enableProfiling,0,T,D,l,L),u===0&&ne("Can\'t create session options."),b.executionProviders&&ro(u,b.executionProviders,y),b.freeDimensionOverrides)for(let[Y,R]of Object.entries(b.freeDimensionOverrides)){if(typeof Y!="string")throw new Error(`free dimension override name must be a string: ${Y}`);if(typeof R!="number"||!Number.isInteger(R)||R<0)throw new Error(`free dimension override value must be a non-negative integer: ${R}`);let k=ie(Y,y);v._OrtAddFreeDimensionOverride(u,k,R)!==0&&ne(`Can\'t set a free dimension override: ${Y} - ${R}.`)}return b.extra!==void 0&&Br(b.extra,"",new WeakSet,(Y,R)=>{let k=ie(Y,y),G=ie(R,y);v._OrtAddSessionConfigEntry(u,k,G)!==0&&ne(`Can\'t set a session config entry: ${Y} - ${R}.`)}),[u,y]}catch(S){throw u!==0&&v._OrtReleaseSessionOptions(u),y.forEach(p=>v._free(p)),S}};var Tt=c=>{switch(c){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${c}`)}},hn=c=>{switch(c){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${c}`)}},At=c=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][c],vn=c=>{switch(c){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${c}`)}},yn=c=>{switch(c){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${c}`)}},bn=c=>c==="float32"||c==="int32"||c==="int64"||c==="bool"||c==="float16"||c==="uint32",wn=c=>{switch(c){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${c}`)}};var to=(c,v)=>{ae()._OrtInit(c,v)!==0&&ne("Can\'t initialize onnxruntime.")},_n=async c=>{to(c.wasm.numThreads,yn(c.logLevel))},Tn=async(c,v)=>{},Rr=new Map,no=c=>{let v=ae(),u=v.stackSave();try{let y=v.stackAlloc(8);return v._OrtGetInputOutputCount(c,y,y+4)!==0&&ne("Can\'t get session input/output count."),[v.HEAP32[y/4],v.HEAP32[y/4+1]]}finally{v.stackRestore(u)}},Et=c=>{let v=ae(),u=v._malloc(c.byteLength);if(u===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${c.byteLength}.`);return v.HEAPU8.set(c,u),[u,c.byteLength]},An=(c,v)=>{let u,y,b=ae();Array.isArray(c)?[u,y]=c:c.buffer===b.HEAPU8.buffer?[u,y]=[c.byteOffset,c.byteLength]:[u,y]=Et(c);let S=0,p=0,T=0,D=[],l=[],L=[];try{[p,D]=gn(v),S=b._OrtCreateSession(u,y,p),S===0&&ne("Can\'t create a session.");let[Y,R]=no(S),k=[],G=[],X=[];for(let H=0;H<Y;H++){let M=b._OrtGetInputName(S,H);M===0&&ne("Can\'t get an input name."),l.push(M),k.push(b.UTF8ToString(M))}for(let H=0;H<R;H++){let M=b._OrtGetOutputName(S,H);M===0&&ne("Can\'t get an output name."),L.push(M);let ue=b.UTF8ToString(M);G.push(ue)}let Z=null;return Rr.set(S,[S,l,L,Z]),[S,k,G]}catch(Y){throw l.forEach(R=>b._OrtFree(R)),L.forEach(R=>b._OrtFree(R)),T!==0&&b._OrtReleaseBinding(T),S!==0&&b._OrtReleaseSession(S),Y}finally{b._free(u),p!==0&&b._OrtReleaseSessionOptions(p),D.forEach(Y=>b._free(Y))}},En=c=>{let v=ae(),u=Rr.get(c);if(!u)throw new Error(`cannot release session. invalid session id: ${c}`);let[y,b,S,p]=u;p&&v._OrtReleaseBinding(p.handle),v.jsepUnregisterBuffers?.(c),b.forEach(T=>v._OrtFree(T)),S.forEach(T=>v._OrtFree(T)),v._OrtReleaseSession(y),Rr.delete(c)},On=(c,v,u,y,b)=>{if(!c){v.push(0);return}let S=ae(),p=c[0],T=c[1],D=c[3],l,L;if(p==="string"&&D==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(D==="gpu-buffer"){let k=c[2].gpuBuffer,G=At(Tt(p));L=T.reduce((X,Z)=>X*Z,1)*G,l=S.jsepRegisterBuffer(y,b,k,L)}else{let k=c[2];if(Array.isArray(k)){L=4*k.length,l=S._malloc(L),u.push(l);let G=l/4;for(let X=0;X<k.length;X++){if(typeof k[X]!="string")throw new TypeError(`tensor data at index ${X} is not a string`);S.HEAPU32[G++]=ie(k[X],u)}}else L=k.byteLength,l=S._malloc(L),u.push(l),S.HEAPU8.set(new Uint8Array(k.buffer,k.byteOffset,L),l)}let Y=S.stackSave(),R=S.stackAlloc(4*T.length);try{let k=R/4;T.forEach(X=>S.HEAP32[k++]=X);let G=S._OrtCreateTensor(Tt(p),l,L,R,T.length,wn(D));G===0&&ne(`Can\'t create tensor for input/output. session=${y}, index=${b}.`),v.push(G)}finally{S.stackRestore(Y)}},Sn=async(c,v,u,y,b,S)=>{let p=ae(),T=Rr.get(c);if(!T)throw new Error(`cannot run inference. invalid session id: ${c}`);let[D,l,L,Y]=T,R=v.length,k=y.length,G=0,X=[],Z=[],H=[],M=[],ue=p.stackSave(),Ae=p.stackAlloc(R*4),ee=p.stackAlloc(R*4),Oe=p.stackAlloc(k*4),Se=p.stackAlloc(k*4);try{[G,X]=mn(S);for(let j=0;j<R;j++)On(u[j],Z,M,c,v[j]);for(let j=0;j<k;j++)On(b[j],H,M,c,R+y[j]);let E=Ae/4,$=ee/4,Ge=Oe/4,Ve=Se/4;for(let j=0;j<R;j++)p.HEAPU32[E++]=Z[j],p.HEAPU32[$++]=l[v[j]];for(let j=0;j<k;j++)p.HEAPU32[Ge++]=H[j],p.HEAPU32[Ve++]=L[y[j]];let qe;qe=await p._OrtRun(D,ee,Ae,R,Se,k,Oe,G),qe!==0&&ne("failed to call OrtRun().");let se=[];for(let j=0;j<k;j++){let V=p.HEAPU32[Oe/4+j];if(V===H[j]){se.push(b[j]);continue}let xe=p.stackSave(),ve=p.stackAlloc(4*4),de=!1,q,le=0;try{p._OrtGetTensorData(V,ve,ve+4,ve+8,ve+12)!==0&&ne(`Can\'t access output tensor data on index ${j}.`);let Ie=ve/4,Me=p.HEAPU32[Ie++];le=p.HEAPU32[Ie++];let Ne=p.HEAPU32[Ie++],Xe=p.HEAPU32[Ie++],ye=[];for(let K=0;K<Xe;K++)ye.push(p.HEAPU32[Ne/4+K]);p._OrtFree(Ne);let Pe=ye.reduce((K,oe)=>K*oe,1);q=hn(Me);let Ze=Y?.outputPreferredLocations[y[j]];if(q==="string"){if(Ze==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let K=[],oe=le/4;for(let je=0;je<Pe;je++){let Be=p.HEAPU32[oe++],sr=je===Pe-1?void 0:p.HEAPU32[oe]-Be;K.push(p.UTF8ToString(Be,sr))}se.push([q,ye,K,"cpu"])}else if(Ze==="gpu-buffer"&&Pe>0){let K=p.jsepGetBuffer(le),oe=At(Me);if(oe===void 0||!bn(q))throw new Error(`Unsupported data type: ${q}`);de=!0,se.push([q,ye,{gpuBuffer:K,download:p.jsepCreateDownloader(K,Pe*oe,q),dispose:()=>{p._OrtReleaseTensor(V)}},"gpu-buffer"])}else{let K=vn(q),oe=new K(Pe);new Uint8Array(oe.buffer,oe.byteOffset,oe.byteLength).set(p.HEAPU8.subarray(le,le+oe.byteLength)),se.push([q,ye,oe,"cpu"])}}finally{p.stackRestore(xe),q==="string"&&le&&p._free(le),de||p._OrtReleaseTensor(V)}}return Y&&p._OrtClearBoundOutputs(Y.handle),se}finally{p.stackRestore(ue),Z.forEach(E=>p._OrtReleaseTensor(E)),H.forEach(E=>p._OrtReleaseTensor(E)),M.forEach(E=>p._free(E)),G!==0&&p._OrtReleaseRunOptions(G),X.forEach(E=>p._free(E))}},Cn=c=>{let v=ae(),u=Rr.get(c);if(!u)throw new Error("invalid session id");let y=u[0],b=v._OrtEndProfiling(y);b===0&&ne("Can\'t get an profile file name."),v._OrtFree(b)},Mn=c=>{let v=[];for(let u of c){let y=u[2];!Array.isArray(y)&&"buffer"in y&&v.push(y.buffer)}return v};self.onmessage=c=>{let{type:v,in:u}=c.data;try{switch(v){case"init-wasm":pn(u.wasm).then(()=>{_n(u).then(()=>{postMessage({type:v})},y=>{postMessage({type:v,err:y})})},y=>{postMessage({type:v,err:y})});break;case"init-ep":{let{epName:y,env:b}=u;Tn(b,y).then(()=>{postMessage({type:v})},S=>{postMessage({type:v,err:S})});break}case"copy-from":{let{buffer:y}=u,b=Et(y);postMessage({type:v,out:b});break}case"create":{let{model:y,options:b}=u,S=An(y,b);postMessage({type:v,out:S});break}case"release":En(u),postMessage({type:v});break;case"run":{let{sessionId:y,inputIndices:b,inputs:S,outputIndices:p,options:T}=u;Sn(y,b,S,p,new Array(p.length).fill(null),T).then(D=>{D.some(l=>l[3]!=="cpu")?postMessage({type:v,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:v,out:D},Mn(D))},D=>{postMessage({type:v,err:D})});break}case"end-profiling":Cn(u),postMessage({type:v});break;default:}}catch(y){postMessage({type:v,err:y})}};})();\n'});var Wr,At,Zn,Ti,vi,es,ts,yn,Tn,iy,yi,Ud,Wd,Vd,zd,Hd,jd,qd,rs=$(()=>{"use strict";Lt();Md();gn();Wr=()=>!!re.wasm.proxy&&typeof document<"u",Zn=!1,Ti=!1,vi=!1,ts=new Map,yn=(i,t)=>{let o=ts.get(i);o?o.push(t):ts.set(i,[t])},Tn=()=>{if(Zn||!Ti||vi||!At)throw new Error("worker not ready")},iy=i=>{switch(i.data.type){case"init-wasm":Zn=!1,i.data.err?(vi=!0,es[1](i.data.err)):(Ti=!0,es[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let t=ts.get(i.data.type);i.data.err?t.shift()[1](i.data.err):t.shift()[0](i.data.out);break}default:}},yi=typeof document<"u"?document?.currentScript?.src:void 0,Ud=async()=>{if(!Ti){if(Zn)throw new Error("multiple calls to 'initWasm()' detected.");if(vi)throw new Error("previous call to 'initWasm()' failed.");if(Zn=!0,Wr())return re.wasm.wasmPaths===void 0&&yi&&yi.indexOf("blob:")!==0&&(re.wasm.wasmPaths=yi.substr(0,+yi.lastIndexOf("/")+1)),new Promise((i,t)=>{At?.terminate();let o=URL.createObjectURL(new Blob([Gd()],{type:"text/javascript"}));At=new Worker(o,{name:"ort-wasm-proxy-worker"}),At.onerror=r=>t(r),At.onmessage=iy,URL.revokeObjectURL(o),es=[i,t];let e={type:"init-wasm",in:re};At.postMessage(e)});try{await wd(re.wasm),await Cd(re),Ti=!0}catch(i){throw vi=!0,i}finally{Zn=!1}}},Wd=async i=>{if(Wr())return Tn(),new Promise((t,o)=>{yn("init-ep",[t,o]);let e={type:"init-ep",in:{epName:i,env:re}};At.postMessage(e)});await Fd(re,i)},Vd=async i=>Wr()?(Tn(),new Promise((t,o)=>{yn("copy-from",[t,o]);let e={type:"copy-from",in:{buffer:i}};At.postMessage(e,[i.buffer])})):Qa(i),zd=async(i,t)=>{if(Wr()){if(t?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Tn(),new Promise((o,e)=>{yn("create",[o,e]);let r={type:"create",in:{model:i,options:t}},n=[];i instanceof Uint8Array&&n.push(i.buffer),At.postMessage(r,n)})}else return $d(i,t)},Hd=async i=>{if(Wr())return Tn(),new Promise((t,o)=>{yn("release",[t,o]);let e={type:"release",in:i};At.postMessage(e)});kd(i)},jd=async(i,t,o,e,r,n)=>{if(Wr()){if(o.some(s=>s[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(r.some(s=>s))throw new Error("pre-allocated output tensor is not supported for proxy.");return Tn(),new Promise((s,a)=>{yn("run",[s,a]);let u=o,l={type:"run",in:{sessionId:i,inputIndices:t,inputs:u,outputIndices:e,options:n}};At.postMessage(l,Rd(u))})}else return Bd(i,t,o,e,r,n)},qd=async i=>{if(Wr())return Tn(),new Promise((t,o)=>{yn("end-profiling",[t,o]);let e={type:"end-profiling",in:i};At.postMessage(e)});Nd(i)}});var Yd,ay,xi,Xd=$(()=>{"use strict";Lt();rs();Za();Yd=(i,t)=>{switch(i.location){case"cpu":return[i.type,i.dims,i.data,"cpu"];case"gpu-buffer":return[i.type,i.dims,{gpuBuffer:i.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${i.location} for ${t()}`)}},ay=i=>{switch(i[3]){case"cpu":return new je(i[0],i[2],i[1]);case"gpu-buffer":{let t=i[0];if(!gi(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:o,download:e,dispose:r}=i[2];return je.fromGpuBuffer(o,{dataType:t,dims:i[1],download:e,dispose:r})}default:throw new Error(`invalid data location: ${i[3]}`)}},xi=class{async fetchModelAndCopyToWasmMemory(t){let o=await fetch(t);if(o.status!==200)throw new Error(`failed to load model: ${t}`);let e=await o.arrayBuffer();return Vd(new Uint8Array(e))}async loadModel(t,o){Pr();let e;typeof t=="string"?typeof process<"u"&&process.versions&&process.versions.node?e=await(void 0)(t):e=await this.fetchModelAndCopyToWasmMemory(t):e=t,[this.sessionId,this.inputNames,this.outputNames]=await zd(e,o),Er()}async dispose(){return Hd(this.sessionId)}async run(t,o,e){Pr();let r=[],n=[];Object.entries(t).forEach(y=>{let w=y[0],S=y[1],I=this.inputNames.indexOf(w);if(I===-1)throw new Error(`invalid input '${w}'`);r.push(S),n.push(I)});let s=[],a=[];Object.entries(o).forEach(y=>{let w=y[0],S=y[1],I=this.outputNames.indexOf(w);if(I===-1)throw new Error(`invalid output '${w}'`);s.push(S),a.push(I)});let u=r.map((y,w)=>Yd(y,()=>`input "${this.inputNames[n[w]]}"`)),l=s.map((y,w)=>y?Yd(y,()=>`output "${this.outputNames[a[w]]}"`):null),c=await jd(this.sessionId,n,u,a,l,e),b={};for(let y=0;y<c.length;y++)b[this.outputNames[a[y]]]=s[y]??ay(c[y]);return Er(),b}startProfiling(){}endProfiling(){qd(this.sessionId)}}});var sy,wi,Kd=$(()=>{"use strict";Lt();rs();Xd();sy=()=>{if((typeof re.wasm.initTimeout!="number"||re.wasm.initTimeout<0)&&(re.wasm.initTimeout=0),typeof re.wasm.simd!="boolean"&&(re.wasm.simd=!0),typeof re.wasm.proxy!="boolean"&&(re.wasm.proxy=!1),typeof re.wasm.trace!="boolean"&&(re.wasm.trace=!1),typeof re.wasm.numThreads!="number"||!Number.isInteger(re.wasm.numThreads)||re.wasm.numThreads<=0){let i=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;re.wasm.numThreads=Math.min(4,Math.ceil((i||1)/2))}},wi=class{async init(t){sy(),await Ud(),await Wd(t)}async createInferenceSessionHandler(t,o){let e=new xi;return await e.loadModel(t,o),Promise.resolve(e)}}});var Jd={};rn(Jd,{wasmBackend:()=>uy});var uy,Zd=$(()=>{"use strict";Kd();uy=new wi});Lt();Lt();Lt();var nu="1.17.0";var LA=Bi;{let i=(ud(),Ar(sd)).onnxjsBackend;ir("webgl",i,-10)}{let i=(Zd(),Ar(Jd)).wasmBackend;ir("cpu",i,10),ir("wasm",i,10),ir("xnnpack",i,9),ir("webnn",i,9)}Object.defineProperty(re.versions,"web",{value:nu,enumerable:!0});export{mh as InferenceSession,Ks as TRACE,Pr as TRACE_FUNC_BEGIN,Er as TRACE_FUNC_END,je as Tensor,gh as TrainingSession,LA as default,re as env,ir as registerBackend};
/*! Bundled license information:

long/index.js:
  (**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   *)
*/
//# sourceMappingURL=ort.min.js.map
