/*!
 * ONNX Runtime Web v1.17.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
"use strict";var Vt=Object.create;var He=Object.defineProperty;var qt=Object.getOwnPropertyDescriptor;var Xt=Object.getOwnPropertyNames;var Jt=Object.getPrototypeOf,Zt=Object.prototype.hasOwnProperty;var Z=(o,i)=>()=>(o&&(i=o(o=0)),i);var Kt=(o,i)=>()=>(i||o((i={exports:{}}).exports,i),i.exports),Hr=(o,i)=>{for(var n in i)He(o,n,{get:i[n],enumerable:!0})},$e=(o,i,n,l)=>{if(i&&typeof i=="object"||typeof i=="function")for(let f of Xt(i))!Zt.call(o,f)&&f!==n&&He(o,f,{get:()=>i[f],enumerable:!(l=qt(i,f))||l.enumerable});return o},fe=(o,i,n)=>($e(o,i,"default"),n&&$e(n,i,"default")),jr=(o,i,n)=>(n=o!=null?Vt(Jt(o)):{},$e(i||!o||!o.__esModule?He(n,"default",{value:o,enumerable:!0}):n,o)),zr=o=>$e(He({},"__esModule",{value:!0}),o);var sr=Kt((Vr,ar)=>{"use strict";var Yr=(()=>{var o=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(o=o||__filename),function(i={}){var n=i,l,f;n.ready=new Promise((e,r)=>{l=e,f=r});var p=Object.assign({},n),c="./this.program",w=typeof window=="object",T=typeof importScripts=="function",E=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",A="",C,h,S;if(E){var U=require("fs"),D=require("path");A=T?D.dirname(A)+"/":__dirname+"/",C=(e,r)=>(e=ye(e)?new URL(e):D.normalize(e),U.readFileSync(e,r?void 0:"utf8")),S=e=>(e=C(e,!0),e.buffer||(e=new Uint8Array(e)),e),h=(e,r,t,a=!0)=>{e=ye(e)?new URL(e):D.normalize(e),U.readFile(e,a?void 0:"utf8",(s,d)=>{s?t(s):r(a?d.buffer:d)})},!n.thisProgram&&1<process.argv.length&&(c=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),n.inspect=()=>"[Emscripten Module object]"}else(w||T)&&(T?A=self.location.href:typeof document<"u"&&document.currentScript&&(A=document.currentScript.src),o&&(A=o),A.indexOf("blob:")!==0?A=A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):A="",C=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},T&&(S=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),h=(e,r,t)=>{var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=()=>{a.status==200||a.status==0&&a.response?r(a.response):t()},a.onerror=t,a.send(null)});var K=console.log.bind(console),_=console.error.bind(console);Object.assign(n,p),p=null,typeof WebAssembly!="object"&&De("no native wasm support detected");var x,V=!1,q,M,ne,me,m,B,Ue,Ee,Ae,oe;function P(){var e=x.buffer;n.HEAP8=q=new Int8Array(e),n.HEAP16=ne=new Int16Array(e),n.HEAPU8=M=new Uint8Array(e),n.HEAPU16=me=new Uint16Array(e),n.HEAP32=m=new Int32Array(e),n.HEAPU32=B=new Uint32Array(e),n.HEAPF32=Ue=new Float32Array(e),n.HEAPF64=oe=new Float64Array(e),n.HEAP64=Ee=new BigInt64Array(e),n.HEAPU64=Ae=new BigUint64Array(e)}var ae=[],ve=[],Q=[],ee=0,N=null,$=null;function De(e){throw e="Aborted("+e+")",_(e),V=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),f(e),e}var ge=e=>e.startsWith("data:application/octet-stream;base64,"),ye=e=>e.startsWith("file://"),le;if(le="ort-wasm.wasm",!ge(le)){var Le=le;le=n.locateFile?n.locateFile(Le,A):A+Le}function de(e){if(S)return S(e);throw"both async and sync fetching of the wasm failed"}function he(e){if(w||T){if(typeof fetch=="function"&&!ye(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at '"+e+"'";return r.arrayBuffer()}).catch(()=>de(e));if(h)return new Promise((r,t)=>{h(e,a=>r(new Uint8Array(a)),t)})}return Promise.resolve().then(()=>de(e))}function Te(e,r,t){return he(e).then(a=>WebAssembly.instantiate(a,r)).then(a=>a).then(t,a=>{_(`failed to asynchronously prepare wasm: ${a}`),De(a)})}function H(e,r){var t=le;return typeof WebAssembly.instantiateStreaming!="function"||ge(t)||ye(t)||E||typeof fetch!="function"?Te(t,e,r):fetch(t,{credentials:"same-origin"}).then(a=>WebAssembly.instantiateStreaming(a,e).then(r,function(s){return _(`wasm streaming compile failed: ${s}`),_("falling back to ArrayBuffer instantiation"),Te(t,e,r)}))}var j={1374888:(e,r,t,a)=>{if(typeof n>"u"||!n.cb)return 1;if(e=Ie(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=n.cb.get(e),!e)return 2;if(r>>>=0,t>>>=0,r+t>e.byteLength)return 3;try{return M.set(e.subarray(r,r+t),a>>>0>>>0),0}catch{return 4}}};function _e(e){this.Ua=e-24,this.fb=function(r){B[this.Ua+4>>>2>>>0]=r},this.eb=function(r){B[this.Ua+8>>>2>>>0]=r},this.Ya=function(r,t){this.Za(),this.fb(r),this.eb(t)},this.Za=function(){B[this.Ua+16>>>2>>>0]=0}}var Pe=0,Je=0,yr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,hr=(e,r,t)=>{r>>>=0;var a=r+t;for(t=r;e[t]&&!(t>=a);)++t;if(16<t-r&&e.buffer&&yr)return yr.decode(e.subarray(r,t));for(a="";r<t;){var s=e[r++];if(s&128){var d=e[r++]&63;if((s&224)==192)a+=String.fromCharCode((s&31)<<6|d);else{var g=e[r++]&63;s=(s&240)==224?(s&15)<<12|d<<6|g:(s&7)<<18|d<<12|g<<6|e[r++]&63,65536>s?a+=String.fromCharCode(s):(s-=65536,a+=String.fromCharCode(55296|s>>10,56320|s&1023))}}else a+=String.fromCharCode(s)}return a},Ie=(e,r)=>(e>>>=0)?hr(M,e,r):"",We=e=>{for(var r=0,t=0;t<e.length;++t){var a=e.charCodeAt(t);127>=a?r++:2047>=a?r+=2:55296<=a&&57343>=a?(r+=4,++t):r+=3}return r},Fe=(e,r,t,a)=>{if(t>>>=0,!(0<a))return 0;var s=t;a=t+a-1;for(var d=0;d<e.length;++d){var g=e.charCodeAt(d);if(55296<=g&&57343>=g){var y=e.charCodeAt(++d);g=65536+((g&1023)<<10)|y&1023}if(127>=g){if(t>=a)break;r[t++>>>0]=g}else{if(2047>=g){if(t+1>=a)break;r[t++>>>0]=192|g>>6}else{if(65535>=g){if(t+2>=a)break;r[t++>>>0]=224|g>>12}else{if(t+3>=a)break;r[t++>>>0]=240|g>>18,r[t++>>>0]=128|g>>12&63}r[t++>>>0]=128|g>>6&63}r[t++>>>0]=128|g&63}}return r[t>>>0]=0,t-s},wr=e=>{if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e},vr,J=e=>{for(var r="";M[e>>>0];)r+=vr[M[e++>>>0]];return r},Ze={},Ke={},Ct={},pe;function Bt(e,r,t={}){var a=r.name;if(!e)throw new pe(`type "${a}" must have a positive integer typeid pointer`);if(Ke.hasOwnProperty(e)){if(t.gb)return;throw new pe(`Cannot register type '${a}' twice`)}Ke[e]=r,delete Ct[e],Ze.hasOwnProperty(e)&&(r=Ze[e],delete Ze[e],r.forEach(s=>s()))}function se(e,r,t={}){if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");Bt(e,r,t)}var Sr=(e,r,t)=>{switch(r){case 1:return t?a=>q[a>>>0>>>0]:a=>M[a>>>0>>>0];case 2:return t?a=>ne[a>>>1>>>0]:a=>me[a>>>1>>>0];case 4:return t?a=>m[a>>>2>>>0]:a=>B[a>>>2>>>0];case 8:return t?a=>Ee[a>>>3]:a=>Ae[a>>>3];default:throw new TypeError(`invalid integer width (${r}): ${e}`)}};function br(){this.Ra=[void 0],this.ab=[]}var X=new br;function Qe(e){e>>>=0,e>=X.Ua&&--X.get(e).bb===0&&X.Za(e)}var G=e=>{if(!e)throw new pe("Cannot use deleted val. handle = "+e);return X.get(e).value},re=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return X.Ya({bb:1,value:e})}};function Or(e){return this.fromWireType(m[e>>>2>>>0])}var xt=(e,r)=>{switch(r){case 4:return function(t){return this.fromWireType(Ue[t>>>2>>>0])};case 8:return function(t){return this.fromWireType(oe[t>>>3>>>0])};default:throw new TypeError(`invalid float width (${r}): ${e}`)}};function Ut(e){return this.fromWireType(B[e>>>2>>>0])}var Er=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Dt=(e,r)=>{for(var t=e>>1,a=t+r/2;!(t>=a)&&me[t>>>0];)++t;if(t<<=1,32<t-e&&Er)return Er.decode(M.subarray(e>>>0,t>>>0));for(t="",a=0;!(a>=r/2);++a){var s=ne[e+2*a>>>1>>>0];if(s==0)break;t+=String.fromCharCode(s)}return t},Lt=(e,r,t)=>{if(t??=2147483647,2>t)return 0;t-=2;var a=r;t=t<2*e.length?t/2:e.length;for(var s=0;s<t;++s)ne[r>>>1>>>0]=e.charCodeAt(s),r+=2;return ne[r>>>1>>>0]=0,r-a},Wt=e=>2*e.length,Ft=(e,r)=>{for(var t=0,a="";!(t>=r/4);){var s=m[e+4*t>>>2>>>0];if(s==0)break;++t,65536<=s?(s-=65536,a+=String.fromCharCode(55296|s>>10,56320|s&1023)):a+=String.fromCharCode(s)}return a},Mt=(e,r,t)=>{if(r>>>=0,t??=2147483647,4>t)return 0;var a=r;t=a+t-4;for(var s=0;s<e.length;++s){var d=e.charCodeAt(s);if(55296<=d&&57343>=d){var g=e.charCodeAt(++s);d=65536+((d&1023)<<10)|g&1023}if(m[r>>>2>>>0]=d,r+=4,r+4>t)break}return m[r>>>2>>>0]=0,r-a},kt=e=>{for(var r=0,t=0;t<e.length;++t){var a=e.charCodeAt(t);55296<=a&&57343>=a&&++t,r+=4}return r},er=(e,r)=>{var t=Ke[e];if(t===void 0)throw e=Fr(e),t=J(e),ie(e),new pe(r+" has unknown type "+t);return t},Ar=(e,r,t)=>{var a=[];return e=e.toWireType(a,t),a.length&&(B[r>>>2>>>0]=re(a)),e},Me=[],Rt={},rr=e=>{var r=Rt[e];return r===void 0?J(e):r},Tr=()=>typeof globalThis=="object"?globalThis:Function("return this")(),Nt=e=>{var r=Me.length;return Me.push(e),r},$t=(e,r)=>{for(var t=Array(e),a=0;a<e;++a)t[a]=er(B[r+4*a>>>2>>>0],"parameter "+a);return t},_r=(e,r)=>Object.defineProperty(r,"name",{value:e});function Ht(e){var r=Function;if(!(r instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof r} which is not a function`);var t=_r(r.name||"unknownFunctionName",function(){});return t.prototype=r.prototype,t=new t,e=r.apply(t,e),e instanceof Object?e:t}var Se=e=>e%4===0&&(e%100!==0||e%400===0),Pr=[0,31,60,91,121,152,182,213,244,274,305,335],Ir=[0,31,59,90,120,151,181,212,243,273,304,334],Cr=e=>{var r=We(e)+1,t=Re(r);return t&&Fe(e,M,t,r),t},tr=[],nr={},Br=()=>{if(!or){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"},r;for(r in nr)nr[r]===void 0?delete e[r]:e[r]=nr[r];var t=[];for(r in e)t.push(`${r}=${e[r]}`);or=t}return or},or,jt=[null,[],[]],xr=[31,29,31,30,31,30,31,31,30,31,30,31],Ur=[31,28,31,30,31,30,31,31,30,31,30,31];function zt(e){var r=Array(We(e)+1);return Fe(e,r,0,r.length),r}function Dr(e,r,t,a){function s(u,I,W){for(u=typeof u=="number"?u.toString():u||"";u.length<I;)u=W[0]+u;return u}function d(u,I){return s(u,I,"0")}function g(u,I){function W($r){return 0>$r?-1:0<$r?1:0}var we;return(we=W(u.getFullYear()-I.getFullYear()))===0&&(we=W(u.getMonth()-I.getMonth()))===0&&(we=W(u.getDate()-I.getDate())),we}function y(u){switch(u.getDay()){case 0:return new Date(u.getFullYear()-1,11,29);case 1:return u;case 2:return new Date(u.getFullYear(),0,3);case 3:return new Date(u.getFullYear(),0,2);case 4:return new Date(u.getFullYear(),0,1);case 5:return new Date(u.getFullYear()-1,11,31);case 6:return new Date(u.getFullYear()-1,11,30)}}function O(u){var I=u.Sa;for(u=new Date(new Date(u.Ta+1900,0,1).getTime());0<I;){var W=u.getMonth(),we=(Se(u.getFullYear())?xr:Ur)[W];if(I>we-u.getDate())I-=we-u.getDate()+1,u.setDate(1),11>W?u.setMonth(W+1):(u.setMonth(0),u.setFullYear(u.getFullYear()+1));else{u.setDate(u.getDate()+I);break}}return W=new Date(u.getFullYear()+1,0,4),I=y(new Date(u.getFullYear(),0,4)),W=y(W),0>=g(I,u)?0>=g(W,u)?u.getFullYear()+1:u.getFullYear():u.getFullYear()-1}e>>>=0,r>>>=0,t>>>=0,a>>>=0;var v=B[a+40>>>2>>>0];a={kb:m[a>>>2>>>0],jb:m[a+4>>>2>>>0],Wa:m[a+8>>>2>>>0],$a:m[a+12>>>2>>>0],Xa:m[a+16>>>2>>>0],Ta:m[a+20>>>2>>>0],Na:m[a+24>>>2>>>0],Sa:m[a+28>>>2>>>0],mb:m[a+32>>>2>>>0],ib:m[a+36>>>2>>>0],lb:v?Ie(v):""},t=Ie(t),v={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var L in v)t=t.replace(new RegExp(L,"g"),v[L]);var Y="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ue="January February March April May June July August September October November December".split(" ");v={"%a":u=>Y[u.Na].substring(0,3),"%A":u=>Y[u.Na],"%b":u=>ue[u.Xa].substring(0,3),"%B":u=>ue[u.Xa],"%C":u=>d((u.Ta+1900)/100|0,2),"%d":u=>d(u.$a,2),"%e":u=>s(u.$a,2," "),"%g":u=>O(u).toString().substring(2),"%G":u=>O(u),"%H":u=>d(u.Wa,2),"%I":u=>(u=u.Wa,u==0?u=12:12<u&&(u-=12),d(u,2)),"%j":u=>{for(var I=0,W=0;W<=u.Xa-1;I+=(Se(u.Ta+1900)?xr:Ur)[W++]);return d(u.$a+I,3)},"%m":u=>d(u.Xa+1,2),"%M":u=>d(u.jb,2),"%n":()=>`
`,"%p":u=>0<=u.Wa&&12>u.Wa?"AM":"PM","%S":u=>d(u.kb,2),"%t":()=>"	","%u":u=>u.Na||7,"%U":u=>d(Math.floor((u.Sa+7-u.Na)/7),2),"%V":u=>{var I=Math.floor((u.Sa+7-(u.Na+6)%7)/7);if(2>=(u.Na+371-u.Sa-2)%7&&I++,I)I==53&&(W=(u.Na+371-u.Sa)%7,W==4||W==3&&Se(u.Ta)||(I=1));else{I=52;var W=(u.Na+7-u.Sa-1)%7;(W==4||W==5&&Se(u.Ta%400-1))&&I++}return d(I,2)},"%w":u=>u.Na,"%W":u=>d(Math.floor((u.Sa+7-(u.Na+6)%7)/7),2),"%y":u=>(u.Ta+1900).toString().substring(2),"%Y":u=>u.Ta+1900,"%z":u=>{u=u.ib;var I=0<=u;return u=Math.abs(u)/60,(I?"+":"-")+("0000"+(u/60*100+u%60)).slice(-4)},"%Z":u=>u.lb,"%%":()=>"%"},t=t.replace(/%%/g,"\0\0");for(L in v)t.includes(L)&&(t=t.replace(new RegExp(L,"g"),v[L](a)));return t=t.replace(/\0\0/g,"%"),L=zt(t),L.length>r?0:(q.set(L,e>>>0),L.length-1)}for(var Lr=Array(256),ke=0;256>ke;++ke)Lr[ke]=String.fromCharCode(ke);vr=Lr,pe=n.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},n.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Object.assign(br.prototype,{get(e){return this.Ra[e]},has(e){return this.Ra[e]!==void 0},Ya(e){var r=this.ab.pop()||this.Ra.length;return this.Ra[r]=e,r},Za(e){this.Ra[e]=void 0,this.ab.push(e)}}),X.Ra.push({value:void 0},{value:null},{value:!0},{value:!1}),X.Ua=X.Ra.length,n.count_emval_handles=()=>{for(var e=0,r=X.Ua;r<X.Ra.length;++r)X.Ra[r]!==void 0&&++e;return e};var Gt={a:function(e,r,t){throw e>>>=0,new _e(e).Ya(r>>>0,t>>>0),Pe=e,Je++,Pe},t:function(){return 0},$:function(){},M:function(){},O:function(){},G:function(){return 0},Z:function(){},U:function(){},Y:function(){},B:function(){},N:function(){},K:function(){},_:function(){},L:function(){},E:function(e,r,t,a,s){r>>>=0,r=J(r);var d=r.indexOf("u")!=-1;d&&(s=(1n<<64n)-1n),se(e>>>0,{name:r,fromWireType:g=>g,toWireType:function(g,y){if(typeof y!="bigint"&&typeof y!="number")throw new TypeError(`Cannot convert "${wr(y)}" to ${this.name}`);if(y<a||y>s)throw new TypeError(`Passing a number "${wr(y)}" from JS side to C/C++ side to an argument of type "${r}", which is outside the valid range [${a}, ${s}]!`);return y},argPackAdvance:8,readValueFromPointer:Sr(r,t>>>0,!d),Va:null})},da:function(e,r,t,a){r=J(r>>>0),se(e>>>0,{name:r,fromWireType:function(s){return!!s},toWireType:function(s,d){return d?t:a},argPackAdvance:8,readValueFromPointer:function(s){return this.fromWireType(M[s>>>0])},Va:null})},ca:function(e,r){r=J(r>>>0),se(e>>>0,{name:r,fromWireType:t=>{var a=G(t);return Qe(t),a},toWireType:(t,a)=>re(a),argPackAdvance:8,readValueFromPointer:Or,Va:null})},D:function(e,r,t){r=J(r>>>0),se(e>>>0,{name:r,fromWireType:a=>a,toWireType:(a,s)=>s,argPackAdvance:8,readValueFromPointer:xt(r,t>>>0),Va:null})},q:function(e,r,t,a,s){if(e>>>=0,t>>>=0,r=J(r>>>0),s===-1&&(s=4294967295),s=y=>y,a===0){var d=32-8*t;s=y=>y<<d>>>d}var g=r.includes("unsigned")?function(y,O){return O>>>0}:function(y,O){return O};se(e,{name:r,fromWireType:s,toWireType:g,argPackAdvance:8,readValueFromPointer:Sr(r,t,a!==0),Va:null})},l:function(e,r,t){function a(d){return new s(q.buffer,B[d+4>>>2>>>0],B[d>>>2>>>0])}var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][r];t=J(t>>>0),se(e>>>0,{name:t,fromWireType:a,argPackAdvance:8,readValueFromPointer:a},{gb:!0})},F:function(e,r){r=J(r>>>0);var t=r==="std::string";se(e>>>0,{name:r,fromWireType:function(a){var s=B[a>>>2>>>0],d=a+4;if(t)for(var g=d,y=0;y<=s;++y){var O=d+y;if(y==s||M[O>>>0]==0){if(g=Ie(g,O-g),v===void 0)var v=g;else v+=String.fromCharCode(0),v+=g;g=O+1}}else{for(v=Array(s),y=0;y<s;++y)v[y]=String.fromCharCode(M[d+y>>>0]);v=v.join("")}return ie(a),v},toWireType:function(a,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var d=typeof s=="string";if(!(d||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array))throw new pe("Cannot pass non-string to std::string");var g=t&&d?We(s):s.length,y=Re(4+g+1),O=y+4;if(B[y>>>2>>>0]=g,t&&d)Fe(s,M,O,g+1);else if(d)for(d=0;d<g;++d){var v=s.charCodeAt(d);if(255<v)throw ie(O),new pe("String has UTF-16 code units that do not fit in 8 bits");M[O+d>>>0]=v}else for(d=0;d<g;++d)M[O+d>>>0]=s[d];return a!==null&&a.push(ie,y),y},argPackAdvance:8,readValueFromPointer:Ut,Va(a){ie(a)}})},v:function(e,r,t){if(r>>>=0,t>>>=0,t=J(t),r===2)var a=Dt,s=Lt,d=Wt,g=()=>me,y=1;else r===4&&(a=Ft,s=Mt,d=kt,g=()=>B,y=2);se(e>>>0,{name:t,fromWireType:O=>{for(var v=B[O>>>2>>>0],L=g(),Y,ue=O+4,u=0;u<=v;++u){var I=O+4+u*r;(u==v||L[I>>>y]==0)&&(ue=a(ue,I-ue),Y===void 0?Y=ue:(Y+=String.fromCharCode(0),Y+=ue),ue=I+r)}return ie(O),Y},toWireType:(O,v)=>{if(typeof v!="string")throw new pe(`Cannot pass non-string to C++ string type ${t}`);var L=d(v),Y=Re(4+L+r);return B[Y>>>2]=L>>y,s(v,Y+4,L+r),O!==null&&O.push(ie,Y),Y},argPackAdvance:8,readValueFromPointer:Or,Va(O){ie(O)}})},ea:function(e,r){r=J(r>>>0),se(e>>>0,{hb:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},aa:()=>1,o:function(e,r,t){return r>>>=0,t>>>=0,e=G(e>>>0),r=er(r,"emval::as"),Ar(r,t,e)},x:function(e,r,t,a){return t>>>=0,a>>>=0,e=Me[e>>>0],r=G(r>>>0),e(null,r,t,a)},j:function(e,r,t,a,s){return t>>>=0,a>>>=0,s>>>=0,e=Me[e>>>0],r=G(r>>>0),t=rr(t),e(r,r[t],a,s)},b:Qe,w:function(e,r){return r>>>=0,e=G(e>>>0),r=G(r),e==r},s:function(e){return e>>>=0,e===0?re(Tr()):(e=rr(e),re(Tr()[e]))},i:function(e,r,t){r=$t(e,r>>>0);var a=r.shift();e--;var s=`return function (obj, func, destructorsRef, args) {
`,d=0,g=[];t===0&&g.push("obj");for(var y=["retType"],O=[a],v=0;v<e;++v)g.push("arg"+v),y.push("argType"+v),O.push(r[v]),s+=`  var arg${v} = argType${v}.readValueFromPointer(args${d?"+"+d:""});
`,d+=r[v].argPackAdvance;for(s+=`  var rv = ${t===1?"new func":"func.call"}(${g.join(", ")});
`,v=0;v<e;++v)r[v].deleteObject&&(s+=`  argType${v}.deleteObject(arg${v});
`);return a.hb||(y.push("emval_returnValue"),O.push(Ar),s+=`  return emval_returnValue(retType, destructorsRef, rv);
`),y.push(s+`};
`),e=Ht(y).apply(null,O),t=`methodCaller<(${r.map(L=>L.name).join(", ")}) => ${a.name}>`,Nt(_r(t,e))},p:function(e,r){return r>>>=0,e=G(e>>>0),r=G(r),re(e[r])},c:function(e){e>>>=0,4<e&&(X.get(e).bb+=1)},r:function(){return re([])},k:function(e){e=G(e>>>0);for(var r=Array(e.length),t=0;t<e.length;t++)r[t]=e[t];return re(r)},d:function(e){return re(rr(e>>>0))},h:function(){return re({})},g:function(e){e>>>=0;for(var r=G(e);r.length;){var t=r.pop();r.pop()(t)}Qe(e)},f:function(e,r,t){r>>>=0,t>>>=0,e=G(e>>>0),r=G(r),t=G(t),e[r]=t},e:function(e,r){return r>>>=0,e=er(e>>>0,"_emval_take_value"),e=e.readValueFromPointer(r),re(e)},R:function(e,r){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),r>>>=0,e=new Date(1e3*e),m[r>>>2>>>0]=e.getUTCSeconds(),m[r+4>>>2>>>0]=e.getUTCMinutes(),m[r+8>>>2>>>0]=e.getUTCHours(),m[r+12>>>2>>>0]=e.getUTCDate(),m[r+16>>>2>>>0]=e.getUTCMonth(),m[r+20>>>2>>>0]=e.getUTCFullYear()-1900,m[r+24>>>2>>>0]=e.getUTCDay(),m[r+28>>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},S:function(e,r){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),r>>>=0,e=new Date(1e3*e),m[r>>>2>>>0]=e.getSeconds(),m[r+4>>>2>>>0]=e.getMinutes(),m[r+8>>>2>>>0]=e.getHours(),m[r+12>>>2>>>0]=e.getDate(),m[r+16>>>2>>>0]=e.getMonth(),m[r+20>>>2>>>0]=e.getFullYear()-1900,m[r+24>>>2>>>0]=e.getDay(),m[r+28>>>2>>>0]=(Se(e.getFullYear())?Pr:Ir)[e.getMonth()]+e.getDate()-1|0,m[r+36>>>2>>>0]=-(60*e.getTimezoneOffset());var t=new Date(e.getFullYear(),6,1).getTimezoneOffset(),a=new Date(e.getFullYear(),0,1).getTimezoneOffset();m[r+32>>>2>>>0]=(t!=a&&e.getTimezoneOffset()==Math.min(a,t))|0},T:function(e){e>>>=0;var r=new Date(m[e+20>>>2>>>0]+1900,m[e+16>>>2>>>0],m[e+12>>>2>>>0],m[e+8>>>2>>>0],m[e+4>>>2>>>0],m[e>>>2>>>0],0),t=m[e+32>>>2>>>0],a=r.getTimezoneOffset(),s=new Date(r.getFullYear(),6,1).getTimezoneOffset(),d=new Date(r.getFullYear(),0,1).getTimezoneOffset(),g=Math.min(d,s);return 0>t?m[e+32>>>2>>>0]=+(s!=d&&g==a):0<t!=(g==a)&&(s=Math.max(d,s),r.setTime(r.getTime()+6e4*((0<t?g:s)-a))),m[e+24>>>2>>>0]=r.getDay(),m[e+28>>>2>>>0]=(Se(r.getFullYear())?Pr:Ir)[r.getMonth()]+r.getDate()-1|0,m[e>>>2>>>0]=r.getSeconds(),m[e+4>>>2>>>0]=r.getMinutes(),m[e+8>>>2>>>0]=r.getHours(),m[e+12>>>2>>>0]=r.getDate(),m[e+16>>>2>>>0]=r.getMonth(),m[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),isNaN(e)?(m[Wr()>>>2>>>0]=61,e=-1):e/=1e3,BigInt(e)},P:function(){return-52},Q:function(){},I:function(e,r,t){function a(O){return(O=O.toTimeString().match(/\(([A-Za-z ]+)\)$/))?O[1]:"GMT"}t>>>=0;var s=new Date().getFullYear(),d=new Date(s,0,1),g=new Date(s,6,1);s=d.getTimezoneOffset();var y=g.getTimezoneOffset();B[e>>>0>>>2>>>0]=60*Math.max(s,y),m[r>>>0>>>2>>>0]=+(s!=y),e=a(d),r=a(g),e=Cr(e),r=Cr(r),y<s?(B[t>>>2>>>0]=e,B[t+4>>>2>>>0]=r):(B[t>>>2>>>0]=r,B[t+4>>>2>>>0]=e)},y:()=>{De("")},fa:function(e,r,t){e>>>=0,r>>>=0,t>>>=0,tr.length=0;for(var a;a=M[r++>>>0];){var s=a!=105;s&=a!=112,t+=s&&t%8?4:0,tr.push(a==112?B[t>>>2>>>0]:a==106?Ee[t>>>3]:a==105?m[t>>>2>>>0]:oe[t>>>3>>>0]),t+=s?8:4}return j[e].apply(null,tr)},C:()=>Date.now(),J:function(){return 4294901760},n:()=>performance.now(),H:function(e){e>>>=0;var r=M.length;if(4294901760<e)return!1;for(var t=1;4>=t;t*=2){var a=r*(1+.2/t);a=Math.min(a,e+100663296);var s=Math;a=Math.max(e,a);e:{s=(s.min.call(s,4294901760,a+(65536-a%65536)%65536)-x.buffer.byteLength+65535)/65536;try{x.grow(s),P();var d=1;break e}catch{}d=void 0}if(d)return!0}return!1},W:function(e,r){e>>>=0,r>>>=0;var t=0;return Br().forEach((a,s)=>{var d=r+t;for(s=B[e+4*s>>>2>>>0]=d,d=0;d<a.length;++d)q[s++>>>0>>>0]=a.charCodeAt(d);q[s>>>0>>>0]=0,t+=a.length+1}),0},X:function(e,r){e>>>=0,r>>>=0;var t=Br();B[e>>>2>>>0]=t.length;var a=0;return t.forEach(s=>a+=s.length+1),B[r>>>2>>>0]=a,0},u:()=>52,A:function(){return 52},V:function(){return 70},z:function(e,r,t,a){r>>>=0,t>>>=0,a>>>=0;for(var s=0,d=0;d<t;d++){var g=B[r>>>2>>>0],y=B[r+4>>>2>>>0];r+=8;for(var O=0;O<y;O++){var v=M[g+O>>>0],L=jt[e];v===0||v===10?((e===1?K:_)(hr(L,0)),L.length=0):L.push(v)}s+=y}return B[a>>>2>>>0]=s,0},ba:Dr,m:function(e,r,t,a){return Dr(e>>>0,r>>>0,t>>>0,a>>>0)}},b=function(){function e(t){return b=t.exports,b=Yt(),x=b.ga,P(),ve.unshift(b.ha),ee--,ee==0&&(N!==null&&(clearInterval(N),N=null),$&&(t=$,$=null,t())),b}var r={a:Gt};if(ee++,n.instantiateWasm)try{return n.instantiateWasm(r,e)}catch(t){_(`Module.instantiateWasm callback failed with error: ${t}`),f(t)}return H(r,function(t){e(t.instance)}).catch(f),{}}();n._OrtInit=(e,r)=>(n._OrtInit=b.ia)(e,r),n._OrtGetLastError=(e,r)=>(n._OrtGetLastError=b.ja)(e,r),n._OrtCreateSessionOptions=(e,r,t,a,s,d,g,y,O,v)=>(n._OrtCreateSessionOptions=b.ka)(e,r,t,a,s,d,g,y,O,v),n._OrtAppendExecutionProvider=(e,r)=>(n._OrtAppendExecutionProvider=b.la)(e,r),n._OrtAddFreeDimensionOverride=(e,r,t)=>(n._OrtAddFreeDimensionOverride=b.ma)(e,r,t),n._OrtAddSessionConfigEntry=(e,r,t)=>(n._OrtAddSessionConfigEntry=b.na)(e,r,t),n._OrtReleaseSessionOptions=e=>(n._OrtReleaseSessionOptions=b.oa)(e),n._OrtCreateSession=(e,r,t)=>(n._OrtCreateSession=b.pa)(e,r,t),n._OrtReleaseSession=e=>(n._OrtReleaseSession=b.qa)(e),n._OrtGetInputOutputCount=(e,r,t)=>(n._OrtGetInputOutputCount=b.ra)(e,r,t),n._OrtGetInputName=(e,r)=>(n._OrtGetInputName=b.sa)(e,r),n._OrtGetOutputName=(e,r)=>(n._OrtGetOutputName=b.ta)(e,r),n._OrtFree=e=>(n._OrtFree=b.ua)(e),n._OrtCreateTensor=(e,r,t,a,s,d)=>(n._OrtCreateTensor=b.va)(e,r,t,a,s,d),n._OrtGetTensorData=(e,r,t,a,s)=>(n._OrtGetTensorData=b.wa)(e,r,t,a,s),n._OrtReleaseTensor=e=>(n._OrtReleaseTensor=b.xa)(e),n._OrtCreateRunOptions=(e,r,t,a)=>(n._OrtCreateRunOptions=b.ya)(e,r,t,a),n._OrtAddRunConfigEntry=(e,r,t)=>(n._OrtAddRunConfigEntry=b.za)(e,r,t),n._OrtReleaseRunOptions=e=>(n._OrtReleaseRunOptions=b.Aa)(e),n._OrtCreateBinding=e=>(n._OrtCreateBinding=b.Ba)(e),n._OrtBindInput=(e,r,t)=>(n._OrtBindInput=b.Ca)(e,r,t),n._OrtBindOutput=(e,r,t,a)=>(n._OrtBindOutput=b.Da)(e,r,t,a),n._OrtClearBoundOutputs=e=>(n._OrtClearBoundOutputs=b.Ea)(e),n._OrtReleaseBinding=e=>(n._OrtReleaseBinding=b.Fa)(e),n._OrtRunWithBinding=(e,r,t,a,s)=>(n._OrtRunWithBinding=b.Ga)(e,r,t,a,s),n._OrtRun=(e,r,t,a,s,d,g,y)=>(n._OrtRun=b.Ha)(e,r,t,a,s,d,g,y),n._OrtEndProfiling=e=>(n._OrtEndProfiling=b.Ia)(e);var Wr=()=>(Wr=b.Ja)(),Re=n._malloc=e=>(Re=n._malloc=b.Ka)(e),ie=n._free=e=>(ie=n._free=b.La)(e),Fr=e=>(Fr=b.Ma)(e),Mr=()=>(Mr=b.Oa)(),kr=e=>(kr=b.Pa)(e),Rr=e=>(Rr=b.Qa)(e);function Yt(){var e=b;e=Object.assign({},e);var r=a=>()=>a()>>>0,t=a=>s=>a(s)>>>0;return e.Ja=r(e.Ja),e.Ka=t(e.Ka),e.Ma=t(e.Ma),e.Oa=r(e.Oa),e.Qa=t(e.Qa),e}n.stackAlloc=Rr,n.stackSave=Mr,n.stackRestore=kr,n.UTF8ToString=Ie,n.stringToUTF8=(e,r,t)=>Fe(e,M,r,t),n.lengthBytesUTF8=We;var Ne;$=function e(){Ne||Nr(),Ne||($=e)};function Nr(){if(!(0<ee)){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;){var e=n.preRun.shift();ae.unshift(e)}for(;0<ae.length;)ae.shift()(n);if(!(0<ee||Ne||(Ne=!0,n.calledRun=!0,V))){for(;0<ve.length;)ve.shift()(n);for(l(n);0<Q.length;)Q.shift()(n)}}}return Nr(),i.ready}})();typeof Vr=="object"&&typeof ar=="object"?ar.exports=Yr:typeof define=="function"&&define.amd&&define([],()=>Yr)});var ze,Qt,ir,ur,je,qr,en,rn,tn,Xr,k,be=Z(()=>{"use strict";ze=sr();Qt=ze,ur=!1,je=!1,qr=!1,en=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},rn=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},tn=(o,i)=>o?i?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":i?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Xr=async(o,i)=>{if(ur)return Promise.resolve();if(je)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(qr)throw new Error("previous call to 'initializeWebAssembly()' failed.");je=!0;let n=o.initTimeout,l=o.numThreads,f=o.simd,p=l>1&&en(),c=f&&rn();i!="webgpu"&&(ze=sr());let w=o.wasmPaths,T=typeof w=="string"?w:void 0,E=tn(c,p),A=typeof w=="object"?w[E]:void 0,C=!1,h=[];if(n>0&&h.push(new Promise(S=>{setTimeout(()=>{C=!0,S()},n)})),h.push(new Promise((S,U)=>{(p?Qt:ze)({locateFile:(_,x)=>{if(_.endsWith(".wasm")){if(A)return A;let V=T??x;if(i=="webgpu"){if(E==="ort-wasm-simd.wasm")return V+"ort-wasm-simd.jsep.wasm";if(E==="ort-wasm-simd-threaded.wasm")return V+"ort-wasm-simd-threaded.jsep.wasm"}return V+E}return x+_}}).then(_=>{je=!1,ur=!0,ir=_,S()},_=>{je=!1,qr=!0,U(_)})})),await Promise.race(h),C)throw new Error(`WebAssembly backend initializing failed due to timeout: ${n}ms`)},k=()=>{if(ur&&ir)return ir;throw new Error("WebAssembly is not initialized yet.")}});var R,Ce,F,Ge=Z(()=>{"use strict";be();R=(o,i)=>{let n=k(),l=n.lengthBytesUTF8(o)+1,f=n._malloc(l);return n.stringToUTF8(o,f,l),i.push(f),f},Ce=(o,i,n,l)=>{if(typeof o=="object"&&o!==null){if(n.has(o))throw new Error("Circular reference in options");n.add(o)}Object.entries(o).forEach(([f,p])=>{let c=i?i+f:f;if(typeof p=="object")Ce(p,c+".",n,l);else if(typeof p=="string"||typeof p=="number")l(c,p.toString());else if(typeof p=="boolean")l(c,p?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof p}`)})},F=o=>{let i=k(),n=i.stackSave();try{let l=i.stackAlloc(8);i._OrtGetLastError(l,l+4);let f=i.HEAP32[l/4],p=i.HEAPU32[l/4+1],c=p?i.UTF8ToString(p):"";throw new Error(`${o} ERROR_CODE: ${f}, ERROR_MESSAGE: ${c}`)}finally{i.stackRestore(n)}}});var Jr,Zr=Z(()=>{"use strict";be();Ge();Jr=o=>{let i=k(),n=0,l=[],f=o||{};try{if(o?.logSeverityLevel===void 0)f.logSeverityLevel=2;else if(typeof o.logSeverityLevel!="number"||!Number.isInteger(o.logSeverityLevel)||o.logSeverityLevel<0||o.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${o.logSeverityLevel}`);if(o?.logVerbosityLevel===void 0)f.logVerbosityLevel=0;else if(typeof o.logVerbosityLevel!="number"||!Number.isInteger(o.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${o.logVerbosityLevel}`);o?.terminate===void 0&&(f.terminate=!1);let p=0;return o?.tag!==void 0&&(p=R(o.tag,l)),n=i._OrtCreateRunOptions(f.logSeverityLevel,f.logVerbosityLevel,!!f.terminate,p),n===0&&F("Can't create run options."),o?.extra!==void 0&&Ce(o.extra,"",new WeakSet,(c,w)=>{let T=R(c,l),E=R(w,l);i._OrtAddRunConfigEntry(n,T,E)!==0&&F(`Can't set a run config entry: ${c} - ${w}.`)}),[n,l]}catch(p){throw n!==0&&i._OrtReleaseRunOptions(n),l.forEach(c=>i._free(c)),p}}});var nn,on,an,sn,Kr,Qr=Z(()=>{"use strict";be();Ge();nn=o=>{switch(o){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${o}`)}},on=o=>{switch(o){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${o}`)}},an=o=>{o.extra||(o.extra={}),o.extra.session||(o.extra.session={});let i=o.extra.session;i.use_ort_model_bytes_directly||(i.use_ort_model_bytes_directly="1"),o.executionProviders&&o.executionProviders.some(n=>(typeof n=="string"?n:n.name)==="webgpu")&&(o.enableMemPattern=!1)},sn=(o,i,n)=>{for(let l of i){let f=typeof l=="string"?l:l.name;switch(f){case"xnnpack":f="XNNPACK";break;case"webnn":if(f="WEBNN",typeof l!="string"){let c=l;if(c?.deviceType){let w=R("deviceType",n),T=R(c.deviceType,n);k()._OrtAddSessionConfigEntry(o,w,T)!==0&&F(`Can't set a session config entry: 'deviceType' - ${c.deviceType}.`)}if(c?.numThreads){let w=c.numThreads;(typeof w!="number"||!Number.isInteger(w)||w<0)&&(w=0);let T=R("numThreads",n),E=R(w.toString(),n);k()._OrtAddSessionConfigEntry(o,T,E)!==0&&F(`Can't set a session config entry: 'numThreads' - ${c.numThreads}.`)}if(c?.powerPreference){let w=R("powerPreference",n),T=R(c.powerPreference,n);k()._OrtAddSessionConfigEntry(o,w,T)!==0&&F(`Can't set a session config entry: 'powerPreference' - ${c.powerPreference}.`)}}break;case"webgpu":if(f="JS",typeof l!="string"){let c=l;if(c?.preferredLayout){if(c.preferredLayout!=="NCHW"&&c.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${c.preferredLayout}`);let w=R("preferredLayout",n),T=R(c.preferredLayout,n);k()._OrtAddSessionConfigEntry(o,w,T)!==0&&F(`Can't set a session config entry: 'preferredLayout' - ${c.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${f}`)}let p=R(f,n);k()._OrtAppendExecutionProvider(o,p)!==0&&F(`Can't append execution provider: ${f}.`)}},Kr=o=>{let i=k(),n=0,l=[],f=o||{};an(f);try{let p=nn(f.graphOptimizationLevel??"all"),c=on(f.executionMode??"sequential"),w=typeof f.logId=="string"?R(f.logId,l):0,T=f.logSeverityLevel??2;if(!Number.isInteger(T)||T<0||T>4)throw new Error(`log serverity level is not valid: ${T}`);let E=f.logVerbosityLevel??0;if(!Number.isInteger(E)||E<0||E>4)throw new Error(`log verbosity level is not valid: ${E}`);let A=typeof f.optimizedModelFilePath=="string"?R(f.optimizedModelFilePath,l):0;if(n=i._OrtCreateSessionOptions(p,!!f.enableCpuMemArena,!!f.enableMemPattern,c,!!f.enableProfiling,0,w,T,E,A),n===0&&F("Can't create session options."),f.executionProviders&&sn(n,f.executionProviders,l),f.freeDimensionOverrides)for(let[C,h]of Object.entries(f.freeDimensionOverrides)){if(typeof C!="string")throw new Error(`free dimension override name must be a string: ${C}`);if(typeof h!="number"||!Number.isInteger(h)||h<0)throw new Error(`free dimension override value must be a non-negative integer: ${h}`);let S=R(C,l);i._OrtAddFreeDimensionOverride(n,S,h)!==0&&F(`Can't set a free dimension override: ${C} - ${h}.`)}return f.extra!==void 0&&Ce(f.extra,"",new WeakSet,(C,h)=>{let S=R(C,l),U=R(h,l);i._OrtAddSessionConfigEntry(n,S,U)!==0&&F(`Can't set a session config entry: ${C} - ${h}.`)}),[n,l]}catch(p){throw n!==0&&i._OrtReleaseSessionOptions(n),l.forEach(c=>i._free(c)),p}}});var fr,et,cr,rt,tt,Ye,nt,lr=Z(()=>{"use strict";fr=o=>{switch(o){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${o}`)}},et=o=>{switch(o){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${o}`)}},cr=o=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][o],rt=o=>{switch(o){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${o}`)}},tt=o=>{switch(o){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${o}`)}},Ye=o=>o==="float32"||o==="int32"||o==="int64"||o==="bool"||o==="float16"||o==="uint32",nt=o=>{switch(o){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${o}`)}}});var ot,at,Be,dr=Z(()=>{"use strict";ot=jr(require("fs")),at=require("node:fs/promises"),Be=async o=>{if(typeof o=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(0,at.readFile)(o))}catch(i){if(i.code==="ERR_FS_FILE_TOO_LARGE"){let n=ot.createReadStream(o),l=[];for await(let f of n)l.push(f);return new Uint8Array(Buffer.concat(l))}throw i}else{let i=await fetch(o);if(!i.ok)throw new Error(`failed to load external data file: ${o}`);let n=i.headers.get("Content-Length"),l=n?parseInt(n,10):0;if(l<1073741824)return new Uint8Array(await i.arrayBuffer());{if(!i.body)throw new Error(`failed to load external data file: ${o}, no response body.`);let f=i.body.getReader(),p=Math.ceil(l/65536),c=new WebAssembly.Memory({initial:p,maximum:p}).buffer,w=0;for(;;){let{done:T,value:E}=await f.read();if(T)break;let A=E.byteLength;new Uint8Array(c,w,A).set(E),w+=A}return new Uint8Array(c,0,l)}}else return o instanceof Blob?new Uint8Array(await o.arrayBuffer()):o instanceof Uint8Array?o:new Uint8Array(o)}});var un,it,ut,xe,fn,pr,ft,ct,st,lt,dt,pt=Z(()=>{"use strict";Zr();Qr();lr();be();Ge();dr();un=(o,i)=>{k()._OrtInit(o,i)!==0&&F("Can't initialize onnxruntime.")},it=async o=>{un(o.wasm.numThreads,tt(o.logLevel))},ut=async(o,i)=>{},xe=new Map,fn=o=>{let i=k(),n=i.stackSave();try{let l=i.stackAlloc(8);return i._OrtGetInputOutputCount(o,l,l+4)!==0&&F("Can't get session input/output count."),[i.HEAP32[l/4],i.HEAP32[l/4+1]]}finally{i.stackRestore(n)}},pr=o=>{let i=k(),n=i._malloc(o.byteLength);if(n===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${o.byteLength}.`);return i.HEAPU8.set(o,n),[n,o.byteLength]},ft=async(o,i)=>{let n,l,f=k();Array.isArray(o)?[n,l]=o:o.buffer===f.HEAPU8.buffer?[n,l]=[o.byteOffset,o.byteLength]:[n,l]=pr(o);let p=0,c=0,w=0,T=[],E=[],A=[];try{if([c,T]=Kr(i),i?.externalData&&f.mountExternalData){let _=[];for(let x of i.externalData){let V=typeof x=="string"?x:x.path;_.push(Be(typeof x=="string"?x:x.data).then(q=>{f.mountExternalData(V,q)}))}await Promise.all(_)}p=f._OrtCreateSession(n,l,c),p===0&&F("Can't create a session.");let[C,h]=fn(p),S=[],U=[],D=[];for(let _=0;_<C;_++){let x=f._OrtGetInputName(p,_);x===0&&F("Can't get an input name."),E.push(x),S.push(f.UTF8ToString(x))}for(let _=0;_<h;_++){let x=f._OrtGetOutputName(p,_);x===0&&F("Can't get an output name."),A.push(x);let V=f.UTF8ToString(x);U.push(V)}let K=null;return xe.set(p,[p,E,A,K]),[p,S,U]}catch(C){throw E.forEach(h=>f._OrtFree(h)),A.forEach(h=>f._OrtFree(h)),w!==0&&f._OrtReleaseBinding(w),p!==0&&f._OrtReleaseSession(p),C}finally{f._free(n),c!==0&&f._OrtReleaseSessionOptions(c),T.forEach(C=>f._free(C)),f.unmountExternalData?.()}},ct=o=>{let i=k(),n=xe.get(o);if(!n)throw new Error(`cannot release session. invalid session id: ${o}`);let[l,f,p,c]=n;c&&i._OrtReleaseBinding(c.handle),i.jsepUnregisterBuffers?.(o),f.forEach(w=>i._OrtFree(w)),p.forEach(w=>i._OrtFree(w)),i._OrtReleaseSession(l),xe.delete(o)},st=(o,i,n,l,f)=>{if(!o){i.push(0);return}let p=k(),c=o[0],w=o[1],T=o[3],E,A;if(c==="string"&&T==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(T==="gpu-buffer"){let S=o[2].gpuBuffer,U=cr(fr(c));A=w.reduce((D,K)=>D*K,1)*U,E=p.jsepRegisterBuffer(l,f,S,A)}else{let S=o[2];if(Array.isArray(S)){A=4*S.length,E=p._malloc(A),n.push(E);let U=E/4;for(let D=0;D<S.length;D++){if(typeof S[D]!="string")throw new TypeError(`tensor data at index ${D} is not a string`);p.HEAPU32[U++]=R(S[D],n)}}else A=S.byteLength,E=p._malloc(A),n.push(E),p.HEAPU8.set(new Uint8Array(S.buffer,S.byteOffset,A),E)}let C=p.stackSave(),h=p.stackAlloc(4*w.length);try{let S=h/4;w.forEach(D=>p.HEAP32[S++]=D);let U=p._OrtCreateTensor(fr(c),E,A,h,w.length,nt(T));U===0&&F(`Can't create tensor for input/output. session=${l}, index=${f}.`),i.push(U)}finally{p.stackRestore(C)}},lt=async(o,i,n,l,f,p)=>{let c=k(),w=xe.get(o);if(!w)throw new Error(`cannot run inference. invalid session id: ${o}`);let[T,E,A,C]=w,h=i.length,S=l.length,U=0,D=[],K=[],_=[],x=[],V=c.stackSave(),q=c.stackAlloc(h*4),M=c.stackAlloc(h*4),ne=c.stackAlloc(S*4),me=c.stackAlloc(S*4);try{[U,D]=Jr(p);for(let P=0;P<h;P++)st(n[P],K,x,o,i[P]);for(let P=0;P<S;P++)st(f[P],_,x,o,h+l[P]);let m=q/4,B=M/4,Ue=ne/4,Ee=me/4;for(let P=0;P<h;P++)c.HEAPU32[m++]=K[P],c.HEAPU32[B++]=E[i[P]];for(let P=0;P<S;P++)c.HEAPU32[Ue++]=_[P],c.HEAPU32[Ee++]=A[l[P]];let Ae;Ae=await c._OrtRun(T,M,q,h,me,S,ne,U),Ae!==0&&F("failed to call OrtRun().");let oe=[];for(let P=0;P<S;P++){let ae=c.HEAPU32[ne/4+P];if(ae===_[P]){oe.push(f[P]);continue}let ve=c.stackSave(),Q=c.stackAlloc(4*4),ee=!1,N,$=0;try{c._OrtGetTensorData(ae,Q,Q+4,Q+8,Q+12)!==0&&F(`Can't access output tensor data on index ${P}.`);let ge=Q/4,ye=c.HEAPU32[ge++];$=c.HEAPU32[ge++];let le=c.HEAPU32[ge++],Le=c.HEAPU32[ge++],de=[];for(let H=0;H<Le;H++)de.push(c.HEAPU32[le/4+H]);c._OrtFree(le);let he=de.reduce((H,j)=>H*j,1);N=et(ye);let Te=C?.outputPreferredLocations[l[P]];if(N==="string"){if(Te==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let H=[],j=$/4;for(let _e=0;_e<he;_e++){let Pe=c.HEAPU32[j++],Je=_e===he-1?void 0:c.HEAPU32[j]-Pe;H.push(c.UTF8ToString(Pe,Je))}oe.push([N,de,H,"cpu"])}else if(Te==="gpu-buffer"&&he>0){let H=c.jsepGetBuffer($),j=cr(ye);if(j===void 0||!Ye(N))throw new Error(`Unsupported data type: ${N}`);ee=!0,oe.push([N,de,{gpuBuffer:H,download:c.jsepCreateDownloader(H,he*j,N),dispose:()=>{c._OrtReleaseTensor(ae)}},"gpu-buffer"])}else{let H=rt(N),j=new H(he);new Uint8Array(j.buffer,j.byteOffset,j.byteLength).set(c.HEAPU8.subarray($,$+j.byteLength)),oe.push([N,de,j,"cpu"])}}finally{c.stackRestore(ve),N==="string"&&$&&c._free($),ee||c._OrtReleaseTensor(ae)}}return C&&c._OrtClearBoundOutputs(C.handle),oe}finally{c.stackRestore(V),K.forEach(m=>c._OrtReleaseTensor(m)),_.forEach(m=>c._OrtReleaseTensor(m)),x.forEach(m=>c._free(m)),U!==0&&c._OrtReleaseRunOptions(U),D.forEach(m=>c._free(m))}},dt=o=>{let i=k(),n=xe.get(o);if(!n)throw new Error("invalid session id");let l=n[0],f=i._OrtEndProfiling(l);f===0&&F("Can't get an profile file name."),i._OrtFree(f)}});var Ve,mr,mt,gt,Nn,yt,ht,wt,vt,St,bt,Ot,gr=Z(()=>{"use strict";Ve=require("onnxruntime-common");pt();be();mr=!1,mt=!1,gt=!1,Nn=typeof document<"u"?document?.currentScript?.src:void 0,yt=async o=>{if(!mt){if(mr)throw new Error("multiple calls to 'initWasm()' detected.");if(gt)throw new Error("previous call to 'initWasm()' failed.");mr=!0;try{await Xr(Ve.env.wasm,o),await it(Ve.env),mt=!0}catch(i){throw gt=!0,i}finally{mr=!1}}},ht=async o=>{await ut(Ve.env,o)},wt=async o=>pr(o),vt=async(o,i)=>ft(o,i),St=async o=>{ct(o)},bt=async(o,i,n,l,f,p)=>lt(o,i,n,l,f,p),Ot=async o=>{dt(o)}});var ce,Et,ln,qe,At=Z(()=>{"use strict";ce=require("onnxruntime-common");gr();lr();dr();Et=(o,i)=>{switch(o.location){case"cpu":return[o.type,o.dims,o.data,"cpu"];case"gpu-buffer":return[o.type,o.dims,{gpuBuffer:o.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${o.location} for ${i()}`)}},ln=o=>{switch(o[3]){case"cpu":return new ce.Tensor(o[0],o[2],o[1]);case"gpu-buffer":{let i=o[0];if(!Ye(i))throw new Error(`not supported data type: ${i} for deserializing GPU tensor`);let{gpuBuffer:n,download:l,dispose:f}=o[2];return ce.Tensor.fromGpuBuffer(n,{dataType:i,dims:o[1],download:l,dispose:f})}default:throw new Error(`invalid data location: ${o[3]}`)}},qe=class{async fetchModelAndCopyToWasmMemory(i){return wt(await Be(i))}async loadModel(i,n){(0,ce.TRACE_FUNC_BEGIN)();let l;typeof i=="string"?typeof process<"u"&&process.versions&&process.versions.node?l=await Be(i):l=await this.fetchModelAndCopyToWasmMemory(i):l=i,[this.sessionId,this.inputNames,this.outputNames]=await vt(l,n),(0,ce.TRACE_FUNC_END)()}async dispose(){return St(this.sessionId)}async run(i,n,l){(0,ce.TRACE_FUNC_BEGIN)();let f=[],p=[];Object.entries(i).forEach(h=>{let S=h[0],U=h[1],D=this.inputNames.indexOf(S);if(D===-1)throw new Error(`invalid input '${S}'`);f.push(U),p.push(D)});let c=[],w=[];Object.entries(n).forEach(h=>{let S=h[0],U=h[1],D=this.outputNames.indexOf(S);if(D===-1)throw new Error(`invalid output '${S}'`);c.push(U),w.push(D)});let T=f.map((h,S)=>Et(h,()=>`input "${this.inputNames[p[S]]}"`)),E=c.map((h,S)=>h?Et(h,()=>`output "${this.outputNames[w[S]]}"`):null),A=await bt(this.sessionId,p,T,w,E,l),C={};for(let h=0;h<A.length;h++)C[this.outputNames[w[h]]]=c[h]??ln(A[h]);return(0,ce.TRACE_FUNC_END)(),C}startProfiling(){}endProfiling(){Ot(this.sessionId)}}});var Tt,z,dn,Xe,_t=Z(()=>{"use strict";Tt=require("node:os"),z=require("onnxruntime-common");gr();At();dn=()=>{if((typeof z.env.wasm.initTimeout!="number"||z.env.wasm.initTimeout<0)&&(z.env.wasm.initTimeout=0),typeof z.env.wasm.simd!="boolean"&&(z.env.wasm.simd=!0),typeof z.env.wasm.proxy!="boolean"&&(z.env.wasm.proxy=!1),typeof z.env.wasm.trace!="boolean"&&(z.env.wasm.trace=!1),typeof z.env.wasm.numThreads!="number"||!Number.isInteger(z.env.wasm.numThreads)||z.env.wasm.numThreads<=0){let o=typeof navigator>"u"?(0,Tt.cpus)().length:navigator.hardwareConcurrency;z.env.wasm.numThreads=Math.min(4,Math.ceil((o||1)/2))}},Xe=class{async init(i){dn(),await yt(i),await ht(i)}async createInferenceSessionHandler(i,n){let l=new qe;return await l.loadModel(i,n),Promise.resolve(l)}}});var Pt={};Hr(Pt,{wasmBackend:()=>pn});var pn,It=Z(()=>{"use strict";_t();pn=new Xe});var te={};Hr(te,{default:()=>gn});module.exports=zr(te);fe(te,require("onnxruntime-common"),module.exports);var mn=jr(require("onnxruntime-common")),Oe=require("onnxruntime-common");var Gr="1.17.0";var gn=mn;{let o=(It(),zr(Pt)).wasmBackend;(0,Oe.registerBackend)("cpu",o,10),(0,Oe.registerBackend)("wasm",o,10),(0,Oe.registerBackend)("xnnpack",o,9)}Object.defineProperty(Oe.env.versions,"web",{value:Gr,enumerable:!0});0&&(module.exports={...require("onnxruntime-common")});
//# sourceMappingURL=ort.node.min.js.map
