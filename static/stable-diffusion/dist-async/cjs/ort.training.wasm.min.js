/*!
 * ONNX Runtime Web v1.17.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
"use strict";var Fr=Object.defineProperty;var Lo=Object.getOwnPropertyDescriptor;var Ho=Object.getOwnPropertyNames;var Wo=Object.prototype.hasOwnProperty;var G=(a,n)=>()=>(a&&(n=a(a=0)),n);var pt=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),mt=(a,n)=>{for(var r in n)Fr(a,r,{get:n[r],enumerable:!0})},No=(a,n,r,l)=>{if(n&&typeof n=="object"||typeof n=="function")for(let u of Ho(n))!Wo.call(a,u)&&u!==r&&Fr(a,u,{get:()=>n[u],enumerable:!(l=Lo(n,u))||l.enumerable});return a};var et=a=>No(Fr({},"__esModule",{value:!0}),a);var Qt,tt,ht,er,tr=G(()=>{"use strict";Qt=new Map,tt=[],ht=(a,n,r)=>{if(n&&typeof n.init=="function"&&typeof n.createInferenceSessionHandler=="function"){let l=Qt.get(a);if(l===void 0)Qt.set(a,{backend:n,priority:r});else{if(l.priority>r)return;if(l.priority===r&&l.backend!==n)throw new Error(`cannot register backend "${a}" using priority ${r}`)}if(r>=0){let u=tt.indexOf(a);u!==-1&&tt.splice(u,1);for(let m=0;m<tt.length;m++)if(Qt.get(tt[m]).priority<=r){tt.splice(m,0,a);return}tt.push(a)}return}throw new TypeError("not a valid backend")},er=async a=>{let n=a.length===0?tt:a,r=[];for(let l of n){let u=Qt.get(l);if(u){if(u.initialized)return u.backend;if(u.aborted)continue;let m=!!u.initPromise;try{return m||(u.initPromise=u.backend.init(l)),await u.initPromise,u.initialized=!0,u.backend}catch(f){m||r.push({name:l,err:f}),u.aborted=!0}finally{delete u.initPromise}}}throw new Error(`no available backend found. ERR: ${r.map(l=>`[${l.name}] ${l.err}`).join(", ")}`)}});var Xn=G(()=>{"use strict";tr()});var Kn,Zn=G(()=>{"use strict";Kn="1.17.0"});var Qn,rt,kr=G(()=>{"use strict";Zn();Qn="warning",rt={wasm:{},webgl:{},webgpu:{},versions:{common:Kn},set logLevel(a){if(a!==void 0){if(typeof a!="string"||["verbose","info","warning","error","fatal"].indexOf(a)===-1)throw new Error(`Unsupported logging level: ${a}`);Qn=a}},get logLevel(){return Qn}};Object.defineProperty(rt,"logLevel",{enumerable:!0})});var X,ea=G(()=>{"use strict";kr();X=rt});var ta,ra,na=G(()=>{"use strict";ta=(a,n)=>{let r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=a.dims[3],r.height=a.dims[2];let l=r.getContext("2d");if(l!=null){let u,m;n?.tensorLayout!==void 0&&n.tensorLayout==="NHWC"?(u=a.dims[2],m=a.dims[3]):(u=a.dims[3],m=a.dims[2]);let f=n?.format!==void 0?n.format:"RGB",p=n?.norm,b,s;p===void 0||p.mean===void 0?b=[255,255,255,255]:typeof p.mean=="number"?b=[p.mean,p.mean,p.mean,p.mean]:(b=[p.mean[0],p.mean[1],p.mean[2],0],p.mean[3]!==void 0&&(b[3]=p.mean[3])),p===void 0||p.bias===void 0?s=[0,0,0,0]:typeof p.bias=="number"?s=[p.bias,p.bias,p.bias,p.bias]:(s=[p.bias[0],p.bias[1],p.bias[2],0],p.bias[3]!==void 0&&(s[3]=p.bias[3]));let y=m*u,E=0,O=y,A=y*2,I=-1;f==="RGBA"?(E=0,O=y,A=y*2,I=y*3):f==="RGB"?(E=0,O=y,A=y*2):f==="RBG"&&(E=0,A=y,O=y*2);for(let P=0;P<m;P++)for(let H=0;H<u;H++){let U=(a.data[E++]-s[0])*b[0],C=(a.data[O++]-s[1])*b[1],W=(a.data[A++]-s[2])*b[2],j=I===-1?255:(a.data[I++]-s[3])*b[3];l.fillStyle="rgba("+U+","+C+","+W+","+j+")",l.fillRect(H,P,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},ra=(a,n)=>{let r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),l;if(r!=null){let u,m,f;n?.tensorLayout!==void 0&&n.tensorLayout==="NHWC"?(u=a.dims[2],m=a.dims[1],f=a.dims[3]):(u=a.dims[3],m=a.dims[2],f=a.dims[1]);let p=n!==void 0&&n.format!==void 0?n.format:"RGB",b=n?.norm,s,y;b===void 0||b.mean===void 0?s=[255,255,255,255]:typeof b.mean=="number"?s=[b.mean,b.mean,b.mean,b.mean]:(s=[b.mean[0],b.mean[1],b.mean[2],255],b.mean[3]!==void 0&&(s[3]=b.mean[3])),b===void 0||b.bias===void 0?y=[0,0,0,0]:typeof b.bias=="number"?y=[b.bias,b.bias,b.bias,b.bias]:(y=[b.bias[0],b.bias[1],b.bias[2],0],b.bias[3]!==void 0&&(y[3]=b.bias[3]));let E=m*u;if(n!==void 0&&(n.format!==void 0&&f===4&&n.format!=="RGBA"||f===3&&n.format!=="RGB"&&n.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let O=4,A=0,I=1,P=2,H=3,U=0,C=E,W=E*2,j=-1;p==="RGBA"?(U=0,C=E,W=E*2,j=E*3):p==="RGB"?(U=0,C=E,W=E*2):p==="RBG"&&(U=0,W=E,C=E*2),l=r.createImageData(u,m);for(let K=0;K<m*u;A+=O,I+=O,P+=O,H+=O,K++)l.data[A]=(a.data[U++]-y[0])*s[0],l.data[I]=(a.data[C++]-y[1])*s[1],l.data[P]=(a.data[W++]-y[2])*s[2],l.data[H]=j===-1?255:(a.data[j++]-y[3])*s[3]}else throw new Error("Can not access image data");return l}});var Lr,aa,oa,ia,sa,ua=G(()=>{"use strict";rr();Lr=(a,n)=>{if(a===void 0)throw new Error("Image buffer must be defined");if(n.height===void 0||n.width===void 0)throw new Error("Image height and width must be defined");if(n.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:r,width:l}=n,u=n.norm??{mean:255,bias:0},m,f;typeof u.mean=="number"?m=[u.mean,u.mean,u.mean,u.mean]:m=[u.mean[0],u.mean[1],u.mean[2],u.mean[3]??255],typeof u.bias=="number"?f=[u.bias,u.bias,u.bias,u.bias]:f=[u.bias[0],u.bias[1],u.bias[2],u.bias[3]??0];let p=n.format!==void 0?n.format:"RGBA",b=n.tensorFormat!==void 0&&n.tensorFormat!==void 0?n.tensorFormat:"RGB",s=r*l,y=b==="RGBA"?new Float32Array(s*4):new Float32Array(s*3),E=4,O=0,A=1,I=2,P=3,H=0,U=s,C=s*2,W=-1;p==="RGB"&&(E=3,O=0,A=1,I=2,P=-1),b==="RGBA"?W=s*3:b==="RBG"?(H=0,C=s,U=s*2):b==="BGR"&&(C=0,U=s,H=s*2);for(let K=0;K<s;K++,O+=E,I+=E,A+=E,P+=E)y[H++]=(a[O]+f[0])/m[0],y[U++]=(a[A]+f[1])/m[1],y[C++]=(a[I]+f[2])/m[2],W!==-1&&P!==-1&&(y[W++]=(a[P]+f[3])/m[3]);return b==="RGBA"?new ye("float32",y,[1,4,r,l]):new ye("float32",y,[1,3,r,l])},aa=async(a,n)=>{let r=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,l=typeof ImageData<"u"&&a instanceof ImageData,u=typeof ImageBitmap<"u"&&a instanceof ImageBitmap,m=typeof a=="string",f,p=n??{},b=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},s=y=>y instanceof HTMLCanvasElement||y instanceof OffscreenCanvas?y.getContext("2d"):null;if(r){let y=b();y.width=a.width,y.height=a.height;let E=s(y);if(E!=null){let O=a.height,A=a.width;if(n!==void 0&&n.resizedHeight!==void 0&&n.resizedWidth!==void 0&&(O=n.resizedHeight,A=n.resizedWidth),n!==void 0){if(p=n,n.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");p.tensorFormat="RGBA",p.height=O,p.width=A}else p.tensorFormat="RGBA",p.height=O,p.width=A;E.drawImage(a,0,0),f=E.getImageData(0,0,A,O).data}else throw new Error("Can not access image data")}else if(l){let y,E;if(n!==void 0&&n.resizedWidth!==void 0&&n.resizedHeight!==void 0?(y=n.resizedHeight,E=n.resizedWidth):(y=a.height,E=a.width),n!==void 0&&(p=n),p.format="RGBA",p.height=y,p.width=E,n!==void 0){let O=b();O.width=E,O.height=y;let A=s(O);if(A!=null)A.putImageData(a,0,0),f=A.getImageData(0,0,E,y).data;else throw new Error("Can not access image data")}else f=a.data}else if(u){if(n===void 0)throw new Error("Please provide image config with format for Imagebitmap");let y=b();y.width=a.width,y.height=a.height;let E=s(y);if(E!=null){let O=a.height,A=a.width;return E.drawImage(a,0,0,A,O),f=E.getImageData(0,0,A,O).data,p.height=O,p.width=A,Lr(f,p)}else throw new Error("Can not access image data")}else{if(m)return new Promise((y,E)=>{let O=b(),A=s(O);if(!a||!A)return E();let I=new Image;I.crossOrigin="Anonymous",I.src=a,I.onload=()=>{O.width=I.width,O.height=I.height,A.drawImage(I,0,0,O.width,O.height);let P=A.getImageData(0,0,O.width,O.height);p.height=O.height,p.width=O.width,y(Lr(P.data,p))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(f!==void 0)return Lr(f,p);throw new Error("Input data provided is not supported - aborted tensor creation")},oa=(a,n)=>{let{width:r,height:l,download:u,dispose:m}=n,f=[1,l,r,4];return new ye({location:"texture",type:"float32",texture:a,dims:f,download:u,dispose:m})},ia=(a,n)=>{let{dataType:r,dims:l,download:u,dispose:m}=n;return new ye({location:"gpu-buffer",type:r??"float32",gpuBuffer:a,dims:l,download:u,dispose:m})},sa=(a,n,r)=>new ye({location:"cpu-pinned",type:a,data:n,dims:r??[n.length]})});var Ut,nr,fa,la,ca=G(()=>{"use strict";Ut=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),nr=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),fa=!1,la=()=>{if(!fa){fa=!0;let a=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",n=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";a&&(Ut.set("int64",BigInt64Array),nr.set(BigInt64Array,"int64")),n&&(Ut.set("uint64",BigUint64Array),nr.set(BigUint64Array,"uint64"))}}});var da,pa,ma=G(()=>{"use strict";rr();da=a=>{let n=1;for(let r=0;r<a.length;r++){let l=a[r];if(typeof l!="number"||!Number.isSafeInteger(l))throw new TypeError(`dims[${r}] must be an integer, got: ${l}`);if(l<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${l}`);n*=l}return n},pa=(a,n)=>{switch(a.location){case"cpu":return new ye(a.type,a.data,n);case"cpu-pinned":return new ye({location:"cpu-pinned",data:a.data,type:a.type,dims:n});case"texture":return new ye({location:"texture",texture:a.texture,type:a.type,dims:n});case"gpu-buffer":return new ye({location:"gpu-buffer",gpuBuffer:a.gpuBuffer,type:a.type,dims:n});default:throw new Error(`tensorReshape: tensor location ${a.location} is not supported`)}}});var ye,rr=G(()=>{"use strict";na();ua();ca();ma();ye=class{constructor(n,r,l){la();let u,m;if(typeof n=="object"&&"location"in n)switch(this.dataLocation=n.location,u=n.type,m=n.dims,n.location){case"cpu-pinned":{let p=Ut.get(u);if(!p)throw new TypeError(`unsupported type "${u}" to create tensor from pinned buffer`);if(!(n.data instanceof p))throw new TypeError(`buffer should be of type ${p.name}`);this.cpuData=n.data;break}case"texture":{if(u!=="float32")throw new TypeError(`unsupported type "${u}" to create tensor from texture`);this.gpuTextureData=n.texture,this.downloader=n.download,this.disposer=n.dispose;break}case"gpu-buffer":{if(u!=="float32"&&u!=="float16"&&u!=="int32"&&u!=="int64"&&u!=="uint32"&&u!=="bool")throw new TypeError(`unsupported type "${u}" to create tensor from gpu buffer`);this.gpuBufferData=n.gpuBuffer,this.downloader=n.download,this.disposer=n.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let p,b;if(typeof n=="string")if(u=n,b=l,n==="string"){if(!Array.isArray(r))throw new TypeError("A string tensor's data must be a string array.");p=r}else{let s=Ut.get(n);if(s===void 0)throw new TypeError(`Unsupported tensor type: ${n}.`);if(Array.isArray(r)){if(n==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");n==="uint64"||n==="int64"?p=s.from(r,BigInt):p=s.from(r)}else if(r instanceof s)p=r;else throw new TypeError(`A ${u} tensor's data must be type of ${s}`)}else if(b=r,Array.isArray(n)){if(n.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let s=typeof n[0];if(s==="string")u="string",p=n;else if(s==="boolean")u="bool",p=Uint8Array.from(n);else throw new TypeError(`Invalid element type of data array: ${s}.`)}else{let s=nr.get(n.constructor);if(s===void 0)throw new TypeError(`Unsupported type for tensor data: ${n.constructor}.`);u=s,p=n}if(b===void 0)b=[p.length];else if(!Array.isArray(b))throw new TypeError("A tensor's dims must be a number array");m=b,this.cpuData=p,this.dataLocation="cpu"}let f=da(m);if(this.cpuData&&f!==this.cpuData.length)throw new Error(`Tensor's size(${f}) does not match data length(${this.cpuData.length}).`);this.type=u,this.dims=m,this.size=f}static async fromImage(n,r){return aa(n,r)}static fromTexture(n,r){return oa(n,r)}static fromGpuBuffer(n,r){return ia(n,r)}static fromPinnedBuffer(n,r,l){return sa(n,r,l)}toDataURL(n){return ta(this,n)}toImageData(n){return ra(this,n)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(n){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let r=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=r,n&&this.disposer&&(this.disposer(),this.disposer=void 0),r}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(n){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return pa(this,n)}}});var me,ar=G(()=>{"use strict";rr();me=ye});var Hr,ha,qe,Je,Wr=G(()=>{"use strict";kr();Hr=(a,n)=>{rt.wasm.trace&&console.timeStamp(`${a}::ORT::${n}`)},ha=(a,n)=>{let r=new Error().stack?.split(/\r\n|\r|\n/g)||[],l=!1;for(let u=0;u<r.length;u++){if(l&&!r[u].includes("TRACE_FUNC")){let m=`FUNC_${a}::${r[u].trim().split(" ")[1]}`;n&&(m+=`::${n}`),Hr("CPU",m);return}r[u].includes("TRACE_FUNC")&&(l=!0)}},qe=a=>{rt.wasm.trace&&ha("BEGIN",a)},Je=a=>{rt.wasm.trace&&ha("END",a)}});var or,ga=G(()=>{"use strict";tr();ar();Wr();or=class a{constructor(n){this.handler=n}async run(n,r,l){qe();let u={},m={};if(typeof n!="object"||n===null||n instanceof me||Array.isArray(n))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let f=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");f=!1;for(let s of r){if(typeof s!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(s)===-1)throw new RangeError(`'fetches' contains invalid output name: ${s}.`);u[s]=null}if(typeof l=="object"&&l!==null)m=l;else if(typeof l<"u")throw new TypeError("'options' must be an object.")}else{let s=!1,y=Object.getOwnPropertyNames(r);for(let E of this.outputNames)if(y.indexOf(E)!==-1){let O=r[E];(O===null||O instanceof me)&&(s=!0,f=!1,u[E]=O)}if(s){if(typeof l=="object"&&l!==null)m=l;else if(typeof l<"u")throw new TypeError("'options' must be an object.")}else m=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let s of this.inputNames)if(typeof n[s]>"u")throw new Error(`input '${s}' is missing in 'feeds'.`);if(f)for(let s of this.outputNames)u[s]=null;let p=await this.handler.run(n,u,m),b={};for(let s in p)if(Object.hasOwnProperty.call(p,s)){let y=p[s];y instanceof me?b[s]=y:b[s]=new me(y.type,y.data,y.dims)}return Je(),b}async release(){return this.handler.dispose()}static async create(n,r,l,u){qe();let m,f={};if(typeof n=="string"){if(m=n,typeof r=="object"&&r!==null)f=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(n instanceof Uint8Array){if(m=n,typeof r=="object"&&r!==null)f=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer){let E=n,O=0,A=n.byteLength;if(typeof r=="object"&&r!==null)f=r;else if(typeof r=="number"){if(O=r,!Number.isSafeInteger(O))throw new RangeError("'byteOffset' must be an integer.");if(O<0||O>=E.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${E.byteLength}).`);if(A=n.byteLength-O,typeof l=="number"){if(A=l,!Number.isSafeInteger(A))throw new RangeError("'byteLength' must be an integer.");if(A<=0||O+A>E.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${E.byteLength-O}].`);if(typeof u=="object"&&u!==null)f=u;else if(typeof u<"u")throw new TypeError("'options' must be an object.")}else if(typeof l<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");m=new Uint8Array(E,O,A)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let b=(f.executionProviders||[]).map(E=>typeof E=="string"?E:E.name),y=await(await er(b)).createInferenceSessionHandler(m,f);return Je(),new a(y)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}});var ya,ba=G(()=>{"use strict";ga();ya=or});var wa=G(()=>{"use strict"});var $o,ir,va=G(()=>{"use strict";tr();ar();$o="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",ir=class a{constructor(n,r,l){this.handler=n,this.hasOptimizerModel=r,this.hasEvalModel=l}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(n,r){let l=n.evalModel||"",u=n.optimizerModel||"",m=r||{},p=(m.executionProviders||[]).map(s=>typeof s=="string"?s:s.name),b=await er(p);if(b.createTrainingSessionHandler){let s=await b.createTrainingSessionHandler(n.checkpointState,n.trainModel,l,u,m);return new a(s,!!n.optimizerModel,!!n.evalModel)}else throw new Error($o)}typeNarrowingForRunStep(n,r,l,u,m){let f={},p={};if(typeof l!="object"||l===null||l instanceof me||Array.isArray(l))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let b=!0;if(typeof u=="object"){if(u===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(u instanceof me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(u)){if(u.length===0)throw new TypeError("'fetches' cannot be an empty array.");b=!1;for(let s of u){if(typeof s!="string")throw new TypeError("'fetches' must be a string array or an object.");if(r.indexOf(s)===-1)throw new RangeError(`'fetches' contains invalid output name: ${s}.`);f[s]=null}if(typeof m=="object"&&m!==null)p=m;else if(typeof m<"u")throw new TypeError("'options' must be an object.")}else{let s=!1,y=Object.getOwnPropertyNames(u);for(let E of r)if(y.indexOf(E)!==-1){let O=u[E];(O===null||O instanceof me)&&(s=!0,b=!1,f[E]=O)}if(s){if(typeof m=="object"&&m!==null)p=m;else if(typeof m<"u")throw new TypeError("'options' must be an object.")}else p=u}}else if(typeof u<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let s of n)if(typeof l[s]>"u")throw new Error(`input '${s}' is missing in 'feeds'.`);if(b)for(let s of r)f[s]=null;return[f,p]}convertHandlerReturnTypeToMapOfTensors(n){let r={};for(let l in n)if(Object.hasOwnProperty.call(n,l)){let u=n[l];u instanceof me?r[l]=u:r[l]=new me(u.type,u.data,u.dims)}return r}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(n,r,l){let[u,m]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,n,r,l),f=await this.handler.runTrainStep(n,u,m);return this.convertHandlerReturnTypeToMapOfTensors(f)}async runOptimizerStep(n){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(n||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(n,r,l){if(this.hasEvalModel){let[u,m]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,n,r,l),f=await this.handler.runEvalStep(n,u,m);return this.convertHandlerReturnTypeToMapOfTensors(f)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(n=!0){return this.handler.getParametersSize(n)}async loadParametersBuffer(n,r=!0){let l=await this.getParametersSize(r);if(n.length!==4*l)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(n,r)}async getContiguousParameters(n=!0){return this.handler.getContiguousParameters(n)}async release(){return this.handler.dispose()}}});var Oa,Ta=G(()=>{"use strict";va();Oa=ir});var Nr={};mt(Nr,{InferenceSession:()=>ya,TRACE:()=>Hr,TRACE_FUNC_BEGIN:()=>qe,TRACE_FUNC_END:()=>Je,Tensor:()=>me,TrainingSession:()=>Oa,env:()=>X,registerBackend:()=>ht});var nt=G(()=>{"use strict";Xn();ea();ba();ar();Wr();wa();Ta()});var $r={};mt($r,{createReadStream:()=>Ea,readFile:()=>zo,readFileSync:()=>Go});var zo,Go,Ea,zr=G(()=>{zo=void 0,Go=void 0,Ea=void 0});var Gr={};mt(Gr,{join:()=>jo});var jo,jr=G(()=>{jo=void 0});var Ma=pt((Sa,Yr)=>{"use strict";var Aa=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(a=a||__filename),function(n={}){var r=n,l,u;r.ready=new Promise((i,c)=>{l=i,u=c});var m=Object.assign({},r),f="./this.program",p=typeof window=="object",b=typeof importScripts=="function",s=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",y="",E,O,A;if(s){var I=(zr(),et($r)),P=(jr(),et(Gr));y=b?P.dirname(y)+"/":__dirname+"/",E=(i,c)=>(i=oe(i)?new URL(i):P.normalize(i),I.readFileSync(i,c?void 0:"utf8")),A=i=>(i=E(i,!0),i.buffer||(i=new Uint8Array(i)),i),O=(i,c,h,v=!0)=>{i=oe(i)?new URL(i):P.normalize(i),I.readFile(i,v?void 0:"utf8",(M,D)=>{M?h(M):c(v?D.buffer:D)})},!r.thisProgram&&1<process.argv.length&&(f=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),r.inspect=()=>"[Emscripten Module object]"}else(p||b)&&(b?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),a&&(y=a),y.indexOf("blob:")!==0?y=y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):y="",E=i=>{var c=new XMLHttpRequest;return c.open("GET",i,!1),c.send(null),c.responseText},b&&(A=i=>{var c=new XMLHttpRequest;return c.open("GET",i,!1),c.responseType="arraybuffer",c.send(null),new Uint8Array(c.response)}),O=(i,c,h)=>{var v=new XMLHttpRequest;v.open("GET",i,!0),v.responseType="arraybuffer",v.onload=()=>{v.status==200||v.status==0&&v.response?c(v.response):h()},v.onerror=h,v.send(null)});var H=console.log.bind(console),U=console.error.bind(console);Object.assign(r,m),m=null,typeof WebAssembly!="object"&&Me("no native wasm support detected");var C,W=!1,j,K,x,q,fe;function Ne(){var i=C.buffer;r.HEAP8=j=new Int8Array(i),r.HEAP16=new Int16Array(i),r.HEAPU8=K=new Uint8Array(i),r.HEAPU16=new Uint16Array(i),r.HEAP32=x=new Int32Array(i),r.HEAPU32=q=new Uint32Array(i),r.HEAPF32=new Float32Array(i),r.HEAPF64=fe=new Float64Array(i)}var $e=[],ze=[],Xe=[],ee=0,F=null,be=null;function Me(i){throw i="Aborted("+i+")",U(i),W=!0,i=new WebAssembly.RuntimeError(i+". Build with -sASSERTIONS for more info."),u(i),i}var le=i=>i.startsWith("data:application/octet-stream;base64,"),oe=i=>i.startsWith("file://"),ne;if(ne="ort-training-wasm-simd.wasm",!le(ne)){var ge=ne;ne=r.locateFile?r.locateFile(ge,y):y+ge}function st(i){if(A)return A(i);throw"both async and sync fetching of the wasm failed"}function De(i){if(p||b){if(typeof fetch=="function"&&!oe(i))return fetch(i,{credentials:"same-origin"}).then(c=>{if(!c.ok)throw"failed to load wasm binary file at '"+i+"'";return c.arrayBuffer()}).catch(()=>st(i));if(O)return new Promise((c,h)=>{O(i,v=>c(new Uint8Array(v)),h)})}return Promise.resolve().then(()=>st(i))}function Ge(i,c,h){return De(i).then(v=>WebAssembly.instantiate(v,c)).then(v=>v).then(h,v=>{U(`failed to asynchronously prepare wasm: ${v}`),Me(v)})}function Ke(i,c){var h=ne;return typeof WebAssembly.instantiateStreaming!="function"||le(h)||oe(h)||s||typeof fetch!="function"?Ge(h,i,c):fetch(h,{credentials:"same-origin"}).then(v=>WebAssembly.instantiateStreaming(v,i).then(c,function(M){return U(`wasm streaming compile failed: ${M}`),U("falling back to ArrayBuffer instantiation"),Ge(h,i,c)}))}var ce,Re={989232:(i,c,h,v)=>{if(typeof r>"u"||!r.Qa)return 1;if(i=Fe(i>>>0),i.startsWith("./")&&(i=i.substring(2)),i=r.Qa.get(i),!i)return 2;if(c>>>=0,h>>>=0,c+h>i.byteLength)return 3;try{return K.set(i.subarray(c,c+h),v>>>0>>>0),0}catch{return 4}}};function Ie(i){this.Ka=i-24,this.Pa=function(c){q[this.Ka+4>>>2>>>0]=c},this.Oa=function(c){q[this.Ka+8>>>2>>>0]=c},this.Ma=function(c,h){this.Na(),this.Pa(c),this.Oa(h)},this.Na=function(){q[this.Ka+16>>>2>>>0]=0}}var he=0,ue=0,ie=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,xe=(i,c,h)=>{c>>>=0;var v=c+h;for(h=c;i[h]&&!(h>=v);)++h;if(16<h-c&&i.buffer&&ie)return ie.decode(i.subarray(c,h));for(v="";c<h;){var M=i[c++];if(M&128){var D=i[c++]&63;if((M&224)==192)v+=String.fromCharCode((M&31)<<6|D);else{var $=i[c++]&63;M=(M&240)==224?(M&15)<<12|D<<6|$:(M&7)<<18|D<<12|$<<6|i[c++]&63,65536>M?v+=String.fromCharCode(M):(M-=65536,v+=String.fromCharCode(55296|M>>10,56320|M&1023))}}else v+=String.fromCharCode(M)}return v},Fe=(i,c)=>(i>>>=0)?xe(K,i,c):"",_e=i=>{for(var c=0,h=0;h<i.length;++h){var v=i.charCodeAt(h);127>=v?c++:2047>=v?c+=2:55296<=v&&57343>=v?(c+=4,++h):c+=3}return c},Ze=(i,c,h,v)=>{if(h>>>=0,!(0<v))return 0;var M=h;v=h+v-1;for(var D=0;D<i.length;++D){var $=i.charCodeAt(D);if(55296<=$&&57343>=$){var se=i.charCodeAt(++D);$=65536+(($&1023)<<10)|se&1023}if(127>=$){if(h>=v)break;c[h++>>>0]=$}else{if(2047>=$){if(h+1>=v)break;c[h++>>>0]=192|$>>6}else{if(65535>=$){if(h+2>=v)break;c[h++>>>0]=224|$>>12}else{if(h+3>=v)break;c[h++>>>0]=240|$>>18,c[h++>>>0]=128|$>>12&63}c[h++>>>0]=128|$>>6&63}c[h++>>>0]=128|$&63}}return c[h>>>0]=0,h-M},Ee=i=>i%4===0&&(i%100!==0||i%400===0),vt=[0,31,60,91,121,152,182,213,244,274,305,335],ut=[0,31,59,90,120,151,181,212,243,273,304,334],Ot=i=>{var c=_e(i)+1,h=St(c);return h&&Ze(i,K,h,c),h},je=[],ke={},Tt=()=>{if(!_t){var i={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:f||"./this.program"},c;for(c in ke)ke[c]===void 0?delete i[c]:i[c]=ke[c];var h=[];for(c in i)h.push(`${c}=${i[c]}`);_t=h}return _t},_t,$t=[null,[],[]],zt=[31,29,31,30,31,30,31,31,30,31,30,31],Et=[31,28,31,30,31,30,31,31,30,31,30,31];function ft(i){var c=Array(_e(i)+1);return Ze(i,c,0,c.length),c}function lt(i,c,h,v){function M(T,V,Z){for(T=typeof T=="number"?T.toString():T||"";T.length<V;)T=Z[0]+T;return T}function D(T,V){return M(T,V,"0")}function $(T,V){function Z(xt){return 0>xt?-1:0<xt?1:0}var Ue;return(Ue=Z(T.getFullYear()-V.getFullYear()))===0&&(Ue=Z(T.getMonth()-V.getMonth()))===0&&(Ue=Z(T.getDate()-V.getDate())),Ue}function se(T){switch(T.getDay()){case 0:return new Date(T.getFullYear()-1,11,29);case 1:return T;case 2:return new Date(T.getFullYear(),0,3);case 3:return new Date(T.getFullYear(),0,2);case 4:return new Date(T.getFullYear(),0,1);case 5:return new Date(T.getFullYear()-1,11,31);case 6:return new Date(T.getFullYear()-1,11,30)}}function we(T){var V=T.Ga;for(T=new Date(new Date(T.Ha+1900,0,1).getTime());0<V;){var Z=T.getMonth(),Ue=(Ee(T.getFullYear())?zt:Et)[Z];if(V>Ue-T.getDate())V-=Ue-T.getDate()+1,T.setDate(1),11>Z?T.setMonth(Z+1):(T.setMonth(0),T.setFullYear(T.getFullYear()+1));else{T.setDate(T.getDate()+V);break}}return Z=new Date(T.getFullYear()+1,0,4),V=se(new Date(T.getFullYear(),0,4)),Z=se(Z),0>=$(V,T)?0>=$(Z,T)?T.getFullYear()+1:T.getFullYear():T.getFullYear()-1}i>>>=0,c>>>=0,h>>>=0,v>>>=0;var de=q[v+40>>>2>>>0];v={Ta:x[v>>>2>>>0],Sa:x[v+4>>>2>>>0],Ia:x[v+8>>>2>>>0],La:x[v+12>>>2>>>0],Ja:x[v+16>>>2>>>0],Ha:x[v+20>>>2>>>0],Ba:x[v+24>>>2>>>0],Ga:x[v+28>>>2>>>0],Va:x[v+32>>>2>>>0],Ra:x[v+36>>>2>>>0],Ua:de?Fe(de):""},h=Fe(h),de={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var pe in de)h=h.replace(new RegExp(pe,"g"),de[pe]);var Rt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),It="January February March April May June July August September October November December".split(" ");de={"%a":T=>Rt[T.Ba].substring(0,3),"%A":T=>Rt[T.Ba],"%b":T=>It[T.Ja].substring(0,3),"%B":T=>It[T.Ja],"%C":T=>D((T.Ha+1900)/100|0,2),"%d":T=>D(T.La,2),"%e":T=>M(T.La,2," "),"%g":T=>we(T).toString().substring(2),"%G":T=>we(T),"%H":T=>D(T.Ia,2),"%I":T=>(T=T.Ia,T==0?T=12:12<T&&(T-=12),D(T,2)),"%j":T=>{for(var V=0,Z=0;Z<=T.Ja-1;V+=(Ee(T.Ha+1900)?zt:Et)[Z++]);return D(T.La+V,3)},"%m":T=>D(T.Ja+1,2),"%M":T=>D(T.Sa,2),"%n":()=>`
`,"%p":T=>0<=T.Ia&&12>T.Ia?"AM":"PM","%S":T=>D(T.Ta,2),"%t":()=>"	","%u":T=>T.Ba||7,"%U":T=>D(Math.floor((T.Ga+7-T.Ba)/7),2),"%V":T=>{var V=Math.floor((T.Ga+7-(T.Ba+6)%7)/7);if(2>=(T.Ba+371-T.Ga-2)%7&&V++,V)V==53&&(Z=(T.Ba+371-T.Ga)%7,Z==4||Z==3&&Ee(T.Ha)||(V=1));else{V=52;var Z=(T.Ba+7-T.Ga-1)%7;(Z==4||Z==5&&Ee(T.Ha%400-1))&&V++}return D(V,2)},"%w":T=>T.Ba,"%W":T=>D(Math.floor((T.Ga+7-(T.Ba+6)%7)/7),2),"%y":T=>(T.Ha+1900).toString().substring(2),"%Y":T=>T.Ha+1900,"%z":T=>{T=T.Ra;var V=0<=T;return T=Math.abs(T)/60,(V?"+":"-")+("0000"+(T/60*100+T%60)).slice(-4)},"%Z":T=>T.Ua,"%%":()=>"%"},h=h.replace(/%%/g,"\0\0");for(pe in de)h.includes(pe)&&(h=h.replace(new RegExp(pe,"g"),de[pe](v)));return h=h.replace(/\0\0/g,"%"),pe=ft(h),pe.length>c?0:(j.set(pe,i>>>0),pe.length-1)}var Gt={a:function(i,c,h){throw i>>>=0,new Ie(i).Ma(c>>>0,h>>>0),he=i,ue++,he},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(i,c,h){i=c+2097152>>>0<4194305-!!i?(i>>>0)+4294967296*c:NaN,h>>>=0,i=new Date(1e3*i),x[h>>>2>>>0]=i.getUTCSeconds(),x[h+4>>>2>>>0]=i.getUTCMinutes(),x[h+8>>>2>>>0]=i.getUTCHours(),x[h+12>>>2>>>0]=i.getUTCDate(),x[h+16>>>2>>>0]=i.getUTCMonth(),x[h+20>>>2>>>0]=i.getUTCFullYear()-1900,x[h+24>>>2>>>0]=i.getUTCDay(),x[h+28>>>2>>>0]=(i.getTime()-Date.UTC(i.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(i,c,h){i=c+2097152>>>0<4194305-!!i?(i>>>0)+4294967296*c:NaN,h>>>=0,i=new Date(1e3*i),x[h>>>2>>>0]=i.getSeconds(),x[h+4>>>2>>>0]=i.getMinutes(),x[h+8>>>2>>>0]=i.getHours(),x[h+12>>>2>>>0]=i.getDate(),x[h+16>>>2>>>0]=i.getMonth(),x[h+20>>>2>>>0]=i.getFullYear()-1900,x[h+24>>>2>>>0]=i.getDay(),x[h+28>>>2>>>0]=(Ee(i.getFullYear())?vt:ut)[i.getMonth()]+i.getDate()-1|0,x[h+36>>>2>>>0]=-(60*i.getTimezoneOffset()),c=new Date(i.getFullYear(),6,1).getTimezoneOffset();var v=new Date(i.getFullYear(),0,1).getTimezoneOffset();x[h+32>>>2>>>0]=(c!=v&&i.getTimezoneOffset()==Math.min(v,c))|0},p:function(i){i>>>=0;var c=new Date(x[i+20>>>2>>>0]+1900,x[i+16>>>2>>>0],x[i+12>>>2>>>0],x[i+8>>>2>>>0],x[i+4>>>2>>>0],x[i>>>2>>>0],0),h=x[i+32>>>2>>>0],v=c.getTimezoneOffset(),M=new Date(c.getFullYear(),6,1).getTimezoneOffset(),D=new Date(c.getFullYear(),0,1).getTimezoneOffset(),$=Math.min(D,M);return 0>h?x[i+32>>>2>>>0]=+(M!=D&&$==v):0<h!=($==v)&&(M=Math.max(D,M),c.setTime(c.getTime()+6e4*((0<h?$:M)-v))),x[i+24>>>2>>>0]=c.getDay(),x[i+28>>>2>>>0]=(Ee(c.getFullYear())?vt:ut)[c.getMonth()]+c.getDate()-1|0,x[i>>>2>>>0]=c.getSeconds(),x[i+4>>>2>>>0]=c.getMinutes(),x[i+8>>>2>>>0]=c.getHours(),x[i+12>>>2>>>0]=c.getDate(),x[i+16>>>2>>>0]=c.getMonth(),x[i+20>>>2>>>0]=c.getYear(),i=c.getTime(),isNaN(i)?(x[At()>>>2>>>0]=61,i=-1):i/=1e3,Ye((ce=i,1<=+Math.abs(ce)?0<ce?+Math.floor(ce/4294967296)>>>0:~~+Math.ceil((ce-+(~~ce>>>0))/4294967296)>>>0:0)),i>>>0},l:function(){return-52},m:function(){},t:function(i,c,h){function v(we){return(we=we.toTimeString().match(/\(([A-Za-z ]+)\)$/))?we[1]:"GMT"}h>>>=0;var M=new Date().getFullYear(),D=new Date(M,0,1),$=new Date(M,6,1);M=D.getTimezoneOffset();var se=$.getTimezoneOffset();q[i>>>0>>>2>>>0]=60*Math.max(M,se),x[c>>>0>>>2>>>0]=+(M!=se),i=v(D),c=v($),i=Ot(i),c=Ot(c),se<M?(q[h>>>2>>>0]=i,q[h+4>>>2>>>0]=c):(q[h>>>2>>>0]=c,q[h+4>>>2>>>0]=i)},d:()=>{Me("")},B:function(i,c,h){i>>>=0,c>>>=0,h>>>=0,je.length=0;for(var v;v=K[c++>>>0];){var M=v!=105;M&=v!=112,h+=M&&h%8?4:0,je.push(v==112?q[h>>>2>>>0]:v==105?x[h>>>2>>>0]:fe[h>>>3>>>0]),h+=M?8:4}return Re[i].apply(null,je)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(i,c,h){return c>>>=0,K.copyWithin(i>>>0>>>0,c>>>0,c+(h>>>0)>>>0)},s:function(i){i>>>=0;var c=K.length;if(4294901760<i)return!1;for(var h=1;4>=h;h*=2){var v=c*(1+.2/h);v=Math.min(v,i+100663296);var M=Math;v=Math.max(i,v);e:{M=(M.min.call(M,4294901760,v+(65536-v%65536)%65536)-C.buffer.byteLength+65535)/65536;try{C.grow(M),Ne();var D=1;break e}catch{}D=void 0}if(D)return!0}return!1},C:function(i,c){i>>>=0,c>>>=0;var h=0;return Tt().forEach((v,M)=>{var D=c+h;for(M=q[i+4*M>>>2>>>0]=D,D=0;D<v.length;++D)j[M++>>>0>>>0]=v.charCodeAt(D);j[M>>>0>>>0]=0,h+=v.length+1}),0},D:function(i,c){i>>>=0,c>>>=0;var h=Tt();q[i>>>2>>>0]=h.length;var v=0;return h.forEach(M=>v+=M.length+1),q[c>>>2>>>0]=v,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(i,c,h,v){c>>>=0,h>>>=0,v>>>=0;for(var M=0,D=0;D<h;D++){var $=q[c>>>2>>>0],se=q[c+4>>>2>>>0];c+=8;for(var we=0;we<se;we++){var de=K[$+we>>>0],pe=$t[i];de===0||de===10?((i===1?H:U)(xe(pe,0)),pe.length=0):pe.push(de)}M+=se}return q[v>>>2>>>0]=M,0},r:lt,c:function(i,c,h,v){return lt(i>>>0,c>>>0,h>>>0,v>>>0)}},B=function(){function i(h){return B=h.exports,B=Ct(),C=B.K,Ne(),ze.unshift(B.L),ee--,ee==0&&(F!==null&&(clearInterval(F),F=null),be&&(h=be,be=null,h())),B}var c={a:Gt};if(ee++,r.instantiateWasm)try{return r.instantiateWasm(c,i)}catch(h){U(`Module.instantiateWasm callback failed with error: ${h}`),u(h)}return Ke(c,function(h){i(h.instance)}).catch(u),{}}();r._OrtInit=(i,c)=>(r._OrtInit=B.M)(i,c),r._OrtGetLastError=(i,c)=>(r._OrtGetLastError=B.N)(i,c),r._OrtCreateSessionOptions=(i,c,h,v,M,D,$,se,we,de)=>(r._OrtCreateSessionOptions=B.O)(i,c,h,v,M,D,$,se,we,de),r._OrtAppendExecutionProvider=(i,c)=>(r._OrtAppendExecutionProvider=B.P)(i,c),r._OrtAddFreeDimensionOverride=(i,c,h)=>(r._OrtAddFreeDimensionOverride=B.Q)(i,c,h),r._OrtAddSessionConfigEntry=(i,c,h)=>(r._OrtAddSessionConfigEntry=B.R)(i,c,h),r._OrtReleaseSessionOptions=i=>(r._OrtReleaseSessionOptions=B.S)(i),r._OrtCreateSession=(i,c,h)=>(r._OrtCreateSession=B.T)(i,c,h),r._OrtReleaseSession=i=>(r._OrtReleaseSession=B.U)(i),r._OrtGetInputOutputCount=(i,c,h)=>(r._OrtGetInputOutputCount=B.V)(i,c,h),r._OrtGetInputName=(i,c)=>(r._OrtGetInputName=B.W)(i,c),r._OrtGetOutputName=(i,c)=>(r._OrtGetOutputName=B.X)(i,c),r._OrtFree=i=>(r._OrtFree=B.Y)(i),r._OrtCreateTensor=(i,c,h,v,M,D)=>(r._OrtCreateTensor=B.Z)(i,c,h,v,M,D),r._OrtGetTensorData=(i,c,h,v,M)=>(r._OrtGetTensorData=B._)(i,c,h,v,M),r._OrtReleaseTensor=i=>(r._OrtReleaseTensor=B.$)(i),r._OrtCreateRunOptions=(i,c,h,v)=>(r._OrtCreateRunOptions=B.aa)(i,c,h,v),r._OrtAddRunConfigEntry=(i,c,h)=>(r._OrtAddRunConfigEntry=B.ba)(i,c,h),r._OrtReleaseRunOptions=i=>(r._OrtReleaseRunOptions=B.ca)(i),r._OrtCreateBinding=i=>(r._OrtCreateBinding=B.da)(i),r._OrtBindInput=(i,c,h)=>(r._OrtBindInput=B.ea)(i,c,h),r._OrtBindOutput=(i,c,h,v)=>(r._OrtBindOutput=B.fa)(i,c,h,v),r._OrtClearBoundOutputs=i=>(r._OrtClearBoundOutputs=B.ga)(i),r._OrtReleaseBinding=i=>(r._OrtReleaseBinding=B.ha)(i),r._OrtRunWithBinding=(i,c,h,v,M)=>(r._OrtRunWithBinding=B.ia)(i,c,h,v,M),r._OrtRun=(i,c,h,v,M,D,$,se)=>(r._OrtRun=B.ja)(i,c,h,v,M,D,$,se),r._OrtEndProfiling=i=>(r._OrtEndProfiling=B.ka)(i),r._OrtTrainingLoadCheckpoint=(i,c)=>(r._OrtTrainingLoadCheckpoint=B.la)(i,c),r._OrtTrainingReleaseCheckpoint=i=>(r._OrtTrainingReleaseCheckpoint=B.ma)(i),r._OrtTrainingCreateSession=(i,c,h,v,M,D,$,se)=>(r._OrtTrainingCreateSession=B.na)(i,c,h,v,M,D,$,se),r._OrtTrainingLazyResetGrad=i=>(r._OrtTrainingLazyResetGrad=B.oa)(i),r._OrtTrainingRunTrainStep=(i,c,h,v,M,D)=>(r._OrtTrainingRunTrainStep=B.pa)(i,c,h,v,M,D),r._OrtTrainingOptimizerStep=(i,c)=>(r._OrtTrainingOptimizerStep=B.qa)(i,c),r._OrtTrainingEvalStep=(i,c,h,v,M,D)=>(r._OrtTrainingEvalStep=B.ra)(i,c,h,v,M,D),r._OrtTrainingGetParametersSize=(i,c,h)=>(r._OrtTrainingGetParametersSize=B.sa)(i,c,h),r._OrtTrainingCopyParametersToBuffer=(i,c,h,v)=>(r._OrtTrainingCopyParametersToBuffer=B.ta)(i,c,h,v),r._OrtTrainingCopyParametersFromBuffer=(i,c,h,v)=>(r._OrtTrainingCopyParametersFromBuffer=B.ua)(i,c,h,v),r._OrtTrainingGetModelInputOutputCount=(i,c,h,v)=>(r._OrtTrainingGetModelInputOutputCount=B.va)(i,c,h,v),r._OrtTrainingGetModelInputOutputName=(i,c,h,v)=>(r._OrtTrainingGetModelInputOutputName=B.wa)(i,c,h,v),r._OrtTrainingReleaseSession=i=>(r._OrtTrainingReleaseSession=B.xa)(i);var At=()=>(At=B.ya)(),St=r._malloc=i=>(St=r._malloc=B.za)(i);r._free=i=>(r._free=B.Aa)(i);var Ye=i=>(Ye=B.Ca)(i),jt=()=>(jt=B.Da)(),J=i=>(J=B.Ea)(i),Mt=i=>(Mt=B.Fa)(i);function Ct(){var i=B;i=Object.assign({},i);var c=v=>()=>v()>>>0,h=v=>M=>v(M)>>>0;return i.ya=c(i.ya),i.za=h(i.za),i.Da=c(i.Da),i.Fa=h(i.Fa),i}r.stackAlloc=Mt,r.stackSave=jt,r.stackRestore=J,r.UTF8ToString=Fe,r.stringToUTF8=(i,c,h)=>Ze(i,K,c,h),r.lengthBytesUTF8=_e;var ct;be=function i(){ct||Pt(),ct||(be=i)};function Pt(){if(!(0<ee)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;){var i=r.preRun.shift();$e.unshift(i)}for(;0<$e.length;)$e.shift()(r);if(!(0<ee||ct||(ct=!0,r.calledRun=!0,W))){for(;0<ze.length;)ze.shift()(r);for(l(r);0<Xe.length;)Xe.shift()(r)}}}return Pt(),n.ready}})();typeof Sa=="object"&&typeof Yr=="object"?Yr.exports=Aa:typeof define=="function"&&define.amd&&define([],()=>Aa)});var Ca=pt(()=>{});var Pa=pt(()=>{});var Ra={};mt(Ra,{cpus:()=>Yo});var Yo,Ia=G(()=>{Yo=void 0});var Ba=pt((Ua,Vr)=>{"use strict";var xa=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(a=a||__filename),function(n={}){function r(){return F.buffer!=oe.buffer&&he(),oe}function l(){return F.buffer!=oe.buffer&&he(),ne}function u(){return F.buffer!=oe.buffer&&he(),ge}function m(){return F.buffer!=oe.buffer&&he(),st}function f(){return F.buffer!=oe.buffer&&he(),De}function p(){return F.buffer!=oe.buffer&&he(),Ge}function b(){return F.buffer!=oe.buffer&&he(),Ie}var s=n,y,E;s.ready=new Promise((e,t)=>{y=e,E=t});var O=Object.assign({},s),A="./this.program",I=(e,t)=>{throw t},P=typeof window=="object",H=typeof importScripts=="function",U=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",C=s.ENVIRONMENT_IS_PTHREAD||!1,W="";function j(e){return s.locateFile?s.locateFile(e,W):W+e}var K,x,q;if(U){var fe=(zr(),et($r)),Ne=(jr(),et(Gr));W=H?Ne.dirname(W)+"/":__dirname+"/",K=(t,o)=>(t=je(t)?new URL(t):Ne.normalize(t),fe.readFileSync(t,o?void 0:"utf8")),q=t=>(t=K(t,!0),t.buffer||(t=new Uint8Array(t)),t),x=(t,o,d,g=!0)=>{t=je(t)?new URL(t):Ne.normalize(t),fe.readFile(t,g?void 0:"utf8",(w,S)=>{w?d(w):o(g?S.buffer:S)})},!s.thisProgram&&1<process.argv.length&&(A=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),I=(t,o)=>{throw process.exitCode=t,o},s.inspect=()=>"[Emscripten Module object]";let e;try{e=Ca()}catch(t){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),t}global.Worker=e.Worker}else(P||H)&&(H?W=self.location.href:typeof document<"u"&&document.currentScript&&(W=document.currentScript.src),typeof a<"u"&&a&&(W=a),W.indexOf("blob:")!==0?W=W.substr(0,W.replace(/[?#].*/,"").lastIndexOf("/")+1):W="",U||(K=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},H&&(q=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),x=(e,t,o)=>{var d=new XMLHttpRequest;d.open("GET",e,!0),d.responseType="arraybuffer",d.onload=()=>{d.status==200||d.status==0&&d.response?t(d.response):o()},d.onerror=o,d.send(null)}));U&&typeof performance>"u"&&(global.performance=Pa().performance);var $e=console.log.bind(console),ze=console.error.bind(console);U&&($e=(...e)=>fe.writeSync(1,e.join(" ")+`
`),ze=(...e)=>fe.writeSync(2,e.join(" ")+`
`));var Xe=$e,ee=ze;Object.assign(s,O),O=null,typeof WebAssembly!="object"&&ut("no native wasm support detected");var F,be,Me=!1,le,oe,ne,ge,st,De,Ge,Ke,ce,Re,Ie;function he(){var e=F.buffer;s.HEAP8=oe=new Int8Array(e),s.HEAP16=ge=new Int16Array(e),s.HEAPU8=ne=new Uint8Array(e),s.HEAPU16=st=new Uint16Array(e),s.HEAP32=De=new Int32Array(e),s.HEAPU32=Ge=new Uint32Array(e),s.HEAPF32=Ke=new Float32Array(e),s.HEAPF64=Ie=new Float64Array(e),s.HEAP64=ce=new BigInt64Array(e),s.HEAPU64=Re=new BigUint64Array(e)}var ue=16777216;if(C)F=s.wasmMemory;else if(s.wasmMemory)F=s.wasmMemory;else if(F=new WebAssembly.Memory({initial:ue/65536,maximum:65536,shared:!0}),!(F.buffer instanceof SharedArrayBuffer))throw ee("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),U&&ee("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");he(),ue=F.buffer.byteLength;var ie=[],xe=[],Fe=[],_e=0,Ze=null,Ee=null;function vt(){if(_e--,_e==0&&(Ze!==null&&(clearInterval(Ze),Ze=null),Ee)){var e=Ee;Ee=null,e()}}function ut(e){throw e="Aborted("+e+")",ee(e),Me=!0,le=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),E(e),e}var Ot=e=>e.startsWith("data:application/octet-stream;base64,"),je=e=>e.startsWith("file://"),ke;ke="ort-wasm-threaded.wasm",Ot(ke)||(ke=j(ke));function Tt(e){if(q)return q(e);throw"both async and sync fetching of the wasm failed"}function _t(e){if(P||H){if(typeof fetch=="function"&&!je(e))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>Tt(e));if(x)return new Promise((t,o)=>{x(e,d=>t(new Uint8Array(d)),o)})}return Promise.resolve().then(()=>Tt(e))}function $t(e,t,o){return _t(e).then(d=>WebAssembly.instantiate(d,t)).then(d=>d).then(o,d=>{ee(`failed to asynchronously prepare wasm: ${d}`),ut(d)})}function zt(e,t){var o=ke;return typeof WebAssembly.instantiateStreaming!="function"||Ot(o)||je(o)||U||typeof fetch!="function"?$t(o,e,t):fetch(o,{credentials:"same-origin"}).then(d=>WebAssembly.instantiateStreaming(d,e).then(t,function(g){return ee(`wasm streaming compile failed: ${g}`),ee("falling back to ArrayBuffer instantiation"),$t(o,e,t)}))}var Et={891868:(e,t,o,d)=>{if(typeof s>"u"||!s.Hb)return 1;if(e=Ye(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=s.Hb.get(e),!e)return 2;if(t>>>=0,o>>>=0,d>>>=0,t+o>e.byteLength)return 3;try{return l().set(e.subarray(t,t+o),d>>>0),0}catch{return 4}}};function ft(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var lt=e=>{e.terminate(),e.onmessage=()=>{}},Gt=e=>{c.ob.length==0&&(Pt(),c.Bb(c.ob[0]));var t=c.ob.pop();if(!t)return 6;c.pb.push(t),c.kb[e.nb]=t,t.nb=e.nb;var o={cmd:"run",start_routine:e.Ob,arg:e.Ib,pthread_ptr:e.nb};return U&&t.unref(),t.postMessage(o,e.Ub),0},B=0,At=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,St=(e,t,o)=>{t>>>=0;var d=t+o;for(o=t;e[o]&&!(o>=d);)++o;if(16<o-t&&e.buffer&&At)return At.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,o):e.subarray(t,o));for(d="";t<o;){var g=e[t++];if(g&128){var w=e[t++]&63;if((g&224)==192)d+=String.fromCharCode((g&31)<<6|w);else{var S=e[t++]&63;g=(g&240)==224?(g&15)<<12|w<<6|S:(g&7)<<18|w<<12|S<<6|e[t++]&63,65536>g?d+=String.fromCharCode(g):(g-=65536,d+=String.fromCharCode(55296|g>>10,56320|g&1023))}}else d+=String.fromCharCode(g)}return d},Ye=(e,t)=>(e>>>=0)?St(l(),e,t):"",jt=e=>{var t=Br();return e=e(),Kt(t),e};function J(e,t){var o=arguments.length-2,d=arguments;return jt(()=>{for(var g=2*o,w=Dr(8*g),S=w>>>3,R=0;R<o;R++){var N=d[2+R];typeof N=="bigint"?(ce[S+2*R]=1n,ce[S+2*R+1]=N):(ce[S+2*R]=0n,b()[S+2*R+1>>>0]=N)}return jn(e,g,w,t)})}function Mt(e){if(C)return J(0,1,e);le=e,0<B||(c.Pb(),s.onExit?.(e),Me=!0),I(e,new ft(e))}var Ct=e=>{if(le=e,C)throw v(e),"unwind";Mt(e)};function ct(){for(var e=s.numThreads;e--;)Pt();ie.unshift(()=>{_e++,i(()=>vt())})}function Pt(){var e=j("ort-wasm-threaded.worker.js");e=new Worker(e),c.ob.push(e)}function i(e){C?e():Promise.all(c.ob.map(c.Bb)).then(e)}var c={ob:[],pb:[],Gb:[],kb:{},wb(){C?(c.receiveObjectTransfer=c.Nb,c.threadInitTLS=c.Fb,c.setExitStatus=c.Eb):ct()},Eb:e=>le=e,Xb:["$terminateWorker"],Pb:()=>{for(var e of c.pb)lt(e);for(e of c.ob)lt(e);c.ob=[],c.pb=[],c.kb=[]},Db:e=>{var t=e.nb;delete c.kb[t],c.ob.push(e),c.pb.splice(c.pb.indexOf(e),1),e.nb=0,xr(t)},Nb(){},Fb(){c.Gb.forEach(e=>e())},Bb:e=>new Promise(t=>{e.onmessage=w=>{w=w.data;var S=w.cmd;if(w.targetThread&&w.targetThread!=Jt()){var R=c.kb[w.targetThread];R?R.postMessage(w,w.transferList):ee(`Internal error! Worker sent a message "${S}" to target pthread ${w.targetThread}, but that thread no longer exists!`)}else S==="checkMailbox"?Yt():S==="spawnThread"?Gt(w):S==="cleanupThread"?c.Db(c.kb[w.thread]):S==="killThread"?(w=w.thread,S=c.kb[w],delete c.kb[w],lt(S),xr(w),c.pb.splice(c.pb.indexOf(S),1),S.nb=0):S==="cancelThread"?c.kb[w.thread].postMessage({cmd:"cancel"}):S==="loaded"?(e.loaded=!0,U&&!e.nb&&e.unref(),t(e)):S==="alert"?alert(`Thread ${w.threadId}: ${w.text}`):w.target==="setimmediate"?e.postMessage(w):S==="callHandler"?s[w.handler](...w.args):S&&ee(`worker sent an unknown command ${S}`)},e.onerror=w=>{throw ee(`worker sent an error! ${w.filename}:${w.lineno}: ${w.message}`),w},U&&(e.on("message",w=>e.onmessage({data:w})),e.on("error",w=>e.onerror(w)));var o=[],d=["onExit"],g;for(g of d)s.hasOwnProperty(g)&&o.push(g);e.postMessage({cmd:"load",handlers:o,urlOrBlob:s.mainScriptUrlOrBlob||a,wasmMemory:F,wasmModule:be})})};s.PThread=c;var h=e=>{for(;0<e.length;)e.shift()(s)};s.establishStackSpace=()=>{var e=Jt(),t=p()[e+52>>>2>>>0];e=p()[e+56>>>2>>>0],Vn(t,t-e),Kt(t)};function v(e){if(C)return J(1,0,e);Ct(e)}var M=[],D;s.invokeEntryPoint=(e,t)=>{var o=M[e];o||(e>=M.length&&(M.length=e+1),M[e]=o=D.get(e)),e=o(t),0<B?c.Eb(e):Ur(e)};function $(e){this.tb=e-24,this.Mb=function(t){p()[this.tb+4>>>2>>>0]=t},this.yb=function(t){p()[this.tb+8>>>2>>>0]=t},this.wb=function(t,o){this.xb(),this.Mb(t),this.yb(o)},this.xb=function(){p()[this.tb+16>>>2>>>0]=0}}var se=0,we=0;function de(e,t,o,d){return C?J(2,1,e,t,o,d):pe(e,t,o,d)}function pe(e,t,o,d){if(e>>>=0,t>>>=0,o>>>=0,d>>>=0,typeof SharedArrayBuffer>"u")return ee("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var g=[];return C&&g.length===0?de(e,t,o,d):(e={Ob:o,nb:e,Ib:d,Ub:g},C?(e.Wb="spawnThread",postMessage(e,g),0):Gt(e))}function Rt(e,t,o){return C?J(3,1,e,t,o):0}function It(e,t){if(C)return J(4,1,e,t)}var T=e=>{for(var t=0,o=0;o<e.length;++o){var d=e.charCodeAt(o);127>=d?t++:2047>=d?t+=2:55296<=d&&57343>=d?(t+=4,++o):t+=3}return t},V=(e,t,o,d)=>{if(o>>>=0,!(0<d))return 0;var g=o;d=o+d-1;for(var w=0;w<e.length;++w){var S=e.charCodeAt(w);if(55296<=S&&57343>=S){var R=e.charCodeAt(++w);S=65536+((S&1023)<<10)|R&1023}if(127>=S){if(o>=d)break;t[o++>>>0]=S}else{if(2047>=S){if(o+1>=d)break;t[o++>>>0]=192|S>>6}else{if(65535>=S){if(o+2>=d)break;t[o++>>>0]=224|S>>12}else{if(o+3>=d)break;t[o++>>>0]=240|S>>18,t[o++>>>0]=128|S>>12&63}t[o++>>>0]=128|S>>6&63}t[o++>>>0]=128|S&63}}return t[o>>>0]=0,o-g},Z=(e,t,o)=>V(e,l(),t,o);function Ue(e,t){if(C)return J(5,1,e,t)}function xt(e,t,o){if(C)return J(6,1,e,t,o)}function un(e,t,o){return C?J(7,1,e,t,o):0}function fn(e,t){if(C)return J(8,1,e,t)}function ln(e,t,o){if(C)return J(9,1,e,t,o)}function cn(e,t,o,d){if(C)return J(10,1,e,t,o,d)}function dn(e,t,o,d){if(C)return J(11,1,e,t,o,d)}function pn(e,t,o,d){if(C)return J(12,1,e,t,o,d)}function mn(e){if(C)return J(13,1,e)}function hn(e,t){if(C)return J(14,1,e,t)}function gn(e,t,o){if(C)return J(15,1,e,t,o)}var yn=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},bn,Ce=e=>{for(var t="";l()[e>>>0];)t+=bn[l()[e++>>>0]];return t},Tr={},_r={},bo={},Ve;function wo(e,t,o={}){var d=t.name;if(!e)throw new Ve(`type "${d}" must have a positive integer typeid pointer`);if(_r.hasOwnProperty(e)){if(o.Kb)return;throw new Ve(`Cannot register type '${d}' twice`)}_r[e]=t,delete bo[e],Tr.hasOwnProperty(e)&&(t=Tr[e],delete Tr[e],t.forEach(g=>g()))}function Le(e,t,o={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");wo(e,t,o)}var wn=(e,t,o)=>{switch(t){case 1:return o?d=>r()[d>>>0>>>0]:d=>l()[d>>>0>>>0];case 2:return o?d=>u()[d>>>1>>>0]:d=>m()[d>>>1>>>0];case 4:return o?d=>f()[d>>>2>>>0]:d=>p()[d>>>2>>>0];case 8:return o?d=>ce[d>>>3]:d=>Re[d>>>3];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}};function vn(){this.mb=[void 0],this.Ab=[]}var Ae=new vn;function Er(e){e>>>=0,e>=Ae.tb&&--Ae.get(e).Cb===0&&Ae.yb(e)}var Oe=e=>{if(!e)throw new Ve("Cannot use deleted val. handle = "+e);return Ae.get(e).value},Be=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Ae.xb({Cb:1,value:e})}};function On(e){return this.fromWireType(f()[e>>>2>>>0])}var vo=(e,t)=>{switch(t){case 4:return function(o){var d=this.fromWireType;return F.buffer!=oe.buffer&&he(),d.call(this,Ke[o>>>2>>>0])};case 8:return function(o){return this.fromWireType(b()[o>>>3>>>0])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}};function Oo(e){return this.fromWireType(p()[e>>>2>>>0])}var Tn=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,To=(e,t)=>{for(var o=e>>1,d=o+t/2;!(o>=d)&&m()[o>>>0];)++o;if(o<<=1,32<o-e&&Tn)return Tn.decode(l().slice(e,o));for(o="",d=0;!(d>=t/2);++d){var g=u()[e+2*d>>>1>>>0];if(g==0)break;o+=String.fromCharCode(g)}return o},_o=(e,t,o)=>{if(o??=2147483647,2>o)return 0;o-=2;var d=t;o=o<2*e.length?o/2:e.length;for(var g=0;g<o;++g){var w=e.charCodeAt(g);u()[t>>>1>>>0]=w,t+=2}return u()[t>>>1>>>0]=0,t-d},Eo=e=>2*e.length,Ao=(e,t)=>{for(var o=0,d="";!(o>=t/4);){var g=f()[e+4*o>>>2>>>0];if(g==0)break;++o,65536<=g?(g-=65536,d+=String.fromCharCode(55296|g>>10,56320|g&1023)):d+=String.fromCharCode(g)}return d},So=(e,t,o)=>{if(t>>>=0,o??=2147483647,4>o)return 0;var d=t;o=d+o-4;for(var g=0;g<e.length;++g){var w=e.charCodeAt(g);if(55296<=w&&57343>=w){var S=e.charCodeAt(++g);w=65536+((w&1023)<<10)|S&1023}if(f()[t>>>2>>>0]=w,t+=4,t+4>o)break}return f()[t>>>2>>>0]=0,t-d},Mo=e=>{for(var t=0,o=0;o<e.length;++o){var d=e.charCodeAt(o);55296<=d&&57343>=d&&++o,t+=4}return t};function Ar(e){e>>>=0,typeof Atomics.Vb=="function"&&(Atomics.Vb(f(),e>>>2,e).value.then(Yt),e+=128,Atomics.store(f(),e>>>2,1))}s.__emscripten_thread_mailbox_await=Ar;var Yt=()=>{var e=Jt();if(e&&(Ar(e),e=Yn,!Me))try{if(e(),!(0<B))try{C?Ur(le):Ct(le)}catch(t){t instanceof ft||t=="unwind"||I(1,t)}}catch(t){t instanceof ft||t=="unwind"||I(1,t)}};s.checkMailbox=Yt;var Sr=[],Mr=(e,t)=>{var o=_r[e];if(o===void 0)throw e=zn(e),o=Ce(e),He(e),new Ve(t+" has unknown type "+o);return o},_n=(e,t,o)=>{var d=[];return e=e.toWireType(d,o),d.length&&(p()[t>>>2>>>0]=Be(d)),e},Vt=[],Co={},Cr=e=>{var t=Co[e];return t===void 0?Ce(e):t},En=()=>typeof globalThis=="object"?globalThis:Function("return this")(),Po=e=>{var t=Vt.length;return Vt.push(e),t},Ro=(e,t)=>{for(var o=Array(e),d=0;d<e;++d)o[d]=Mr(p()[t+4*d>>>2>>>0],"parameter "+d);return o},An=(e,t)=>Object.defineProperty(t,"name",{value:e});function Io(e){var t=Function;if(!(t instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof t} which is not a function`);var o=An(t.name||"unknownFunctionName",function(){});return o.prototype=t.prototype,o=new o,e=t.apply(o,e),e instanceof Object?e:o}var dt=e=>e%4===0&&(e%100!==0||e%400===0),Sn=[0,31,60,91,121,152,182,213,244,274,305,335],Mn=[0,31,59,90,120,151,181,212,243,273,304,334];function Cn(e,t,o,d,g,w,S){return C?J(16,1,e,t,o,d,g,w,S):-52}function Pn(e,t,o,d,g,w){if(C)return J(17,1,e,t,o,d,g,w)}var Rn=e=>{var t=T(e)+1,o=Xt(t);return o&&Z(e,o,t),o},Pr=[],Rr={},In=()=>{if(!Ir){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:A||"./this.program"},t;for(t in Rr)Rr[t]===void 0?delete e[t]:e[t]=Rr[t];var o=[];for(t in e)o.push(`${t}=${e[t]}`);Ir=o}return Ir},Ir;function xn(e,t){if(C)return J(18,1,e,t);e>>>=0,t>>>=0;var o=0;return In().forEach((d,g)=>{var w=t+o;for(g=p()[e+4*g>>>2>>>0]=w,w=0;w<d.length;++w)r()[g++>>>0>>>0]=d.charCodeAt(w);r()[g>>>0>>>0]=0,o+=d.length+1}),0}function Un(e,t){if(C)return J(19,1,e,t);e>>>=0,t>>>=0;var o=In();p()[e>>>2>>>0]=o.length;var d=0;return o.forEach(g=>d+=g.length+1),p()[t>>>2>>>0]=d,0}function Bn(e){return C?J(20,1,e):52}function Dn(e,t,o,d){return C?J(21,1,e,t,o,d):52}function Fn(e,t,o,d){return C?J(22,1,e,t,o,d):70}var xo=[null,[],[]];function kn(e,t,o,d){if(C)return J(23,1,e,t,o,d);t>>>=0,o>>>=0,d>>>=0;for(var g=0,w=0;w<o;w++){var S=p()[t>>>2>>>0],R=p()[t+4>>>2>>>0];t+=8;for(var N=0;N<R;N++){var k=l()[S+N>>>0],te=xo[e];k===0||k===10?((e===1?Xe:ee)(St(te,0)),te.length=0):te.push(k)}g+=R}return p()[d>>>2>>>0]=g,0}var Ln=[31,29,31,30,31,30,31,31,30,31,30,31],Hn=[31,28,31,30,31,30,31,31,30,31,30,31];function Uo(e){var t=Array(T(e)+1);return V(e,t,0,t.length),t}var Bo=(e,t)=>{r().set(e,t>>>0)};function Wn(e,t,o,d){function g(_,Y,re){for(_=typeof _=="number"?_.toString():_||"";_.length<Y;)_=re[0]+_;return _}function w(_,Y){return g(_,Y,"0")}function S(_,Y){function re(Jn){return 0>Jn?-1:0<Jn?1:0}var Qe;return(Qe=re(_.getFullYear()-Y.getFullYear()))===0&&(Qe=re(_.getMonth()-Y.getMonth()))===0&&(Qe=re(_.getDate()-Y.getDate())),Qe}function R(_){switch(_.getDay()){case 0:return new Date(_.getFullYear()-1,11,29);case 1:return _;case 2:return new Date(_.getFullYear(),0,3);case 3:return new Date(_.getFullYear(),0,2);case 4:return new Date(_.getFullYear(),0,1);case 5:return new Date(_.getFullYear()-1,11,31);case 6:return new Date(_.getFullYear()-1,11,30)}}function N(_){var Y=_.qb;for(_=new Date(new Date(_.rb+1900,0,1).getTime());0<Y;){var re=_.getMonth(),Qe=(dt(_.getFullYear())?Ln:Hn)[re];if(Y>Qe-_.getDate())Y-=Qe-_.getDate()+1,_.setDate(1),11>re?_.setMonth(re+1):(_.setMonth(0),_.setFullYear(_.getFullYear()+1));else{_.setDate(_.getDate()+Y);break}}return re=new Date(_.getFullYear()+1,0,4),Y=R(new Date(_.getFullYear(),0,4)),re=R(re),0>=S(Y,_)?0>=S(re,_)?_.getFullYear()+1:_.getFullYear():_.getFullYear()-1}e>>>=0,t>>>=0,o>>>=0,d>>>=0;var k=p()[d+40>>>2>>>0];d={Sb:f()[d>>>2>>>0],Rb:f()[d+4>>>2>>>0],ub:f()[d+8>>>2>>>0],zb:f()[d+12>>>2>>>0],vb:f()[d+16>>>2>>>0],rb:f()[d+20>>>2>>>0],lb:f()[d+24>>>2>>>0],qb:f()[d+28>>>2>>>0],Yb:f()[d+32>>>2>>>0],Qb:f()[d+36>>>2>>>0],Tb:k?Ye(k):""},o=Ye(o),k={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var te in k)o=o.replace(new RegExp(te,"g"),k[te]);var Te="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),We="January February March April May June July August September October November December".split(" ");k={"%a":_=>Te[_.lb].substring(0,3),"%A":_=>Te[_.lb],"%b":_=>We[_.vb].substring(0,3),"%B":_=>We[_.vb],"%C":_=>w((_.rb+1900)/100|0,2),"%d":_=>w(_.zb,2),"%e":_=>g(_.zb,2," "),"%g":_=>N(_).toString().substring(2),"%G":_=>N(_),"%H":_=>w(_.ub,2),"%I":_=>(_=_.ub,_==0?_=12:12<_&&(_-=12),w(_,2)),"%j":_=>{for(var Y=0,re=0;re<=_.vb-1;Y+=(dt(_.rb+1900)?Ln:Hn)[re++]);return w(_.zb+Y,3)},"%m":_=>w(_.vb+1,2),"%M":_=>w(_.Rb,2),"%n":()=>`
`,"%p":_=>0<=_.ub&&12>_.ub?"AM":"PM","%S":_=>w(_.Sb,2),"%t":()=>"	","%u":_=>_.lb||7,"%U":_=>w(Math.floor((_.qb+7-_.lb)/7),2),"%V":_=>{var Y=Math.floor((_.qb+7-(_.lb+6)%7)/7);if(2>=(_.lb+371-_.qb-2)%7&&Y++,Y)Y==53&&(re=(_.lb+371-_.qb)%7,re==4||re==3&&dt(_.rb)||(Y=1));else{Y=52;var re=(_.lb+7-_.qb-1)%7;(re==4||re==5&&dt(_.rb%400-1))&&Y++}return w(Y,2)},"%w":_=>_.lb,"%W":_=>w(Math.floor((_.qb+7-(_.lb+6)%7)/7),2),"%y":_=>(_.rb+1900).toString().substring(2),"%Y":_=>_.rb+1900,"%z":_=>{_=_.Qb;var Y=0<=_;return _=Math.abs(_)/60,(Y?"+":"-")+("0000"+(_/60*100+_%60)).slice(-4)},"%Z":_=>_.Tb,"%%":()=>"%"},o=o.replace(/%%/g,"\0\0");for(te in k)o.includes(te)&&(o=o.replace(new RegExp(te,"g"),k[te](d)));return o=o.replace(/\0\0/g,"%"),te=Uo(o),te.length>t?0:(Bo(te,e),te.length-1)}c.wb();for(var Nn=Array(256),qt=0;256>qt;++qt)Nn[qt]=String.fromCharCode(qt);bn=Nn,Ve=s.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},s.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Object.assign(vn.prototype,{get(e){return this.mb[e]},has(e){return this.mb[e]!==void 0},xb(e){var t=this.Ab.pop()||this.mb.length;return this.mb[t]=e,t},yb(e){this.mb[e]=void 0,this.Ab.push(e)}}),Ae.mb.push({value:void 0},{value:null},{value:!0},{value:!1}),Ae.tb=Ae.mb.length,s.count_emval_handles=()=>{for(var e=0,t=Ae.tb;t<Ae.mb.length;++t)Ae.mb[t]!==void 0&&++e;return e};var Do=[Mt,v,de,Rt,It,Ue,xt,un,fn,ln,cn,dn,pn,mn,hn,gn,Cn,Pn,xn,Un,Bn,Dn,Fn,kn],Fo={b:function(e,t,o){throw e>>>=0,new $(e).wb(t>>>0,o>>>0),se=e,we++,se},da:function(e){Gn(e>>>0,!H,1,!P,131072,!1),c.Fb()},D:function(e){e>>>=0,C?postMessage({cmd:"cleanupThread",thread:e}):c.Db(c.kb[e])},V:pe,x:Rt,ka:It,R:Ue,T:xt,K:un,ia:fn,aa:ln,ga:cn,F:dn,S:pn,P:mn,ja:hn,Q:gn,I:function(e,t,o,d,g){e>>>=0,t>>>=0,o>>>=0,t=Ce(t);var w=t.indexOf("u")!=-1;w&&(g=(1n<<64n)-1n),Le(e,{name:t,fromWireType:S=>S,toWireType:function(S,R){if(typeof R!="bigint"&&typeof R!="number")throw new TypeError(`Cannot convert "${yn(R)}" to ${this.name}`);if(R<d||R>g)throw new TypeError(`Passing a number "${yn(R)}" from JS side to C/C++ side to an argument of type "${t}", which is outside the valid range [${d}, ${g}]!`);return R},argPackAdvance:8,readValueFromPointer:wn(t,o,!w),sb:null})},pa:function(e,t,o,d){e>>>=0,t=Ce(t>>>0),Le(e,{name:t,fromWireType:function(g){return!!g},toWireType:function(g,w){return w?o:d},argPackAdvance:8,readValueFromPointer:function(g){return this.fromWireType(l()[g>>>0])},sb:null})},oa:function(e,t){e>>>=0,t=Ce(t>>>0),Le(e,{name:t,fromWireType:o=>{var d=Oe(o);return Er(o),d},toWireType:(o,d)=>Be(d),argPackAdvance:8,readValueFromPointer:On,sb:null})},H:function(e,t,o){e>>>=0,o>>>=0,t=Ce(t>>>0),Le(e,{name:t,fromWireType:d=>d,toWireType:(d,g)=>g,argPackAdvance:8,readValueFromPointer:vo(t,o),sb:null})},u:function(e,t,o,d,g){if(e>>>=0,o>>>=0,t=Ce(t>>>0),g===-1&&(g=4294967295),g=R=>R,d===0){var w=32-8*o;g=R=>R<<w>>>w}var S=t.includes("unsigned")?function(R,N){return N>>>0}:function(R,N){return N};Le(e,{name:t,fromWireType:g,toWireType:S,argPackAdvance:8,readValueFromPointer:wn(t,o,d!==0),sb:null})},n:function(e,t,o){function d(w){var S=p()[w>>>2>>>0];return w=p()[w+4>>>2>>>0],new g(r().buffer,w,S)}e>>>=0;var g=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][t];o=Ce(o>>>0),Le(e,{name:o,fromWireType:d,argPackAdvance:8,readValueFromPointer:d},{Kb:!0})},J:function(e,t){e>>>=0,t=Ce(t>>>0);var o=t==="std::string";Le(e,{name:t,fromWireType:function(d){var g=p()[d>>>2>>>0],w=d+4;if(o)for(var S=w,R=0;R<=g;++R){var N=w+R;if(R==g||l()[N>>>0]==0){if(S=Ye(S,N-S),k===void 0)var k=S;else k+=String.fromCharCode(0),k+=S;S=N+1}}else{for(k=Array(g),R=0;R<g;++R)k[R]=String.fromCharCode(l()[w+R>>>0]);k=k.join("")}return He(d),k},toWireType:function(d,g){g instanceof ArrayBuffer&&(g=new Uint8Array(g));var w=typeof g=="string";if(!(w||g instanceof Uint8Array||g instanceof Uint8ClampedArray||g instanceof Int8Array))throw new Ve("Cannot pass non-string to std::string");var S=o&&w?T(g):g.length,R=Xt(4+S+1),N=R+4;if(p()[R>>>2>>>0]=S,o&&w)Z(g,N,S+1);else if(w)for(w=0;w<S;++w){var k=g.charCodeAt(w);if(255<k)throw He(N),new Ve("String has UTF-16 code units that do not fit in 8 bits");l()[N+w>>>0]=k}else for(w=0;w<S;++w)l()[N+w>>>0]=g[w];return d!==null&&d.push(He,R),R},argPackAdvance:8,readValueFromPointer:Oo,sb(d){He(d)}})},z:function(e,t,o){if(e>>>=0,t>>>=0,o>>>=0,o=Ce(o),t===2)var d=To,g=_o,w=Eo,S=()=>m(),R=1;else t===4&&(d=Ao,g=So,w=Mo,S=()=>p(),R=2);Le(e,{name:o,fromWireType:N=>{for(var k=p()[N>>>2>>>0],te=S(),Te,We=N+4,_=0;_<=k;++_){var Y=N+4+_*t;(_==k||te[Y>>>R]==0)&&(We=d(We,Y-We),Te===void 0?Te=We:(Te+=String.fromCharCode(0),Te+=We),We=Y+t)}return He(N),Te},toWireType:(N,k)=>{if(typeof k!="string")throw new Ve(`Cannot pass non-string to C++ string type ${o}`);var te=w(k),Te=Xt(4+te+t);return p()[Te>>>2]=te>>R,g(k,Te+4,te+t),N!==null&&N.push(He,Te),Te},argPackAdvance:8,readValueFromPointer:On,sb(N){He(N)}})},qa:function(e,t){e>>>=0,t=Ce(t>>>0),Le(e,{Lb:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},na:()=>1,N:function(e,t){e>>>=0,e==t>>>0?setTimeout(()=>Yt()):C?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=c.kb[e])&&e.postMessage({cmd:"checkMailbox"})},W:function(e,t,o,d){t>>>=0,o/=2,Sr.length=o,d=d>>>0>>>3;for(var g=0;g<o;g++)Sr[g]=ce[d+2*g]?ce[d+2*g+1]:b()[d+2*g+1>>>0];return e=0>e?Et[-e-1]:Do[e],c.Jb=t,t=e.apply(null,Sr),c.Jb=0,t},ca:Ar,ma:function(e){U&&c.kb[e>>>0].ref()},s:function(e,t,o){return t>>>=0,o>>>=0,e=Oe(e>>>0),t=Mr(t,"emval::as"),_n(t,o,e)},o:function(e,t,o,d){return o>>>=0,d>>>=0,e=Vt[e>>>0],t=Oe(t>>>0),e(null,t,o,d)},j:function(e,t,o,d,g){return o>>>=0,d>>>=0,g>>>=0,e=Vt[e>>>0],t=Oe(t>>>0),o=Cr(o),e(t,t[o],d,g)},c:Er,A:function(e,t){return t>>>=0,e=Oe(e>>>0),t=Oe(t),e==t},m:function(e){return e>>>=0,e===0?Be(En()):(e=Cr(e),Be(En()[e]))},i:function(e,t,o){t=Ro(e,t>>>0);var d=t.shift();e--;var g=`return function (obj, func, destructorsRef, args) {
`,w=0,S=[];o===0&&S.push("obj");for(var R=["retType"],N=[d],k=0;k<e;++k)S.push("arg"+k),R.push("argType"+k),N.push(t[k]),g+=`  var arg${k} = argType${k}.readValueFromPointer(args${w?"+"+w:""});
`,w+=t[k].argPackAdvance;for(g+=`  var rv = ${o===1?"new func":"func.call"}(${S.join(", ")});
`,k=0;k<e;++k)t[k].deleteObject&&(g+=`  argType${k}.deleteObject(arg${k});
`);return d.Lb||(R.push("emval_returnValue"),N.push(_n),g+=`  return emval_returnValue(retType, destructorsRef, rv);
`),R.push(g+`};
`),e=Io(R).apply(null,N),o=`methodCaller<(${t.map(te=>te.name).join(", ")}) => ${d.name}>`,Po(An(o,e))},r:function(e,t){return t>>>=0,e=Oe(e>>>0),t=Oe(t),Be(e[t])},d:function(e){e>>>=0,4<e&&(Ae.get(e).Cb+=1)},v:function(){return Be([])},l:function(e){e=Oe(e>>>0);for(var t=Array(e.length),o=0;o<e.length;o++)t[o]=e[o];return Be(t)},f:function(e){return Be(Cr(e>>>0))},k:function(){return Be({})},h:function(e){e>>>=0;for(var t=Oe(e);t.length;){var o=t.pop();t.pop()(o)}Er(e)},g:function(e,t,o){t>>>=0,o>>>=0,e=Oe(e>>>0),t=Oe(t),o=Oe(o),e[t]=o},e:function(e,t){return t>>>=0,e=Mr(e>>>0,"_emval_take_value"),e=e.readValueFromPointer(t),Be(e)},Z:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),t>>>=0,e=new Date(1e3*e),f()[t>>>2>>>0]=e.getUTCSeconds(),f()[t+4>>>2>>>0]=e.getUTCMinutes(),f()[t+8>>>2>>>0]=e.getUTCHours(),f()[t+12>>>2>>>0]=e.getUTCDate(),f()[t+16>>>2>>>0]=e.getUTCMonth(),f()[t+20>>>2>>>0]=e.getUTCFullYear()-1900,f()[t+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,f()[t+28>>>2>>>0]=e},_:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),t>>>=0,e=new Date(1e3*e),f()[t>>>2>>>0]=e.getSeconds(),f()[t+4>>>2>>>0]=e.getMinutes(),f()[t+8>>>2>>>0]=e.getHours(),f()[t+12>>>2>>>0]=e.getDate(),f()[t+16>>>2>>>0]=e.getMonth(),f()[t+20>>>2>>>0]=e.getFullYear()-1900,f()[t+24>>>2>>>0]=e.getDay();var o=(dt(e.getFullYear())?Sn:Mn)[e.getMonth()]+e.getDate()-1|0;f()[t+28>>>2>>>0]=o,f()[t+36>>>2>>>0]=-(60*e.getTimezoneOffset()),o=new Date(e.getFullYear(),6,1).getTimezoneOffset();var d=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(o!=d&&e.getTimezoneOffset()==Math.min(d,o))|0,f()[t+32>>>2>>>0]=e},$:function(e){e>>>=0;var t=new Date(f()[e+20>>>2>>>0]+1900,f()[e+16>>>2>>>0],f()[e+12>>>2>>>0],f()[e+8>>>2>>>0],f()[e+4>>>2>>>0],f()[e>>>2>>>0],0),o=f()[e+32>>>2>>>0],d=t.getTimezoneOffset(),g=new Date(t.getFullYear(),6,1).getTimezoneOffset(),w=new Date(t.getFullYear(),0,1).getTimezoneOffset(),S=Math.min(w,g);return 0>o?f()[e+32>>>2>>>0]=+(g!=w&&S==d):0<o!=(S==d)&&(g=Math.max(w,g),t.setTime(t.getTime()+6e4*((0<o?S:g)-d))),f()[e+24>>>2>>>0]=t.getDay(),o=(dt(t.getFullYear())?Sn:Mn)[t.getMonth()]+t.getDate()-1|0,f()[e+28>>>2>>>0]=o,f()[e>>>2>>>0]=t.getSeconds(),f()[e+4>>>2>>>0]=t.getMinutes(),f()[e+8>>>2>>>0]=t.getHours(),f()[e+12>>>2>>>0]=t.getDate(),f()[e+16>>>2>>>0]=t.getMonth(),f()[e+20>>>2>>>0]=t.getYear(),e=t.getTime(),isNaN(e)?(f()[$n()>>>2>>>0]=61,e=-1):e/=1e3,BigInt(e)},X:Cn,Y:Pn,M:function(e,t,o){function d(k){return(k=k.toTimeString().match(/\(([A-Za-z ]+)\)$/))?k[1]:"GMT"}e>>>=0,t>>>=0,o>>>=0;var g=new Date().getFullYear(),w=new Date(g,0,1),S=new Date(g,6,1);g=w.getTimezoneOffset();var R=S.getTimezoneOffset(),N=Math.max(g,R);p()[e>>>2>>>0]=60*N,f()[t>>>2>>>0]=+(g!=R),e=d(w),t=d(S),e=Rn(e),t=Rn(t),R<g?(p()[o>>>2>>>0]=e,p()[o+4>>>2>>>0]=t):(p()[o>>>2>>>0]=t,p()[o+4>>>2>>>0]=e)},p:()=>{ut("")},ra:function(e,t,o){e>>>=0,t>>>=0,o>>>=0,Pr.length=0;for(var d;d=l()[t++>>>0];){var g=d!=105;g&=d!=112,o+=g&&o%8?4:0,Pr.push(d==112?p()[o>>>2>>>0]:d==106?ce[o>>>3]:d==105?f()[o>>>2>>>0]:b()[o>>>3>>>0]),o+=g?8:4}return Et[e].apply(null,Pr)},E:()=>{},G:()=>Date.now(),la:()=>{throw B+=1,"unwind"},O:function(){return 4294901760},t:()=>performance.timeOrigin+performance.now(),w:()=>U?(Ia(),et(Ra)).cpus().length:navigator.hardwareConcurrency,L:function(e){e>>>=0;var t=l().length;if(e<=t||4294901760<e)return!1;for(var o=1;4>=o;o*=2){var d=t*(1+.2/o);d=Math.min(d,e+100663296);var g=Math;d=Math.max(e,d);e:{g=(g.min.call(g,4294901760,d+(65536-d%65536)%65536)-F.buffer.byteLength+65535)/65536;try{F.grow(g),he();var w=1;break e}catch{}w=void 0}if(w)return!0}return!1},ea:xn,fa:Un,U:Ct,y:Bn,C:Dn,ba:Fn,B:kn,a:F||s.wasmMemory,ha:Wn,q:function(e,t,o,d){return Wn(e>>>0,t>>>0,o>>>0,d>>>0)}},L=function(){function e(o,d){return L=o.exports,L=ko(),c.Gb.push(L.Ya),D=L.$a,xe.unshift(L.sa),be=d,vt(),L}var t={a:Fo};if(_e++,s.instantiateWasm)try{return s.instantiateWasm(t,e)}catch(o){ee(`Module.instantiateWasm callback failed with error: ${o}`),E(o)}return zt(t,function(o){e(o.instance,o.module)}).catch(E),{}}();s._OrtInit=(e,t)=>(s._OrtInit=L.ta)(e,t),s._OrtGetLastError=(e,t)=>(s._OrtGetLastError=L.ua)(e,t),s._OrtCreateSessionOptions=(e,t,o,d,g,w,S,R,N,k)=>(s._OrtCreateSessionOptions=L.va)(e,t,o,d,g,w,S,R,N,k),s._OrtAppendExecutionProvider=(e,t)=>(s._OrtAppendExecutionProvider=L.wa)(e,t),s._OrtAddFreeDimensionOverride=(e,t,o)=>(s._OrtAddFreeDimensionOverride=L.xa)(e,t,o),s._OrtAddSessionConfigEntry=(e,t,o)=>(s._OrtAddSessionConfigEntry=L.ya)(e,t,o),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=L.za)(e),s._OrtCreateSession=(e,t,o)=>(s._OrtCreateSession=L.Aa)(e,t,o),s._OrtReleaseSession=e=>(s._OrtReleaseSession=L.Ba)(e),s._OrtGetInputOutputCount=(e,t,o)=>(s._OrtGetInputOutputCount=L.Ca)(e,t,o),s._OrtGetInputName=(e,t)=>(s._OrtGetInputName=L.Da)(e,t),s._OrtGetOutputName=(e,t)=>(s._OrtGetOutputName=L.Ea)(e,t),s._OrtFree=e=>(s._OrtFree=L.Fa)(e),s._OrtCreateTensor=(e,t,o,d,g,w)=>(s._OrtCreateTensor=L.Ga)(e,t,o,d,g,w),s._OrtGetTensorData=(e,t,o,d,g)=>(s._OrtGetTensorData=L.Ha)(e,t,o,d,g),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=L.Ia)(e),s._OrtCreateRunOptions=(e,t,o,d)=>(s._OrtCreateRunOptions=L.Ja)(e,t,o,d),s._OrtAddRunConfigEntry=(e,t,o)=>(s._OrtAddRunConfigEntry=L.Ka)(e,t,o),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=L.La)(e),s._OrtCreateBinding=e=>(s._OrtCreateBinding=L.Ma)(e),s._OrtBindInput=(e,t,o)=>(s._OrtBindInput=L.Na)(e,t,o),s._OrtBindOutput=(e,t,o,d)=>(s._OrtBindOutput=L.Oa)(e,t,o,d),s._OrtClearBoundOutputs=e=>(s._OrtClearBoundOutputs=L.Pa)(e),s._OrtReleaseBinding=e=>(s._OrtReleaseBinding=L.Qa)(e),s._OrtRunWithBinding=(e,t,o,d,g)=>(s._OrtRunWithBinding=L.Ra)(e,t,o,d,g),s._OrtRun=(e,t,o,d,g,w,S,R)=>(s._OrtRun=L.Sa)(e,t,o,d,g,w,S,R),s._OrtEndProfiling=e=>(s._OrtEndProfiling=L.Ta)(e);var $n=()=>($n=L.Ua)(),Jt=s._pthread_self=()=>(Jt=s._pthread_self=L.Va)(),Xt=s._malloc=e=>(Xt=s._malloc=L.Wa)(e),He=s._free=e=>(He=s._free=L.Xa)(e);s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=L.Ya)();var zn=e=>(zn=L.Za)(e);s.__embind_initialize_bindings=()=>(s.__embind_initialize_bindings=L._a)();var Gn=s.__emscripten_thread_init=(e,t,o,d,g,w)=>(Gn=s.__emscripten_thread_init=L.ab)(e,t,o,d,g,w);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=L.bb)();var jn=(e,t,o,d)=>(jn=L.cb)(e,t,o,d),xr=e=>(xr=L.db)(e),Ur=s.__emscripten_thread_exit=e=>(Ur=s.__emscripten_thread_exit=L.eb)(e),Yn=()=>(Yn=L.fb)(),Vn=(e,t)=>(Vn=L.gb)(e,t),Br=()=>(Br=L.hb)(),Kt=e=>(Kt=L.ib)(e),Dr=e=>(Dr=L.jb)(e);function ko(){var e=L;e=Object.assign({},e);var t=d=>()=>d()>>>0,o=d=>g=>d(g)>>>0;return e.Ua=t(e.Ua),e.Va=t(e.Va),e.Wa=o(e.Wa),e.Za=o(e.Za),e.emscripten_main_runtime_thread_id=t(e.emscripten_main_runtime_thread_id),e.hb=t(e.hb),e.jb=o(e.jb),e}s.wasmMemory=F,s.stackAlloc=Dr,s.stackSave=Br,s.stackRestore=Kt,s.keepRuntimeAlive=()=>0<B,s.UTF8ToString=Ye,s.stringToUTF8=Z,s.lengthBytesUTF8=T,s.ExitStatus=ft,s.PThread=c;var Zt;Ee=function e(){Zt||qn(),Zt||(Ee=e)};function qn(){if(!(0<_e))if(C)y(s),C||h(xe),startWorker(s);else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)ie.unshift(s.preRun.shift());h(ie),0<_e||Zt||(Zt=!0,s.calledRun=!0,Me||(C||h(xe),y(s),C||h(Fe)))}}return qn(),n.ready}})();typeof Ua=="object"&&typeof Vr=="object"?Vr.exports=xa:typeof define=="function"&&define.amd&&define([],()=>xa)});var Da=pt((ss,Vo)=>{Vo.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(Module.__embind_initialize_bindings(),initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\n'});var ka,qo,qr,Jr,sr,Fa,Jo,Xo,Ko,La,z,at=G(()=>{"use strict";ka=Ma();qo=Ba(),Jr=!1,sr=!1,Fa=!1,Jo=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},Xo=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},Ko=(a,n)=>a?"ort-training-wasm-simd.wasm":n?"ort-wasm-threaded.wasm":"ort-wasm.wasm",La=async a=>{if(Jr)return Promise.resolve();if(sr)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Fa)throw new Error("previous call to 'initializeWebAssembly()' failed.");sr=!0;let n=a.initTimeout,r=a.numThreads,l=a.simd,u=r>1&&Jo(),m=l&&Xo(),f=a.wasmPaths,p=typeof f=="string"?f:void 0,b=Ko(m,u),s=typeof f=="object"?f[b]:void 0,y=!1,E=[];if(n>0&&E.push(new Promise(O=>{setTimeout(()=>{y=!0,O()},n)})),E.push(new Promise((O,A)=>{let I=u?qo:ka,P={locateFile:(H,U)=>u&&H.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Da()],{type:"text/javascript"})):H.endsWith(".wasm")?s||(p??U)+b:U+H};if(u)if(P.numThreads=r,typeof Blob>"u")P.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let H=`var ortWasmThreaded=${I.toString()};`;P.mainScriptUrlOrBlob=new Blob([H],{type:"text/javascript"})}I(P).then(H=>{sr=!1,Jr=!0,qr=H,O()},H=>{sr=!1,Fa=!0,A(H)})})),await Promise.race(E),y)throw new Error(`WebAssembly backend initializing failed due to timeout: ${n}ms`)},z=()=>{if(Jr&&qr)return qr;throw new Error("WebAssembly is not initialized yet.")}});var ae,Bt,Q,Dt=G(()=>{"use strict";at();ae=(a,n)=>{let r=z(),l=r.lengthBytesUTF8(a)+1,u=r._malloc(l);return r.stringToUTF8(a,u,l),n.push(u),u},Bt=(a,n,r,l)=>{if(typeof a=="object"&&a!==null){if(r.has(a))throw new Error("Circular reference in options");r.add(a)}Object.entries(a).forEach(([u,m])=>{let f=n?n+u:u;if(typeof m=="object")Bt(m,f+".",r,l);else if(typeof m=="string"||typeof m=="number")l(f,m.toString());else if(typeof m=="boolean")l(f,m?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof m}`)})},Q=a=>{let n=z(),r=n.stackSave();try{let l=n.stackAlloc(8);n._OrtGetLastError(l,l+4);let u=n.HEAP32[l/4],m=n.HEAPU32[l/4+1],f=m?n.UTF8ToString(m):"";throw new Error(`${a} ERROR_CODE: ${u}, ERROR_MESSAGE: ${f}`)}finally{n.stackRestore(r)}}});var gt,Xr=G(()=>{"use strict";at();Dt();gt=a=>{let n=z(),r=0,l=[],u=a||{};try{if(a?.logSeverityLevel===void 0)u.logSeverityLevel=2;else if(typeof a.logSeverityLevel!="number"||!Number.isInteger(a.logSeverityLevel)||a.logSeverityLevel<0||a.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${a.logSeverityLevel}`);if(a?.logVerbosityLevel===void 0)u.logVerbosityLevel=0;else if(typeof a.logVerbosityLevel!="number"||!Number.isInteger(a.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${a.logVerbosityLevel}`);a?.terminate===void 0&&(u.terminate=!1);let m=0;return a?.tag!==void 0&&(m=ae(a.tag,l)),r=n._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,m),r===0&&Q("Can't create run options."),a?.extra!==void 0&&Bt(a.extra,"",new WeakSet,(f,p)=>{let b=ae(f,l),s=ae(p,l);n._OrtAddRunConfigEntry(r,b,s)!==0&&Q(`Can't set a run config entry: ${f} - ${p}.`)}),[r,l]}catch(m){throw r!==0&&n._OrtReleaseRunOptions(r),l.forEach(f=>n._free(f)),m}}});var Zo,Qo,ei,ti,ur,Kr=G(()=>{"use strict";at();Dt();Zo=a=>{switch(a){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${a}`)}},Qo=a=>{switch(a){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${a}`)}},ei=a=>{a.extra||(a.extra={}),a.extra.session||(a.extra.session={});let n=a.extra.session;n.use_ort_model_bytes_directly||(n.use_ort_model_bytes_directly="1"),a.executionProviders&&a.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(a.enableMemPattern=!1)},ti=(a,n,r)=>{for(let l of n){let u=typeof l=="string"?l:l.name;switch(u){case"webnn":if(u="WEBNN",typeof l!="string"){let f=l;if(f?.deviceType){let p=ae("deviceType",r),b=ae(f.deviceType,r);z()._OrtAddSessionConfigEntry(a,p,b)!==0&&Q(`Can't set a session config entry: 'deviceType' - ${f.deviceType}.`)}if(f?.numThreads){let p=f.numThreads;(typeof p!="number"||!Number.isInteger(p)||p<0)&&(p=0);let b=ae("numThreads",r),s=ae(p.toString(),r);z()._OrtAddSessionConfigEntry(a,b,s)!==0&&Q(`Can't set a session config entry: 'numThreads' - ${f.numThreads}.`)}if(f?.powerPreference){let p=ae("powerPreference",r),b=ae(f.powerPreference,r);z()._OrtAddSessionConfigEntry(a,p,b)!==0&&Q(`Can't set a session config entry: 'powerPreference' - ${f.powerPreference}.`)}}break;case"webgpu":if(u="JS",typeof l!="string"){let f=l;if(f?.preferredLayout){if(f.preferredLayout!=="NCHW"&&f.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${f.preferredLayout}`);let p=ae("preferredLayout",r),b=ae(f.preferredLayout,r);z()._OrtAddSessionConfigEntry(a,p,b)!==0&&Q(`Can't set a session config entry: 'preferredLayout' - ${f.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${u}`)}let m=ae(u,r);z()._OrtAppendExecutionProvider(a,m)!==0&&Q(`Can't append execution provider: ${u}.`)}},ur=a=>{let n=z(),r=0,l=[],u=a||{};ei(u);try{let m=Zo(u.graphOptimizationLevel??"all"),f=Qo(u.executionMode??"sequential"),p=typeof u.logId=="string"?ae(u.logId,l):0,b=u.logSeverityLevel??2;if(!Number.isInteger(b)||b<0||b>4)throw new Error(`log serverity level is not valid: ${b}`);let s=u.logVerbosityLevel??0;if(!Number.isInteger(s)||s<0||s>4)throw new Error(`log verbosity level is not valid: ${s}`);let y=typeof u.optimizedModelFilePath=="string"?ae(u.optimizedModelFilePath,l):0;if(r=n._OrtCreateSessionOptions(m,!!u.enableCpuMemArena,!!u.enableMemPattern,f,!!u.enableProfiling,0,p,b,s,y),r===0&&Q("Can't create session options."),u.executionProviders&&ti(r,u.executionProviders,l),u.freeDimensionOverrides)for(let[E,O]of Object.entries(u.freeDimensionOverrides)){if(typeof E!="string")throw new Error(`free dimension override name must be a string: ${E}`);if(typeof O!="number"||!Number.isInteger(O)||O<0)throw new Error(`free dimension override value must be a non-negative integer: ${O}`);let A=ae(E,l);n._OrtAddFreeDimensionOverride(r,A,O)!==0&&Q(`Can't set a free dimension override: ${E} - ${O}.`)}return u.extra!==void 0&&Bt(u.extra,"",new WeakSet,(E,O)=>{let A=ae(E,l),I=ae(O,l);n._OrtAddSessionConfigEntry(r,A,I)!==0&&Q(`Can't set a session config entry: ${E} - ${O}.`)}),[r,l]}catch(m){throw r!==0&&n._OrtReleaseSessionOptions(r),l.forEach(f=>n._free(f)),m}}});var yt,fr,Zr,Ft,Ha,lr,kt,cr=G(()=>{"use strict";yt=a=>{switch(a){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${a}`)}},fr=a=>{switch(a){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${a}`)}},Zr=a=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][a],Ft=a=>{switch(a){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${a}`)}},Ha=a=>{switch(a){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${a}`)}},lr=a=>a==="float32"||a==="int32"||a==="int64"||a==="bool"||a==="float16"||a==="uint32",kt=a=>{switch(a){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${a}`)}}});var Lt,Qr=G(()=>{"use strict";Lt=async a=>{if(typeof a=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(a))}catch(n){if(n.code==="ERR_FS_FILE_TOO_LARGE"){let r=(void 0)(a),l=[];for await(let u of r)l.push(u);return new Uint8Array(Buffer.concat(l))}throw n}else{let n=await fetch(a);if(!n.ok)throw new Error(`failed to load external data file: ${a}`);let r=n.headers.get("Content-Length"),l=r?parseInt(r,10):0;if(l<1073741824)return new Uint8Array(await n.arrayBuffer());{if(!n.body)throw new Error(`failed to load external data file: ${a}, no response body.`);let u=n.body.getReader(),m=Math.ceil(l/65536),f=new WebAssembly.Memory({initial:m,maximum:m}).buffer,p=0;for(;;){let{done:b,value:s}=await u.read();if(b)break;let y=s.byteLength;new Uint8Array(f,p,y).set(s),p+=y}return new Uint8Array(f,0,l)}}else return a instanceof Blob?new Uint8Array(await a.arrayBuffer()):a instanceof Uint8Array?a:new Uint8Array(a)}});var ri,Wa,Na,Ht,ni,Wt,$a,za,dr,Ga,ja,Ya,pr=G(()=>{"use strict";Xr();Kr();cr();at();Dt();Qr();ri=(a,n)=>{z()._OrtInit(a,n)!==0&&Q("Can't initialize onnxruntime.")},Wa=async a=>{ri(a.wasm.numThreads,Ha(a.logLevel))},Na=async(a,n)=>{},Ht=new Map,ni=a=>{let n=z(),r=n.stackSave();try{let l=n.stackAlloc(8);return n._OrtGetInputOutputCount(a,l,l+4)!==0&&Q("Can't get session input/output count."),[n.HEAP32[l/4],n.HEAP32[l/4+1]]}finally{n.stackRestore(r)}},Wt=a=>{let n=z(),r=n._malloc(a.byteLength);if(r===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${a.byteLength}.`);return n.HEAPU8.set(a,r),[r,a.byteLength]},$a=async(a,n)=>{let r,l,u=z();Array.isArray(a)?[r,l]=a:a.buffer===u.HEAPU8.buffer?[r,l]=[a.byteOffset,a.byteLength]:[r,l]=Wt(a);let m=0,f=0,p=0,b=[],s=[],y=[];try{if([f,b]=ur(n),n?.externalData&&u.mountExternalData){let U=[];for(let C of n.externalData){let W=typeof C=="string"?C:C.path;U.push(Lt(typeof C=="string"?C:C.data).then(j=>{u.mountExternalData(W,j)}))}await Promise.all(U)}m=await u._OrtCreateSession(r,l,f),m===0&&Q("Can't create a session.");let[E,O]=ni(m),A=[],I=[],P=[];for(let U=0;U<E;U++){let C=u._OrtGetInputName(m,U);C===0&&Q("Can't get an input name."),s.push(C),A.push(u.UTF8ToString(C))}for(let U=0;U<O;U++){let C=u._OrtGetOutputName(m,U);C===0&&Q("Can't get an output name."),y.push(C);let W=u.UTF8ToString(C);I.push(W)}let H=null;return Ht.set(m,[m,s,y,H]),[m,A,I]}catch(E){throw s.forEach(O=>u._OrtFree(O)),y.forEach(O=>u._OrtFree(O)),p!==0&&u._OrtReleaseBinding(p),m!==0&&u._OrtReleaseSession(m),E}finally{u._free(r),f!==0&&u._OrtReleaseSessionOptions(f),b.forEach(E=>u._free(E)),u.unmountExternalData?.()}},za=a=>{let n=z(),r=Ht.get(a);if(!r)throw new Error(`cannot release session. invalid session id: ${a}`);let[l,u,m,f]=r;f&&n._OrtReleaseBinding(f.handle),n.jsepUnregisterBuffers?.(a),u.forEach(p=>n._OrtFree(p)),m.forEach(p=>n._OrtFree(p)),n._OrtReleaseSession(l),Ht.delete(a)},dr=(a,n,r,l,u)=>{if(!a){n.push(0);return}let m=z(),f=a[0],p=a[1],b=a[3],s,y;if(f==="string"&&b==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(b==="gpu-buffer"){let A=a[2].gpuBuffer,I=Zr(yt(f));y=p.reduce((P,H)=>P*H,1)*I,s=m.jsepRegisterBuffer(l,u,A,y)}else{let A=a[2];if(Array.isArray(A)){y=4*A.length,s=m._malloc(y),r.push(s);let I=s/4;for(let P=0;P<A.length;P++){if(typeof A[P]!="string")throw new TypeError(`tensor data at index ${P} is not a string`);m.HEAPU32[I++]=ae(A[P],r)}}else y=A.byteLength,s=m._malloc(y),r.push(s),m.HEAPU8.set(new Uint8Array(A.buffer,A.byteOffset,y),s)}let E=m.stackSave(),O=m.stackAlloc(4*p.length);try{let A=O/4;p.forEach(P=>m.HEAP32[A++]=P);let I=m._OrtCreateTensor(yt(f),s,y,O,p.length,kt(b));I===0&&Q(`Can't create tensor for input/output. session=${l}, index=${u}.`),n.push(I)}finally{m.stackRestore(E)}},Ga=async(a,n,r,l,u,m)=>{let f=z(),p=Ht.get(a);if(!p)throw new Error(`cannot run inference. invalid session id: ${a}`);let[b,s,y,E]=p,O=n.length,A=l.length,I=0,P=[],H=[],U=[],C=[],W=f.stackSave(),j=f.stackAlloc(O*4),K=f.stackAlloc(O*4),x=f.stackAlloc(A*4),q=f.stackAlloc(A*4);try{[I,P]=gt(m);for(let F=0;F<O;F++)dr(r[F],H,C,a,n[F]);for(let F=0;F<A;F++)dr(u[F],U,C,a,O+l[F]);let fe=j/4,Ne=K/4,$e=x/4,ze=q/4;for(let F=0;F<O;F++)f.HEAPU32[fe++]=H[F],f.HEAPU32[Ne++]=s[n[F]];for(let F=0;F<A;F++)f.HEAPU32[$e++]=U[F],f.HEAPU32[ze++]=y[l[F]];let Xe;Xe=await f._OrtRun(b,K,j,O,q,A,x,I),Xe!==0&&Q("failed to call OrtRun().");let ee=[];for(let F=0;F<A;F++){let be=f.HEAPU32[x/4+F];if(be===U[F]){ee.push(u[F]);continue}let Me=f.stackSave(),le=f.stackAlloc(4*4),oe=!1,ne,ge=0;try{f._OrtGetTensorData(be,le,le+4,le+8,le+12)!==0&&Q(`Can't access output tensor data on index ${F}.`);let De=le/4,Ge=f.HEAPU32[De++];ge=f.HEAPU32[De++];let Ke=f.HEAPU32[De++],ce=f.HEAPU32[De++],Re=[];for(let ue=0;ue<ce;ue++)Re.push(f.HEAPU32[Ke/4+ue]);f._OrtFree(Ke);let Ie=Re.reduce((ue,ie)=>ue*ie,1);ne=fr(Ge);let he=E?.outputPreferredLocations[l[F]];if(ne==="string"){if(he==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let ue=[],ie=ge/4;for(let xe=0;xe<Ie;xe++){let Fe=f.HEAPU32[ie++],_e=xe===Ie-1?void 0:f.HEAPU32[ie]-Fe;ue.push(f.UTF8ToString(Fe,_e))}ee.push([ne,Re,ue,"cpu"])}else if(he==="gpu-buffer"&&Ie>0){let ue=f.jsepGetBuffer(ge),ie=Zr(Ge);if(ie===void 0||!lr(ne))throw new Error(`Unsupported data type: ${ne}`);oe=!0,ee.push([ne,Re,{gpuBuffer:ue,download:f.jsepCreateDownloader(ue,Ie*ie,ne),dispose:()=>{f._OrtReleaseTensor(be)}},"gpu-buffer"])}else{let ue=Ft(ne),ie=new ue(Ie);new Uint8Array(ie.buffer,ie.byteOffset,ie.byteLength).set(f.HEAPU8.subarray(ge,ge+ie.byteLength)),ee.push([ne,Re,ie,"cpu"])}}finally{f.stackRestore(Me),ne==="string"&&ge&&f._free(ge),oe||f._OrtReleaseTensor(be)}}return E&&f._OrtClearBoundOutputs(E.handle),ee}finally{f.stackRestore(W),H.forEach(fe=>f._OrtReleaseTensor(fe)),U.forEach(fe=>f._OrtReleaseTensor(fe)),C.forEach(fe=>f._free(fe)),I!==0&&f._OrtReleaseRunOptions(I),P.forEach(fe=>f._free(fe))}},ja=a=>{let n=z(),r=Ht.get(a);if(!r)throw new Error("invalid session id");let l=r[0],u=n._OrtEndProfiling(l);u===0&&Q("Can't get an profile file name."),n._OrtFree(u)},Ya=a=>{let n=[];for(let r of a){let l=r[2];!Array.isArray(l)&&"buffer"in l&&n.push(l.buffer)}return n}});var Va=pt((Ms,oi)=>{oi.exports='/*!\n * ONNX Runtime Web v1.17.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var Ht=Object.defineProperty;var Hn=Object.getOwnPropertyDescriptor;var Nn=Object.getOwnPropertyNames;var $n=Object.prototype.hasOwnProperty;var Nt=(f,h)=>()=>(f&&(h=f(f=0)),h);var lt=(f,h)=>()=>(h||f((h={exports:{}}).exports,h),h.exports),$t=(f,h)=>{for(var i in h)Ht(f,i,{get:h[i],enumerable:!0})},Gn=(f,h,i,y)=>{if(h&&typeof h=="object"||typeof h=="function")for(let b of Nn(h))!$n.call(f,b)&&b!==i&&Ht(f,b,{get:()=>h[b],enumerable:!(y=Hn(h,b))||y.enumerable});return f};var ct=f=>Gn(Ht({},"__esModule",{value:!0}),f);var Gt={};$t(Gt,{createReadStream:()=>$r,readFile:()=>jn,readFileSync:()=>zn});var jn,zn,$r,jt=Nt(()=>{jn=void 0,zn=void 0,$r=void 0});var zt={};$t(zt,{join:()=>Yn});var Yn,Yt=Nt(()=>{Yn=void 0});var zr=lt((jr,qt)=>{"use strict";var Gr=(()=>{var f=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(f=f||__filename),function(h={}){var i=h,y,b;i.ready=new Promise((n,o)=>{y=n,b=o});var _=Object.assign({},i),c="./this.program",O=typeof window=="object",D=typeof importScripts=="function",u=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",x="",k,R,L;if(u){var N=(jt(),ct(Gt)),G=(Yt(),ct(zt));x=D?G.dirname(x)+"/":__dirname+"/",k=(n,o)=>(n=te(n)?new URL(n):G.normalize(n),N.readFileSync(n,o?void 0:"utf8")),L=n=>(n=k(n,!0),n.buffer||(n=new Uint8Array(n)),n),R=(n,o,s,p=!0)=>{n=te(n)?new URL(n):G.normalize(n),N.readFile(n,p?void 0:"utf8",(w,M)=>{w?s(w):o(p?M.buffer:M)})},!i.thisProgram&&1<process.argv.length&&(c=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),i.inspect=()=>"[Emscripten Module object]"}else(O||D)&&(D?x=self.location.href:typeof document<"u"&&document.currentScript&&(x=document.currentScript.src),f&&(x=f),x.indexOf("blob:")!==0?x=x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1):x="",k=n=>{var o=new XMLHttpRequest;return o.open("GET",n,!1),o.send(null),o.responseText},D&&(L=n=>{var o=new XMLHttpRequest;return o.open("GET",n,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),R=(n,o,s)=>{var p=new XMLHttpRequest;p.open("GET",n,!0),p.responseType="arraybuffer",p.onload=()=>{p.status==200||p.status==0&&p.response?o(p.response):s()},p.onerror=s,p.send(null)});var j=console.log.bind(console),I=console.error.bind(console);Object.assign(i,_),_=null,typeof WebAssembly!="object"&&Oe("no native wasm support detected");var E,K=!1,ge,le,A,Y,ae;function Ie(){var n=E.buffer;i.HEAP8=ge=new Int8Array(n),i.HEAP16=new Int16Array(n),i.HEAPU8=le=new Uint8Array(n),i.HEAPU16=new Uint16Array(n),i.HEAP32=A=new Int32Array(n),i.HEAPU32=Y=new Uint32Array(n),i.HEAPF32=new Float32Array(n),i.HEAPF64=ae=new Float64Array(n)}var Be=[],Re=[],Ne=[],q=0,C=null,pe=null;function Oe(n){throw n="Aborted("+n+")",I(n),K=!0,n=new WebAssembly.RuntimeError(n+". Build with -sASSERTIONS for more info."),b(n),n}var ie=n=>n.startsWith("data:application/octet-stream;base64,"),te=n=>n.startsWith("file://"),Z;if(Z="ort-training-wasm-simd.wasm",!ie(Z)){var de=Z;Z=i.locateFile?i.locateFile(de,x):x+de}function ze(n){if(L)return L(n);throw"both async and sync fetching of the wasm failed"}function Ce(n){if(O||D){if(typeof fetch=="function"&&!te(n))return fetch(n,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at \'"+n+"\'";return o.arrayBuffer()}).catch(()=>ze(n));if(R)return new Promise((o,s)=>{R(n,p=>o(new Uint8Array(p)),s)})}return Promise.resolve().then(()=>ze(n))}function Le(n,o,s){return Ce(n).then(p=>WebAssembly.instantiate(p,o)).then(p=>p).then(s,p=>{I(`failed to asynchronously prepare wasm: ${p}`),Oe(p)})}function $e(n,o){var s=Z;return typeof WebAssembly.instantiateStreaming!="function"||ie(s)||te(s)||u||typeof fetch!="function"?Le(s,n,o):fetch(s,{credentials:"same-origin"}).then(p=>WebAssembly.instantiateStreaming(p,n).then(o,function(w){return I(`wasm streaming compile failed: ${w}`),I("falling back to ArrayBuffer instantiation"),Le(s,n,o)}))}var se,Te={989232:(n,o,s,p)=>{if(typeof i>"u"||!i.Qa)return 1;if(n=Fe(n>>>0),n.startsWith("./")&&(n=n.substring(2)),n=i.Qa.get(n),!n)return 2;if(o>>>=0,s>>>=0,o+s>n.byteLength)return 3;try{return le.set(n.subarray(o,o+s),p>>>0>>>0),0}catch{return 4}}};function Ee(n){this.Ka=n-24,this.Pa=function(o){Y[this.Ka+4>>>2>>>0]=o},this.Oa=function(o){Y[this.Ka+8>>>2>>>0]=o},this.Ma=function(o,s){this.Na(),this.Pa(o),this.Oa(s)},this.Na=function(){Y[this.Ka+16>>>2>>>0]=0}}var ce=0,oe=0,re=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Se=(n,o,s)=>{o>>>=0;var p=o+s;for(s=o;n[s]&&!(s>=p);)++s;if(16<s-o&&n.buffer&&re)return re.decode(n.subarray(o,s));for(p="";o<s;){var w=n[o++];if(w&128){var M=n[o++]&63;if((w&224)==192)p+=String.fromCharCode((w&31)<<6|M);else{var B=n[o++]&63;w=(w&240)==224?(w&15)<<12|M<<6|B:(w&7)<<18|M<<12|B<<6|n[o++]&63,65536>w?p+=String.fromCharCode(w):(w-=65536,p+=String.fromCharCode(55296|w>>10,56320|w&1023))}}else p+=String.fromCharCode(w)}return p},Fe=(n,o)=>(n>>>=0)?Se(le,n,o):"",be=n=>{for(var o=0,s=0;s<n.length;++s){var p=n.charCodeAt(s);127>=p?o++:2047>=p?o+=2:55296<=p&&57343>=p?(o+=4,++s):o+=3}return o},Ge=(n,o,s,p)=>{if(s>>>=0,!(0<p))return 0;var w=s;p=s+p-1;for(var M=0;M<n.length;++M){var B=n.charCodeAt(M);if(55296<=B&&57343>=B){var ne=n.charCodeAt(++M);B=65536+((B&1023)<<10)|ne&1023}if(127>=B){if(s>=p)break;o[s++>>>0]=B}else{if(2047>=B){if(s+1>=p)break;o[s++>>>0]=192|B>>6}else{if(65535>=B){if(s+2>=p)break;o[s++>>>0]=224|B>>12}else{if(s+3>=p)break;o[s++>>>0]=240|B>>18,o[s++>>>0]=128|B>>12&63}o[s++>>>0]=128|B>>6&63}o[s++>>>0]=128|B&63}}return o[s>>>0]=0,s-w},ve=n=>n%4===0&&(n%100!==0||n%400===0),Ke=[0,31,60,91,121,152,182,213,244,274,305,335],Ye=[0,31,59,90,120,151,181,212,243,273,304,334],Ze=n=>{var o=be(n)+1,s=nt(o);return s&&Ge(n,le,s,o),s},ke=[],Pe={},Qe=()=>{if(!et){var n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"},o;for(o in Pe)Pe[o]===void 0?delete n[o]:n[o]=Pe[o];var s=[];for(o in n)s.push(`${o}=${n[o]}`);et=s}return et},et,mt=[null,[],[]],gt=[31,29,31,30,31,30,31,31,30,31,30,31],tt=[31,28,31,30,31,30,31,31,30,31,30,31];function qe(n){var o=Array(be(n)+1);return Ge(n,o,0,o.length),o}function Ve(n,o,s,p){function w(m,H,z){for(m=typeof m=="number"?m.toString():m||"";m.length<H;)m=z[0]+m;return m}function M(m,H){return w(m,H,"0")}function B(m,H){function z(ft){return 0>ft?-1:0<ft?1:0}var Ae;return(Ae=z(m.getFullYear()-H.getFullYear()))===0&&(Ae=z(m.getMonth()-H.getMonth()))===0&&(Ae=z(m.getDate()-H.getDate())),Ae}function ne(m){switch(m.getDay()){case 0:return new Date(m.getFullYear()-1,11,29);case 1:return m;case 2:return new Date(m.getFullYear(),0,3);case 3:return new Date(m.getFullYear(),0,2);case 4:return new Date(m.getFullYear(),0,1);case 5:return new Date(m.getFullYear()-1,11,31);case 6:return new Date(m.getFullYear()-1,11,30)}}function me(m){var H=m.Ga;for(m=new Date(new Date(m.Ha+1900,0,1).getTime());0<H;){var z=m.getMonth(),Ae=(ve(m.getFullYear())?gt:tt)[z];if(H>Ae-m.getDate())H-=Ae-m.getDate()+1,m.setDate(1),11>z?m.setMonth(z+1):(m.setMonth(0),m.setFullYear(m.getFullYear()+1));else{m.setDate(m.getDate()+H);break}}return z=new Date(m.getFullYear()+1,0,4),H=ne(new Date(m.getFullYear(),0,4)),z=ne(z),0>=B(H,m)?0>=B(z,m)?m.getFullYear()+1:m.getFullYear():m.getFullYear()-1}n>>>=0,o>>>=0,s>>>=0,p>>>=0;var ue=Y[p+40>>>2>>>0];p={Ta:A[p>>>2>>>0],Sa:A[p+4>>>2>>>0],Ia:A[p+8>>>2>>>0],La:A[p+12>>>2>>>0],Ja:A[p+16>>>2>>>0],Ha:A[p+20>>>2>>>0],Ba:A[p+24>>>2>>>0],Ga:A[p+28>>>2>>>0],Va:A[p+32>>>2>>>0],Ra:A[p+36>>>2>>>0],Ua:ue?Fe(ue):""},s=Fe(s),ue={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var fe in ue)s=s.replace(new RegExp(fe,"g"),ue[fe]);var st="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ut="January February March April May June July August September October November December".split(" ");ue={"%a":m=>st[m.Ba].substring(0,3),"%A":m=>st[m.Ba],"%b":m=>ut[m.Ja].substring(0,3),"%B":m=>ut[m.Ja],"%C":m=>M((m.Ha+1900)/100|0,2),"%d":m=>M(m.La,2),"%e":m=>w(m.La,2," "),"%g":m=>me(m).toString().substring(2),"%G":m=>me(m),"%H":m=>M(m.Ia,2),"%I":m=>(m=m.Ia,m==0?m=12:12<m&&(m-=12),M(m,2)),"%j":m=>{for(var H=0,z=0;z<=m.Ja-1;H+=(ve(m.Ha+1900)?gt:tt)[z++]);return M(m.La+H,3)},"%m":m=>M(m.Ja+1,2),"%M":m=>M(m.Sa,2),"%n":()=>`\n`,"%p":m=>0<=m.Ia&&12>m.Ia?"AM":"PM","%S":m=>M(m.Ta,2),"%t":()=>"	","%u":m=>m.Ba||7,"%U":m=>M(Math.floor((m.Ga+7-m.Ba)/7),2),"%V":m=>{var H=Math.floor((m.Ga+7-(m.Ba+6)%7)/7);if(2>=(m.Ba+371-m.Ga-2)%7&&H++,H)H==53&&(z=(m.Ba+371-m.Ga)%7,z==4||z==3&&ve(m.Ha)||(H=1));else{H=52;var z=(m.Ba+7-m.Ga-1)%7;(z==4||z==5&&ve(m.Ha%400-1))&&H++}return M(H,2)},"%w":m=>m.Ba,"%W":m=>M(Math.floor((m.Ga+7-(m.Ba+6)%7)/7),2),"%y":m=>(m.Ha+1900).toString().substring(2),"%Y":m=>m.Ha+1900,"%z":m=>{m=m.Ra;var H=0<=m;return m=Math.abs(m)/60,(H?"+":"-")+("0000"+(m/60*100+m%60)).slice(-4)},"%Z":m=>m.Ua,"%%":()=>"%"},s=s.replace(/%%/g,"\\0\\0");for(fe in ue)s.includes(fe)&&(s=s.replace(new RegExp(fe,"g"),ue[fe](p)));return s=s.replace(/\\0\\0/g,"%"),fe=qe(s),fe.length>o?0:(ge.set(fe,n>>>0),fe.length-1)}var ht={a:function(n,o,s){throw n>>>=0,new Ee(n).Ma(o>>>0,s>>>0),ce=n,oe++,ce},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(n,o,s){n=o+2097152>>>0<4194305-!!n?(n>>>0)+4294967296*o:NaN,s>>>=0,n=new Date(1e3*n),A[s>>>2>>>0]=n.getUTCSeconds(),A[s+4>>>2>>>0]=n.getUTCMinutes(),A[s+8>>>2>>>0]=n.getUTCHours(),A[s+12>>>2>>>0]=n.getUTCDate(),A[s+16>>>2>>>0]=n.getUTCMonth(),A[s+20>>>2>>>0]=n.getUTCFullYear()-1900,A[s+24>>>2>>>0]=n.getUTCDay(),A[s+28>>>2>>>0]=(n.getTime()-Date.UTC(n.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(n,o,s){n=o+2097152>>>0<4194305-!!n?(n>>>0)+4294967296*o:NaN,s>>>=0,n=new Date(1e3*n),A[s>>>2>>>0]=n.getSeconds(),A[s+4>>>2>>>0]=n.getMinutes(),A[s+8>>>2>>>0]=n.getHours(),A[s+12>>>2>>>0]=n.getDate(),A[s+16>>>2>>>0]=n.getMonth(),A[s+20>>>2>>>0]=n.getFullYear()-1900,A[s+24>>>2>>>0]=n.getDay(),A[s+28>>>2>>>0]=(ve(n.getFullYear())?Ke:Ye)[n.getMonth()]+n.getDate()-1|0,A[s+36>>>2>>>0]=-(60*n.getTimezoneOffset()),o=new Date(n.getFullYear(),6,1).getTimezoneOffset();var p=new Date(n.getFullYear(),0,1).getTimezoneOffset();A[s+32>>>2>>>0]=(o!=p&&n.getTimezoneOffset()==Math.min(p,o))|0},p:function(n){n>>>=0;var o=new Date(A[n+20>>>2>>>0]+1900,A[n+16>>>2>>>0],A[n+12>>>2>>>0],A[n+8>>>2>>>0],A[n+4>>>2>>>0],A[n>>>2>>>0],0),s=A[n+32>>>2>>>0],p=o.getTimezoneOffset(),w=new Date(o.getFullYear(),6,1).getTimezoneOffset(),M=new Date(o.getFullYear(),0,1).getTimezoneOffset(),B=Math.min(M,w);return 0>s?A[n+32>>>2>>>0]=+(w!=M&&B==p):0<s!=(B==p)&&(w=Math.max(M,w),o.setTime(o.getTime()+6e4*((0<s?B:w)-p))),A[n+24>>>2>>>0]=o.getDay(),A[n+28>>>2>>>0]=(ve(o.getFullYear())?Ke:Ye)[o.getMonth()]+o.getDate()-1|0,A[n>>>2>>>0]=o.getSeconds(),A[n+4>>>2>>>0]=o.getMinutes(),A[n+8>>>2>>>0]=o.getHours(),A[n+12>>>2>>>0]=o.getDate(),A[n+16>>>2>>>0]=o.getMonth(),A[n+20>>>2>>>0]=o.getYear(),n=o.getTime(),isNaN(n)?(A[rt()>>>2>>>0]=61,n=-1):n/=1e3,We((se=n,1<=+Math.abs(se)?0<se?+Math.floor(se/4294967296)>>>0:~~+Math.ceil((se-+(~~se>>>0))/4294967296)>>>0:0)),n>>>0},l:function(){return-52},m:function(){},t:function(n,o,s){function p(me){return(me=me.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?me[1]:"GMT"}s>>>=0;var w=new Date().getFullYear(),M=new Date(w,0,1),B=new Date(w,6,1);w=M.getTimezoneOffset();var ne=B.getTimezoneOffset();Y[n>>>0>>>2>>>0]=60*Math.max(w,ne),A[o>>>0>>>2>>>0]=+(w!=ne),n=p(M),o=p(B),n=Ze(n),o=Ze(o),ne<w?(Y[s>>>2>>>0]=n,Y[s+4>>>2>>>0]=o):(Y[s>>>2>>>0]=o,Y[s+4>>>2>>>0]=n)},d:()=>{Oe("")},B:function(n,o,s){n>>>=0,o>>>=0,s>>>=0,ke.length=0;for(var p;p=le[o++>>>0];){var w=p!=105;w&=p!=112,s+=w&&s%8?4:0,ke.push(p==112?Y[s>>>2>>>0]:p==105?A[s>>>2>>>0]:ae[s>>>3>>>0]),s+=w?8:4}return Te[n].apply(null,ke)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(n,o,s){return o>>>=0,le.copyWithin(n>>>0>>>0,o>>>0,o+(s>>>0)>>>0)},s:function(n){n>>>=0;var o=le.length;if(4294901760<n)return!1;for(var s=1;4>=s;s*=2){var p=o*(1+.2/s);p=Math.min(p,n+100663296);var w=Math;p=Math.max(n,p);e:{w=(w.min.call(w,4294901760,p+(65536-p%65536)%65536)-E.buffer.byteLength+65535)/65536;try{E.grow(w),Ie();var M=1;break e}catch{}M=void 0}if(M)return!0}return!1},C:function(n,o){n>>>=0,o>>>=0;var s=0;return Qe().forEach((p,w)=>{var M=o+s;for(w=Y[n+4*w>>>2>>>0]=M,M=0;M<p.length;++M)ge[w++>>>0>>>0]=p.charCodeAt(M);ge[w>>>0>>>0]=0,s+=p.length+1}),0},D:function(n,o){n>>>=0,o>>>=0;var s=Qe();Y[n>>>2>>>0]=s.length;var p=0;return s.forEach(w=>p+=w.length+1),Y[o>>>2>>>0]=p,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(n,o,s,p){o>>>=0,s>>>=0,p>>>=0;for(var w=0,M=0;M<s;M++){var B=Y[o>>>2>>>0],ne=Y[o+4>>>2>>>0];o+=8;for(var me=0;me<ne;me++){var ue=le[B+me>>>0],fe=mt[n];ue===0||ue===10?((n===1?j:I)(Se(fe,0)),fe.length=0):fe.push(ue)}w+=ne}return Y[p>>>2>>>0]=w,0},r:Ve,c:function(n,o,s,p){return Ve(n>>>0,o>>>0,s>>>0,p>>>0)}},S=function(){function n(s){return S=s.exports,S=at(),E=S.K,Ie(),Re.unshift(S.L),q--,q==0&&(C!==null&&(clearInterval(C),C=null),pe&&(s=pe,pe=null,s())),S}var o={a:ht};if(q++,i.instantiateWasm)try{return i.instantiateWasm(o,n)}catch(s){I(`Module.instantiateWasm callback failed with error: ${s}`),b(s)}return $e(o,function(s){n(s.instance)}).catch(b),{}}();i._OrtInit=(n,o)=>(i._OrtInit=S.M)(n,o),i._OrtGetLastError=(n,o)=>(i._OrtGetLastError=S.N)(n,o),i._OrtCreateSessionOptions=(n,o,s,p,w,M,B,ne,me,ue)=>(i._OrtCreateSessionOptions=S.O)(n,o,s,p,w,M,B,ne,me,ue),i._OrtAppendExecutionProvider=(n,o)=>(i._OrtAppendExecutionProvider=S.P)(n,o),i._OrtAddFreeDimensionOverride=(n,o,s)=>(i._OrtAddFreeDimensionOverride=S.Q)(n,o,s),i._OrtAddSessionConfigEntry=(n,o,s)=>(i._OrtAddSessionConfigEntry=S.R)(n,o,s),i._OrtReleaseSessionOptions=n=>(i._OrtReleaseSessionOptions=S.S)(n),i._OrtCreateSession=(n,o,s)=>(i._OrtCreateSession=S.T)(n,o,s),i._OrtReleaseSession=n=>(i._OrtReleaseSession=S.U)(n),i._OrtGetInputOutputCount=(n,o,s)=>(i._OrtGetInputOutputCount=S.V)(n,o,s),i._OrtGetInputName=(n,o)=>(i._OrtGetInputName=S.W)(n,o),i._OrtGetOutputName=(n,o)=>(i._OrtGetOutputName=S.X)(n,o),i._OrtFree=n=>(i._OrtFree=S.Y)(n),i._OrtCreateTensor=(n,o,s,p,w,M)=>(i._OrtCreateTensor=S.Z)(n,o,s,p,w,M),i._OrtGetTensorData=(n,o,s,p,w)=>(i._OrtGetTensorData=S._)(n,o,s,p,w),i._OrtReleaseTensor=n=>(i._OrtReleaseTensor=S.$)(n),i._OrtCreateRunOptions=(n,o,s,p)=>(i._OrtCreateRunOptions=S.aa)(n,o,s,p),i._OrtAddRunConfigEntry=(n,o,s)=>(i._OrtAddRunConfigEntry=S.ba)(n,o,s),i._OrtReleaseRunOptions=n=>(i._OrtReleaseRunOptions=S.ca)(n),i._OrtCreateBinding=n=>(i._OrtCreateBinding=S.da)(n),i._OrtBindInput=(n,o,s)=>(i._OrtBindInput=S.ea)(n,o,s),i._OrtBindOutput=(n,o,s,p)=>(i._OrtBindOutput=S.fa)(n,o,s,p),i._OrtClearBoundOutputs=n=>(i._OrtClearBoundOutputs=S.ga)(n),i._OrtReleaseBinding=n=>(i._OrtReleaseBinding=S.ha)(n),i._OrtRunWithBinding=(n,o,s,p,w)=>(i._OrtRunWithBinding=S.ia)(n,o,s,p,w),i._OrtRun=(n,o,s,p,w,M,B,ne)=>(i._OrtRun=S.ja)(n,o,s,p,w,M,B,ne),i._OrtEndProfiling=n=>(i._OrtEndProfiling=S.ka)(n),i._OrtTrainingLoadCheckpoint=(n,o)=>(i._OrtTrainingLoadCheckpoint=S.la)(n,o),i._OrtTrainingReleaseCheckpoint=n=>(i._OrtTrainingReleaseCheckpoint=S.ma)(n),i._OrtTrainingCreateSession=(n,o,s,p,w,M,B,ne)=>(i._OrtTrainingCreateSession=S.na)(n,o,s,p,w,M,B,ne),i._OrtTrainingLazyResetGrad=n=>(i._OrtTrainingLazyResetGrad=S.oa)(n),i._OrtTrainingRunTrainStep=(n,o,s,p,w,M)=>(i._OrtTrainingRunTrainStep=S.pa)(n,o,s,p,w,M),i._OrtTrainingOptimizerStep=(n,o)=>(i._OrtTrainingOptimizerStep=S.qa)(n,o),i._OrtTrainingEvalStep=(n,o,s,p,w,M)=>(i._OrtTrainingEvalStep=S.ra)(n,o,s,p,w,M),i._OrtTrainingGetParametersSize=(n,o,s)=>(i._OrtTrainingGetParametersSize=S.sa)(n,o,s),i._OrtTrainingCopyParametersToBuffer=(n,o,s,p)=>(i._OrtTrainingCopyParametersToBuffer=S.ta)(n,o,s,p),i._OrtTrainingCopyParametersFromBuffer=(n,o,s,p)=>(i._OrtTrainingCopyParametersFromBuffer=S.ua)(n,o,s,p),i._OrtTrainingGetModelInputOutputCount=(n,o,s,p)=>(i._OrtTrainingGetModelInputOutputCount=S.va)(n,o,s,p),i._OrtTrainingGetModelInputOutputName=(n,o,s,p)=>(i._OrtTrainingGetModelInputOutputName=S.wa)(n,o,s,p),i._OrtTrainingReleaseSession=n=>(i._OrtTrainingReleaseSession=S.xa)(n);var rt=()=>(rt=S.ya)(),nt=i._malloc=n=>(nt=i._malloc=S.za)(n);i._free=n=>(i._free=S.Aa)(n);var We=n=>(We=S.Ca)(n),yt=()=>(yt=S.Da)(),$=n=>($=S.Ea)(n),ot=n=>(ot=S.Fa)(n);function at(){var n=S;n=Object.assign({},n);var o=p=>()=>p()>>>0,s=p=>w=>p(w)>>>0;return n.ya=o(n.ya),n.za=s(n.za),n.Da=o(n.Da),n.Fa=s(n.Fa),n}i.stackAlloc=ot,i.stackSave=yt,i.stackRestore=$,i.UTF8ToString=Fe,i.stringToUTF8=(n,o,s)=>Ge(n,le,o,s),i.lengthBytesUTF8=be;var Je;pe=function n(){Je||it(),Je||(pe=n)};function it(){if(!(0<q)){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;){var n=i.preRun.shift();Be.unshift(n)}for(;0<Be.length;)Be.shift()(i);if(!(0<q||Je||(Je=!0,i.calledRun=!0,K))){for(;0<Re.length;)Re.shift()(i);for(y(i);0<Ne.length;)Ne.shift()(i)}}}return it(),h.ready}})();typeof jr=="object"&&typeof qt=="object"?qt.exports=Gr:typeof define=="function"&&define.amd&&define([],()=>Gr)});var Yr=lt(()=>{});var qr=lt(()=>{});var Vr={};$t(Vr,{cpus:()=>qn});var qn,Jr=Nt(()=>{qn=void 0});var Zr=lt((Kr,Vt)=>{"use strict";var Xr=(()=>{var f=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(f=f||__filename),function(h={}){function i(){return C.buffer!=te.buffer&&ce(),te}function y(){return C.buffer!=te.buffer&&ce(),Z}function b(){return C.buffer!=te.buffer&&ce(),de}function _(){return C.buffer!=te.buffer&&ce(),ze}function c(){return C.buffer!=te.buffer&&ce(),Ce}function O(){return C.buffer!=te.buffer&&ce(),Le}function D(){return C.buffer!=te.buffer&&ce(),Ee}var u=h,x,k;u.ready=new Promise((e,t)=>{x=e,k=t});var R=Object.assign({},u),L="./this.program",N=(e,t)=>{throw t},G=typeof window=="object",j=typeof importScripts=="function",I=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",E=u.ENVIRONMENT_IS_PTHREAD||!1,K="";function ge(e){return u.locateFile?u.locateFile(e,K):K+e}var le,A,Y;if(I){var ae=(jt(),ct(Gt)),Ie=(Yt(),ct(zt));K=j?Ie.dirname(K)+"/":__dirname+"/",le=(t,r)=>(t=ke(t)?new URL(t):Ie.normalize(t),ae.readFileSync(t,r?void 0:"utf8")),Y=t=>(t=le(t,!0),t.buffer||(t=new Uint8Array(t)),t),A=(t,r,a,l=!0)=>{t=ke(t)?new URL(t):Ie.normalize(t),ae.readFile(t,l?void 0:"utf8",(d,v)=>{d?a(d):r(l?v.buffer:v)})},!u.thisProgram&&1<process.argv.length&&(L=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),N=(t,r)=>{throw process.exitCode=t,r},u.inspect=()=>"[Emscripten Module object]";let e;try{e=Yr()}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}global.Worker=e.Worker}else(G||j)&&(j?K=self.location.href:typeof document<"u"&&document.currentScript&&(K=document.currentScript.src),typeof f<"u"&&f&&(K=f),K.indexOf("blob:")!==0?K=K.substr(0,K.replace(/[?#].*/,"").lastIndexOf("/")+1):K="",I||(le=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},j&&(Y=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),A=(e,t,r)=>{var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=()=>{a.status==200||a.status==0&&a.response?t(a.response):r()},a.onerror=r,a.send(null)}));I&&typeof performance>"u"&&(global.performance=qr().performance);var Be=console.log.bind(console),Re=console.error.bind(console);I&&(Be=(...e)=>ae.writeSync(1,e.join(" ")+`\n`),Re=(...e)=>ae.writeSync(2,e.join(" ")+`\n`));var Ne=Be,q=Re;Object.assign(u,R),R=null,typeof WebAssembly!="object"&&Ye("no native wasm support detected");var C,pe,Oe=!1,ie,te,Z,de,ze,Ce,Le,$e,se,Te,Ee;function ce(){var e=C.buffer;u.HEAP8=te=new Int8Array(e),u.HEAP16=de=new Int16Array(e),u.HEAPU8=Z=new Uint8Array(e),u.HEAPU16=ze=new Uint16Array(e),u.HEAP32=Ce=new Int32Array(e),u.HEAPU32=Le=new Uint32Array(e),u.HEAPF32=$e=new Float32Array(e),u.HEAPF64=Ee=new Float64Array(e),u.HEAP64=se=new BigInt64Array(e),u.HEAPU64=Te=new BigUint64Array(e)}var oe=16777216;if(E)C=u.wasmMemory;else if(u.wasmMemory)C=u.wasmMemory;else if(C=new WebAssembly.Memory({initial:oe/65536,maximum:65536,shared:!0}),!(C.buffer instanceof SharedArrayBuffer))throw q("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),I&&q("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");ce(),oe=C.buffer.byteLength;var re=[],Se=[],Fe=[],be=0,Ge=null,ve=null;function Ke(){if(be--,be==0&&(Ge!==null&&(clearInterval(Ge),Ge=null),ve)){var e=ve;ve=null,e()}}function Ye(e){throw e="Aborted("+e+")",q(e),Oe=!0,ie=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),k(e),e}var Ze=e=>e.startsWith("data:application/octet-stream;base64,"),ke=e=>e.startsWith("file://"),Pe;Pe="ort-wasm-threaded.wasm",Ze(Pe)||(Pe=ge(Pe));function Qe(e){if(Y)return Y(e);throw"both async and sync fetching of the wasm failed"}function et(e){if(G||j){if(typeof fetch=="function"&&!ke(e))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()}).catch(()=>Qe(e));if(A)return new Promise((t,r)=>{A(e,a=>t(new Uint8Array(a)),r)})}return Promise.resolve().then(()=>Qe(e))}function mt(e,t,r){return et(e).then(a=>WebAssembly.instantiate(a,t)).then(a=>a).then(r,a=>{q(`failed to asynchronously prepare wasm: ${a}`),Ye(a)})}function gt(e,t){var r=Pe;return typeof WebAssembly.instantiateStreaming!="function"||Ze(r)||ke(r)||I||typeof fetch!="function"?mt(r,e,t):fetch(r,{credentials:"same-origin"}).then(a=>WebAssembly.instantiateStreaming(a,e).then(t,function(l){return q(`wasm streaming compile failed: ${l}`),q("falling back to ArrayBuffer instantiation"),mt(r,e,t)}))}var tt={891868:(e,t,r,a)=>{if(typeof u>"u"||!u.Hb)return 1;if(e=We(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=u.Hb.get(e),!e)return 2;if(t>>>=0,r>>>=0,a>>>=0,t+r>e.byteLength)return 3;try{return y().set(e.subarray(t,t+r),a>>>0),0}catch{return 4}}};function qe(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var Ve=e=>{e.terminate(),e.onmessage=()=>{}},ht=e=>{o.ob.length==0&&(it(),o.Bb(o.ob[0]));var t=o.ob.pop();if(!t)return 6;o.pb.push(t),o.kb[e.nb]=t,t.nb=e.nb;var r={cmd:"run",start_routine:e.Ob,arg:e.Ib,pthread_ptr:e.nb};return I&&t.unref(),t.postMessage(r,e.Ub),0},S=0,rt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,nt=(e,t,r)=>{t>>>=0;var a=t+r;for(r=t;e[r]&&!(r>=a);)++r;if(16<r-t&&e.buffer&&rt)return rt.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,r):e.subarray(t,r));for(a="";t<r;){var l=e[t++];if(l&128){var d=e[t++]&63;if((l&224)==192)a+=String.fromCharCode((l&31)<<6|d);else{var v=e[t++]&63;l=(l&240)==224?(l&15)<<12|d<<6|v:(l&7)<<18|d<<12|v<<6|e[t++]&63,65536>l?a+=String.fromCharCode(l):(l-=65536,a+=String.fromCharCode(55296|l>>10,56320|l&1023))}}else a+=String.fromCharCode(l)}return a},We=(e,t)=>(e>>>=0)?nt(y(),e,t):"",yt=e=>{var t=kt();return e=e(),Tt(t),e};function $(e,t){var r=arguments.length-2,a=arguments;return yt(()=>{for(var l=2*r,d=Wt(8*l),v=d>>>3,T=0;T<r;T++){var U=a[2+T];typeof U=="bigint"?(se[v+2*T]=1n,se[v+2*T+1]=U):(se[v+2*T]=0n,D()[v+2*T+1>>>0]=U)}return Lr(e,l,d,t)})}function ot(e){if(E)return $(0,1,e);ie=e,0<S||(o.Pb(),u.onExit?.(e),Oe=!0),N(e,new qe(e))}var at=e=>{if(ie=e,E)throw p(e),"unwind";ot(e)};function Je(){for(var e=u.numThreads;e--;)it();re.unshift(()=>{be++,n(()=>Ke())})}function it(){var e=ge("ort-wasm-threaded.worker.js");e=new Worker(e),o.ob.push(e)}function n(e){E?e():Promise.all(o.ob.map(o.Bb)).then(e)}var o={ob:[],pb:[],Gb:[],kb:{},wb(){E?(o.receiveObjectTransfer=o.Nb,o.threadInitTLS=o.Fb,o.setExitStatus=o.Eb):Je()},Eb:e=>ie=e,Xb:["$terminateWorker"],Pb:()=>{for(var e of o.pb)Ve(e);for(e of o.ob)Ve(e);o.ob=[],o.pb=[],o.kb=[]},Db:e=>{var t=e.nb;delete o.kb[t],o.ob.push(e),o.pb.splice(o.pb.indexOf(e),1),e.nb=0,Rt(t)},Nb(){},Fb(){o.Gb.forEach(e=>e())},Bb:e=>new Promise(t=>{e.onmessage=d=>{d=d.data;var v=d.cmd;if(d.targetThread&&d.targetThread!=Ot()){var T=o.kb[d.targetThread];T?T.postMessage(d,d.transferList):q(`Internal error! Worker sent a message "${v}" to target pthread ${d.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?bt():v==="spawnThread"?ht(d):v==="cleanupThread"?o.Db(o.kb[d.thread]):v==="killThread"?(d=d.thread,v=o.kb[d],delete o.kb[d],Ve(v),Rt(d),o.pb.splice(o.pb.indexOf(v),1),v.nb=0):v==="cancelThread"?o.kb[d.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,I&&!e.nb&&e.unref(),t(e)):v==="alert"?alert(`Thread ${d.threadId}: ${d.text}`):d.target==="setimmediate"?e.postMessage(d):v==="callHandler"?u[d.handler](...d.args):v&&q(`worker sent an unknown command ${v}`)},e.onerror=d=>{throw q(`worker sent an error! ${d.filename}:${d.lineno}: ${d.message}`),d},I&&(e.on("message",d=>e.onmessage({data:d})),e.on("error",d=>e.onerror(d)));var r=[],a=["onExit"],l;for(l of a)u.hasOwnProperty(l)&&r.push(l);e.postMessage({cmd:"load",handlers:r,urlOrBlob:u.mainScriptUrlOrBlob||f,wasmMemory:C,wasmModule:pe})})};u.PThread=o;var s=e=>{for(;0<e.length;)e.shift()(u)};u.establishStackSpace=()=>{var e=Ot(),t=O()[e+52>>>2>>>0];e=O()[e+56>>>2>>>0],Wr(t,t-e),Tt(t)};function p(e){if(E)return $(1,0,e);at(e)}var w=[],M;u.invokeEntryPoint=(e,t)=>{var r=w[e];r||(e>=w.length&&(w.length=e+1),w[e]=r=M.get(e)),e=r(t),0<S?o.Eb(e):Lt(e)};function B(e){this.tb=e-24,this.Mb=function(t){O()[this.tb+4>>>2>>>0]=t},this.yb=function(t){O()[this.tb+8>>>2>>>0]=t},this.wb=function(t,r){this.xb(),this.Mb(t),this.yb(r)},this.xb=function(){O()[this.tb+16>>>2>>>0]=0}}var ne=0,me=0;function ue(e,t,r,a){return E?$(2,1,e,t,r,a):fe(e,t,r,a)}function fe(e,t,r,a){if(e>>>=0,t>>>=0,r>>>=0,a>>>=0,typeof SharedArrayBuffer>"u")return q("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var l=[];return E&&l.length===0?ue(e,t,r,a):(e={Ob:r,nb:e,Ib:a,Ub:l},E?(e.Wb="spawnThread",postMessage(e,l),0):ht(e))}function st(e,t,r){return E?$(3,1,e,t,r):0}function ut(e,t){if(E)return $(4,1,e,t)}var m=e=>{for(var t=0,r=0;r<e.length;++r){var a=e.charCodeAt(r);127>=a?t++:2047>=a?t+=2:55296<=a&&57343>=a?(t+=4,++r):t+=3}return t},H=(e,t,r,a)=>{if(r>>>=0,!(0<a))return 0;var l=r;a=r+a-1;for(var d=0;d<e.length;++d){var v=e.charCodeAt(d);if(55296<=v&&57343>=v){var T=e.charCodeAt(++d);v=65536+((v&1023)<<10)|T&1023}if(127>=v){if(r>=a)break;t[r++>>>0]=v}else{if(2047>=v){if(r+1>=a)break;t[r++>>>0]=192|v>>6}else{if(65535>=v){if(r+2>=a)break;t[r++>>>0]=224|v>>12}else{if(r+3>=a)break;t[r++>>>0]=240|v>>18,t[r++>>>0]=128|v>>12&63}t[r++>>>0]=128|v>>6&63}t[r++>>>0]=128|v&63}}return t[r>>>0]=0,r-l},z=(e,t,r)=>H(e,y(),t,r);function Ae(e,t){if(E)return $(5,1,e,t)}function ft(e,t,r){if(E)return $(6,1,e,t,r)}function er(e,t,r){return E?$(7,1,e,t,r):0}function tr(e,t){if(E)return $(8,1,e,t)}function rr(e,t,r){if(E)return $(9,1,e,t,r)}function nr(e,t,r,a){if(E)return $(10,1,e,t,r,a)}function or(e,t,r,a){if(E)return $(11,1,e,t,r,a)}function ar(e,t,r,a){if(E)return $(12,1,e,t,r,a)}function ir(e){if(E)return $(13,1,e)}function sr(e,t){if(E)return $(14,1,e,t)}function ur(e,t,r){if(E)return $(15,1,e,t,r)}var fr=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},lr,_e=e=>{for(var t="";y()[e>>>0];)t+=lr[y()[e++>>>0]];return t},At={},Mt={},wn={},He;function On(e,t,r={}){var a=t.name;if(!e)throw new He(`type "${a}" must have a positive integer typeid pointer`);if(Mt.hasOwnProperty(e)){if(r.Kb)return;throw new He(`Cannot register type \'${a}\' twice`)}Mt[e]=t,delete wn[e],At.hasOwnProperty(e)&&(t=At[e],delete At[e],t.forEach(l=>l()))}function De(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");On(e,t,r)}var cr=(e,t,r)=>{switch(t){case 1:return r?a=>i()[a>>>0>>>0]:a=>y()[a>>>0>>>0];case 2:return r?a=>b()[a>>>1>>>0]:a=>_()[a>>>1>>>0];case 4:return r?a=>c()[a>>>2>>>0]:a=>O()[a>>>2>>>0];case 8:return r?a=>se[a>>>3]:a=>Te[a>>>3];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}};function dr(){this.mb=[void 0],this.Ab=[]}var we=new dr;function Ct(e){e>>>=0,e>=we.tb&&--we.get(e).Cb===0&&we.yb(e)}var he=e=>{if(!e)throw new He("Cannot use deleted val. handle = "+e);return we.get(e).value},Me=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return we.xb({Cb:1,value:e})}};function pr(e){return this.fromWireType(c()[e>>>2>>>0])}var _n=(e,t)=>{switch(t){case 4:return function(r){var a=this.fromWireType;return C.buffer!=te.buffer&&ce(),a.call(this,$e[r>>>2>>>0])};case 8:return function(r){return this.fromWireType(D()[r>>>3>>>0])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}};function Tn(e){return this.fromWireType(O()[e>>>2>>>0])}var mr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,En=(e,t)=>{for(var r=e>>1,a=r+t/2;!(r>=a)&&_()[r>>>0];)++r;if(r<<=1,32<r-e&&mr)return mr.decode(y().slice(e,r));for(r="",a=0;!(a>=t/2);++a){var l=b()[e+2*a>>>1>>>0];if(l==0)break;r+=String.fromCharCode(l)}return r},Sn=(e,t,r)=>{if(r??=2147483647,2>r)return 0;r-=2;var a=t;r=r<2*e.length?r/2:e.length;for(var l=0;l<r;++l){var d=e.charCodeAt(l);b()[t>>>1>>>0]=d,t+=2}return b()[t>>>1>>>0]=0,t-a},An=e=>2*e.length,Mn=(e,t)=>{for(var r=0,a="";!(r>=t/4);){var l=c()[e+4*r>>>2>>>0];if(l==0)break;++r,65536<=l?(l-=65536,a+=String.fromCharCode(55296|l>>10,56320|l&1023)):a+=String.fromCharCode(l)}return a},Cn=(e,t,r)=>{if(t>>>=0,r??=2147483647,4>r)return 0;var a=t;r=a+r-4;for(var l=0;l<e.length;++l){var d=e.charCodeAt(l);if(55296<=d&&57343>=d){var v=e.charCodeAt(++l);d=65536+((d&1023)<<10)|v&1023}if(c()[t>>>2>>>0]=d,t+=4,t+4>r)break}return c()[t>>>2>>>0]=0,t-a},Fn=e=>{for(var t=0,r=0;r<e.length;++r){var a=e.charCodeAt(r);55296<=a&&57343>=a&&++r,t+=4}return t};function Ft(e){e>>>=0,typeof Atomics.Vb=="function"&&(Atomics.Vb(c(),e>>>2,e).value.then(bt),e+=128,Atomics.store(c(),e>>>2,1))}u.__emscripten_thread_mailbox_await=Ft;var bt=()=>{var e=Ot();if(e&&(Ft(e),e=kr,!Oe))try{if(e(),!(0<S))try{E?Lt(ie):at(ie)}catch(t){t instanceof qe||t=="unwind"||N(1,t)}}catch(t){t instanceof qe||t=="unwind"||N(1,t)}};u.checkMailbox=bt;var Pt=[],Dt=(e,t)=>{var r=Mt[e];if(r===void 0)throw e=Br(e),r=_e(e),Ue(e),new He(t+" has unknown type "+r);return r},gr=(e,t,r)=>{var a=[];return e=e.toWireType(a,r),a.length&&(O()[t>>>2>>>0]=Me(a)),e},vt=[],Pn={},Ut=e=>{var t=Pn[e];return t===void 0?_e(e):t},hr=()=>typeof globalThis=="object"?globalThis:Function("return this")(),Dn=e=>{var t=vt.length;return vt.push(e),t},Un=(e,t)=>{for(var r=Array(e),a=0;a<e;++a)r[a]=Dt(O()[t+4*a>>>2>>>0],"parameter "+a);return r},yr=(e,t)=>Object.defineProperty(t,"name",{value:e});function xn(e){var t=Function;if(!(t instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof t} which is not a function`);var r=yr(t.name||"unknownFunctionName",function(){});return r.prototype=t.prototype,r=new r,e=t.apply(r,e),e instanceof Object?e:r}var Xe=e=>e%4===0&&(e%100!==0||e%400===0),br=[0,31,60,91,121,152,182,213,244,274,305,335],vr=[0,31,59,90,120,151,181,212,243,273,304,334];function wr(e,t,r,a,l,d,v){return E?$(16,1,e,t,r,a,l,d,v):-52}function Or(e,t,r,a,l,d){if(E)return $(17,1,e,t,r,a,l,d)}var _r=e=>{var t=m(e)+1,r=_t(t);return r&&z(e,r,t),r},xt=[],It={},Tr=()=>{if(!Bt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:L||"./this.program"},t;for(t in It)It[t]===void 0?delete e[t]:e[t]=It[t];var r=[];for(t in e)r.push(`${t}=${e[t]}`);Bt=r}return Bt},Bt;function Er(e,t){if(E)return $(18,1,e,t);e>>>=0,t>>>=0;var r=0;return Tr().forEach((a,l)=>{var d=t+r;for(l=O()[e+4*l>>>2>>>0]=d,d=0;d<a.length;++d)i()[l++>>>0>>>0]=a.charCodeAt(d);i()[l>>>0>>>0]=0,r+=a.length+1}),0}function Sr(e,t){if(E)return $(19,1,e,t);e>>>=0,t>>>=0;var r=Tr();O()[e>>>2>>>0]=r.length;var a=0;return r.forEach(l=>a+=l.length+1),O()[t>>>2>>>0]=a,0}function Ar(e){return E?$(20,1,e):52}function Mr(e,t,r,a){return E?$(21,1,e,t,r,a):52}function Cr(e,t,r,a){return E?$(22,1,e,t,r,a):70}var In=[null,[],[]];function Fr(e,t,r,a){if(E)return $(23,1,e,t,r,a);t>>>=0,r>>>=0,a>>>=0;for(var l=0,d=0;d<r;d++){var v=O()[t>>>2>>>0],T=O()[t+4>>>2>>>0];t+=8;for(var U=0;U<T;U++){var F=y()[v+U>>>0],V=In[e];F===0||F===10?((e===1?Ne:q)(nt(V,0)),V.length=0):V.push(F)}l+=T}return O()[a>>>2>>>0]=l,0}var Pr=[31,29,31,30,31,30,31,31,30,31,30,31],Dr=[31,28,31,30,31,30,31,31,30,31,30,31];function Bn(e){var t=Array(m(e)+1);return H(e,t,0,t.length),t}var Rn=(e,t)=>{i().set(e,t>>>0)};function Ur(e,t,r,a){function l(g,W,J){for(g=typeof g=="number"?g.toString():g||"";g.length<W;)g=J[0]+g;return g}function d(g,W){return l(g,W,"0")}function v(g,W){function J(Nr){return 0>Nr?-1:0<Nr?1:0}var je;return(je=J(g.getFullYear()-W.getFullYear()))===0&&(je=J(g.getMonth()-W.getMonth()))===0&&(je=J(g.getDate()-W.getDate())),je}function T(g){switch(g.getDay()){case 0:return new Date(g.getFullYear()-1,11,29);case 1:return g;case 2:return new Date(g.getFullYear(),0,3);case 3:return new Date(g.getFullYear(),0,2);case 4:return new Date(g.getFullYear(),0,1);case 5:return new Date(g.getFullYear()-1,11,31);case 6:return new Date(g.getFullYear()-1,11,30)}}function U(g){var W=g.qb;for(g=new Date(new Date(g.rb+1900,0,1).getTime());0<W;){var J=g.getMonth(),je=(Xe(g.getFullYear())?Pr:Dr)[J];if(W>je-g.getDate())W-=je-g.getDate()+1,g.setDate(1),11>J?g.setMonth(J+1):(g.setMonth(0),g.setFullYear(g.getFullYear()+1));else{g.setDate(g.getDate()+W);break}}return J=new Date(g.getFullYear()+1,0,4),W=T(new Date(g.getFullYear(),0,4)),J=T(J),0>=v(W,g)?0>=v(J,g)?g.getFullYear()+1:g.getFullYear():g.getFullYear()-1}e>>>=0,t>>>=0,r>>>=0,a>>>=0;var F=O()[a+40>>>2>>>0];a={Sb:c()[a>>>2>>>0],Rb:c()[a+4>>>2>>>0],ub:c()[a+8>>>2>>>0],zb:c()[a+12>>>2>>>0],vb:c()[a+16>>>2>>>0],rb:c()[a+20>>>2>>>0],lb:c()[a+24>>>2>>>0],qb:c()[a+28>>>2>>>0],Yb:c()[a+32>>>2>>>0],Qb:c()[a+36>>>2>>>0],Tb:F?We(F):""},r=We(r),F={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var V in F)r=r.replace(new RegExp(V,"g"),F[V]);var ye="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),xe="January February March April May June July August September October November December".split(" ");F={"%a":g=>ye[g.lb].substring(0,3),"%A":g=>ye[g.lb],"%b":g=>xe[g.vb].substring(0,3),"%B":g=>xe[g.vb],"%C":g=>d((g.rb+1900)/100|0,2),"%d":g=>d(g.zb,2),"%e":g=>l(g.zb,2," "),"%g":g=>U(g).toString().substring(2),"%G":g=>U(g),"%H":g=>d(g.ub,2),"%I":g=>(g=g.ub,g==0?g=12:12<g&&(g-=12),d(g,2)),"%j":g=>{for(var W=0,J=0;J<=g.vb-1;W+=(Xe(g.rb+1900)?Pr:Dr)[J++]);return d(g.zb+W,3)},"%m":g=>d(g.vb+1,2),"%M":g=>d(g.Rb,2),"%n":()=>`\n`,"%p":g=>0<=g.ub&&12>g.ub?"AM":"PM","%S":g=>d(g.Sb,2),"%t":()=>"	","%u":g=>g.lb||7,"%U":g=>d(Math.floor((g.qb+7-g.lb)/7),2),"%V":g=>{var W=Math.floor((g.qb+7-(g.lb+6)%7)/7);if(2>=(g.lb+371-g.qb-2)%7&&W++,W)W==53&&(J=(g.lb+371-g.qb)%7,J==4||J==3&&Xe(g.rb)||(W=1));else{W=52;var J=(g.lb+7-g.qb-1)%7;(J==4||J==5&&Xe(g.rb%400-1))&&W++}return d(W,2)},"%w":g=>g.lb,"%W":g=>d(Math.floor((g.qb+7-(g.lb+6)%7)/7),2),"%y":g=>(g.rb+1900).toString().substring(2),"%Y":g=>g.rb+1900,"%z":g=>{g=g.Qb;var W=0<=g;return g=Math.abs(g)/60,(W?"+":"-")+("0000"+(g/60*100+g%60)).slice(-4)},"%Z":g=>g.Tb,"%%":()=>"%"},r=r.replace(/%%/g,"\\0\\0");for(V in F)r.includes(V)&&(r=r.replace(new RegExp(V,"g"),F[V](a)));return r=r.replace(/\\0\\0/g,"%"),V=Bn(r),V.length>t?0:(Rn(V,e),V.length-1)}o.wb();for(var xr=Array(256),wt=0;256>wt;++wt)xr[wt]=String.fromCharCode(wt);lr=xr,He=u.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},u.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Object.assign(dr.prototype,{get(e){return this.mb[e]},has(e){return this.mb[e]!==void 0},xb(e){var t=this.Ab.pop()||this.mb.length;return this.mb[t]=e,t},yb(e){this.mb[e]=void 0,this.Ab.push(e)}}),we.mb.push({value:void 0},{value:null},{value:!0},{value:!1}),we.tb=we.mb.length,u.count_emval_handles=()=>{for(var e=0,t=we.tb;t<we.mb.length;++t)we.mb[t]!==void 0&&++e;return e};var Ln=[ot,p,ue,st,ut,Ae,ft,er,tr,rr,nr,or,ar,ir,sr,ur,wr,Or,Er,Sr,Ar,Mr,Cr,Fr],kn={b:function(e,t,r){throw e>>>=0,new B(e).wb(t>>>0,r>>>0),ne=e,me++,ne},da:function(e){Rr(e>>>0,!j,1,!G,131072,!1),o.Fb()},D:function(e){e>>>=0,E?postMessage({cmd:"cleanupThread",thread:e}):o.Db(o.kb[e])},V:fe,x:st,ka:ut,R:Ae,T:ft,K:er,ia:tr,aa:rr,ga:nr,F:or,S:ar,P:ir,ja:sr,Q:ur,I:function(e,t,r,a,l){e>>>=0,t>>>=0,r>>>=0,t=_e(t);var d=t.indexOf("u")!=-1;d&&(l=(1n<<64n)-1n),De(e,{name:t,fromWireType:v=>v,toWireType:function(v,T){if(typeof T!="bigint"&&typeof T!="number")throw new TypeError(`Cannot convert "${fr(T)}" to ${this.name}`);if(T<a||T>l)throw new TypeError(`Passing a number "${fr(T)}" from JS side to C/C++ side to an argument of type "${t}", which is outside the valid range [${a}, ${l}]!`);return T},argPackAdvance:8,readValueFromPointer:cr(t,r,!d),sb:null})},pa:function(e,t,r,a){e>>>=0,t=_e(t>>>0),De(e,{name:t,fromWireType:function(l){return!!l},toWireType:function(l,d){return d?r:a},argPackAdvance:8,readValueFromPointer:function(l){return this.fromWireType(y()[l>>>0])},sb:null})},oa:function(e,t){e>>>=0,t=_e(t>>>0),De(e,{name:t,fromWireType:r=>{var a=he(r);return Ct(r),a},toWireType:(r,a)=>Me(a),argPackAdvance:8,readValueFromPointer:pr,sb:null})},H:function(e,t,r){e>>>=0,r>>>=0,t=_e(t>>>0),De(e,{name:t,fromWireType:a=>a,toWireType:(a,l)=>l,argPackAdvance:8,readValueFromPointer:_n(t,r),sb:null})},u:function(e,t,r,a,l){if(e>>>=0,r>>>=0,t=_e(t>>>0),l===-1&&(l=4294967295),l=T=>T,a===0){var d=32-8*r;l=T=>T<<d>>>d}var v=t.includes("unsigned")?function(T,U){return U>>>0}:function(T,U){return U};De(e,{name:t,fromWireType:l,toWireType:v,argPackAdvance:8,readValueFromPointer:cr(t,r,a!==0),sb:null})},n:function(e,t,r){function a(d){var v=O()[d>>>2>>>0];return d=O()[d+4>>>2>>>0],new l(i().buffer,d,v)}e>>>=0;var l=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][t];r=_e(r>>>0),De(e,{name:r,fromWireType:a,argPackAdvance:8,readValueFromPointer:a},{Kb:!0})},J:function(e,t){e>>>=0,t=_e(t>>>0);var r=t==="std::string";De(e,{name:t,fromWireType:function(a){var l=O()[a>>>2>>>0],d=a+4;if(r)for(var v=d,T=0;T<=l;++T){var U=d+T;if(T==l||y()[U>>>0]==0){if(v=We(v,U-v),F===void 0)var F=v;else F+=String.fromCharCode(0),F+=v;v=U+1}}else{for(F=Array(l),T=0;T<l;++T)F[T]=String.fromCharCode(y()[d+T>>>0]);F=F.join("")}return Ue(a),F},toWireType:function(a,l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));var d=typeof l=="string";if(!(d||l instanceof Uint8Array||l instanceof Uint8ClampedArray||l instanceof Int8Array))throw new He("Cannot pass non-string to std::string");var v=r&&d?m(l):l.length,T=_t(4+v+1),U=T+4;if(O()[T>>>2>>>0]=v,r&&d)z(l,U,v+1);else if(d)for(d=0;d<v;++d){var F=l.charCodeAt(d);if(255<F)throw Ue(U),new He("String has UTF-16 code units that do not fit in 8 bits");y()[U+d>>>0]=F}else for(d=0;d<v;++d)y()[U+d>>>0]=l[d];return a!==null&&a.push(Ue,T),T},argPackAdvance:8,readValueFromPointer:Tn,sb(a){Ue(a)}})},z:function(e,t,r){if(e>>>=0,t>>>=0,r>>>=0,r=_e(r),t===2)var a=En,l=Sn,d=An,v=()=>_(),T=1;else t===4&&(a=Mn,l=Cn,d=Fn,v=()=>O(),T=2);De(e,{name:r,fromWireType:U=>{for(var F=O()[U>>>2>>>0],V=v(),ye,xe=U+4,g=0;g<=F;++g){var W=U+4+g*t;(g==F||V[W>>>T]==0)&&(xe=a(xe,W-xe),ye===void 0?ye=xe:(ye+=String.fromCharCode(0),ye+=xe),xe=W+t)}return Ue(U),ye},toWireType:(U,F)=>{if(typeof F!="string")throw new He(`Cannot pass non-string to C++ string type ${r}`);var V=d(F),ye=_t(4+V+t);return O()[ye>>>2]=V>>T,l(F,ye+4,V+t),U!==null&&U.push(Ue,ye),ye},argPackAdvance:8,readValueFromPointer:pr,sb(U){Ue(U)}})},qa:function(e,t){e>>>=0,t=_e(t>>>0),De(e,{Lb:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},na:()=>1,N:function(e,t){e>>>=0,e==t>>>0?setTimeout(()=>bt()):E?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=o.kb[e])&&e.postMessage({cmd:"checkMailbox"})},W:function(e,t,r,a){t>>>=0,r/=2,Pt.length=r,a=a>>>0>>>3;for(var l=0;l<r;l++)Pt[l]=se[a+2*l]?se[a+2*l+1]:D()[a+2*l+1>>>0];return e=0>e?tt[-e-1]:Ln[e],o.Jb=t,t=e.apply(null,Pt),o.Jb=0,t},ca:Ft,ma:function(e){I&&o.kb[e>>>0].ref()},s:function(e,t,r){return t>>>=0,r>>>=0,e=he(e>>>0),t=Dt(t,"emval::as"),gr(t,r,e)},o:function(e,t,r,a){return r>>>=0,a>>>=0,e=vt[e>>>0],t=he(t>>>0),e(null,t,r,a)},j:function(e,t,r,a,l){return r>>>=0,a>>>=0,l>>>=0,e=vt[e>>>0],t=he(t>>>0),r=Ut(r),e(t,t[r],a,l)},c:Ct,A:function(e,t){return t>>>=0,e=he(e>>>0),t=he(t),e==t},m:function(e){return e>>>=0,e===0?Me(hr()):(e=Ut(e),Me(hr()[e]))},i:function(e,t,r){t=Un(e,t>>>0);var a=t.shift();e--;var l=`return function (obj, func, destructorsRef, args) {\n`,d=0,v=[];r===0&&v.push("obj");for(var T=["retType"],U=[a],F=0;F<e;++F)v.push("arg"+F),T.push("argType"+F),U.push(t[F]),l+=`  var arg${F} = argType${F}.readValueFromPointer(args${d?"+"+d:""});\n`,d+=t[F].argPackAdvance;for(l+=`  var rv = ${r===1?"new func":"func.call"}(${v.join(", ")});\n`,F=0;F<e;++F)t[F].deleteObject&&(l+=`  argType${F}.deleteObject(arg${F});\n`);return a.Lb||(T.push("emval_returnValue"),U.push(gr),l+=`  return emval_returnValue(retType, destructorsRef, rv);\n`),T.push(l+`};\n`),e=xn(T).apply(null,U),r=`methodCaller<(${t.map(V=>V.name).join(", ")}) => ${a.name}>`,Dn(yr(r,e))},r:function(e,t){return t>>>=0,e=he(e>>>0),t=he(t),Me(e[t])},d:function(e){e>>>=0,4<e&&(we.get(e).Cb+=1)},v:function(){return Me([])},l:function(e){e=he(e>>>0);for(var t=Array(e.length),r=0;r<e.length;r++)t[r]=e[r];return Me(t)},f:function(e){return Me(Ut(e>>>0))},k:function(){return Me({})},h:function(e){e>>>=0;for(var t=he(e);t.length;){var r=t.pop();t.pop()(r)}Ct(e)},g:function(e,t,r){t>>>=0,r>>>=0,e=he(e>>>0),t=he(t),r=he(r),e[t]=r},e:function(e,t){return t>>>=0,e=Dt(e>>>0,"_emval_take_value"),e=e.readValueFromPointer(t),Me(e)},Z:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),t>>>=0,e=new Date(1e3*e),c()[t>>>2>>>0]=e.getUTCSeconds(),c()[t+4>>>2>>>0]=e.getUTCMinutes(),c()[t+8>>>2>>>0]=e.getUTCHours(),c()[t+12>>>2>>>0]=e.getUTCDate(),c()[t+16>>>2>>>0]=e.getUTCMonth(),c()[t+20>>>2>>>0]=e.getUTCFullYear()-1900,c()[t+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,c()[t+28>>>2>>>0]=e},_:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),t>>>=0,e=new Date(1e3*e),c()[t>>>2>>>0]=e.getSeconds(),c()[t+4>>>2>>>0]=e.getMinutes(),c()[t+8>>>2>>>0]=e.getHours(),c()[t+12>>>2>>>0]=e.getDate(),c()[t+16>>>2>>>0]=e.getMonth(),c()[t+20>>>2>>>0]=e.getFullYear()-1900,c()[t+24>>>2>>>0]=e.getDay();var r=(Xe(e.getFullYear())?br:vr)[e.getMonth()]+e.getDate()-1|0;c()[t+28>>>2>>>0]=r,c()[t+36>>>2>>>0]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var a=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(r!=a&&e.getTimezoneOffset()==Math.min(a,r))|0,c()[t+32>>>2>>>0]=e},$:function(e){e>>>=0;var t=new Date(c()[e+20>>>2>>>0]+1900,c()[e+16>>>2>>>0],c()[e+12>>>2>>>0],c()[e+8>>>2>>>0],c()[e+4>>>2>>>0],c()[e>>>2>>>0],0),r=c()[e+32>>>2>>>0],a=t.getTimezoneOffset(),l=new Date(t.getFullYear(),6,1).getTimezoneOffset(),d=new Date(t.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(d,l);return 0>r?c()[e+32>>>2>>>0]=+(l!=d&&v==a):0<r!=(v==a)&&(l=Math.max(d,l),t.setTime(t.getTime()+6e4*((0<r?v:l)-a))),c()[e+24>>>2>>>0]=t.getDay(),r=(Xe(t.getFullYear())?br:vr)[t.getMonth()]+t.getDate()-1|0,c()[e+28>>>2>>>0]=r,c()[e>>>2>>>0]=t.getSeconds(),c()[e+4>>>2>>>0]=t.getMinutes(),c()[e+8>>>2>>>0]=t.getHours(),c()[e+12>>>2>>>0]=t.getDate(),c()[e+16>>>2>>>0]=t.getMonth(),c()[e+20>>>2>>>0]=t.getYear(),e=t.getTime(),isNaN(e)?(c()[Ir()>>>2>>>0]=61,e=-1):e/=1e3,BigInt(e)},X:wr,Y:Or,M:function(e,t,r){function a(F){return(F=F.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?F[1]:"GMT"}e>>>=0,t>>>=0,r>>>=0;var l=new Date().getFullYear(),d=new Date(l,0,1),v=new Date(l,6,1);l=d.getTimezoneOffset();var T=v.getTimezoneOffset(),U=Math.max(l,T);O()[e>>>2>>>0]=60*U,c()[t>>>2>>>0]=+(l!=T),e=a(d),t=a(v),e=_r(e),t=_r(t),T<l?(O()[r>>>2>>>0]=e,O()[r+4>>>2>>>0]=t):(O()[r>>>2>>>0]=t,O()[r+4>>>2>>>0]=e)},p:()=>{Ye("")},ra:function(e,t,r){e>>>=0,t>>>=0,r>>>=0,xt.length=0;for(var a;a=y()[t++>>>0];){var l=a!=105;l&=a!=112,r+=l&&r%8?4:0,xt.push(a==112?O()[r>>>2>>>0]:a==106?se[r>>>3]:a==105?c()[r>>>2>>>0]:D()[r>>>3>>>0]),r+=l?8:4}return tt[e].apply(null,xt)},E:()=>{},G:()=>Date.now(),la:()=>{throw S+=1,"unwind"},O:function(){return 4294901760},t:()=>performance.timeOrigin+performance.now(),w:()=>I?(Jr(),ct(Vr)).cpus().length:navigator.hardwareConcurrency,L:function(e){e>>>=0;var t=y().length;if(e<=t||4294901760<e)return!1;for(var r=1;4>=r;r*=2){var a=t*(1+.2/r);a=Math.min(a,e+100663296);var l=Math;a=Math.max(e,a);e:{l=(l.min.call(l,4294901760,a+(65536-a%65536)%65536)-C.buffer.byteLength+65535)/65536;try{C.grow(l),ce();var d=1;break e}catch{}d=void 0}if(d)return!0}return!1},ea:Er,fa:Sr,U:at,y:Ar,C:Mr,ba:Cr,B:Fr,a:C||u.wasmMemory,ha:Ur,q:function(e,t,r,a){return Ur(e>>>0,t>>>0,r>>>0,a>>>0)}},P=function(){function e(r,a){return P=r.exports,P=Wn(),o.Gb.push(P.Ya),M=P.$a,Se.unshift(P.sa),pe=a,Ke(),P}var t={a:kn};if(be++,u.instantiateWasm)try{return u.instantiateWasm(t,e)}catch(r){q(`Module.instantiateWasm callback failed with error: ${r}`),k(r)}return gt(t,function(r){e(r.instance,r.module)}).catch(k),{}}();u._OrtInit=(e,t)=>(u._OrtInit=P.ta)(e,t),u._OrtGetLastError=(e,t)=>(u._OrtGetLastError=P.ua)(e,t),u._OrtCreateSessionOptions=(e,t,r,a,l,d,v,T,U,F)=>(u._OrtCreateSessionOptions=P.va)(e,t,r,a,l,d,v,T,U,F),u._OrtAppendExecutionProvider=(e,t)=>(u._OrtAppendExecutionProvider=P.wa)(e,t),u._OrtAddFreeDimensionOverride=(e,t,r)=>(u._OrtAddFreeDimensionOverride=P.xa)(e,t,r),u._OrtAddSessionConfigEntry=(e,t,r)=>(u._OrtAddSessionConfigEntry=P.ya)(e,t,r),u._OrtReleaseSessionOptions=e=>(u._OrtReleaseSessionOptions=P.za)(e),u._OrtCreateSession=(e,t,r)=>(u._OrtCreateSession=P.Aa)(e,t,r),u._OrtReleaseSession=e=>(u._OrtReleaseSession=P.Ba)(e),u._OrtGetInputOutputCount=(e,t,r)=>(u._OrtGetInputOutputCount=P.Ca)(e,t,r),u._OrtGetInputName=(e,t)=>(u._OrtGetInputName=P.Da)(e,t),u._OrtGetOutputName=(e,t)=>(u._OrtGetOutputName=P.Ea)(e,t),u._OrtFree=e=>(u._OrtFree=P.Fa)(e),u._OrtCreateTensor=(e,t,r,a,l,d)=>(u._OrtCreateTensor=P.Ga)(e,t,r,a,l,d),u._OrtGetTensorData=(e,t,r,a,l)=>(u._OrtGetTensorData=P.Ha)(e,t,r,a,l),u._OrtReleaseTensor=e=>(u._OrtReleaseTensor=P.Ia)(e),u._OrtCreateRunOptions=(e,t,r,a)=>(u._OrtCreateRunOptions=P.Ja)(e,t,r,a),u._OrtAddRunConfigEntry=(e,t,r)=>(u._OrtAddRunConfigEntry=P.Ka)(e,t,r),u._OrtReleaseRunOptions=e=>(u._OrtReleaseRunOptions=P.La)(e),u._OrtCreateBinding=e=>(u._OrtCreateBinding=P.Ma)(e),u._OrtBindInput=(e,t,r)=>(u._OrtBindInput=P.Na)(e,t,r),u._OrtBindOutput=(e,t,r,a)=>(u._OrtBindOutput=P.Oa)(e,t,r,a),u._OrtClearBoundOutputs=e=>(u._OrtClearBoundOutputs=P.Pa)(e),u._OrtReleaseBinding=e=>(u._OrtReleaseBinding=P.Qa)(e),u._OrtRunWithBinding=(e,t,r,a,l)=>(u._OrtRunWithBinding=P.Ra)(e,t,r,a,l),u._OrtRun=(e,t,r,a,l,d,v,T)=>(u._OrtRun=P.Sa)(e,t,r,a,l,d,v,T),u._OrtEndProfiling=e=>(u._OrtEndProfiling=P.Ta)(e);var Ir=()=>(Ir=P.Ua)(),Ot=u._pthread_self=()=>(Ot=u._pthread_self=P.Va)(),_t=u._malloc=e=>(_t=u._malloc=P.Wa)(e),Ue=u._free=e=>(Ue=u._free=P.Xa)(e);u.__emscripten_tls_init=()=>(u.__emscripten_tls_init=P.Ya)();var Br=e=>(Br=P.Za)(e);u.__embind_initialize_bindings=()=>(u.__embind_initialize_bindings=P._a)();var Rr=u.__emscripten_thread_init=(e,t,r,a,l,d)=>(Rr=u.__emscripten_thread_init=P.ab)(e,t,r,a,l,d);u.__emscripten_thread_crashed=()=>(u.__emscripten_thread_crashed=P.bb)();var Lr=(e,t,r,a)=>(Lr=P.cb)(e,t,r,a),Rt=e=>(Rt=P.db)(e),Lt=u.__emscripten_thread_exit=e=>(Lt=u.__emscripten_thread_exit=P.eb)(e),kr=()=>(kr=P.fb)(),Wr=(e,t)=>(Wr=P.gb)(e,t),kt=()=>(kt=P.hb)(),Tt=e=>(Tt=P.ib)(e),Wt=e=>(Wt=P.jb)(e);function Wn(){var e=P;e=Object.assign({},e);var t=a=>()=>a()>>>0,r=a=>l=>a(l)>>>0;return e.Ua=t(e.Ua),e.Va=t(e.Va),e.Wa=r(e.Wa),e.Za=r(e.Za),e.emscripten_main_runtime_thread_id=t(e.emscripten_main_runtime_thread_id),e.hb=t(e.hb),e.jb=r(e.jb),e}u.wasmMemory=C,u.stackAlloc=Wt,u.stackSave=kt,u.stackRestore=Tt,u.keepRuntimeAlive=()=>0<S,u.UTF8ToString=We,u.stringToUTF8=z,u.lengthBytesUTF8=m,u.ExitStatus=qe,u.PThread=o;var Et;ve=function e(){Et||Hr(),Et||(ve=e)};function Hr(){if(!(0<be))if(E)x(u),E||s(Se),startWorker(u);else{if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)re.unshift(u.preRun.shift());s(re),0<be||Et||(Et=!0,u.calledRun=!0,Oe||(E||s(Se),x(u),E||s(Fe)))}}return Hr(),h.ready}})();typeof Kr=="object"&&typeof Vt=="object"?Vt.exports=Xr:typeof define=="function"&&define.amd&&define([],()=>Xr)});var Qr=lt((po,Vn)=>{Vn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(Module.__embind_initialize_bindings(),initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\\n\'});var tn;tn=zr();var Jn=Zr(),Jt,Xt=!1,St=!1,en=!1,Xn=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},Kn=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},Zn=(f,h)=>f?"ort-training-wasm-simd.wasm":h?"ort-wasm-threaded.wasm":"ort-wasm.wasm",rn=async f=>{if(Xt)return Promise.resolve();if(St)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(en)throw new Error("previous call to \'initializeWebAssembly()\' failed.");St=!0;let h=f.initTimeout,i=f.numThreads,y=f.simd,b=i>1&&Xn(),_=y&&Kn(),c=f.wasmPaths,O=typeof c=="string"?c:void 0,D=Zn(_,b),u=typeof c=="object"?c[D]:void 0,x=!1,k=[];if(h>0&&k.push(new Promise(R=>{setTimeout(()=>{x=!0,R()},h)})),k.push(new Promise((R,L)=>{let N=b?Jn:tn,G={locateFile:(j,I)=>b&&j.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Qr()],{type:"text/javascript"})):j.endsWith(".wasm")?u||(O??I)+D:I+j};if(b)if(G.numThreads=i,typeof Blob>"u")G.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let j=`var ortWasmThreaded=${N.toString()};`;G.mainScriptUrlOrBlob=new Blob([j],{type:"text/javascript"})}N(G).then(j=>{St=!1,Xt=!0,Jt=j,R()},j=>{St=!1,en=!0,L(j)})})),await Promise.race(k),x)throw new Error(`WebAssembly backend initializing failed due to timeout: ${h}ms`)},Q=()=>{if(Xt&&Jt)return Jt;throw new Error("WebAssembly is not initialized yet.")};var ee=(f,h)=>{let i=Q(),y=i.lengthBytesUTF8(f)+1,b=i._malloc(y);return i.stringToUTF8(f,b,y),h.push(b),b},dt=(f,h,i,y)=>{if(typeof f=="object"&&f!==null){if(i.has(f))throw new Error("Circular reference in options");i.add(f)}Object.entries(f).forEach(([b,_])=>{let c=h?h+b:b;if(typeof _=="object")dt(_,c+".",i,y);else if(typeof _=="string"||typeof _=="number")y(c,_.toString());else if(typeof _=="boolean")y(c,_?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof _}`)})},X=f=>{let h=Q(),i=h.stackSave();try{let y=h.stackAlloc(8);h._OrtGetLastError(y,y+4);let b=h.HEAP32[y/4],_=h.HEAPU32[y/4+1],c=_?h.UTF8ToString(_):"";throw new Error(`${f} ERROR_CODE: ${b}, ERROR_MESSAGE: ${c}`)}finally{h.stackRestore(i)}};var nn=f=>{let h=Q(),i=0,y=[],b=f||{};try{if(f?.logSeverityLevel===void 0)b.logSeverityLevel=2;else if(typeof f.logSeverityLevel!="number"||!Number.isInteger(f.logSeverityLevel)||f.logSeverityLevel<0||f.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${f.logSeverityLevel}`);if(f?.logVerbosityLevel===void 0)b.logVerbosityLevel=0;else if(typeof f.logVerbosityLevel!="number"||!Number.isInteger(f.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${f.logVerbosityLevel}`);f?.terminate===void 0&&(b.terminate=!1);let _=0;return f?.tag!==void 0&&(_=ee(f.tag,y)),i=h._OrtCreateRunOptions(b.logSeverityLevel,b.logVerbosityLevel,!!b.terminate,_),i===0&&X("Can\'t create run options."),f?.extra!==void 0&&dt(f.extra,"",new WeakSet,(c,O)=>{let D=ee(c,y),u=ee(O,y);h._OrtAddRunConfigEntry(i,D,u)!==0&&X(`Can\'t set a run config entry: ${c} - ${O}.`)}),[i,y]}catch(_){throw i!==0&&h._OrtReleaseRunOptions(i),y.forEach(c=>h._free(c)),_}};var Qn=f=>{switch(f){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${f}`)}},eo=f=>{switch(f){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${f}`)}},to=f=>{f.extra||(f.extra={}),f.extra.session||(f.extra.session={});let h=f.extra.session;h.use_ort_model_bytes_directly||(h.use_ort_model_bytes_directly="1"),f.executionProviders&&f.executionProviders.some(i=>(typeof i=="string"?i:i.name)==="webgpu")&&(f.enableMemPattern=!1)},ro=(f,h,i)=>{for(let y of h){let b=typeof y=="string"?y:y.name;switch(b){case"webnn":if(b="WEBNN",typeof y!="string"){let c=y;if(c?.deviceType){let O=ee("deviceType",i),D=ee(c.deviceType,i);Q()._OrtAddSessionConfigEntry(f,O,D)!==0&&X(`Can\'t set a session config entry: \'deviceType\' - ${c.deviceType}.`)}if(c?.numThreads){let O=c.numThreads;(typeof O!="number"||!Number.isInteger(O)||O<0)&&(O=0);let D=ee("numThreads",i),u=ee(O.toString(),i);Q()._OrtAddSessionConfigEntry(f,D,u)!==0&&X(`Can\'t set a session config entry: \'numThreads\' - ${c.numThreads}.`)}if(c?.powerPreference){let O=ee("powerPreference",i),D=ee(c.powerPreference,i);Q()._OrtAddSessionConfigEntry(f,O,D)!==0&&X(`Can\'t set a session config entry: \'powerPreference\' - ${c.powerPreference}.`)}}break;case"webgpu":if(b="JS",typeof y!="string"){let c=y;if(c?.preferredLayout){if(c.preferredLayout!=="NCHW"&&c.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${c.preferredLayout}`);let O=ee("preferredLayout",i),D=ee(c.preferredLayout,i);Q()._OrtAddSessionConfigEntry(f,O,D)!==0&&X(`Can\'t set a session config entry: \'preferredLayout\' - ${c.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${b}`)}let _=ee(b,i);Q()._OrtAppendExecutionProvider(f,_)!==0&&X(`Can\'t append execution provider: ${b}.`)}},on=f=>{let h=Q(),i=0,y=[],b=f||{};to(b);try{let _=Qn(b.graphOptimizationLevel??"all"),c=eo(b.executionMode??"sequential"),O=typeof b.logId=="string"?ee(b.logId,y):0,D=b.logSeverityLevel??2;if(!Number.isInteger(D)||D<0||D>4)throw new Error(`log serverity level is not valid: ${D}`);let u=b.logVerbosityLevel??0;if(!Number.isInteger(u)||u<0||u>4)throw new Error(`log verbosity level is not valid: ${u}`);let x=typeof b.optimizedModelFilePath=="string"?ee(b.optimizedModelFilePath,y):0;if(i=h._OrtCreateSessionOptions(_,!!b.enableCpuMemArena,!!b.enableMemPattern,c,!!b.enableProfiling,0,O,D,u,x),i===0&&X("Can\'t create session options."),b.executionProviders&&ro(i,b.executionProviders,y),b.freeDimensionOverrides)for(let[k,R]of Object.entries(b.freeDimensionOverrides)){if(typeof k!="string")throw new Error(`free dimension override name must be a string: ${k}`);if(typeof R!="number"||!Number.isInteger(R)||R<0)throw new Error(`free dimension override value must be a non-negative integer: ${R}`);let L=ee(k,y);h._OrtAddFreeDimensionOverride(i,L,R)!==0&&X(`Can\'t set a free dimension override: ${k} - ${R}.`)}return b.extra!==void 0&&dt(b.extra,"",new WeakSet,(k,R)=>{let L=ee(k,y),N=ee(R,y);h._OrtAddSessionConfigEntry(i,L,N)!==0&&X(`Can\'t set a session config entry: ${k} - ${R}.`)}),[i,y]}catch(_){throw i!==0&&h._OrtReleaseSessionOptions(i),y.forEach(c=>h._free(c)),_}};var Kt=f=>{switch(f){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${f}`)}},an=f=>{switch(f){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${f}`)}},Zt=f=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][f],sn=f=>{switch(f){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${f}`)}},un=f=>{switch(f){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${f}`)}},fn=f=>f==="float32"||f==="int32"||f==="int64"||f==="bool"||f==="float16"||f==="uint32",ln=f=>{switch(f){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${f}`)}};var cn=async f=>{if(typeof f=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(f))}catch(h){if(h.code==="ERR_FS_FILE_TOO_LARGE"){let i=(void 0)(f),y=[];for await(let b of i)y.push(b);return new Uint8Array(Buffer.concat(y))}throw h}else{let h=await fetch(f);if(!h.ok)throw new Error(`failed to load external data file: ${f}`);let i=h.headers.get("Content-Length"),y=i?parseInt(i,10):0;if(y<1073741824)return new Uint8Array(await h.arrayBuffer());{if(!h.body)throw new Error(`failed to load external data file: ${f}, no response body.`);let b=h.body.getReader(),_=Math.ceil(y/65536),c=new WebAssembly.Memory({initial:_,maximum:_}).buffer,O=0;for(;;){let{done:D,value:u}=await b.read();if(D)break;let x=u.byteLength;new Uint8Array(c,O,x).set(u),O+=x}return new Uint8Array(c,0,y)}}else return f instanceof Blob?new Uint8Array(await f.arrayBuffer()):f instanceof Uint8Array?f:new Uint8Array(f)};var no=(f,h)=>{Q()._OrtInit(f,h)!==0&&X("Can\'t initialize onnxruntime.")},pn=async f=>{no(f.wasm.numThreads,un(f.logLevel))},mn=async(f,h)=>{},pt=new Map,oo=f=>{let h=Q(),i=h.stackSave();try{let y=h.stackAlloc(8);return h._OrtGetInputOutputCount(f,y,y+4)!==0&&X("Can\'t get session input/output count."),[h.HEAP32[y/4],h.HEAP32[y/4+1]]}finally{h.stackRestore(i)}},Qt=f=>{let h=Q(),i=h._malloc(f.byteLength);if(i===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${f.byteLength}.`);return h.HEAPU8.set(f,i),[i,f.byteLength]},gn=async(f,h)=>{let i,y,b=Q();Array.isArray(f)?[i,y]=f:f.buffer===b.HEAPU8.buffer?[i,y]=[f.byteOffset,f.byteLength]:[i,y]=Qt(f);let _=0,c=0,O=0,D=[],u=[],x=[];try{if([c,D]=on(h),h?.externalData&&b.mountExternalData){let I=[];for(let E of h.externalData){let K=typeof E=="string"?E:E.path;I.push(cn(typeof E=="string"?E:E.data).then(ge=>{b.mountExternalData(K,ge)}))}await Promise.all(I)}_=await b._OrtCreateSession(i,y,c),_===0&&X("Can\'t create a session.");let[k,R]=oo(_),L=[],N=[],G=[];for(let I=0;I<k;I++){let E=b._OrtGetInputName(_,I);E===0&&X("Can\'t get an input name."),u.push(E),L.push(b.UTF8ToString(E))}for(let I=0;I<R;I++){let E=b._OrtGetOutputName(_,I);E===0&&X("Can\'t get an output name."),x.push(E);let K=b.UTF8ToString(E);N.push(K)}let j=null;return pt.set(_,[_,u,x,j]),[_,L,N]}catch(k){throw u.forEach(R=>b._OrtFree(R)),x.forEach(R=>b._OrtFree(R)),O!==0&&b._OrtReleaseBinding(O),_!==0&&b._OrtReleaseSession(_),k}finally{b._free(i),c!==0&&b._OrtReleaseSessionOptions(c),D.forEach(k=>b._free(k)),b.unmountExternalData?.()}},hn=f=>{let h=Q(),i=pt.get(f);if(!i)throw new Error(`cannot release session. invalid session id: ${f}`);let[y,b,_,c]=i;c&&h._OrtReleaseBinding(c.handle),h.jsepUnregisterBuffers?.(f),b.forEach(O=>h._OrtFree(O)),_.forEach(O=>h._OrtFree(O)),h._OrtReleaseSession(y),pt.delete(f)},dn=(f,h,i,y,b)=>{if(!f){h.push(0);return}let _=Q(),c=f[0],O=f[1],D=f[3],u,x;if(c==="string"&&D==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(D==="gpu-buffer"){let L=f[2].gpuBuffer,N=Zt(Kt(c));x=O.reduce((G,j)=>G*j,1)*N,u=_.jsepRegisterBuffer(y,b,L,x)}else{let L=f[2];if(Array.isArray(L)){x=4*L.length,u=_._malloc(x),i.push(u);let N=u/4;for(let G=0;G<L.length;G++){if(typeof L[G]!="string")throw new TypeError(`tensor data at index ${G} is not a string`);_.HEAPU32[N++]=ee(L[G],i)}}else x=L.byteLength,u=_._malloc(x),i.push(u),_.HEAPU8.set(new Uint8Array(L.buffer,L.byteOffset,x),u)}let k=_.stackSave(),R=_.stackAlloc(4*O.length);try{let L=R/4;O.forEach(G=>_.HEAP32[L++]=G);let N=_._OrtCreateTensor(Kt(c),u,x,R,O.length,ln(D));N===0&&X(`Can\'t create tensor for input/output. session=${y}, index=${b}.`),h.push(N)}finally{_.stackRestore(k)}},yn=async(f,h,i,y,b,_)=>{let c=Q(),O=pt.get(f);if(!O)throw new Error(`cannot run inference. invalid session id: ${f}`);let[D,u,x,k]=O,R=h.length,L=y.length,N=0,G=[],j=[],I=[],E=[],K=c.stackSave(),ge=c.stackAlloc(R*4),le=c.stackAlloc(R*4),A=c.stackAlloc(L*4),Y=c.stackAlloc(L*4);try{[N,G]=nn(_);for(let C=0;C<R;C++)dn(i[C],j,E,f,h[C]);for(let C=0;C<L;C++)dn(b[C],I,E,f,R+y[C]);let ae=ge/4,Ie=le/4,Be=A/4,Re=Y/4;for(let C=0;C<R;C++)c.HEAPU32[ae++]=j[C],c.HEAPU32[Ie++]=u[h[C]];for(let C=0;C<L;C++)c.HEAPU32[Be++]=I[C],c.HEAPU32[Re++]=x[y[C]];let Ne;Ne=await c._OrtRun(D,le,ge,R,Y,L,A,N),Ne!==0&&X("failed to call OrtRun().");let q=[];for(let C=0;C<L;C++){let pe=c.HEAPU32[A/4+C];if(pe===I[C]){q.push(b[C]);continue}let Oe=c.stackSave(),ie=c.stackAlloc(4*4),te=!1,Z,de=0;try{c._OrtGetTensorData(pe,ie,ie+4,ie+8,ie+12)!==0&&X(`Can\'t access output tensor data on index ${C}.`);let Ce=ie/4,Le=c.HEAPU32[Ce++];de=c.HEAPU32[Ce++];let $e=c.HEAPU32[Ce++],se=c.HEAPU32[Ce++],Te=[];for(let oe=0;oe<se;oe++)Te.push(c.HEAPU32[$e/4+oe]);c._OrtFree($e);let Ee=Te.reduce((oe,re)=>oe*re,1);Z=an(Le);let ce=k?.outputPreferredLocations[y[C]];if(Z==="string"){if(ce==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let oe=[],re=de/4;for(let Se=0;Se<Ee;Se++){let Fe=c.HEAPU32[re++],be=Se===Ee-1?void 0:c.HEAPU32[re]-Fe;oe.push(c.UTF8ToString(Fe,be))}q.push([Z,Te,oe,"cpu"])}else if(ce==="gpu-buffer"&&Ee>0){let oe=c.jsepGetBuffer(de),re=Zt(Le);if(re===void 0||!fn(Z))throw new Error(`Unsupported data type: ${Z}`);te=!0,q.push([Z,Te,{gpuBuffer:oe,download:c.jsepCreateDownloader(oe,Ee*re,Z),dispose:()=>{c._OrtReleaseTensor(pe)}},"gpu-buffer"])}else{let oe=sn(Z),re=new oe(Ee);new Uint8Array(re.buffer,re.byteOffset,re.byteLength).set(c.HEAPU8.subarray(de,de+re.byteLength)),q.push([Z,Te,re,"cpu"])}}finally{c.stackRestore(Oe),Z==="string"&&de&&c._free(de),te||c._OrtReleaseTensor(pe)}}return k&&c._OrtClearBoundOutputs(k.handle),q}finally{c.stackRestore(K),j.forEach(ae=>c._OrtReleaseTensor(ae)),I.forEach(ae=>c._OrtReleaseTensor(ae)),E.forEach(ae=>c._free(ae)),N!==0&&c._OrtReleaseRunOptions(N),G.forEach(ae=>c._free(ae))}},bn=f=>{let h=Q(),i=pt.get(f);if(!i)throw new Error("invalid session id");let y=i[0],b=h._OrtEndProfiling(y);b===0&&X("Can\'t get an profile file name."),h._OrtFree(b)},vn=f=>{let h=[];for(let i of f){let y=i[2];!Array.isArray(y)&&"buffer"in y&&h.push(y.buffer)}return h};self.onmessage=f=>{let{type:h,in:i}=f.data;try{switch(h){case"init-wasm":rn(i.wasm).then(()=>{pn(i).then(()=>{postMessage({type:h})},y=>{postMessage({type:h,err:y})})},y=>{postMessage({type:h,err:y})});break;case"init-ep":{let{epName:y,env:b}=i;mn(b,y).then(()=>{postMessage({type:h})},_=>{postMessage({type:h,err:_})});break}case"copy-from":{let{buffer:y}=i,b=Qt(y);postMessage({type:h,out:b});break}case"create":{let{model:y,options:b}=i;gn(y,b).then(_=>{postMessage({type:h,out:_})},_=>{postMessage({type:h,err:_})});break}case"release":hn(i),postMessage({type:h});break;case"run":{let{sessionId:y,inputIndices:b,inputs:_,outputIndices:c,options:O}=i;yn(y,b,_,c,new Array(c.length).fill(null),O).then(D=>{D.some(u=>u[3]!=="cpu")?postMessage({type:h,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:h,out:D},vn(D))},D=>{postMessage({type:h,err:D})});break}case"end-profiling":bn(i),postMessage({type:h});break;default:}}catch(y){postMessage({type:h,err:y})}};})();\n'});var ot,Se,Nt,hr,gr,en,tn,bt,wt,ii,mr,qa,Ja,Xa,Ka,Za,Qa,eo,rn=G(()=>{"use strict";nt();pr();at();ot=()=>!!X.wasm.proxy&&typeof document<"u",Nt=!1,hr=!1,gr=!1,tn=new Map,bt=(a,n)=>{let r=tn.get(a);r?r.push(n):tn.set(a,[n])},wt=()=>{if(Nt||!hr||gr||!Se)throw new Error("worker not ready")},ii=a=>{switch(a.data.type){case"init-wasm":Nt=!1,a.data.err?(gr=!0,en[1](a.data.err)):(hr=!0,en[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let n=tn.get(a.data.type);a.data.err?n.shift()[1](a.data.err):n.shift()[0](a.data.out);break}default:}},mr=typeof document<"u"?document?.currentScript?.src:void 0,qa=async()=>{if(!hr){if(Nt)throw new Error("multiple calls to 'initWasm()' detected.");if(gr)throw new Error("previous call to 'initWasm()' failed.");if(Nt=!0,ot())return X.wasm.wasmPaths===void 0&&mr&&mr.indexOf("blob:")!==0&&(X.wasm.wasmPaths=mr.substr(0,+mr.lastIndexOf("/")+1)),new Promise((a,n)=>{Se?.terminate();let r=URL.createObjectURL(new Blob([Va()],{type:"text/javascript"}));Se=new Worker(r,{name:"ort-wasm-proxy-worker"}),Se.onerror=u=>n(u),Se.onmessage=ii,URL.revokeObjectURL(r),en=[a,n];let l={type:"init-wasm",in:X};Se.postMessage(l)});try{await La(X.wasm),await Wa(X),hr=!0}catch(a){throw gr=!0,a}finally{Nt=!1}}},Ja=async a=>{if(ot())return wt(),new Promise((n,r)=>{bt("init-ep",[n,r]);let l={type:"init-ep",in:{epName:a,env:X}};Se.postMessage(l)});await Na(X,a)},Xa=async a=>ot()?(wt(),new Promise((n,r)=>{bt("copy-from",[n,r]);let l={type:"copy-from",in:{buffer:a}};Se.postMessage(l,[a.buffer])})):Wt(a),Ka=async(a,n)=>{if(ot()){if(n?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return wt(),new Promise((r,l)=>{bt("create",[r,l]);let u={type:"create",in:{model:a,options:n}},m=[];a instanceof Uint8Array&&m.push(a.buffer),Se.postMessage(u,m)})}else return $a(a,n)},Za=async a=>{if(ot())return wt(),new Promise((n,r)=>{bt("release",[n,r]);let l={type:"release",in:a};Se.postMessage(l)});za(a)},Qa=async(a,n,r,l,u,m)=>{if(ot()){if(r.some(f=>f[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(u.some(f=>f))throw new Error("pre-allocated output tensor is not supported for proxy.");return wt(),new Promise((f,p)=>{bt("run",[f,p]);let b=r,s={type:"run",in:{sessionId:a,inputIndices:n,inputs:b,outputIndices:l,options:m}};Se.postMessage(s,Ya(b))})}else return Ga(a,n,r,l,u,m)},eo=async a=>{if(ot())return wt(),new Promise((n,r)=>{bt("end-profiling",[n,r]);let l={type:"end-profiling",in:a};Se.postMessage(l)});ja(a)}});var it,br,yr,nn=G(()=>{"use strict";nt();rn();cr();Qr();it=(a,n)=>{switch(a.location){case"cpu":return[a.type,a.dims,a.data,"cpu"];case"gpu-buffer":return[a.type,a.dims,{gpuBuffer:a.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${a.location} for ${n()}`)}},br=a=>{switch(a[3]){case"cpu":return new me(a[0],a[2],a[1]);case"gpu-buffer":{let n=a[0];if(!lr(n))throw new Error(`not supported data type: ${n} for deserializing GPU tensor`);let{gpuBuffer:r,download:l,dispose:u}=a[2];return me.fromGpuBuffer(r,{dataType:n,dims:a[1],download:l,dispose:u})}default:throw new Error(`invalid data location: ${a[3]}`)}},yr=class{async fetchModelAndCopyToWasmMemory(n){return Xa(await Lt(n))}async loadModel(n,r){qe();let l;typeof n=="string"?typeof process<"u"&&process.versions&&process.versions.node?l=await Lt(n):l=await this.fetchModelAndCopyToWasmMemory(n):l=n,[this.sessionId,this.inputNames,this.outputNames]=await Ka(l,r),Je()}async dispose(){return Za(this.sessionId)}async run(n,r,l){qe();let u=[],m=[];Object.entries(n).forEach(O=>{let A=O[0],I=O[1],P=this.inputNames.indexOf(A);if(P===-1)throw new Error(`invalid input '${A}'`);u.push(I),m.push(P)});let f=[],p=[];Object.entries(r).forEach(O=>{let A=O[0],I=O[1],P=this.outputNames.indexOf(A);if(P===-1)throw new Error(`invalid output '${A}'`);f.push(I),p.push(P)});let b=u.map((O,A)=>it(O,()=>`input "${this.inputNames[m[A]]}"`)),s=f.map((O,A)=>O?it(O,()=>`output "${this.outputNames[p[A]]}"`):null),y=await Qa(this.sessionId,m,b,p,s,l),E={};for(let O=0;O<y.length;O++)E[this.outputNames[p[O]]]=f[O]??br(y[O]);return Je(),E}startProfiling(){}endProfiling(){eo(this.sessionId)}}});var si,wr,to=G(()=>{"use strict";nt();rn();nn();si=()=>{if((typeof X.wasm.initTimeout!="number"||X.wasm.initTimeout<0)&&(X.wasm.initTimeout=0),typeof X.wasm.simd!="boolean"&&(X.wasm.simd=!0),typeof X.wasm.proxy!="boolean"&&(X.wasm.proxy=!1),typeof X.wasm.trace!="boolean"&&(X.wasm.trace=!1),typeof X.wasm.numThreads!="number"||!Number.isInteger(X.wasm.numThreads)||X.wasm.numThreads<=0){let a=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;X.wasm.numThreads=Math.min(4,Math.ceil((a||1)/2))}},wr=class{async init(n){si(),await qa(),await Ja(n)}async createInferenceSessionHandler(n,r){let l=new yr;return await l.loadModel(n,r),Promise.resolve(l)}}});var Pe,ve,no,ui,ro,an,ao,vr,oo,io,so,uo,fo,on,lo,co,po,mo=G(()=>{"use strict";Xr();Kr();cr();pr();at();Dt();Pe="Built without training API's enabled. Use the onnxruntime-web/training import for training functionality, and make sure that all the correct artifacts are built & moved to the correct folder if using a custom build. Check https://onnxruntime.ai/docs/build/web.html for more information.",ve=(a,n,r=!0)=>{r&&a!==0?Q(n):!r&&a===0&&Q(n)},no=a=>{let n=z(),[r,l]=a,u=0;try{if(n._OrtTrainingLoadCheckpoint)u=n._OrtTrainingLoadCheckpoint(r,l);else throw new Error(Pe);return ve(u,"Error occurred when trying to create a CheckpointState",!1),u}catch(m){throw n._OrtTrainingReleaseCheckpoint&&u!==0&&n._OrtTrainingReleaseCheckpoint(u),m}finally{n._OrtFree(a[0])}},ui=(a,n)=>{let r=z(),l=r.stackSave();try{let u=r.stackAlloc(8);if(r._OrtTrainingGetModelInputOutputCount){let m=r._OrtTrainingGetModelInputOutputCount(a,u,u+4,n);return ve(m,"Can't get session input/output count."),[r.HEAP32[u/4],r.HEAP32[u/4+1]]}else throw new Error(Pe)}finally{r.stackRestore(l)}},ro=(a,n,r,l)=>{let u=[],m=z();for(let f=0;f<n;f++)if(m._OrtTrainingGetModelInputOutputName){let p=m._OrtTrainingGetModelInputOutputName(a,f,r,l);ve(p,`Can't get input or output name -- is input: ${r}, index ${f}`,!1),u.push(m.UTF8ToString(p)),m._free(p)}else throw new Error(Pe);return u},an=(a,n)=>{let r=[],l=[],[u,m]=ui(a,n);return r=ro(a,u,!0,n),l=ro(a,m,!1,n),[r,l]},ao=(a,n,r,l,u)=>{let m=z(),f=0,p=0,b=[];try{if([p,b]=ur(u),m._OrtTrainingCreateSession)f=m._OrtTrainingCreateSession(p,a,n[0],n[1],r[0],r[1],l[0],l[1]);else throw new Error(Pe);return ve(f,"Error occurred when trying to create a TrainingSession",!1),f}catch(s){throw m._OrtTrainingReleaseSession&&f!==0&&m._OrtTrainingReleaseSession(f),s}finally{m._free(n[0]),m._free(r[0]),m._free(l[0]),p!==0&&m._OrtReleaseSessionOptions(p),b.forEach(s=>m._free(s))}},vr=(a,n,r,l,u,m)=>{let f=n.length;for(let y=0;y<f;y++)dr(r[y],l,u,a,m+n[y]);let p=z(),b=p.stackAlloc(f*4),s=b/4;for(let y=0;y<f;y++)p.HEAPU32[s++]=l[y];return b},oo=(a,n,r,l)=>{let u=z(),m=[];for(let f=0;f<n;f++){let p=u.HEAPU32[a/4+f];if(p===r[f]){m.push(l[f]);continue}let b=u.stackSave(),s=u.stackAlloc(4*4),y,E=0;try{let O=u._OrtGetTensorData(p,s,s+4,s+8,s+12);ve(O,`Can't access output tensor data on index ${f}.`);let A=s/4,I=u.HEAPU32[A++];E=u.HEAPU32[A++];let P=u.HEAPU32[A++],H=u.HEAPU32[A++],U=[];for(let W=0;W<H;W++)U.push(u.HEAPU32[P/4+W]);u._OrtFree(P);let C=U.reduce((W,j)=>W*j,1);if(y=fr(I),y==="string"){let W=[],j=E/4;for(let K=0;K<C;K++){let x=u.HEAPU32[j++],q=K===C-1?void 0:u.HEAPU32[j]-x;W.push(u.UTF8ToString(x,q))}m.push([y,U,W,"cpu"])}else{let W=Ft(y),j=new W(C);new Uint8Array(j.buffer,j.byteOffset,j.byteLength).set(u.HEAPU8.subarray(E,E+j.byteLength)),m.push([y,U,j,"cpu"])}}finally{u.stackRestore(b),y==="string"&&E&&u._free(E),u._OrtReleaseTensor(p)}}return m},io=async a=>{let n=z();if(n._OrtTrainingLazyResetGrad){let r=n._OrtTrainingLazyResetGrad(a);ve(r,"Can't call lazyResetGrad.")}else throw new Error(Pe)},so=async(a,n,r,l,u,m)=>{let f=z(),p=n.length,b=l.length,s=0,y=[],E=[],O=[],A=[],I=f.stackSave();try{[s,y]=gt(m);let P=vr(a,n,r,E,A,0),H=vr(a,l,u,O,A,p);if(f._OrtTrainingRunTrainStep){let U=f._OrtTrainingRunTrainStep(a,P,p,H,b,s);ve(U,"failed to call OrtTrainingRunTrainStep in the WebAssembly layer")}else throw new Error(Pe);return oo(H,b,O,u)}finally{f.stackRestore(I),E.forEach(P=>f._OrtReleaseTensor(P)),O.forEach(P=>f._OrtReleaseTensor(P)),A.forEach(P=>f._free(P)),s!==0&&f._OrtReleaseRunOptions(s),y.forEach(P=>f._free(P))}},uo=async(a,n)=>{let r=z(),l=0,u=[];try{if([l,u]=gt(n),r._OrtTrainingOptimizerStep){let m=r._OrtTrainingOptimizerStep(a,l);ve(m,"Failed to call OrtTrainingOptimizerStep in the WebAssembly layer")}else throw new Error(Pe)}finally{l!==0&&r._OrtReleaseRunOptions(l),u.forEach(m=>r._free(m))}},fo=async(a,n,r,l,u,m)=>{let f=z(),p=n.length,b=l.length,s=0,y=[],E=[],O=[],A=[],I=f.stackSave();try{[s,y]=gt(m);let P=vr(a,n,r,E,A,0),H=vr(a,l,u,O,A,p);if(f._OrtTrainingEvalStep){let U=f._OrtTrainingEvalStep(a,P,p,H,b,s);ve(U,"failed to call OrtTrainingEvalStep in the WebAssembly layer")}else throw new Error(Pe);return oo(H,b,O,u)}finally{f.stackRestore(I),E.forEach(P=>f._OrtReleaseTensor(P)),O.forEach(P=>f._OrtReleaseTensor(P)),A.forEach(P=>f._free(P)),s!==0&&f._OrtReleaseRunOptions(s),y.forEach(P=>f._free(P))}},on=(a,n)=>{let r=z(),l=r.stackSave();try{let u=r.stackAlloc(4);if(r._OrtTrainingGetParametersSize){let m=r._OrtTrainingGetParametersSize(a,u,n);return ve(m,"Can't get parameters size"),r.HEAP32[u/4]}else throw new Error(Pe)}finally{r.stackRestore(l)}},lo=async(a,n)=>{let r=z(),l=r.stackSave(),u="float32",m="cpu",f=on(a,n),p=0,b=4*f,s=r._malloc(b),y=[f],E=r.stackAlloc(4),O=E/4;r.HEAP32[O]=f;try{if(p=r._OrtCreateTensor(yt(u),s,b,E,y.length,kt(m)),ve(p,`Can't create tensor for getContiguousParameters. session=${a}.`,!1),r._OrtTrainingCopyParametersToBuffer){let H=r._OrtTrainingCopyParametersToBuffer(a,p,f,n);ve(H,"Can't get contiguous parameters.")}else throw new Error(Pe);let A=Ft(u),I=new A(f),P=[];if(new Uint8Array(I.buffer,I.byteOffset,I.byteLength).set(r.HEAPU8.subarray(s,s+b)),P.push([u,y,I,m]),P.length!==1)throw new Error(`something unexpected happened in the getContiguousParameters function. Expected output length of
     one, got ${P.length}`);return P[0]}finally{p!==0&&r._OrtReleaseTensor(p),r._free(s),r._free(E),r.stackRestore(l)}},co=async(a,n,r)=>{let l=z(),u=l.stackSave(),m="float32",f="cpu",p=n.length,b=p/4,s=l._malloc(p);l.HEAPU8.set(n,s);let y=l.stackAlloc(4);l.HEAP32[y/4]=b;let E=1,O=0;try{if(O=l._OrtCreateTensor(yt(m),s,p,y,E,kt(f)),ve(O,`Can't create tensor for input/output. session=${a}`,!1),l._OrtTrainingCopyParametersFromBuffer){let A=l._OrtTrainingCopyParametersFromBuffer(a,O,b,r);ve(A,"Can't copy buffer to parameters.")}else throw new Error(Pe)}finally{O!==0&&l._OrtReleaseTensor(O),l.stackRestore(u),l._free(s),l._free(y)}},po=(a,n)=>{let r=z();r._OrtTrainingReleaseSession&&r._OrtTrainingReleaseSession(n),r._OrtTrainingReleaseCheckpoint&&r._OrtTrainingReleaseCheckpoint(a)}});var Or,ho=G(()=>{"use strict";nn();pr();mo();Or=class{constructor(){this.evalInputNames=[];this.evalOutputNames=[]}async uriOrBufferToHeap(n){let r;if(typeof n=="string"){let u=await(await fetch(n)).arrayBuffer();r=new Uint8Array(u)}else r=n;return Wt(r)}async createTrainingSession(n,r,l,u,m){let f=await this.uriOrBufferToHeap(n),p=await this.uriOrBufferToHeap(r),b=[0,0],s=[0,0];l!==""&&(b=await this.uriOrBufferToHeap(l)),u!==""&&(s=await this.uriOrBufferToHeap(u)),this.checkpointId=no(f),this.sessionId=ao(this.checkpointId,p,b,s,m),[this.inputNames,this.outputNames]=an(this.sessionId,!1),l!==""&&([this.evalInputNames,this.evalOutputNames]=an(this.sessionId,!0))}convertMapIntoValuesArrayAndIndicesArray(n,r,l){let u=[],m=[];Object.entries(n).forEach(p=>{let b=p[0],s=p[1],y=r.indexOf(b);if(y===-1)throw new Error(`invalid input '${b}`);u.push(s),m.push(y)});let f=u.map(l);return[u,m,f]}convertTensorMetadataToReturnType(n,r,l){let u={};for(let m=0;m<n.length;m++)u[this.outputNames[l[m]]]=r[m]??br(n[m]);return u}async lazyResetGrad(){await io(this.sessionId)}async runTrainStep(n,r,l){let[,u,m]=this.convertMapIntoValuesArrayAndIndicesArray(n,this.inputNames,(y,E)=>it(y,()=>`input "${this.inputNames[u[E]]}"`)),[f,p,b]=this.convertMapIntoValuesArrayAndIndicesArray(r,this.outputNames,(y,E)=>y?it(y,()=>`output "${this.outputNames[p[E]]}"`):null),s=await so(this.sessionId,u,m,p,b,l);return this.convertTensorMetadataToReturnType(s,f,p)}async runOptimizerStep(n){await uo(this.sessionId,n)}async runEvalStep(n,r,l){let[,u,m]=this.convertMapIntoValuesArrayAndIndicesArray(n,this.evalInputNames,(y,E)=>it(y,()=>`input "${this.evalInputNames[u[E]]}"`)),[f,p,b]=this.convertMapIntoValuesArrayAndIndicesArray(r,this.evalOutputNames,(y,E)=>y?it(y,()=>`output "${this.evalOutputNames[p[E]]}"`):null),s=await fo(this.sessionId,u,m,p,b,l);return this.convertTensorMetadataToReturnType(s,f,p)}async getParametersSize(n){return on(this.sessionId,n)}async loadParametersBuffer(n,r){await co(this.sessionId,n,r)}async getContiguousParameters(n){let r=await lo(this.sessionId,n);return br(r)}async dispose(){return po(this.checkpointId,this.sessionId)}}});var go={};mt(go,{wasmBackend:()=>fi});var sn,fi,yo=G(()=>{"use strict";to();ho();sn=class extends wr{async createTrainingSessionHandler(n,r,l,u,m){let f=new Or;return await f.createTrainingSession(n,r,l,u,m),Promise.resolve(f)}},fi=new sn});var ci={};mt(ci,{InferenceSession:()=>ya,TRACE:()=>Hr,TRACE_FUNC_BEGIN:()=>qe,TRACE_FUNC_END:()=>Je,Tensor:()=>me,TrainingSession:()=>Oa,default:()=>li,env:()=>X,registerBackend:()=>ht});module.exports=et(ci);nt();nt();nt();var _a="1.17.0";var li=Nr;{let a=(yo(),et(go)).wasmBackend;ht("cpu",a,10),ht("wasm",a,10)}Object.defineProperty(X.versions,"web",{value:_a,enumerable:!0});
//# sourceMappingURL=ort.training.wasm.min.js.map
